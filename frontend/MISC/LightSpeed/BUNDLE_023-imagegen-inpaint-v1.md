# Bundle 023 — ImageGen Inpaint v1 (prompt-based hole fill) — 2025-08-18 04:03

## What it does
- Adds an **Inpaint** panel to generate content inside a **selection** or **layer mask** area using a text prompt.
- Uses `/api/imagegen/inpaint` if available; otherwise falls back to a naive blur-based fill so the workflow never blocks.

## Files (~12)
- `components/panels/InpaintPanel.tsx` — UI for prompt/negative/strength/seed + **Inpaint Selection** action.
- `components/layout/RightPanels.tsx` — mounts the Inpaint panel under ImageGen.
- `engine/selection/maskFromSelection.ts` — builds a mask from selection via the worker refine client.
- `engine/imagegen/inpaint/` — `InpaintClient.ts`, `api.ts`, `fallback.ts`, `types.ts`, `encode.ts`.
- `engine/imagegen/util/` — `canvas.ts`, `data.ts`.
- `LightSpeed/BUNDLE_023-imagegen-inpaint-v1.md` — this doc.

## Usage
1) Make a selection or enable a layer mask covering the area to change.
2) Open **Inpaint** panel → set the prompt (and optional negative prompt/strength/seed).
3) Click **Inpaint Selection on Active Layer**. If a backend endpoint exists, the result will be generated by the model; else, a visual fallback applies so you can test the flow.

## Notes
- Non-destructive variant (add result as a new layer) can be enabled in v2 if you prefer. For now we replace the active raster’s bitmap and add a history mark.
- If your backend expects multipart form data, we can switch the request body format easily.
