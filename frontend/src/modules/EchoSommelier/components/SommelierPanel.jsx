import React,{useMemo,useState}from"react";import*as Pairing from"../lib/pairing.js";import grapeDb from"../lib/grape-db.json";const WINES=Object.entries(grapeDb).map(([k,v])=>({id:k,name:k.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase()),...v}));export default function SommelierPanel(){const[food,setFood]=useState({name:"Seared duck breast",salt:2,fat:3,spice:1,acid:1,sweet:0,umami:2,intensity:3,aromas:["cherry","pepper"]});const[limit,setLimit]=useState(5);const ranked=useMemo(()=>Pairing.rank(food,WINES).slice(0,limit),[food,limit]);return(<div className="sommelier-panel p-4 rounded-2xl border border-white/10 grid gap-4"><header><h3 className="font-semibold">Echo Sommelier</h3><p className="text-xs opacity-70">Deterministic scoring; no network calls.</p></header><section className="grid gap-2" style={{gridTemplateColumns:"repeat(6, minmax(0,1fr))"}}>{["salt","fat","spice","acid","sweet","umami"].map(key=>(<label key={key} className="text-xs">{key}: <input type="range" min="0" max="4" value={food[key]} onChange={e=>setFood(f=>({...f,[key]:Number(e.target.value)}))}/><span className="ml-2">{food[key]}</span></label>))}<label className="text-xs">intensity: <input type="range" min="0" max="4" value={food.intensity} onChange={e=>setFood(f=>({...f,intensity:Number(e.target.value)}))}/><span className="ml-2">{food.intensity}</span></label></section><section><h4 className="font-medium mb-2 text-sm">Top Matches</h4><ol className="text-sm grid gap-1">{ranked.map(({wine,score})=>(<li key={wine.id} className="flex items-center justify-between p-2 rounded-lg bg-white/5"><span>{wine.name}</span><span className="opacity-80">{score}/100</span></li>))}</ol></section></div>)}