import{r as h,f as e,l as ud,g as If,R as Cn,b as Af,P as Nx,m as wo,n as ru,L as xx,u as gx}from"./react-D2c-IGkZ.js";import{c as je,b as Tf,u as ln,a as md,d as Vs,e as Ci,B as ne,_ as Aa,D as ss,f as is,g as ns,h as as,l as ko,i as yi,j as Li,n as _r,k as ou,m as Wf,o as vx,p as lu,q as Ir,r as yx,s as Dx,t as Ex,v as wx,w as xa,x as Lf,y as ga,z as Oc,A as kx,C as Mf,E as cu,T as pd,F as fd,G as hd,H as bd,I as Gn,J as _f,K as Of,L as Sx,S as jx}from"./index-UikHyAVh.js";import{l as Vx,m as Cx,n as Ff,I as Rx,o as Px,p as Bf,q as Ix,r as Uf,s as Ax,t as Tx,u as $f,v as zf,L as Gf,w as Hf,x as Wx,y as Lx,z as qf,B as Kf,E as Yf,F as Qf,G as Zf,H as Xf,J as Jf,K as Mx,M as _x,N as eh,Q as Ox,U as th,W as Fx,X as Bx,Y as Ux,Z as $x,_ as sh,$ as ih,a0 as zx,a1 as Gx,a2 as Hx,a3 as nh,a4 as ah,a5 as qx,a6 as Kx,a7 as rh,a8 as oh,a9 as lh,aa as ch,ab as dh,ac as uh,ad as Yx,ae as ia,af as gn,j as Qx,e as Zx,O as Xx,f as Jx,ag as Ma,ah as mh,ai as eg,aj as tg,ak as sg,al as ph,am as ig,an as ng,ao as ag,ap as rg,aq as fh,ar as hh,as as bh,at as Nh,au as xh,av as gh,aw as vh,ax as yh,ay as Dh}from"./radix-CrB2S1eo.js";import{l as Bn,m as vn,n as Nd,o as qi,p as _a,X as cn,P as og,q as Xr,T as vi,E as Ar,R as Nn,r as Ga,D as Fc,s as xd,t as Ha,u as Ni,v as lg,H as cg,w as Eh,x as gd,y as Js,Z as wh,z as kh,A as Jr,G as dg,J as eo,K as Oa,L as qa,N as Sh,O as Ka,Q as ug,V as mg,W as vd,Y as jh,_ as pg,$ as Ln,a0 as fg,a1 as hg,a2 as bg,a3 as Vh,a4 as Ch,a5 as Ng,a6 as xg,a7 as yd,e as oa,a8 as gg,a9 as Fa,aa as Rh,ab as Or,ac as Ph,ad as vg,ae as Ih,af as Ah,ag as to,ah as du,ai as uu,aj as Th,ak as yg,al as Dg,am as Eg,an as Wh,ao as wg,ap as kg,aq as Sg,ar as mu,as as Ba,at as Bc,au as jg,av as Vg,aw as Cg,ax as Rg,ay as Lh,az as Ua,F as Hi,aA as Pg,aB as Ig,aC as Ag,aD as Tg,aE as Mh,aF as _h,aG as Wg,aH as Lg,b as Ya,aI as Mg,aJ as _g,C as Fr,aK as Og,aL as Fg,aM as Bg,aN as Ug,aO as $g,aP as zg,aQ as Oh,aR as Gg,aS as Fh,aT as Hg,aU as qg,aV as Kg,aW as Dd,i as so,aX as Yg,aY as Qg,aZ as Zg,a_ as Xg,a$ as Jg,b0 as Br,b1 as Bh,b2 as e0,b3 as Ur,b4 as io,b5 as Uh,b6 as $h,b7 as zh,b8 as pu,b9 as fu,ba as Gh,bb as Hh,bc as qh,bd as Kh,be as Yh,bf as Qh,bg as Zh,bh as t0,bi as s0,bj as i0,bk as n0,bl as a0,bm as pn,c as r0,j as o0,bn as l0,f as c0,bo as d0}from"./icons-ctH1U6L8.js";import{a as gi,B as et,I as Ed,g as So,b as hu,d as jo,R as u0,G as m0,T as $s,S as Wi}from"./textarea-C4ovJ85X.js";import{I as Xe}from"./input-Cn0r6mKL.js";import{m as $a,A as wd}from"./animations-DTfU6dyf.js";import{f as Uc,a as p0,b as f0}from"./date-utils-OAhwmxFv.js";import{p as fn,a as $c}from"./recipe-scaling-GpxSFNwX.js";import{C as $e,a as Ke,b as Ze,c as Lt,d as Ge}from"./card-BuHw_c-Z.js";import{R as In,P as h0,b as b0,C as N0,T as An,L as kd,d as la,X as ca,Y as da,e as Sd,B as jd,f as $r,h as x0}from"./charts-SLVNgGXJ.js";import{L as Et}from"./label-2NvpCE8J.js";function Xh({accept:s,multiple:t=!0,onFiles:i,children:n,className:a,busy:o=!1,progress:l}){const[r,d]=h.useState(!1),c=h.useRef(null),f=h.useCallback(b=>{if(!b)return;const D=Array.from(b);i(D)},[i]);return e.jsxDEV("div",{className:je("relative rounded-xl border border-dashed p-1 text-center transition-all bg-background hover:shadow-md min-h-8 overflow-hidden",r||o?"border-ring ring-2 ring-ring/40 marching-ants":"border-muted-foreground/30",a),onClick:()=>c.current?.click(),onDragOver:b=>{b.preventDefault(),d(!0)},onDragLeave:()=>d(!1),onDrop:b=>{b.preventDefault(),d(!1),f(b.dataTransfer.files)},role:"button",tabIndex:0,children:[e.jsxDEV("input",{ref:c,type:"file",className:"hidden",accept:s,multiple:t,onChange:b=>f(b.target.files)},void 0,!1,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:56,columnNumber:7},this),n??e.jsxDEV("div",{className:"text-[10px] text-muted-foreground py-0.5",children:[e.jsxDEV("p",{className:"font-medium text-foreground",children:"Click to select files"},void 0,!1,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV("p",{children:"or drag and drop here"},void 0,!1,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:67,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:65,columnNumber:9},this),o&&e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:[e.jsxDEV("div",{className:"absolute inset-0 matrix-overlay"},void 0,!1,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:72,columnNumber:11},this),e.jsxDEV("div",{className:"relative z-10 text-xs bg-background/80 px-2 py-1 rounded border",children:["Importing…"," ",typeof l=="number"?`${Math.round(l*100)}%`:""]},void 0,!0,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:73,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/Dropzone.tsx",lineNumber:34,columnNumber:5},this)}const cs=Vx,ds=Cx,rs=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV(Ff,{ref:n,className:je("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[t,e.jsxDEV(Rx,{asChild:!0,children:e.jsxDEV(Bn,{className:"h-4 w-4 opacity-50"},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:27,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:26,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:17,columnNumber:3},void 0));rs.displayName=Ff.displayName;const Jh=h.forwardRef(({className:s,...t},i)=>e.jsxDEV($f,{ref:i,className:je("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsxDEV(Nd,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:45,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:37,columnNumber:3},void 0));Jh.displayName=$f.displayName;const eb=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(zf,{ref:i,className:je("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsxDEV(Bn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:62,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:54,columnNumber:3},void 0));eb.displayName=zf.displayName;const os=h.forwardRef(({className:s,children:t,position:i="popper",...n},a)=>e.jsxDEV(Px,{children:e.jsxDEV(Bf,{ref:a,className:je("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[e.jsxDEV(Jh,{},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:84,columnNumber:7},void 0),e.jsxDEV(Ix,{className:je("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:85,columnNumber:7},void 0),e.jsxDEV(eb,{},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:94,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:73,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:72,columnNumber:3},void 0));os.displayName=Bf.displayName;const g0=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Gf,{ref:i,className:je("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:104,columnNumber:3},void 0));g0.displayName=Gf.displayName;const yt=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV(Uf,{ref:n,className:je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV(Ax,{children:e.jsxDEV(vn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:126,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:125,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:124,columnNumber:5},void 0),e.jsxDEV(Tx,{children:t},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:130,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:116,columnNumber:3},void 0));yt.displayName=Uf.displayName;const v0=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Hf,{ref:i,className:je("-mx-1 my-1 h-px bg-muted",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/select.tsx",lineNumber:139,columnNumber:3},void 0));v0.displayName=Hf.displayName;const y0=Wx,D0=Lx,tb=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Xf,{className:je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:i},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:17,columnNumber:3},void 0));tb.displayName=Xf.displayName;const sb=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(D0,{children:[e.jsxDEV(tb,{},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:33,columnNumber:5},void 0),e.jsxDEV(qf,{ref:i,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:34,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:32,columnNumber:3},void 0));sb.displayName=qf.displayName;const ib=({className:s,...t})=>e.jsxDEV("div",{className:je("flex flex-col space-y-2 text-center sm:text-left",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:50,columnNumber:3},void 0);ib.displayName="AlertDialogHeader";const nb=({className:s,...t})=>e.jsxDEV("div",{className:je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:64,columnNumber:3},void 0);nb.displayName="AlertDialogFooter";const ab=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Kf,{ref:i,className:je("text-lg font-semibold",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:78,columnNumber:3},void 0));ab.displayName=Kf.displayName;const rb=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Yf,{ref:i,className:je("text-sm text-muted-foreground",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:90,columnNumber:3},void 0));rb.displayName=Yf.displayName;const ob=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Zf,{ref:i,className:je(Tf(),s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:103,columnNumber:3},void 0));ob.displayName=Zf.displayName;const lb=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Qf,{ref:i,className:je(Tf({variant:"outline"}),"mt-2 sm:mt-0",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert-dialog.tsx",lineNumber:115,columnNumber:3},void 0));lb.displayName=Qf.displayName;function E0({r:s,onPreview:t,onFav:i,onRate:n,onTrash:a,inTrash:o,onDestroy:l,selectMode:r,selected:d,onToggleSelect:c,onUpdateTags:f}){const{t:b}=Vs(),D=s.imageDataUrls?.[0]??s.image??void 0,u=Array.from({length:5},(N,w)=>w<(s.rating||0)),[p,x]=h.useState(!1),[S,m]=h.useState(""),v=(()=>{try{const N=s.extra?.serverNotes;if(N?.totals?.fullRecipeCost)return N.totals.fullRecipeCost}catch{}return null})(),g=(()=>{if(!v)return null;try{const w=s.extra?.serverNotes?.portionCount;if(w)return v/w}catch{}return null})();return e.jsxDEV("div",{className:je("rounded-xl border bg-white dark:bg-zinc-900 shadow-sm overflow-hidden glow transition-colors",r&&d?"border-primary ring-2 ring-primary/40 bg-primary/5 dark:bg-primary/10":void 0),"data-echo-key":"card:recipes:result",children:e.jsxDEV("div",{className:"grid grid-cols-[120px_1fr] gap-3 p-3 items-start",children:[e.jsxDEV("div",{className:"relative h-[110px] w-[110px] shrink-0",children:[D?e.jsxDEV("img",{src:D,alt:s.title,className:"h-full w-full rounded object-cover",loading:"lazy"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:118,columnNumber:13},this):e.jsxDEV("div",{className:"flex h-full w-full items-center justify-center rounded bg-muted text-muted-foreground",children:"No Image"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:125,columnNumber:13},this),r&&e.jsxDEV("button",{type:"button","aria-pressed":d,onClick:N=>{N.preventDefault(),c?.()},className:je("absolute left-2 top-2 rounded-full px-3 py-1 text-xs font-semibold shadow focus-visible:outline-none focus-visible:ring",d?"bg-primary text-primary-foreground":"bg-background/90 text-foreground hover:bg-primary hover:text-primary-foreground"),children:b(d?"recipeSearch.selected":"recipeSearch.select")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:116,columnNumber:9},this),e.jsxDEV("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("h2",{className:"m-0 text-base font-semibold line-clamp-1",children:s.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:150,columnNumber:13},this),e.jsxDEV("button",{className:`shrink-0 p-1 rounded ${s.favorite?"text-yellow-500":"text-muted-foreground"} hover:bg-black/5`,onClick:i,"aria-label":"Favorite",children:e.jsxDEV(Ga,{className:s.favorite?"fill-current":""},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:158,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:149,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:u.map((N,w)=>e.jsxDEV("button",{className:`p-0.5 ${N?"text-yellow-500":"text-muted-foreground"}`,onClick:()=>n(w+1),"aria-label":`rate ${w+1}`,children:"★"},w,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:163,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:161,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center flex-wrap gap-2",children:[s.tags?.length?e.jsxDEV("p",{className:"m-0 text-xs text-muted-foreground flex-1",children:s.tags.slice(0,5).join(" · ")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:175,columnNumber:15},this):e.jsxDEV("p",{className:"m-0 text-xs text-muted-foreground italic",children:"No categories"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:179,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"h-5 px-1.5 text-xs",onClick:()=>x(!0),title:"Edit categories",children:e.jsxDEV(Xr,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:188,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:181,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:173,columnNumber:11},this),e.jsxDEV(ss,{open:p,onOpenChange:x,children:e.jsxDEV(is,{className:"max-w-sm",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:["Edit Categories for ",s.title]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:194,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Add category:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:198,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2 mt-2",children:[e.jsxDEV("input",{type:"text",value:S,onChange:N=>m(N.target.value),placeholder:"e.g., Soup, Appetizer",className:"flex-1 rounded-md border bg-background px-3 py-2 outline-none focus:ring-2 focus:ring-ring text-sm",onKeyPress:N=>{if(N.key==="Enter"&&S.trim()){const w=[...s.tags||[],S.trim()];f?.(Array.from(new Set(w))),m("")}}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:200,columnNumber:21},this),e.jsxDEV(ne,{size:"sm",onClick:()=>{if(S.trim()){const N=[...s.tags||[],S.trim()];f?.(Array.from(new Set(N))),m("")}},children:"Add"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:214,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:199,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:197,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Current categories:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:229,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags?.length?s.tags.map(N=>e.jsxDEV(et,{variant:"secondary",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{f?.((s.tags||[]).filter(w=>w!==N))},children:[N,e.jsxDEV(cn,{className:"h-3 w-3 ml-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:242,columnNumber:27},this)]},N,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:233,columnNumber:25},this)):e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"No categories assigned"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:246,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:230,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:196,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:192,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:191,columnNumber:11},this),(v||g)&&e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2 items-center",children:[g&&e.jsxDEV(et,{variant:"secondary",className:"gap-1 text-xs",children:[e.jsxDEV(Fc,{className:"h-2.5 w-2.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:259,columnNumber:19},this),"$",g.toFixed(2),"/portion"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:258,columnNumber:17},this),v&&!g&&e.jsxDEV(et,{variant:"secondary",className:"gap-1 text-xs",children:[e.jsxDEV(Fc,{className:"h-2.5 w-2.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:265,columnNumber:19},this),"$",v.toFixed(2)," total"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:264,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:256,columnNumber:13},this),s.ingredients?.length?e.jsxDEV("ul",{className:"mt-2 mb-0 text-xs text-muted-foreground max-h-10 overflow-hidden hide-scrollbar list-disc pl-4",children:[s.ingredients.slice(0,5).map((N,w)=>e.jsxDEV("li",{className:"truncate",title:N,children:N},w,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:275,columnNumber:17},this)),s.ingredients.length>5&&e.jsxDEV("li",{className:"list-none",children:["+",s.ingredients.length-5," more"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:280,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:273,columnNumber:13},this):null,e.jsxDEV("div",{className:"mt-2 flex gap-2",children:[e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:t,children:"Preview"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:285,columnNumber:13},this),o?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:a,title:b("recipeSearch.restore"),children:e.jsxDEV(Nn,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:296,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:290,columnNumber:17},this),l&&e.jsxDEV(ne,{size:"sm",variant:"destructive",onClick:l,title:b("recipeSearch.deleteForever"),children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:305,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:299,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:289,columnNumber:15},this):e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:a,title:"Move to trash",children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:316,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:310,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:"outline",asChild:!0,"data-echo-key":"cta:recipes:open",children:e.jsxDEV("a",{href:`/recipe/${s.id}/view`,children:[e.jsxDEV(Ar,{className:"mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:326,columnNumber:17},this),"Open"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:325,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:319,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>{try{const N={recipeName:s.title,ingredients:(s.ingredients||[]).map(w=>({qty:"",unit:"",item:String(w),prep:"",yield:"",cost:""})),directions:Array.isArray(s.instructions)?s.instructions.map(String).map((w,A)=>`${A+1}. ${w}`).join(`
`):String(s.instructions||""),taxonomy:s.extra?.taxonomy||void 0};localStorage.setItem("recipe:draft",JSON.stringify(N))}catch{}location.href="/?tab=add-recipe"},children:"Edit"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:330,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:284,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:115,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:106,columnNumber:5},this)}function w0(){const{recipes:s,searchRecipes:t,linkImagesToRecipesByFilename:i,clearRecipes:n,addRecipesFromJsonFiles:a,addRecipesFromDocxFiles:o,addRecipesFromHtmlFiles:l,addRecipesFromPdfFiles:r,addRecipesFromExcelFiles:d,addRecipesFromImageOcr:c,addFromZipArchive:f,toggleFavorite:b,rateRecipe:D,updateRecipeTags:u,deleteRecipe:p,restoreRecipe:x,exportAllZip:S,addImages:m,destroyRecipe:v,purgeDeleted:g,collections:N,createCollection:w,updateCollection:A,deleteCollection:I,setCollectionRecipes:B}=ln(),[W,se]=h.useState(""),[ie,R]=h.useState("all"),{language:F,setLanguage:k,options:Q}=md(),{t:J}=Vs(),[O,me]=h.useState(F),[de,fe]=h.useState(""),[ae,L]=h.useState(""),[H,le]=h.useState(""),[ue,K]=h.useState(""),[C,P]=h.useState(!1),ee=h.useRef(null),$=h.useMemo(()=>{if(!W.trim())return[];const M=W.toLowerCase();return s.filter(X=>!X.deletedAt&&X.title.toLowerCase().includes(M)).slice(0,8).map(X=>X.title).filter((X,he,Ee)=>Ee.indexOf(X)===he)},[W,s]),U=h.useMemo(()=>{const M=t(W),X=Ve=>Ve.filter(Ce=>{const He=Ce.extra?.taxonomy||{};return!(de&&He.cuisine!==de||ae&&!(Array.isArray(He.technique)&&He.technique.includes(ae))||H&&!(Array.isArray(He.course)&&He.course.includes(H))||ue&&!(Array.isArray(He.diets)&&He.diets.includes(ue)))}),he=Ve=>Ve.slice().sort((Ce,He)=>Ce.title.localeCompare(He.title,void 0,{sensitivity:"base"})),Ee=he(X(M.filter(Ve=>!Ve.deletedAt)));switch(ie){case"recent":return Ee;case"top":return Ee;case"favorites":return he(Ee.filter(Ve=>Ve.favorite));case"uncategorized":return he(Ee.filter(Ve=>!Ve.tags||Ve.tags.length===0));case"global":return he(Ee.filter(Ve=>Ve.isGlobal===!0));case"trash":return he(X(M.filter(Ve=>!!Ve.deletedAt)));default:return Ee}},[W,t,ie,de,ae,H,ue]);h.useEffect(()=>{me(F)},[F]);const[G,re]=h.useState(null),[V,Y]=h.useState("cards"),[T,y]=h.useState(""),[E,j]=h.useState([]),[q,te]=h.useState(""),[Z,ve]=h.useState(!1),[ke,De]=h.useState(0),[We,ze]=h.useState(0),[st,_t]=h.useState([]),[Nt,ye]=h.useState(null),[pt,ct]=h.useState(null),[Ot,Es]=h.useState(0),[qt,ws]=h.useState(0),[Kt,fs]=h.useState(null),[Cs,xs]=h.useState(!1),[It,ls]=h.useState(null),[zs,ys]=h.useState({}),we=h.useRef(null),[qe,Qe]=h.useState(!1),[ot,ft]=h.useState(!1),[xt,jt]=h.useState(0),[At,Vt]=h.useState(0),[Qt,ks]=h.useState(!1),[Yt,Gt]=h.useState([]),[_s,Ys]=h.useState(null),[Ts,Ei]=h.useState(null),[oe,Ne]=h.useState(null),[Ue,Me]=h.useState(!1),[Ct,Ws]=h.useState(null),{toast:es}=Ci(),ti=h.useRef(null),Qs=h.useRef(null),[Zs,Ri]=h.useState(""),[us,Os]=h.useState([]),[Rs,Xs]=h.useState(null),[Ss,Gs]=h.useState(null),li=h.useMemo(()=>{const M=X=>X&&Date.parse(X)||0;return[...N].sort((X,he)=>M(he.updatedAt)-M(X.updatedAt))},[N]),[ci,si]=ud(),di=h.useCallback(()=>{const M=new URLSearchParams(ci);M.set("tab","server-notes"),si(M,{replace:!1})},[ci,si]),Zi=async M=>{if(!M)return;if(!(M.type==="application/pdf"||M.name.toLowerCase().endsWith(".pdf"))){es({title:"PDF required",description:"Drop a cookbook PDF to use the library importer.",variant:"destructive"});return}if(Nt&&Nt!=="done"){es({title:"Book import in progress",description:"Wait for the current PDF import to finish before adding another."});return}if(!(typeof window<"u"&&!confirm("Confirm you own/purchased this cookbook PDF for personal import?")))try{ct(M.name),ye("reading"),re("Reading book PDF...");const he=await M.arrayBuffer();we.current=M;const Ee=await Aa(()=>import("https://esm.sh/pdfjs-dist@4.7.76/build/pdf.mjs"),[]),Ve="https://esm.sh/pdfjs-dist@4.7.76/build/pdf.worker.mjs";Ee.GlobalWorkerOptions&&(Ee.GlobalWorkerOptions.workerSrc=Ve);const Ce=await Ee.getDocument({data:he}).promise;ws(Ce.numPages),ft(!0),ks(!0),Gt([]),jt(0),Vt(Ce.numPages);let He=[];const Rt=Te=>{const Be=Te.split(/\n/).map(lt=>lt.trim()).filter(Boolean).slice(0,80),dt=/^(?:\d+(?:\s+\d\/\d)?|\d+\/\d|\d+(?:\.\d+)?|[¼½¾⅓⅔⅛⅜⅝⅞])(?:\s*[a-zA-Z]+)?\b/;let vt=0;for(const lt of Be)(dt.test(lt)||/^[•\-*]\s+/.test(lt))&&vt++;return vt>=3},kt=Te=>{let Be=Te.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(Be)&&Be.length<=60&&(Be=Be.replace(/\s+/g,"")),Be},wt=[],ut=[];for(let Te=1;Te<=Ce.numPages;Te++){const vt=(await(await Ce.getPage(Te)).getTextContent()).items.map(bt=>String(bt.str)).filter(Boolean);He.push(...vt),He.push("");const lt=vt.join(`
`);if(wt.push(lt),Es(Te),jt(Te),/\bingredients?\b/i.test(lt)||Rt(lt)){ut.push(Te);let bt="";const $t=vt.map(kt).filter(Boolean).slice(0,10);for(const js of $t)if(/^[A-Z][A-Za-z0-9\-'\s]{2,80}$/.test(js)||/^([A-Z]\s+){2,}[A-Z][\s:]*$/.test(js)){bt=js.replace(/\s+/g," ").trim();break}(/^see\b/i.test(bt)||/(flexipan|inch|inches|cm|diameter)\b/i.test(bt))&&(bt=""),Gt(js=>[...js,{page:Te,title:bt||`Candidate p.${Te}`}])}}try{const Te=($t,js)=>Object.fromEntries(Object.entries($t).sort((ui,Ea)=>Ea[1]-ui[1]).slice(0,js)),Be={},dt={},lt=wt.join(`
`).toLowerCase().replace(/[^a-z\s]/g," ").split(/\s+/).filter($t=>$t.length>=3&&$t.length<=24);for(let $t=0;$t<lt.length;$t++){const js=lt[$t];if(Be[js]=(Be[js]||0)+1,$t<lt.length-1){const ui=`${lt[$t]} ${lt[$t+1]}`;ui.length>=5&&ui.length<=40&&(dt[ui]=(dt[ui]||0)+1)}}const Zt=localStorage.getItem("kb:cook")||"{}",bt=JSON.parse(Zt||"{}");bt.terms=Te({...bt.terms,...Be},400),bt.bigrams=Te({...bt.bigrams,...dt},600),bt.books=Array.from(new Set([...bt.books||[],M.name.replace(/\.[^.]+$/,"")])),localStorage.setItem("kb:cook",JSON.stringify(bt))}catch{}if(ft(!1),ye("selecting"),Ys(wt),Ei(ut),Ne(M.name.replace(/\.[^.]+$/,"")),ut.length>=5){re(`Detected ${ut.length} recipe candidates. Click "Import detected" to add them.`);return}const Dt=Te=>{let Be=Te.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(Be)&&Be.length<=60&&(Be=Be.replace(/\s+/g,"")),Be},it=He.map(Dt);let mt=it.map(Te=>{const Be=[/^(.{3,120}?)(?:[\.·•\s]{2,})(\d{1,4})$/,/^(.{3,120}?)\s{3,}(\d{1,4})$/,/^(.{3,120}?)\s+[-–—]\s*(\d{1,4})$/];let dt=null;for(const bt of Be)if(dt=Te.match(bt),dt)break;if(!dt)return null;const vt=dt[1].trim(),lt=parseInt(dt[2],10);return!vt||/^(?:contents|index|appendix|recipes?|chapter|table of contents|fig(?:\.|ures?)?(?:\s*\d+)?|plates?(?:\s*\d+)?|illustrations?(?:\s*\d+)?|photos?(?:\s*\d+)?|tables?(?:\s*\d+)?|maps?(?:\s*\d+)?|yield\b|to convert\b|see\b)/i.test(vt)||/(flexipan|inch|inches|cm|diameter)\b/i.test(vt)?null:{title:vt,page:lt}}).filter(Boolean);const ms={};if(mt=mt.filter(Te=>!ms[Te.page]&&(ms[Te.page]=!0)),mt.length>=5){ls(mt);const Te={};mt.forEach(Be=>Te[Be.title]=!0),ys(Te),xs(!0),re("Select recipes to import");return}const ts=[];let nt=0;const hs=M.name.replace(/\.[^.]+$/,""),Ye=Te=>Te&&Te.length<70&&/[A-Za-z]/.test(Te)&&(Te===Te.toUpperCase()||/^[A-Z][^.!?]{2,}$/.test(Te));for(;nt<it.length;){for(;nt<it.length&&!/ingredients?/i.test(it[nt]);)nt++;if(nt>=it.length)break;let Te=Math.max(0,nt-5),Be="";for(let lt=nt-1;lt>=Te;lt--)if(Ye(it[lt])){Be=it[lt];break}const dt=[];for(nt++;nt<it.length&&!/ingredients?/i.test(it[nt]);){const lt=it[nt];if(/^(instructions|directions|method)/i.test(lt))break;lt&&dt.push(lt),nt++}let vt=[];for(;nt<it.length&&!/ingredients?/i.test(it[nt]);){const lt=it[nt];lt&&vt.push(lt),nt++}Be&&(dt.length||vt.length)&&ts.push({title:Be,ingredients:dt,instructions:vt,tags:[hs],extra:{book:hs,source:"pdf-auto"}})}if(ye("importing"),ts.length){const Te=new Blob([JSON.stringify(ts)],{type:"application/json"}),Be=new File([Te],`${hs}.json`,{type:"application/json"}),{added:dt}=await a([Be]);fs(dt),re(`Imported ${dt} recipes from book.`),ye("done")}else re("Could not detect recipes in PDF"),ye(null)}catch(he){re(`Failed: ${he?.message||"error"}`),ye(null)}},En=async M=>{const X=M.slice(0,100),he=X.filter(Ye=>Ye.type.includes("json")||Ye.name.toLowerCase().endsWith(".json")),Ee=X.filter(Ye=>Ye.name.toLowerCase().endsWith(".docx")),Ve=X.filter(Ye=>/(\.html?|\.htm)$/i.test(Ye.name)),Ce=X.filter(Ye=>Ye.name.toLowerCase().endsWith(".pdf")),He=X.filter(Ye=>/(\.xlsx|\.xls|\.csv)$/i.test(Ye.name)),Rt=X.filter(Ye=>Ye.type.startsWith("image/")||/(png|jpe?g|webp|heic|heif)$/i.test(Ye.name)),kt=X.filter(Ye=>Ye.type.includes("zip")||Ye.name.toLowerCase().endsWith(".zip")),wt=he.length+Ee.length+Ve.length+Ce.length+He.length+Rt.length+kt.length;De(0),ze(wt),_t([]),j([]),re("Processing...");const ut=[],Dt=Ye=>{Ye?.length&&(ut.push(...Ye),_t(Te=>[...Te,...Ye]))};let it=0;const mt=[];for(const Ye of he){const{added:Te,errors:Be,titles:dt}=await a([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of Ee){const{added:Te,errors:Be,titles:dt}=await o([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of Ve){const{added:Te,errors:Be,titles:dt}=await l([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of Ce){const{added:Te,errors:Be,titles:dt}=await r([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of He){const{added:Te,errors:Be,titles:dt}=await d([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of Rt){const{added:Te,errors:Be,titles:dt}=await c([Ye]);it+=Te,mt.push(...Be),Dt(dt),De(vt=>vt+1)}for(const Ye of kt){const Te=await f(Ye);it+=Te.addedRecipes;for(const Be of Te.errors)mt.push({file:Be.entry,error:Be.error});Dt(Te.titles),De(Be=>Be+1)}j(mt);const ms=`Imported ${it} recipe${it===1?"":"s"}.`,ts=mt.length>0?`${mt.length} item${mt.length===1?"":"s"} had issues.`:"No issues detected.",nt=ut.length>0?`Added: ${ut.slice(0,4).join(", ")}${ut.length>4?" …":""}`:"",hs=[ms,ts].join(" ");re(nt?`${hs} ${nt}`:hs),es({title:"Recipe import complete",description:[ms,ts,nt].filter(Boolean).join(" ")}),De(0),ze(0)},[Hs,Mi]=h.useState(null),wi=ie==="trash",Se=!!Rs||Zs.trim().length>0||us.length>0,Le=Se&&!wi;h.useEffect(()=>{us.length&&Os(M=>M.filter(X=>s.some(he=>he.id===X)))},[s,us.length]),h.useEffect(()=>{if(typeof window>"u")return;const M="serverNotes:presetSelection";if(!us.length){window.sessionStorage.removeItem(M);return}window.sessionStorage.setItem(M,JSON.stringify({version:1,ids:us,savedAt:Date.now()}))},[us]);const Fe=h.useCallback(()=>{Ri(""),Os([]),Xs(null)},[]),at=h.useCallback(M=>{Le&&Os(X=>X.includes(M)?X.filter(he=>he!==M):[...X,M])},[Le]),ht=h.useCallback(M=>{Xs(M.id),Ri(M.name),Os(M.recipeIds.filter(X=>s.some(he=>he.id===X))),requestAnimationFrame(()=>{Qs.current?.focus()})},[s]),gt=h.useCallback(()=>{const M=Zs.trim();if(!M){es({title:"Name required",description:"Add a name before saving the collection.",variant:"destructive"});return}if(us.length===0){es({title:"No recipes selected",description:"Select at least one recipe to include.",variant:"destructive"});return}Rs?(A(Rs,{name:M}),B(Rs,us),es({title:"Collection updated",description:"Changes have been saved."})):(w({name:M,season:"All",year:new Date().getFullYear(),version:1,recipeIds:us}),es({title:"Collection created",description:`${us.length} recipe${us.length===1?"":"s"} saved to "${M}".`})),Fe()},[Rs,Zs,w,Fe,us,B,es,A]),_=h.useCallback(()=>{Ss&&(I(Ss.id),Ss.id===Rs&&Fe(),es({title:"Collection deleted",description:`"${Ss.name}" removed.`}),Gs(null))},[Rs,Ss,I,Fe,es]);return e.jsxDEV("div",{className:"mx-auto w-full max-w-[1400px] space-y-5 px-4 py-4 sm:px-6 lg:px-10","data-echo-key":"page:recipes:search",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-1 rounded-lg bg-muted p-1",children:["all","recent","top","favorites","uncategorized","global","trash"].map(M=>e.jsxDEV("button",{onClick:()=>R(M),className:`px-3 py-1 rounded-md text-sm ${ie===M?"bg-background shadow":"text-foreground/80"}`,children:J(`recipes.filter.${M}`,M.replace(/^[a-z]/,X=>X.toUpperCase()))},M,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1122,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1110,columnNumber:9},this),e.jsxDEV("div",{className:"ml-auto flex flex-wrap items-center gap-2",children:[e.jsxDEV(cs,{value:O,onValueChange:M=>{const X=M;me(X),k(X)},children:[e.jsxDEV(rs,{className:"w-[160px]",children:e.jsxDEV(ds,{placeholder:J("recipes.exportLanguage","Export language")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1141,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1140,columnNumber:13},this),e.jsxDEV(os,{children:Q.map(M=>e.jsxDEV(yt,{value:M.code,children:[M.flag," ",M.label]},M.code,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1145,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1143,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1132,columnNumber:11},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>S(O),children:J("recipes.exportAll","Export all (ZIP)")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1151,columnNumber:11},this),wi&&e.jsxDEV(ne,{variant:"destructive",size:"sm",onClick:()=>{confirm(J("recipes.deleteAllTrash.confirm","Delete all items in Trash permanently? This cannot be undone."))&&g()},children:J("recipes.deleteAll","Delete all")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1159,columnNumber:13},this),e.jsxDEV(ne,{variant:"destructive",size:"sm",onClick:()=>n(),children:J("recipes.clear","Clear")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1174,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1131,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1109,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.05fr)_minmax(0,0.95fr)] xl:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]",children:[e.jsxDEV(Xh,{className:"glow flex min-h-[160px] flex-col items-center justify-center rounded-xl border border-dashed border-primary/35 bg-background/90 p-6 text-center shadow-sm transition-all hover:border-primary/60 hover:shadow-md dark:bg-zinc-900/70",accept:".json,application/json,.docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.html,.htm,text/html,.pdf,application/pdf,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,.xls,application/vnd.ms-excel,.csv,text/csv,application/zip,application/x-zip-compressed,.zip,image/*",multiple:!0,onFiles:En,busy:We>0&&ke<We||Nt==="reading"||Nt==="importing",progress:We>0?ke/Math.max(We,1):Nt==="reading"?qt?Ot/Math.max(qt,1):0:void 0,children:e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV("div",{className:"text-2xl font-semibold uppercase tracking-[0.55em] text-primary",children:J("recipes.recipeDrop.title","Recipe Drop")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1206,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm font-medium text-foreground",children:J("recipes.recipeDrop.description","Drag or upload recipes and images (Word, PDF, Excel, HTML, JSON, ZIP).")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1209,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:J("recipes.recipeDrop.autoDetect","We auto-detect titles, ingredients, yields, and instructions.")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1212,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1205,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1185,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col space-y-4 rounded-xl border border-primary/30 bg-background/90 p-4 shadow-sm dark:bg-zinc-900/70",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV("div",{className:"flex min-w-[220px] flex-1 flex-col gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:J("recipes.menuCollection","Menu Collection")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1221,columnNumber:17},this),Rs&&e.jsxDEV("span",{className:"rounded-full bg-primary/15 px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-primary",children:J("recipes.editing","Editing")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1225,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1220,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-3 rounded-full border border-primary/20 bg-background px-4 py-2 shadow-inner dark:bg-zinc-950/60",children:e.jsxDEV("input",{ref:Qs,value:Zs,onChange:M=>Ri(M.target.value),placeholder:J("recipes.collectionName.placeholder","Collection Name"),className:"flex-1 bg-transparent text-sm font-medium text-foreground outline-none placeholder:text-muted-foreground"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1231,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1230,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1219,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{type:"button",variant:"outline",size:"icon",onClick:()=>ti.current?.focus(),title:"Search recipes",children:e.jsxDEV(qi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1248,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1241,columnNumber:15},this),e.jsxDEV(ne,{type:"button",variant:"secondary",size:"icon",onClick:gt,disabled:Zs.trim().length===0||us.length===0,title:"Save collection",children:e.jsxDEV(_a,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1260,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1250,columnNumber:15},this),Se&&e.jsxDEV(ne,{type:"button",variant:"ghost",size:"icon",onClick:Fe,title:"Clear",children:e.jsxDEV(cn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1270,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1263,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1240,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1218,columnNumber:11},this),Se&&e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[e.jsxDEV("div",{children:[us.length," recipe",us.length===1?"":"s"," selected"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1277,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>Os([]),disabled:us.length===0,children:"Clear picks"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1282,columnNumber:17},this),e.jsxDEV(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>ti.current?.focus(),children:"Search catalog"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1291,columnNumber:17},this),e.jsxDEV(ne,{type:"button",size:"sm",className:"font-semibold",onClick:di,disabled:us.length===0,children:"Build recipe book"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1299,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1281,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1276,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:"Previous Collections"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1312,columnNumber:13},this),li.length===0?e.jsxDEV("div",{className:"rounded-lg border border-dashed px-3 py-4 text-center text-xs text-muted-foreground",children:"No collections yet. Create one to save curated menus."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1316,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-2",children:li.map(M=>{const X=Rs===M.id,he=M.recipeIds.length;return e.jsxDEV("div",{className:je("rounded-lg border px-3 py-2 transition-colors",X?"border-primary bg-primary/5 dark:bg-primary/15":"border-border/60 bg-background/80 dark:bg-zinc-950/70"),children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV("div",{className:"truncate text-sm font-medium",children:M.name},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1336,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[M.season," • ",M.year," • v",M.version," • ",he," recipe",he===1?"":"s"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1339,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1335,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(ne,{type:"button",size:"sm",variant:"outline",onClick:()=>{const Ee=new URLSearchParams(window.location.search);Ee.set("tab","server-notes"),Ee.set("collection",M.id),window.location.href=`/?${Ee.toString()}`},title:"Build package",children:[e.jsxDEV(og,{className:"mr-1 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1357,columnNumber:29},this),"Build"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1345,columnNumber:27},this),e.jsxDEV(ne,{type:"button",size:"icon",variant:"ghost",onClick:()=>ht(M),title:"Edit collection",children:e.jsxDEV(Xr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1367,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1360,columnNumber:27},this),e.jsxDEV(ne,{type:"button",size:"icon",variant:"ghost",onClick:()=>Gs(M),title:"Delete collection",children:e.jsxDEV(vi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1376,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1369,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1344,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1334,columnNumber:23},this)},M.id,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1325,columnNumber:21},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1320,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1311,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1217,columnNumber:9},this),e.jsxDEV("div",{className:je("rounded-xl border bg-background/85 p-4 shadow-sm transition-colors dark:bg-zinc-900/70 lg:col-span-2",qe&&"border-primary/60 bg-primary/10 shadow-[0_0_0_1px_rgba(56,189,248,0.35)]"),onDragOver:M=>{M.preventDefault(),Qe(!0)},onDragLeave:()=>Qe(!1),onDrop:M=>{M.preventDefault(),Qe(!1);const X=M.dataTransfer.files?.[0];X&&Zi(X)},children:[e.jsxDEV("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV("div",{className:"text-sm font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Library (Book PDF) Import"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1408,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:Nt?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{children:Nt==="reading"?"Reading file":Nt==="selecting"?"Selecting recipes":Nt==="categorizing"?"Categorizing recipes":Nt==="importing"?"Importing":"Done"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1414,columnNumber:19},this),Nt==="reading"&&e.jsxDEV("span",{children:[Ot,"/",qt]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1426,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1413,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:["Imported: ",s.length]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1432,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1411,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1407,columnNumber:11},this),e.jsxDEV("input",{type:"file",accept:"application/pdf",onChange:async M=>{const X=M.target.files?.[0];if(X){if(!confirm("Confirm you own/purchased this cookbook PDF for personal import?")){M.target.value="";return}try{ct(X.name),ye("reading"),re("Reading book PDF...");const he=await X.arrayBuffer();we.current=X;const Ee=await Aa(()=>import("https://esm.sh/pdfjs-dist@4.7.76/build/pdf.mjs"),[]),Ve="https://esm.sh/pdfjs-dist@4.7.76/build/pdf.worker.mjs";Ee.GlobalWorkerOptions&&(Ee.GlobalWorkerOptions.workerSrc=Ve);const Ce=await Ee.getDocument({data:he}).promise;ws(Ce.numPages),ft(!0),ks(!0),Gt([]),jt(0),Vt(Ce.numPages);let He=[];const Rt=Te=>{const Be=Te.split(/\n/).map(lt=>lt.trim()).filter(Boolean).slice(0,80),dt=/^(?:\d+(?:\s+\d\/\d)?|\d+\/\d|\d+(?:\.\d+)?|[¼½¾⅓⅔⅛⅜⅝⅞])(?:\s*[a-zA-Z]+)?\b/;let vt=0;for(const lt of Be)(dt.test(lt)||/^[•\-*]\s+/.test(lt))&&vt++;return vt>=3},kt=Te=>{let Be=Te.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(Be)&&Be.length<=60&&(Be=Be.replace(/\s+/g,"")),Be},wt=[],ut=[];for(let Te=1;Te<=Ce.numPages;Te++){const vt=(await(await Ce.getPage(Te)).getTextContent()).items.map(bt=>String(bt.str)).filter(Boolean);He.push(...vt),He.push("");const lt=vt.join(`
`);if(wt.push(lt),Es(Te),jt(Te),/\bingredients?\b/i.test(lt)||Rt(lt)){ut.push(Te);let bt="";const $t=vt.map(kt).filter(Boolean).slice(0,10);for(const js of $t)if(/^[A-Z][A-Za-z0-9\-\'\s]{2,80}$/.test(js)||/^([A-Z]\s+){2,}[A-Z][\s:]*$/.test(js)){bt=js.replace(/\s+/g," ").trim();break}(/^see\b/i.test(bt)||/(flexipan|inch|inches|cm|diameter)\b/i.test(bt))&&(bt=""),Gt(js=>[...js,{page:Te,title:bt||`Candidate p.${Te}`}])}}try{const Te=($t,js)=>Object.fromEntries(Object.entries($t).sort((ui,Ea)=>Ea[1]-ui[1]).slice(0,js)),Be={},dt={},lt=wt.join(`
`).toLowerCase().replace(/[^a-z\s]/g," ").split(/\s+/).filter($t=>$t.length>=3&&$t.length<=24);for(let $t=0;$t<lt.length;$t++){const js=lt[$t];if(Be[js]=(Be[js]||0)+1,$t<lt.length-1){const ui=`${lt[$t]} ${lt[$t+1]}`;ui.length>=5&&ui.length<=40&&(dt[ui]=(dt[ui]||0)+1)}}const Zt=localStorage.getItem("kb:cook")||"{}",bt=JSON.parse(Zt||"{}");bt.terms=Te({...bt.terms,...Be},400),bt.bigrams=Te({...bt.bigrams,...dt},600),bt.books=Array.from(new Set([...bt.books||[],X.name.replace(/\.[^.]+$/,"")])),localStorage.setItem("kb:cook",JSON.stringify(bt))}catch{}if(ft(!1),ye("selecting"),Ys(wt),Ei(ut),Ne(X.name.replace(/\.[^.]+$/,"")),ut.length>=5){re(`Detected ${ut.length} recipe candidates. Click "Import detected" to add them.`);return}const Dt=Te=>{let Be=Te.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(Be)&&Be.length<=60&&(Be=Be.replace(/\s+/g,"")),Be},it=He.map(Dt);let mt=it.map(Te=>{const Be=[/^(.{3,120}?)(?:[\.·•\s]{2,})(\d{1,4})$/,/^(.{3,120}?)\s{3,}(\d{1,4})$/,/^(.{3,120}?)\s+[-–—]\s*(\d{1,4})$/];let dt=null;for(const bt of Be)if(dt=Te.match(bt),dt)break;if(!dt)return null;const vt=dt[1].trim(),lt=parseInt(dt[2],10);return!vt||/^(?:contents|index|appendix|recipes?|chapter|table of contents|fig(?:\.|ures?)?(?:\s*\d+)?|plates?(?:\s*\d+)?|illustrations?(?:\s*\d+)?|photos?(?:\s*\d+)?|tables?(?:\s*\d+)?|maps?(?:\s*\d+)?|yield\b|to convert\b|see\b)/i.test(vt)||/(flexipan|inch|inches|cm|diameter)\b/i.test(vt)?null:{title:vt,page:lt}}).filter(Boolean);const ms={};if(mt=mt.filter(Te=>!ms[Te.page]&&(ms[Te.page]=!0)),mt.length>=5){ls(mt);const Te={};mt.forEach(Be=>Te[Be.title]=!0),ys(Te),xs(!0),re("Select recipes to import");return}const ts=[];let nt=0;const hs=X.name.replace(/\.[^.]+$/,""),Ye=Te=>Te&&Te.length<70&&/[A-Za-z]/.test(Te)&&(Te===Te.toUpperCase()||/^[A-Z][^.!?]{2,}$/.test(Te));for(;nt<it.length;){for(;nt<it.length&&!/ingredients?/i.test(it[nt]);)nt++;if(nt>=it.length)break;let Te=Math.max(0,nt-5),Be="";for(let lt=nt-1;lt>=Te;lt--)if(Ye(it[lt])){Be=it[lt];break}const dt=[];for(nt++;nt<it.length&&!/ingredients?/i.test(it[nt]);){const lt=it[nt];if(/^(instructions|directions|method)/i.test(lt))break;lt&&dt.push(lt),nt++}let vt=[];for(;nt<it.length&&!/ingredients?/i.test(it[nt]);){const lt=it[nt];lt&&vt.push(lt),nt++}Be&&(dt.length||vt.length)&&ts.push({title:Be,ingredients:dt,instructions:vt,tags:[hs],extra:{book:hs,source:"pdf-auto"}})}if(ye("importing"),ts.length){const Te=new Blob([JSON.stringify(ts)],{type:"application/json"}),Be=new File([Te],`${hs}.json`,{type:"application/json"}),{added:dt}=await a([Be]);fs(dt),re(`Imported ${dt} recipes from book.`),ye("done")}else re("Could not detect recipes in PDF"),ye(null)}catch(he){re(`Failed: ${he?.message||"error"}`),ye(null)}finally{M.target.value=""}}}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1436,columnNumber:11},this),e.jsxDEV("div",{className:"mt-1",children:e.jsxDEV("label",{className:"text-xs flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",defaultChecked:typeof localStorage<"u"&&localStorage.getItem("pdf:ocr")==="1",onChange:M=>{try{localStorage.setItem("pdf:ocr",M.target.checked?"1":"0")}catch{}}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1704,columnNumber:15},this)," ","OCR fallback for scanned PDFs"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1703,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1702,columnNumber:11},this),(Nt||We>0)&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:[Nt&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:pt||""},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1727,columnNumber:19},this),Nt==="reading"&&e.jsxDEV("div",{className:"h-2 w-full rounded bg-muted",children:e.jsxDEV("div",{className:"h-2 rounded bg-primary transition-all",style:{width:`${Math.round(Ot/Math.max(qt,1)*100)}%`}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1732,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1731,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1726,columnNumber:17},this),We>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[ke," / ",We," files processed"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1744,columnNumber:19},this),e.jsxDEV("div",{className:"h-2 w-full rounded bg-muted",children:e.jsxDEV("div",{className:"h-2 rounded bg-primary transition-all",style:{width:`${Math.round(ke/Math.max(We,1)*100)}%`}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1748,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1747,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1743,columnNumber:17},this),st.length>0&&e.jsxDEV("div",{className:"max-h-32 overflow-auto rounded border p-2 text-xs",children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Imported:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1759,columnNumber:19},this),e.jsxDEV("ul",{className:"space-y-1 list-disc pl-4",children:st.map((M,X)=>e.jsxDEV("li",{className:"truncate",title:M,children:M},X,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1762,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1760,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1758,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1724,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 space-y-2 text-sm",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Import from the web"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1772,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxDEV("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 lg:flex-1",children:[e.jsxDEV("input",{value:T,onChange:M=>y(M.target.value),placeholder:J("recipeSearch.searchWeb"),className:"flex-1 rounded-md border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-ring"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1777,columnNumber:17},this),e.jsxDEV(ne,{size:"sm",variant:"outline",className:"sm:self-stretch",onClick:()=>{const M=encodeURIComponent(T);window.open(`https://www.google.com/search?q=${M}+recipe`,"_blank")},children:"Search"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1783,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1776,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 lg:flex-1",children:[e.jsxDEV("input",{value:q,onChange:M=>te(M.target.value),placeholder:J("recipeSearch.pasteUrl"),className:"flex-1 rounded-md border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-ring"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1799,columnNumber:17},this),e.jsxDEV(ne,{size:"sm",className:"sm:self-stretch",onClick:async()=>{try{ve(!0),re("Fetching recipe...");const M=await fetch("/api/recipe/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:q})});if(!M.ok)throw new Error((await M.json().catch(()=>({})))?.error||"Failed");const X=await M.json();let he;const Ee=typeof X.image=="string"?X.image:X.image?.url||X.image?.contentUrl||"";if(Ee)try{const Rt=await fetch(`/api/recipe/image?url=${encodeURIComponent(String(Ee))}`);if(!Rt.ok)throw new Error("image fetch");const kt=await Rt.blob();he=(String(Ee).split("?")[0].split("/").pop()||`${Date.now()}.jpg`).replace(/[^A-Za-z0-9_.-]/g,"_"),await m([new File([kt],he,{type:kt.type||"image/jpeg"})],{tags:["web"]})}catch{}const Ve=[{title:X.title,image:he||void 0,ingredients:X.ingredients,instructions:Array.isArray(X.instructions)?X.instructions:String(X.instructions||"").split(/\r?\n/).filter(Boolean),tags:[]}],Ce=new File([new Blob([JSON.stringify(Ve)],{type:"application/json"})],"web.json",{type:"application/json"}),{added:He}=await a([Ce]);re(`Imported ${He} recipe(s) from web.`)}catch(M){re(`Failed: ${M?.message||"error"}`)}finally{ve(!1)}},disabled:Z||!q,children:Z?"Importing...":"Import"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1805,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1798,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1775,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1771,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1387,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1184,columnNumber:7},this),G&&e.jsxDEV("div",{className:"rounded-md border p-3 text-sm",children:G},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1887,columnNumber:18},this),e.jsxDEV(y0,{open:!!Ss,onOpenChange:M=>{M||Gs(null)},children:e.jsxDEV(sb,{children:[e.jsxDEV(ib,{children:[e.jsxDEV(ab,{children:"Delete collection?"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1896,columnNumber:13},this),e.jsxDEV(rb,{children:Ss?`"${Ss.name}" will be removed permanently.`:"This action cannot be undone."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1897,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1895,columnNumber:11},this),e.jsxDEV(nb,{children:[e.jsxDEV(lb,{onClick:()=>Gs(null),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1904,columnNumber:13},this),e.jsxDEV(ob,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:_,children:"Delete"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1907,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1903,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1894,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1888,columnNumber:7},this),e.jsxDEV(ss,{open:Cs,onOpenChange:xs,children:e.jsxDEV(is,{className:"max-w-2xl",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Select recipes to import"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1919,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1918,columnNumber:11},this),e.jsxDEV("div",{className:"max-h-[50vh] overflow-auto hide-scrollbar border rounded p-2 text-sm space-y-1",children:(It||[]).map(M=>e.jsxDEV("label",{className:"grid grid-cols-[16px_1fr_42px] items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:!!zs[M.title],onChange:()=>ys(X=>({...X,[M.title]:!X[M.title]}))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1927,columnNumber:17},this),e.jsxDEV("span",{className:"truncate",title:`${M.title} — p.${M.page}`,children:M.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1935,columnNumber:17},this),e.jsxDEV("span",{className:"text-muted-foreground text-right",children:["p.",M.page]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1938,columnNumber:17},this)]},`${M.page}-${M.title}`,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1923,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1921,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-between gap-2",children:[e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:"ghost",onClick:()=>{const M={};(It||[]).forEach(X=>M[X.title]=!0),ys(M)},children:"Select all"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1946,columnNumber:15},this),e.jsxDEV(ne,{variant:"ghost",onClick:()=>{const M={};(It||[]).forEach(X=>M[X.title]=!1),ys(M)},children:"Unselect all"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1956,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1945,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>{xs(!1),ls(null)},children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1968,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",onClick:async()=>{try{xs(!1);const M=we.current;if(!M)return;ft(!0),ks(!0),Gt([]),jt(0),re("Scanning book...");const X=await M.arrayBuffer(),he=await Aa(()=>import("https://esm.sh/pdfjs-dist@4.7.76/build/pdf.mjs"),[]),Ee="https://esm.sh/pdfjs-dist@4.7.76/build/pdf.worker.mjs";he.GlobalWorkerOptions&&(he.GlobalWorkerOptions.workerSrc=Ee);const Ve=await he.getDocument({data:X}).promise;Vt(Ve.numPages);const Ce=[],He=Dt=>{let it=Dt.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(it)&&it.length<=60&&(it=it.replace(/\s+/g,"")),it},Rt=Dt=>{const it=Dt.split(/\n/).map(ts=>ts.trim()).filter(Boolean).slice(0,80),mt=/^(?:\d+(?:\s+\d\/\d)?|\d+\/\d|\d+(?:\.\d+)?|[¼½¾⅓⅔⅛⅜⅝��])(?:\s*[a-zA-Z]+)?\b/;let ms=0;for(const ts of it)(mt.test(ts)||/^[•\-*]\s+/.test(ts))&&ms++;return ms>=3},kt=[];for(let Dt=1;Dt<=Ve.numPages;Dt++){const ms=(await(await Ve.getPage(Dt)).getTextContent()).items.map(nt=>String(nt.str)).join(`
`);if(Ce.push(ms),jt(Dt),/\bingredients?\b/i.test(ms)||Rt(ms)){kt.push(Dt);const nt=ms.split(/\n/).map(He).filter(Boolean);let hs="";for(let Ye=0;Ye<Math.min(nt.length,10);Ye++){const Te=nt[Ye];if(/^[A-Z][A-Za-z0-9\-\'\s]{2,80}$/.test(Te)||/^([A-Z]\s+){2,}[A-Z][\s:]*$/.test(Te)){hs=Te.replace(/\s+/g," ").trim();break}}Gt(Ye=>[...Ye,{page:Dt,title:hs||`Candidate p.${Dt}`}])}}try{const Dt=(Ye,Te)=>Object.fromEntries(Object.entries(Ye).sort((Be,dt)=>dt[1]-Be[1]).slice(0,Te)),it={},mt={},ts=Ce.join(`
`).toLowerCase().replace(/[^a-z\s]/g," ").split(/\s+/).filter(Ye=>Ye.length>=3&&Ye.length<=24);for(let Ye=0;Ye<ts.length;Ye++){const Te=ts[Ye];if(it[Te]=(it[Te]||0)+1,Ye<ts.length-1){const Be=`${ts[Ye]} ${ts[Ye+1]}`;Be.length>=5&&Be.length<=40&&(mt[Be]=(mt[Be]||0)+1)}}const nt=localStorage.getItem("kb:cook")||"{}",hs=JSON.parse(nt);hs.terms=Dt({...hs.terms,...it},400),hs.bigrams=Dt({...hs.bigrams,...mt},600),hs.books=Array.from(new Set([...hs.books||[],M.name.replace(/\.[^.]+$/,"")])),localStorage.setItem("kb:cook",JSON.stringify(hs))}catch{}const wt=kt.sort((Dt,it)=>Dt-it),ut=[];for(let Dt=0;Dt<wt.length;Dt++){const it=wt[Dt],mt=Dt+1<wt.length?wt[Dt+1]-1:Ce.length,nt=Ce.slice(it-1,mt).join(`
`).split(/\n/).map(He).join(`
`).split(/\n/).map(He).filter(Boolean),hs=nt.map(Zt=>Zt.toLowerCase()),Ye=Zt=>hs.findIndex(bt=>Zt.some($t=>bt.startsWith($t)));let Te=Ye(["ingredients","ingredient"]),Be=Ye(["instructions","directions","method","steps","preparation","procedure"]);if(Te<0){const Zt=/^(?:\d+(?:\s+\d\/\d)?|\d+\/\d|\d+(?:\.\d+)?|[¼½¾⅓⅔⅛⅜⅝⅞])(?:\s*[a-zA-Z]+)?\b/;for(let bt=0;bt<Math.min(nt.length,80);bt++)if(Zt.test(nt[bt])||/^[•\-*]\s+/.test(nt[bt])){Te=bt-1;break}}if(Be<0&&Te>=0){for(let Zt=Te+1;Zt<Math.min(nt.length,200);Zt++)if(/^(instructions|directions|method|steps|preparation|procedure)\b/i.test(nt[Zt])||/^\d+\.|^Step\s*\d+/i.test(nt[Zt])){Be=Zt;break}}const dt=(Zt,bt)=>nt.slice(Zt+1,bt>Zt?bt:void 0).filter(Boolean),vt=Te>=0?dt(Te,Be>=0?Be:nt.length):[],lt=Be>=0?dt(Be,nt.length):[];if(vt.length>=2||lt.length>=3){let Zt="";for(let bt=Math.max(0,Te-6);bt<Math.min(nt.length,Math.max(Te,8));bt++){const $t=nt[bt]||"";if(/^[A-Z][A-Za-z0-9\-\'\s]{2,80}$/.test($t)||/^([A-Z]\s+){2,}[A-Z][\s:]*$/.test($t)){Zt=$t.replace(/\s+/g," ").trim();break}}Zt||(Zt=nt[0]||`${M.name.replace(/\.[^.]+$/,"")} p.${it}`),ut.push({title:Zt,ingredients:vt,instructions:lt,tags:[M.name.replace(/\.[^.]+$/,"")]})}}if(ut.length){const Dt=new Blob([JSON.stringify(ut)],{type:"application/json"}),it=new File([Dt],`${M.name.replace(/\.[^.]+$/,"")}.json`,{type:"application/json"}),{added:mt}=await a([it]);re(`Imported ${mt} recipes from book.`)}else re("No recipes detected.")}catch(M){re(`Failed: ${M?.message||"error"}`)}finally{ft(!1),ks(!1),ls(null),ys({}),we.current=null}},children:"Import all (auto)"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1977,columnNumber:15},this),e.jsxDEV(ne,{onClick:async()=>{try{xs(!1),ye("importing");const M=Object.keys(zs).filter(X=>zs[X]);if(localStorage.setItem("pdf:index:allow",JSON.stringify(M)),we.current){const{added:X}=await r([we.current]);re(`Imported ${X} recipe(s) from book.`),ye("done")}}catch(M){re(`Failed: ${M?.message||"error"}`),ye(null)}finally{ls(null),ys({}),we.current=null}},children:"Accept"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2226,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1967,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1944,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1917,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1916,columnNumber:7},this),e.jsxDEV(ss,{open:ot,onOpenChange:ft,children:e.jsxDEV(is,{className:"max-w-md",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Scanning book…"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2266,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2265,columnNumber:11},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Page ",Math.min(xt,At)," / ",At]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2268,columnNumber:11},this),e.jsxDEV("div",{className:"h-2 w-full rounded bg-muted",children:e.jsxDEV("div",{className:"h-2 rounded bg-primary transition-all",style:{width:`${Math.round(xt/Math.max(At,1)*100)}%`}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2272,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2271,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2264,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2263,columnNumber:7},this),e.jsxDEV(ss,{open:Qt,onOpenChange:ks,children:e.jsxDEV(is,{className:"max-w-md",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Detected recipes"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2286,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2285,columnNumber:11},this),e.jsxDEV("div",{className:"max-h-[50vh] overflow-auto border rounded p-2 text-sm space-y-1",children:Yt.length===0?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Scanning…"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2290,columnNumber:15},this):Yt.map(M=>e.jsxDEV("div",{className:"flex items-center justify-between gap-2 text-xs",children:[e.jsxDEV("span",{className:"truncate",title:M.title,children:M.title||`Candidate p.${M.page}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2297,columnNumber:19},this),e.jsxDEV("span",{className:"text-muted-foreground",children:["p.",M.page]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2300,columnNumber:19},this)]},`${M.page}-${M.title}`,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2293,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2288,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:e.jsxDEV(ne,{size:"sm",variant:"default",disabled:!_s||!Yt.length,onClick:async()=>{try{const M=_s,X=Yt.map(Ce=>Ce.page).sort((Ce,He)=>Ce-He),he=Ce=>{let He=Ce.replace(/\s+/g," ").trim();return/^([A-Z]\s+){2,}[A-Z](?:\s+\d+)?[\s:]*$/.test(He)&&He.length<=60&&(He=He.replace(/\s+/g,"")),He},Ee=[],Ve=oe||"Book";for(let Ce=0;Ce<X.length;Ce++){const He=X[Ce],Rt=Ce+1<X.length?X[Ce+1]-1:M.length,ut=M.slice(He-1,Rt).join(`
`).split(/\n/).map(he).join(`
`).split(/\n/).map(he).filter(Boolean),Dt=ut.map(Ye=>Ye.toLowerCase()),it=Ye=>Dt.findIndex(Te=>Ye.some(Be=>Te.startsWith(Be)));let mt=it(["ingredients","ingredient"]),ms=it(["instructions","directions","method","steps","preparation","procedure"]);if(mt<0){const Ye=/^(?:\d+(?:\s+\d\/\d)?|\d+\/\d|\d+(?:\.\d+)?|[¼½¾⅓⅔⅛⅜⅝⅞])(?:\s*[a-zA-Z]+)?\b/;for(let Te=0;Te<Math.min(ut.length,80);Te++)if(Ye.test(ut[Te])||/^[•\-*]\s+/.test(ut[Te])){mt=Te-1;break}}if(ms<0&&mt>=0){for(let Ye=mt+1;Ye<Math.min(ut.length,200);Ye++)if(/^(instructions|directions|method|steps|preparation|procedure)\b/i.test(ut[Ye])||/^\d+\.|^Step\s*\d+/i.test(ut[Ye])){ms=Ye;break}}const ts=(Ye,Te)=>ut.slice(Ye+1,Te>Ye?Te:void 0).filter(Boolean),nt=mt>=0?ts(mt,ms>=0?ms:ut.length):[],hs=ms>=0?ts(ms,ut.length):[];if(nt.length>=2||hs.length>=3){let Ye="";for(let Te=Math.max(0,mt-6);Te<Math.min(ut.length,Math.max(mt,8));Te++){const Be=ut[Te]||"";if(/^[A-Z][A-Za-z0-9\-\'\s]{2,80}$/.test(Be)||/^([A-Z]\s+){2,}[A-Z][\s:]*$/.test(Be)){Ye=Be.replace(/\s+/g," ").trim();break}}Ye||(Ye=ut[0]||`${Ve} p.${He}`),Ee.push({title:Ye,ingredients:nt,instructions:hs,tags:[Ve]})}}if(Ee.length){const Ce=oe||"book",He={},Rt=Ee.filter(Dt=>{const it=(Dt.title||"").toLowerCase();return He[it]?!1:(He[it]=!0,!0)}).map(Dt=>({...Dt,extra:{...Dt.extra||{},book:Ce,source:"pdf-detected"}})),kt=new Blob([JSON.stringify(Rt)],{type:"application/json"}),wt=new File([kt],`${Ce}.json`,{type:"application/json"}),{added:ut}=await a([wt]);re(`Imported ${ut} recipes from detected list.`)}}catch(M){re(`Failed: ${M?.message||"error"}`)}finally{ks(!1),Gt([]),Ys(null)}},children:"Import detected"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2306,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2305,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2284,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2283,columnNumber:7},this),E.length>0&&e.jsxDEV("div",{className:"rounded-md border p-3 text-sm",children:[e.jsxDEV("div",{className:"font-medium mb-2",children:"Errors"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2462,columnNumber:11},this),e.jsxDEV("ul",{className:"space-y-1 list-disc pl-5",children:E.map((M,X)=>e.jsxDEV("li",{children:[e.jsxDEV("span",{className:"font-mono",children:M.file},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2466,columnNumber:17},this),": ",M.error]},X,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2465,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2463,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2461,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3","data-echo-key":"section:recipes:filters",children:[e.jsxDEV("div",{className:"flex-1 relative","data-echo-key":"field:recipes:query",children:[e.jsxDEV("input",{ref:ti,value:W,onChange:M=>{se(M.target.value),P(!0)},onFocus:()=>P(!0),onBlur:()=>setTimeout(()=>P(!1),200),placeholder:J("recipeSearch.searchByName"),className:"w-full rounded-md border bg-background px-3 py-2 outline-none focus:ring-2 focus:ring-ring"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2477,columnNumber:11},this),C&&$.length>0&&e.jsxDEV("div",{ref:ee,className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:$.map(M=>e.jsxDEV("button",{type:"button",onClick:()=>{se(M),P(!1),ti.current?.focus()},className:"w-full text-left px-3 py-2 hover:bg-muted transition-colors text-sm",children:[e.jsxDEV(qi,{className:"inline h-3 w-3 mr-2 opacity-50"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2505,columnNumber:19},this),M]},M,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2495,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2490,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2476,columnNumber:9},this),e.jsxDEV("select",{value:de,onChange:M=>fe(M.target.value),className:"rounded-md border bg-background px-2 py-2 text-sm max-w-[220px]","data-echo-key":"filter:recipes:cuisine",children:[e.jsxDEV("option",{value:"",children:"Cuisine"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2518,columnNumber:11},this),gi("cuisines").map(M=>e.jsxDEV("option",{value:M.slug,children:M.label},M.slug,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2520,columnNumber:13},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2512,columnNumber:9},this),e.jsxDEV("select",{value:H,onChange:M=>le(M.target.value),className:"rounded-md border bg-background px-2 py-2 text-sm max-w-[220px]","data-echo-key":"filter:recipes:course",children:[e.jsxDEV("option",{value:"",children:"Course"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2531,columnNumber:11},this),gi("course").map(M=>e.jsxDEV("option",{value:M.slug,children:M.label},M.slug,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2533,columnNumber:13},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2525,columnNumber:9},this),e.jsxDEV("select",{value:ue,onChange:M=>K(M.target.value),className:"rounded-md border bg-background px-2 py-2 text-sm max-w-[220px]","data-echo-key":"filter:recipes:dietary",children:[e.jsxDEV("option",{value:"",children:"Dietary"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2544,columnNumber:11},this),gi("diets").map(M=>e.jsxDEV("option",{value:M.slug,children:M.label},M.slug,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2546,columnNumber:13},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2538,columnNumber:9},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[U.length," / ",s.length," recipes"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2551,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2472,columnNumber:7},this),s.length===0?e.jsxDEV("div",{className:"rounded-md border p-6 text-center text-sm text-muted-foreground",children:"No recipes yet. Drop files above or import from URL."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2557,columnNumber:9},this):V==="cards"?e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3","data-echo-key":"section:recipes:results",children:U.map(M=>e.jsxDEV(E0,{r:M,inTrash:wi,onPreview:()=>Mi(M),onFav:()=>b(M.id),onRate:X=>D(M.id,X),onUpdateTags:X=>u(M.id,X),onTrash:()=>M.deletedAt?x(M.id):p(M.id),onDestroy:()=>{confirm("Delete this recipe forever?")&&v(M.id)},selectMode:Le,selected:us.includes(M.id),onToggleSelect:()=>at(M.id)},M.id,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2566,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2561,columnNumber:9},this):V==="grid4"?e.jsxDEV("div",{className:"grid gap-3 grid-cols-2 md:grid-cols-3 xl:grid-cols-4","data-echo-key":"section:recipes:results",children:U.filter(Boolean).map(M=>{const X=M.id||Math.random().toString(36).slice(2),he=us.includes(M.id);return e.jsxDEV("div",{className:je("flex items-start gap-2 rounded border p-3 glow transition-colors",Le&&he?"border-primary bg-primary/5 dark:bg-primary/15":void 0),"data-echo-key":"card:recipes:result",children:[e.jsxDEV("div",{className:"relative h-12 w-16 shrink-0 overflow-hidden rounded bg-muted",children:[M.imageDataUrls?.[0]?e.jsxDEV("img",{src:M.imageDataUrls[0],alt:"",className:"h-full w-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2607,columnNumber:21},this):null,Le&&e.jsxDEV("button",{type:"button","aria-pressed":he,onClick:()=>at(M.id),className:je("absolute left-1.5 top-1.5 rounded-full px-2 py-0.5 text-[10px] font-semibold shadow focus-visible:outline-none focus-visible:ring",he?"bg-primary text-primary-foreground":"bg-background/90 text-foreground hover:bg-primary hover:text-primary-foreground"),children:J(he?"recipeSearch.selected":"recipeSearch.select")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2615,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2605,columnNumber:17},this),e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV("div",{className:"line-clamp-2 text-sm font-medium",title:M.title,children:M.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2631,columnNumber:19},this),e.jsxDEV("div",{className:"line-clamp-1 text-xs text-muted-foreground",children:M.tags?.join(" �� ")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2634,columnNumber:19},this),e.jsxDEV("div",{className:"mt-1 flex gap-2",children:[e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:()=>Mi(M),children:"Preview"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2638,columnNumber:21},this),e.jsxDEV(ne,{size:"sm",variant:"outline",asChild:!0,"data-echo-key":"cta:recipes:open",children:e.jsxDEV("a",{href:`/recipe/${M.id}/view`,children:[e.jsxDEV(Ar,{className:"mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2652,columnNumber:25},this),"Open"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2651,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2645,columnNumber:21},this),wi?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>x(M.id),title:J("recipeSearch.restore"),children:e.jsxDEV(Nn,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2664,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2658,columnNumber:25},this),e.jsxDEV(ne,{size:"sm",variant:"destructive",onClick:()=>{confirm("Delete forever?")&&v(M.id)},title:J("recipeSearch.deleteForever"),children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2674,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2666,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2657,columnNumber:23},this):e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>p(M.id),title:"Move to trash",children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2684,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2678,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2637,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2630,columnNumber:17},this)]},X,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2595,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2587,columnNumber:9},this):e.jsxDEV("div",{className:"divide-y rounded-lg border glow","data-echo-key":"section:recipes:results",children:U.filter(Boolean).map(M=>{const X=M.id||Math.random().toString(36).slice(2),he=us.includes(M.id);return e.jsxDEV("div",{className:je("flex items-start gap-3 p-3 transition-colors",Le&&he?"bg-primary/5 dark:bg-primary/15":void 0),"data-echo-key":"card:recipes:result",children:[e.jsxDEV("div",{className:"relative h-16 w-20 overflow-hidden rounded bg-muted",children:[M.imageDataUrls?.[0]?e.jsxDEV("img",{src:M.imageDataUrls[0],alt:"",className:"h-full w-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2714,columnNumber:21},this):null,Le&&e.jsxDEV("button",{type:"button","aria-pressed":he,onClick:()=>at(M.id),className:je("absolute left-1.5 top-1.5 rounded-full px-2 py-0.5 text-[10px] font-semibold shadow focus-visible:outline-none focus-visible:ring",he?"bg-primary text-primary-foreground":"bg-background/90 text-foreground hover:bg-primary hover:text-primary-foreground"),children:J(he?"recipeSearch.selected":"recipeSearch.select")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2722,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2712,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"line-clamp-1 font-medium",children:M.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2739,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:M.createdAt?new Date(M.createdAt).toLocaleDateString():"-"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2740,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2738,columnNumber:19},this),e.jsxDEV("div",{className:"line-clamp-1 text-xs text-muted-foreground",children:M.tags?.join(" · ")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2746,columnNumber:19},this),e.jsxDEV("div",{className:"mt-1 flex gap-2",children:[e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:()=>Mi(M),children:"Preview"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2750,columnNumber:21},this),e.jsxDEV(ne,{size:"sm",variant:"outline",asChild:!0,"data-echo-key":"cta:recipes:open",children:e.jsxDEV("a",{href:`/recipe/${M.id}/view`,children:[e.jsxDEV(Ar,{className:"mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2764,columnNumber:25},this),"Open"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2763,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2757,columnNumber:21},this),wi?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>x(M.id),title:J("recipeSearch.restore"),children:e.jsxDEV(Nn,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2776,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2770,columnNumber:25},this),e.jsxDEV(ne,{size:"sm",variant:"destructive",onClick:()=>{confirm("Delete forever?")&&v(M.id)},title:J("recipeSearch.deleteForever"),children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2786,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2778,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2769,columnNumber:23},this):e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>p(M.id),title:"Move to trash",children:e.jsxDEV(vi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2796,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2790,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2749,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2737,columnNumber:17},this)]},X,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2702,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2694,columnNumber:9},this),e.jsxDEV("div",{className:"mt-6 text-xs text-muted-foreground text-center",children:["Total recipes in system: ",s.length]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2807,columnNumber:7},this),e.jsxDEV("details",{className:"rounded-md border p-3 text-sm",children:[e.jsxDEV("summary",{className:"cursor-pointer select-none",children:"Knowledge learned from imports"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2812,columnNumber:9},this),e.jsxDEV("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:(()=>{try{const M=localStorage.getItem("kb:cook");if(!M)return e.jsxDEV("div",{className:"text-xs text-muted-foreground col-span-2",children:"No knowledge yet."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2821,columnNumber:19},this);const X=JSON.parse(M)||{},he=(Ee,Ve)=>Object.entries(Ee||{}).sort((Ce,He)=>He[1]-Ce[1]).slice(0,Ve);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Top terms"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2833,columnNumber:21},this),e.jsxDEV("ul",{className:"list-disc pl-5 space-y-0.5 text-xs",children:he(X.terms,20).map(([Ee,Ve])=>e.jsxDEV("li",{children:[Ee," ",e.jsxDEV("span",{className:"text-muted-foreground",children:["(",Ve,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2838,columnNumber:27},this)]},Ee,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2836,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2834,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2832,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Top phrases"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2844,columnNumber:21},this),e.jsxDEV("ul",{className:"list-disc pl-5 space-y-0.5 text-xs",children:he(X.bigrams,20).map(([Ee,Ve])=>e.jsxDEV("li",{children:[Ee," ",e.jsxDEV("span",{className:"text-muted-foreground",children:["(",Ve,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2849,columnNumber:27},this)]},Ee,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2847,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2845,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2843,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2831,columnNumber:17},this)}catch{return e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Unable to read knowledge store."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2858,columnNumber:17},this)}})()},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2815,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2811,columnNumber:7},this),e.jsxDEV(ss,{open:!!Hs,onOpenChange:M=>!M&&Mi(null),children:e.jsxDEV(is,{className:"max-w-2xl",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:Hs?.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2870,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2869,columnNumber:11},this),Hs&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-[240px_1fr] gap-4 items-start",children:[e.jsxDEV("div",{className:"rounded border overflow-hidden bg-muted/20",children:Hs.imageDataUrls?.[0]?e.jsxDEV("img",{src:Hs.imageDataUrls[0],alt:Hs.title,className:"w-full h-auto"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2876,columnNumber:19},this):e.jsxDEV("div",{className:"h-40 flex items-center justify-center text-xs text-muted-foreground",children:"No image"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2882,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2874,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm space-y-2",children:[Hs.tags?.length?e.jsxDEV("div",{className:"text-muted-foreground",children:Hs.tags.join(" · ")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2889,columnNumber:19},this):null,Hs.ingredients?.length?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:"Ingredients"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2895,columnNumber:21},this),e.jsxDEV("ul",{className:"list-disc pl-5 max-h-32 overflow-auto",children:Hs.ingredients.slice(0,20).map((M,X)=>e.jsxDEV("li",{children:M},X,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2898,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2896,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2894,columnNumber:19},this):null,Hs.instructions?.length?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:"Instructions"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2905,columnNumber:21},this),e.jsxDEV("div",{className:"max-h-32 overflow-auto whitespace-pre-wrap hide-scrollbar",children:Hs.instructions.join(`
`)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2906,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2904,columnNumber:19},this):null,e.jsxDEV("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxDEV(ne,{size:"sm",variant:"outline",asChild:!0,children:e.jsxDEV("a",{href:`/recipe/${Hs.id}/view`,children:[e.jsxDEV(Ar,{className:"mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2914,columnNumber:23},this),"Open"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2913,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2912,columnNumber:19},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>{const M=encodeURIComponent(`${Hs.title}`);location.href=`sms:?&body=${M}`},children:"SMS"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2918,columnNumber:19},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>window.print(),children:"Print"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2928,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2911,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2887,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2873,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2868,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:2867,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeSearch.tsx",lineNumber:1105,columnNumber:5},this)}function k0({open:s,onClose:t,images:i,index:n,onPrev:a,onNext:o,onToggleFavorite:l,className:r}){if(h.useEffect(()=>{if(!s)return;const f=b=>{b.key==="Escape"&&t(),b.key==="ArrowLeft"&&a(),b.key==="ArrowRight"&&o()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[s,t,a,o]),!s)return null;const d=i[n],c=d?.src;return e.jsxDEV("div",{className:je("fixed inset-0 z-50 bg-black/90 text-white",r),onContextMenu:f=>f.preventDefault(),children:[e.jsxDEV("button",{className:"absolute top-4 right-4 p-2 rounded bg-white/10 hover:bg-white/20",onClick:t,"aria-label":"Close",children:e.jsxDEV(cn,{},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:55,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:50,columnNumber:7},this),e.jsxDEV("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 rounded bg-white/10 hover:bg-white/20",onClick:a,"aria-label":"Previous",children:e.jsxDEV(xd,{},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:62,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded bg-white/10 hover:bg-white/20",onClick:o,"aria-label":"Next",children:e.jsxDEV(Ha,{},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:69,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("button",{className:je("absolute left-1/2 -translate-x-1/2 top-4 p-2 rounded bg-white/10 hover:bg-white/20",d?.favorite&&"text-yellow-300"),onClick:()=>d&&l(d.id),"aria-label":"Favorite",children:e.jsxDEV(Ga,{},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:79,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:71,columnNumber:7},this),e.jsxDEV("div",{className:"h-full w-full flex items-center justify-center p-6",children:d?.unsupported?e.jsxDEV("div",{className:"text-sm text-white/80",children:["Unsupported format for preview: ",d?.name]},void 0,!0,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:83,columnNumber:11},this):c?e.jsxDEV("img",{src:c,alt:d?.name,className:"max-h-full max-w-full object-contain select-none",onError:f=>{const b=f.currentTarget;b.onerror=null,b.src="/placeholder.svg"}},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:87,columnNumber:11},this):null},void 0,!1,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:81,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/GalleryLightbox.tsx",lineNumber:46,columnNumber:5},this)}const Ds=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV(Jf,{ref:n,className:je("relative overflow-hidden",s),...i,children:[e.jsxDEV(Mx,{className:"h-full w-full rounded-[inherit]",children:t},void 0,!1,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:15,columnNumber:5},void 0),e.jsxDEV(cb,{},void 0,!1,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:18,columnNumber:5},void 0),e.jsxDEV(_x,{},void 0,!1,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:19,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:10,columnNumber:3},void 0));Ds.displayName=Jf.displayName;const cb=h.forwardRef(({className:s,orientation:t="vertical",...i},n)=>e.jsxDEV(eh,{ref:n,orientation:t,className:je("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:e.jsxDEV(Ox,{className:"relative flex-1 rounded-full bg-border"},void 0,!1,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:41,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/scroll-area.tsx",lineNumber:28,columnNumber:3},void 0));cb.displayName=eh.displayName;const Vd=h.forwardRef(({className:s,value:t,...i},n)=>e.jsxDEV(th,{ref:n,className:je("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:e.jsxDEV(Fx,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}},void 0,!1,{fileName:"/app/code/client/components/ui/progress.tsx",lineNumber:18,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/progress.tsx",lineNumber:10,columnNumber:3},void 0));Vd.displayName=th.displayName;function S0({open:s,onClose:t,images:i,title:n,className:a}){const[o,l]=h.useState(0),r=i.length||1;h.useEffect(()=>{s&&l(0)},[s]);const d=i[o]??null,c=(o+1)/r*100,f=h.useMemo(()=>{if(!d)return[];const p=new Set;return d.name&&p.add(d.name),(d.tags||[]).forEach(x=>p.add(x)),Array.from(p)},[d]),b=()=>l(p=>(p-1+r)%r),D=()=>l(p=>(p+1)%r),u=()=>{if(!d?.src)return;const p=document.createElement("a");p.href=d.src,p.download=`${d.name||"lookbook"}.jpg`,p.rel="noreferrer",p.click()};return e.jsxDEV(ss,{open:s,onOpenChange:p=>!p&&t(),children:e.jsxDEV(is,{className:je("max-w-6xl w-full border-0 bg-[radial-gradient(circle_at_top,_rgba(23,37,84,0.68),_rgba(15,23,42,0.88))] text-white shadow-2xl","p-0 md:p-6",a),children:[e.jsxDEV(ns,{className:"flex flex-row items-center justify-between space-y-0 px-6 pt-6",children:[e.jsxDEV("div",{children:[e.jsxDEV(as,{className:"text-lg font-semibold tracking-wide",children:["Look Book",n?` · ${n}`:""]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs uppercase tracking-[0.24em] text-white/60",children:[o+1," / ",r]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV(ne,{type:"button",variant:"ghost",className:"h-9 w-9 rounded-full border border-white/20 text-white hover:bg-white/10",onClick:t,"aria-label":"Close look book",children:e.jsxDEV(cn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:94,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:87,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:86,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-6 px-6 pb-6 md:grid-cols-[minmax(0,1fr),260px]",children:[e.jsxDEV("div",{className:"relative isolate overflow-hidden rounded-2xl border border-white/10 bg-[radial-gradient(circle_at_center,_rgba(255,255,255,0.12),_transparent_70%)] p-6",children:[e.jsxDEV("div",{className:"absolute inset-0 -z-10 bg-[linear-gradient(120deg,rgba(59,130,246,0.12),rgba(236,72,153,0.06))]"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:101,columnNumber:13},this),d?.src?e.jsxDEV("img",{src:d.src,alt:d.name||"Look book item",className:"h-full w-full rounded-xl object-contain shadow-[0_40px_120px_rgba(14,165,233,0.35)] transition duration-500"},d.id,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:103,columnNumber:15},this):e.jsxDEV("div",{className:"flex h-[420px] items-center justify-center rounded-xl border border-dashed border-white/20 text-sm text-white/70",children:"Image unavailable"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:110,columnNumber:15},this),e.jsxDEV("button",{type:"button",className:"absolute left-5 top-1/2 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full bg-black/40 text-white shadow-lg backdrop-blur transition hover:bg-black/60",onClick:b,"aria-label":"Previous",children:e.jsxDEV(xd,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("button",{type:"button",className:"absolute right-5 top-1/2 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full bg-black/40 text-white shadow-lg backdrop-blur transition hover:bg-black/60",onClick:D,"aria-label":"Next",children:e.jsxDEV(Ha,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:128,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV("div",{className:"absolute left-6 right-6 bottom-6 space-y-3 rounded-xl bg-black/40 p-4 backdrop-blur",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-base font-semibold",children:d?.name||"Untitled capture"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-white/70",children:d?.description||"Captured in the Echo lab collection."},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:136,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV(ne,{type:"button",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:u,children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:146,columnNumber:19},this),"Download"]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:140,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:131,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:f.length===0?e.jsxDEV(et,{variant:"outline",className:"border-white/30 text-white/80",children:"Untagged"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:152,columnNumber:19},this):f.map(p=>e.jsxDEV(et,{variant:"outline",className:"border-white/30 text-white/80",children:p},p,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:157,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:150,columnNumber:15},this),e.jsxDEV(Vd,{value:c,className:"h-1.5"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner",children:[e.jsxDEV("h4",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-white/70",children:"Storyboard"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("p",{className:"mt-2 text-xs text-white/70",children:"Use the column to jump quickly between curated captures. Notes sync with feedback threads in the collaboration panel for frictionless review."},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:176,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:172,columnNumber:13},this),e.jsxDEV(Ds,{className:"h-[420px] rounded-xl border border-white/10 bg-white/5",children:e.jsxDEV("div",{className:"space-y-2 p-3",children:i.map((p,x)=>{const S=x===o;return e.jsxDEV("button",{type:"button",onClick:()=>l(x),className:je("flex w-full items-center gap-3 rounded-lg border px-3 py-2 text-left transition",S?"border-white/60 bg-white/15 text-white shadow-lg":"border-white/10 text-white/70 hover:border-white/30 hover:bg-white/10"),children:[e.jsxDEV("div",{className:"flex h-14 w-16 flex-shrink-0 items-center justify-center overflow-hidden rounded-md border border-white/15 bg-black/30",children:p.src?e.jsxDEV("img",{src:p.src,alt:p.name||"Look book item",className:"h-full w-full object-cover"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:199,columnNumber:27},this):e.jsxDEV("span",{className:"text-[10px]",children:"No image"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:205,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:197,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"truncate text-sm font-semibold",children:p.name||"Untitled"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:209,columnNumber:25},this),e.jsxDEV("div",{className:"truncate text-[11px] text-white/60",children:p.tags&&p.tags.join(", ")||"No tags"},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:212,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:208,columnNumber:23},this)]},p.id,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:186,columnNumber:21},this)})},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:182,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:181,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:171,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:70,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/LookBookShowcase.tsx",lineNumber:69,columnNumber:5},this)}const j0=[{key:"crop",label:"Crop",icon:lg},{key:"hand",label:"Pan",icon:cg},{key:"color",label:"Color pick",icon:Eh}],V0=[],C0=[];function R0({open:s,onClose:t,onSave:i,image:n,adjustments:a,activeTool:o,onSelectTool:l,layers:r,visibleLayers:d,onToggleLayer:c,onResetAdjustments:f,onQuickAction:b,activeQuickAction:D}){const[u,p]=h.useState(100),[x,S]=h.useState(32),[m,v]=h.useState(!0),[g,N]=h.useState({x:10,y:10,width:80,height:80}),[w,A]=h.useState(null),I=h.useMemo(()=>r.map((ie,R)=>({...ie,order:R})),[r]),B=h.useRef(null),W=ie=>{if(!w)return;const R=ie.movementX,F=ie.movementY,k=.1;N(Q=>{const J={...Q},O=w;return O.includes("w")&&(J.x=Math.max(0,Math.min(Q.x+R*k,Q.x+Q.width-5)),J.width=Math.max(5,Math.min(100,Q.width-R*k))),O.includes("e")&&(J.width=Math.max(5,Math.min(100-J.x,Q.width+R*k))),O.includes("n")&&(J.y=Math.max(0,Math.min(Q.y+F*k,Q.y+Q.height-5)),J.height=Math.max(5,Math.min(100,Q.height-F*k))),O.includes("s")&&(J.height=Math.max(5,Math.min(100-J.y,Q.height+F*k))),J})},se=()=>{A(null)};return s?e.jsxDEV("div",{ref:B,className:"fixed inset-0 z-[200] flex items-center justify-center bg-gradient-to-br from-black/70 via-slate-900/65 to-slate-950/80 backdrop-blur-lg",onMouseMove:W,onMouseUp:se,onMouseLeave:se,children:[e.jsxDEV("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(51,133,255,0.25),_transparent_60%)] opacity-50"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:150,columnNumber:7},this),e.jsxDEV("div",{className:"relative z-[210] mx-auto flex h-[92vh] w-[92vw] flex-col overflow-hidden rounded-[36px] border border-slate-300/50 dark:border-slate-700/60 bg-white dark:bg-slate-950/95 shadow-[0_40px_160px_rgba(15,23,42,0.55)]",children:[e.jsxDEV("header",{className:"flex items-center justify-between border-b border-slate-300/50 dark:border-slate-700/60 bg-slate-50 dark:bg-slate-900/80 px-8 py-4 text-xs uppercase tracking-[0.35em] text-slate-900 dark:text-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("span",{children:"Studio overlay"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("span",{className:"rounded-full border border-slate-300/60 dark:border-slate-500/50 bg-slate-100 dark:bg-black/30 px-3 py-1 text-[11px] text-slate-700 dark:text-slate-300",children:n?.name??"No image"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:154,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{size:"sm",className:"rounded-full bg-sky-500 px-5 text-black hover:bg-sky-400",onClick:i,children:"Save"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:161,columnNumber:13},this),o==="crop"&&e.jsxDEV(ne,{size:"sm",className:"rounded-full px-4 bg-amber-600 hover:bg-amber-700 text-white",onClick:i,children:"Apply Crop"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:169,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:"secondary",className:"rounded-full px-4",onClick:t,children:"Close"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:177,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:153,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-1 gap-4 overflow-hidden px-6 py-6",children:[e.jsxDEV("aside",{className:"flex w-[120px] flex-col gap-3 rounded-3xl border border-slate-300/50 dark:border-slate-700/60 bg-slate-100 dark:bg-black/35 p-4",children:[e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-900 dark:text-slate-300",children:"Tools"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:j0.map(ie=>e.jsxDEV("button",{onClick:()=>l(ie.key),className:je("flex aspect-square items-center justify-center rounded-xl border transition",o===ie.key?"border-sky-400 bg-sky-500/20 text-sky-700 dark:text-sky-100":"border-slate-300/50 dark:border-slate-700/60 text-slate-900 dark:text-slate-200 bg-slate-200 dark:bg-black/30 hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:bg-sky-500/10"),"aria-label":ie.label,children:e.jsxDEV(ie.icon,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:204,columnNumber:19},this)},ie.key,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:193,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV("main",{className:"relative flex min-w-0 flex-1 flex-col overflow-hidden rounded-3xl border border-slate-300/50 dark:border-slate-700/60 bg-slate-50 dark:bg-slate-900/80",children:[e.jsxDEV("div",{className:"flex items-center justify-between border-b border-slate-300/50 dark:border-slate-700/60 bg-slate-100 dark:bg-black/30 px-5 py-3 text-[11px] uppercase tracking-[0.3em] text-slate-900 dark:text-slate-300",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>S(ie=>Math.max(8,ie-4)),"aria-label":"Decrease grid size",children:e.jsxDEV(gd,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:218,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV("span",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/30 px-3 py-1 text-[10px] text-slate-900 dark:text-slate-100",children:["Grid ",x,"px"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:220,columnNumber:17},this),e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>S(ie=>Math.min(96,ie+4)),"aria-label":"Increase grid size",children:e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:228,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:212,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>p(ie=>Math.max(25,ie-10)),"aria-label":"Zoom out",children:e.jsxDEV(wh,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:237,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:232,columnNumber:17},this),e.jsxDEV("span",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/30 px-3 py-1 text-[10px] text-slate-900 dark:text-slate-100",children:[u,"%"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:239,columnNumber:17},this),e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>p(ie=>Math.min(400,ie+10)),"aria-label":"Zoom in",children:e.jsxDEV(kh,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:247,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:242,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:231,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-[10px]",children:[e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>p(100),"aria-label":"Reset view",children:e.jsxDEV(Jr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:256,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:251,columnNumber:17},this),e.jsxDEV("button",{className:"rounded-full border border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 p-2 text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200",onClick:()=>p(150),"aria-label":"Fit to screen",children:e.jsxDEV(dg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:263,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:258,columnNumber:17},this),e.jsxDEV("button",{className:je("rounded-full border p-2 transition",m?"border-sky-400/60 bg-sky-500/20 text-sky-700 dark:text-sky-100":"border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 text-slate-900 dark:text-slate-200 hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:text-sky-700 dark:hover:text-sky-200"),onClick:()=>v(ie=>!ie),"aria-label":"Toggle rulers",children:e.jsxDEV(eo,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:275,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:250,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:211,columnNumber:13},this),e.jsxDEV("div",{className:"relative flex-1 overflow-auto",children:[m&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"pointer-events-none absolute left-0 right-0 top-0 z-20 h-8 bg-[repeating-linear-gradient(to_right,rgba(148,163,184,0.45),rgba(148,163,184,0.45)_1px,transparent_1px,transparent_24px)] opacity-70"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:283,columnNumber:19},this),e.jsxDEV("div",{className:"pointer-events-none absolute bottom-0 top-0 left-0 z-20 w-8 bg-[repeating-linear-gradient(to_bottom,rgba(148,163,184,0.45),rgba(148,163,184,0.45)_1px,transparent_1px,transparent_24px)] opacity-70"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:284,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:282,columnNumber:17},this),e.jsxDEV("div",{className:"relative h-full w-full",children:e.jsxDEV("div",{className:je("absolute inset-0 flex items-center justify-center",m?"pl-16 pt-16 pr-10 pb-10":"p-10"),children:e.jsxDEV("div",{className:"relative flex h-full w-full min-h-[520px] min-w-[520px] items-center justify-center rounded-[32px]",style:{backgroundImage:"linear-gradient(0deg, transparent calc(100% - 1px), rgba(148,163,184,0.25) calc(100% - 1px)), linear-gradient(90deg, transparent calc(100% - 1px), rgba(148,163,184,0.25) calc(100% - 1px))",backgroundSize:`${x}px ${x}px`,transform:`scale(${u/100})`,transformOrigin:"center center"},children:n?e.jsxDEV("div",{className:"relative inline-block",children:[e.jsxDEV("img",{src:n.dataUrl||n.blobUrl,alt:n.name,className:"max-h-[70vh] max-w-[70vw] rounded-3xl border border-white/10 shadow-[0_45px_80px_rgba(14,165,233,0.35)]"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:306,columnNumber:25},this),o==="crop"&&e.jsxDEV("div",{className:"absolute inset-0 rounded-3xl",style:{background:"rgba(0, 0, 0, 0.5)",border:"2px dashed rgb(59, 130, 246)",boxSizing:"border-box",left:`${g.x}%`,top:`${g.y}%`,width:`${g.width}%`,height:`${g.height}%`},children:["nw","n","ne","w","e","sw","s","se"].map(ie=>e.jsxDEV("div",{onMouseDown:()=>A(ie),className:"absolute w-3 h-3 bg-blue-400 border border-white cursor-move hover:bg-blue-500",style:{...ie==="nw"&&{top:"-6px",left:"-6px",cursor:"nwse-resize"},...ie==="n"&&{top:"-6px",left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"},...ie==="ne"&&{top:"-6px",right:"-6px",cursor:"nesw-resize"},...ie==="w"&&{top:"50%",left:"-6px",transform:"translateY(-50%)",cursor:"ew-resize"},...ie==="e"&&{top:"50%",right:"-6px",transform:"translateY(-50%)",cursor:"ew-resize"},...ie==="sw"&&{bottom:"-6px",left:"-6px",cursor:"nesw-resize"},...ie==="s"&&{bottom:"-6px",left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"},...ie==="se"&&{bottom:"-6px",right:"-6px",cursor:"nwse-resize"}}},ie,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:325,columnNumber:31},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:312,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:305,columnNumber:23},this):e.jsxDEV("div",{className:"rounded-3xl border border-dashed border-slate-300/60 dark:border-slate-600/60 bg-slate-200 dark:bg-black/40 px-12 py-16 text-center text-xs uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:"No image selected"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:345,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:294,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:288,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:287,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:280,columnNumber:13},this),e.jsxDEV("footer",{className:"flex items-center justify-between border-t border-slate-700/60 bg-black/30 px-5 py-3 text-[10px] uppercase tracking-[0.3em] text-slate-300",children:[e.jsxDEV("span",{children:"Metadata · AI warm-up ready"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:355,columnNumber:15},this),e.jsxDEV("span",{className:"rounded-full border border-slate-600/60 bg-black/30 px-3 py-1 text-[10px]",children:["Exposure ",a.exposure," · Contrast ",a.contrast]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:354,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:210,columnNumber:11},this),e.jsxDEV("aside",{className:"flex w-[260px] flex-col gap-3 rounded-3xl border border-slate-700/60 bg-black/35 p-4",children:[e.jsxDEV(or,{title:"Adjustments",defaultOpen:!0,children:[e.jsxDEV("div",{className:"space-y-4 text-[11px] uppercase tracking-[0.3em] text-slate-300",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"flex items-center justify-between mb-2",children:["Exposure ",a.exposure]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:366,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("input",{type:"range",min:"-100",max:"100",value:a.exposure,className:"flex-1 h-1 cursor-pointer",disabled:!0,style:{opacity:.5}},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:368,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:367,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:365,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"flex items-center justify-between mb-2",children:["Contrast ",a.contrast]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:372,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("input",{type:"range",min:"-100",max:"100",value:a.contrast,className:"flex-1 h-1 cursor-pointer",disabled:!0,style:{opacity:.5}},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:374,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:373,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:371,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"flex items-center justify-between mb-2",children:["Warmth ",a.warmth]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:378,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("input",{type:"range",min:"-100",max:"100",value:a.warmth,className:"flex-1 h-1 cursor-pointer",disabled:!0,style:{opacity:.5}},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:380,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:379,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:377,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"flex items-center justify-between mb-2",children:["Saturation ",a.saturation]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:384,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("input",{type:"range",min:"-100",max:"100",value:a.saturation,className:"flex-1 h-1 cursor-pointer",disabled:!0,style:{opacity:.5}},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:386,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:385,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:383,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"flex items-center justify-between mb-2",children:["Focus ",a.focus]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV("input",{type:"range",min:"-100",max:"100",value:a.focus,className:"flex-1 h-1 cursor-pointer",disabled:!0,style:{opacity:.5}},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:392,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:391,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:389,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:364,columnNumber:15},this),e.jsxDEV(ne,{variant:"ghost",size:"sm",className:"mt-3 rounded-full px-4 w-full",onClick:f,children:"Reset"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:396,columnNumber:15},this),e.jsxDEV("div",{className:"text-[10px] text-slate-400 mt-2",children:"💡 Adjustments are displayed in the preview. Save to apply changes."},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:404,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:363,columnNumber:13},this),e.jsxDEV(or,{title:"Layers",children:e.jsxDEV("div",{className:"space-y-2",children:I.map(ie=>e.jsxDEV("div",{className:"flex items-center justify-between gap-2 rounded-2xl border border-slate-700/60 bg-black/30 px-3 py-2 text-[11px] uppercase tracking-[0.3em] text-slate-200",children:[e.jsxDEV("span",{children:ie.name},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:416,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{className:"rounded-full border border-slate-600/60 bg-black/40 px-2 text-[10px] transition hover:border-sky-400/40",onClick:()=>c(ie.key),children:d[ie.key]??!0?"Hide":"Show"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:418,columnNumber:23},this),ie.locked?e.jsxDEV("span",{className:"text-[10px] text-slate-400",children:"Locked"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:424,columnNumber:39},this):null]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:417,columnNumber:21},this)]},ie.key,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:412,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:410,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:409,columnNumber:13},this),e.jsxDEV(or,{title:"Quick actions",children:e.jsxDEV("div",{className:"grid gap-2 text-[11px] uppercase tracking-[0.3em] text-slate-300",children:V0.map(ie=>e.jsxDEV("button",{onClick:()=>b(ie),className:je("rounded-2xl border border-slate-700/60 bg-black/30 px-3 py-2 text-left transition",D===ie.key&&"border-sky-400 bg-sky-500/15 text-sky-100"),children:ie.label},ie.key,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:434,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:432,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:431,columnNumber:13},this),e.jsxDEV(or,{title:"Presets",children:e.jsxDEV("div",{className:"grid gap-2 text-[11px] uppercase tracking-[0.3em] text-slate-300",children:C0.map(ie=>e.jsxDEV("button",{onClick:()=>b(ie),className:je("rounded-2xl border border-slate-700/60 bg-black/30 px-3 py-2 text-left transition",D===ie.key&&"border-sky-400 bg-sky-500/15 text-sky-100"),children:ie.label},ie.key,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:451,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:449,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:448,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:362,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:152,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:143,columnNumber:5},this):null}function or({title:s,defaultOpen:t=!1,children:i}){const[n,a]=h.useState(t);return e.jsxDEV("div",{className:"rounded-2xl border border-slate-700/60 bg-black/30 p-3",children:[e.jsxDEV("button",{className:"flex w-full items-center justify-between text-[11px] uppercase tracking-[0.35em] text-slate-200",onClick:()=>a(o=>!o),children:[e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:485,columnNumber:9},this),e.jsxDEV(Bn,{className:je("h-4 w-4 transition-transform",n?"rotate-0":"-rotate-90")},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:486,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:481,columnNumber:7},this),n&&e.jsxDEV("div",{className:"mt-3 space-y-3 text-slate-100",children:i},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:493,columnNumber:16},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryOverlay.tsx",lineNumber:480,columnNumber:5},this)}function P0({totalCount:s,favoriteCount:t,recentCount:i,activeFilter:n,activeLookBookId:a,tagClusters:o,lookbooks:l,selectedIdsCount:r,surfaceClassName:d,onFilterChange:c,onLookbookChange:f,onTagSelect:b,onRestoreDemo:D,onCreateLookBook:u,onPreviewLookbook:p,onRenameLookBook:x,onDeleteLookBook:S,onDropFiles:m}){const[v,g]=h.useState(""),[N,w]=h.useState(!1),A=()=>{const B=v.trim();if(!B)return;u(B)&&g("")},I=B=>{B.preventDefault();const W=Array.from(B.dataTransfer?.files||[]).filter(se=>se.type.startsWith("image/"));W.length&&m(W),w(!1)};return e.jsxDEV("aside",{className:je("flex h-full flex-col overflow-hidden rounded-[32px] border",d),children:[e.jsxDEV("div",{className:"flex flex-1 flex-col gap-4 px-5 pb-4 pt-5",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-base font-semibold uppercase tracking-[0.3em] text-slate-900 dark:text-slate-100",children:"Library"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV("p",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:"Curate & explore"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:92,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:90,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-2 text-sm",children:[e.jsxDEV(lr,{icon:e.jsxDEV(Oa,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:97,columnNumber:19},this),label:"All photos",count:s,active:n==="all"&&!a,onClick:()=>{c("all"),f(null)}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV(lr,{icon:e.jsxDEV(Ga,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:107,columnNumber:19},this),label:"Favorites",count:t,active:n==="favorites",onClick:()=>{c("favorites"),f(null)}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:106,columnNumber:11},this),e.jsxDEV(lr,{icon:e.jsxDEV(qa,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:117,columnNumber:19},this),label:"Last 30 days",count:i,active:n==="recent",onClick:()=>{c("recent"),f(null)}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:116,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:95,columnNumber:9},this),e.jsxDEV(I0,{clusters:o,onSelect:B=>{c("all"),f(null),b(B)}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:128,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-slate-300",children:[e.jsxDEV("span",{children:"Look Books"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:139,columnNumber:13},this),e.jsxDEV("button",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-white/10 text-white transition hover:bg-white/10",onClick:D,title:"Restore demo set",children:e.jsxDEV(T0,{},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:145,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1.5",children:[l.map(B=>e.jsxDEV(lr,{icon:e.jsxDEV(Sh,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:152,columnNumber:23},this),label:B.name,count:B.imageIds.length,active:n==="lookbook"&&a===B.id,onClick:()=>{c("lookbook"),f(B.id)},action:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{className:"rounded-full p-1 text-xs opacity-60 transition hover:opacity-100",onClick:W=>{W.stopPropagation();const se=prompt("Rename Look Book",B.name)?.trim();se&&x(B.id,se)},title:"Rename",children:"✎"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:162,columnNumber:21},this),e.jsxDEV("button",{className:"rounded-full p-1 text-xs opacity-60 transition hover:text-red-400 hover:opacity-100",onClick:W=>{W.stopPropagation(),confirm("Delete this look book?")&&S(B.id)},title:"Delete",children:"×"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:175,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:161,columnNumber:19},this)},B.id,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:150,columnNumber:15},this)),l.length===0&&e.jsxDEV("div",{className:"rounded-2xl border border-dashed border-white/20 px-3 py-3 text-xs opacity-70",children:"No look books yet."},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:192,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:148,columnNumber:11},this),e.jsxDEV(A0,{onOpen:p},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2 rounded-2xl border border-slate-300/60 dark:border-white/12 bg-slate-50 dark:bg-transparent p-3",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-900 dark:text-slate-300",children:"New look book"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:199,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{value:v,placeholder:"Name",className:"flex-1 rounded-full border border-white/10 bg-white/10 px-3 py-1.5 text-xs",onChange:B=>g(B.target.value),onKeyDown:B=>{B.key==="Enter"&&(B.preventDefault(),A())}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:201,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",className:"rounded-full px-3",onClick:A,disabled:!v.trim(),children:e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:219,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.3em] text-slate-600 dark:text-slate-400",children:"Use selected images to seed instantly."},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:222,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:198,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:137,columnNumber:9},this),e.jsxDEV("div",{className:je("rounded-2xl border border-dashed px-3 py-3 text-[11px] uppercase tracking-[0.3em] transition",N?"border-sky-400/80 bg-sky-500/10 text-sky-700 dark:text-sky-200":"border-slate-400/40 bg-slate-100 text-slate-700 dark:border-white/20 dark:bg-white/5 dark:text-slate-200"),onDragEnter:B=>{B.preventDefault(),w(!0)},onDragOver:B=>{B.preventDefault()},onDragLeave:B=>{B.preventDefault(),w(!1)},onDrop:I,children:"Drop to auto-tag with AI themes."},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:228,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:89,columnNumber:7},this),e.jsxDEV("div",{className:"border-t border-slate-300/50 dark:border-white/10 px-5 py-4 text-[11px] uppercase tracking-[0.3em] text-slate-600 dark:text-slate-400",children:r>0?`${r} image${r===1?"":"s"} selected`:"Select images to manage metadata."},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:252,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:87,columnNumber:5},this)}function lr({icon:s,label:t,count:i,active:n,onClick:a,action:o}){return e.jsxDEV("div",{role:"button",tabIndex:0,onClick:a,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),a())},className:je("flex w-full items-center justify-between gap-2 rounded-2xl border px-3 py-1.5 text-left text-xs transition",n?"border-sky-400/60 bg-sky-500/15 text-sky-700 dark:text-sky-100 shadow-[0_18px_40px_rgba(14,165,233,0.32)]":"border-slate-300/60 bg-slate-100 text-slate-700 dark:border-white/10 dark:bg-white/5 dark:text-slate-200 hover:border-sky-300/40 hover:bg-sky-500/10"),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"rounded-full bg-slate-200 dark:bg-black/35 p-1 text-slate-700 dark:text-slate-100",children:s},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:290,columnNumber:9},this),e.jsxDEV("span",{children:t},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:291,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:289,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.3em]",children:[e.jsxDEV("span",{children:i},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:294,columnNumber:9},this),o]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:293,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:272,columnNumber:5},this)}function I0({clusters:s,onSelect:t}){return s.length?e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-900 dark:text-slate-300",children:"AI catalogued themes"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:313,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-1.5",children:s.map(i=>e.jsxDEV("button",{onClick:()=>t(i.tag),className:"flex items-center justify-between rounded-2xl border border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-white/5 px-3 py-1.5 text-left text-[11px] uppercase tracking-[0.3em] text-slate-900 dark:text-slate-200 transition hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:bg-sky-500/10",children:[e.jsxDEV("span",{className:"flex flex-col gap-0.5 text-left",children:[e.jsxDEV("span",{className:"text-slate-900 dark:text-slate-100",children:i.tag},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:322,columnNumber:15},this),e.jsxDEV("span",{className:"text-[9px] text-slate-400",children:i.freshnessLabel},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:323,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:321,columnNumber:13},this),e.jsxDEV("span",{className:"rounded-full bg-black/25 px-2 py-0.5 text-[9px] font-semibold tracking-[0.35em] text-slate-200",children:i.count},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:325,columnNumber:13},this)]},i.tag,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:316,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:314,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:312,columnNumber:5},this):null}function A0({onOpen:s}){const[t,i]=h.useState(!1);return e.jsxDEV("button",{className:"group relative h-28 w-full overflow-hidden rounded-2xl border border-slate-300/50 dark:border-white/20 bg-slate-100 dark:bg-black/35 text-left text-xs uppercase tracking-[0.3em] text-slate-900 dark:text-slate-200",style:{perspective:"1200px"},onClick:()=>{i(!0),setTimeout(()=>i(!1),900),s()},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Open flip book",children:[e.jsxDEV("div",{className:"absolute inset-0 flex flex-col justify-center gap-1 p-4",children:[e.jsxDEV("span",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-900 dark:text-slate-100",children:"Flip book"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:356,columnNumber:9},this),e.jsxDEV("span",{className:"text-[10px] text-slate-600 dark:text-slate-300",children:"Pages animated with every turn"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:357,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:355,columnNumber:7},this),e.jsxDEV("div",{className:"absolute inset-y-4 left-6 w-32 rounded-xl bg-gradient-to-br from-sky-400/60 via-sky-500/40 to-sky-300/30 shadow-[0_18px_40px_rgba(56,189,248,0.35)]",style:{transformStyle:"preserve-3d",transform:t?"rotateY(-25deg)":"rotateY(0deg)",transformOrigin:"left center",transition:"transform 0.8s cubic-bezier(0.22, 1, 0.36, 1)"}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:359,columnNumber:7},this),e.jsxDEV("div",{className:"absolute inset-y-6 left-10 w-28 rounded-xl border border-white/25 bg-white/10 shadow-[0_12px_30px_rgba(15,23,42,0.3)]",style:{transformStyle:"preserve-3d",transform:t?"rotateY(-12deg) translateX(12px)":"rotateY(0deg)",transformOrigin:"left center",transition:"transform 0.7s cubic-bezier(0.22, 1, 0.36, 1)"}},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:368,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:343,columnNumber:5},this)}function T0(s){return e.jsxDEV("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"h-3.5 w-3.5",...s,children:[e.jsxDEV("path",{d:"M21 12a9 9 0 1 1-2.64-6.36",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:386,columnNumber:7},this),e.jsxDEV("path",{d:"M21 3v6h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:394,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GallerySidebar.tsx",lineNumber:385,columnNumber:5},this)}function W0({boards:s,images:t,selectedImageIds:i,activeBoardId:n,onSelectBoard:a,onCreateBoard:o,onRenameBoard:l,onDeleteBoard:r,onAddTiles:d,onUpdateTile:c,onRemoveTile:f}){const[b,D]=h.useState(""),u=h.useMemo(()=>s.find(x=>x.id===n)??s[0]??null,[s,n]),p=h.useMemo(()=>t.filter(x=>i.includes(x.id)),[t,i]);return e.jsxDEV("div",{className:"flex h-full gap-4",children:[e.jsxDEV("aside",{className:"flex w-[220px] flex-col gap-3 rounded-3xl border border-slate-300/50 dark:border-white/10 bg-slate-100 dark:bg-black/30 p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.35em] text-slate-900 dark:text-slate-300",children:[e.jsxDEV("span",{children:"Tile boards"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:57,columnNumber:11},this),e.jsxDEV(Ka,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:58,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2 overflow-y-auto pr-1",children:[s.map(x=>e.jsxDEV("button",{onClick:()=>a(x.id),className:je("flex w-full flex-col items-start gap-1 rounded-2xl border px-3 py-2 text-left transition",u?.id===x.id?"border-sky-400 bg-sky-500/15 text-sky-700 dark:text-sky-100 shadow-[0_20px_40px_rgba(14,165,233,0.28)]":"border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-white/5 text-slate-900 dark:text-slate-200 hover:border-sky-300/40 dark:hover:border-sky-300/40 hover:bg-sky-500/10"),children:[e.jsxDEV("span",{className:"text-sm font-semibold",children:x.name},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:72,columnNumber:15},this),e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.3em] opacity-60",children:[x.tiles.length," tile",x.tiles.length===1?"":"s"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:73,columnNumber:15},this)]},x.id,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:62,columnNumber:13},this)),s.length===0&&e.jsxDEV("div",{className:"rounded-2xl border border-dashed border-slate-300/50 dark:border-white/20 px-3 py-4 text-[11px] uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:"No boards yet"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2 rounded-2xl border border-slate-300/60 dark:border-white/12 bg-slate-50 dark:bg-black/30 p-3",children:[e.jsxDEV("div",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-900 dark:text-slate-300",children:"New board"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:85,columnNumber:11},this),e.jsxDEV("input",{value:b,onChange:x=>D(x.target.value),placeholder:"Server Notes tiles",className:"w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV(ne,{size:"sm",className:"w-full rounded-full",onClick:()=>{const x=b.trim();x&&(o(x),D(""))},children:[e.jsxDEV(ug,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:102,columnNumber:13},this),"Create board"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:92,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:84,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:55,columnNumber:7},this),e.jsxDEV("section",{className:"flex-1 overflow-hidden rounded-3xl border border-slate-300/50 dark:border-white/10 bg-slate-50 dark:bg-black/25 p-5",children:u?e.jsxDEV("div",{className:"flex h-full flex-col gap-4",children:[e.jsxDEV("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-slate-100",children:[u.name,e.jsxDEV("button",{className:"rounded-full border border-white/15 bg-black/40 p-1 text-xs opacity-70 transition hover:border-sky-400/40 hover:opacity-100",onClick:()=>{const x=prompt("Rename board",u.name)?.trim();x&&x!==u.name&&l(u.id,x)},title:"Rename board",children:e.jsxDEV(Xr,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:123,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:115,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:113,columnNumber:17},this),e.jsxDEV("p",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:u.description||"Organize hero imagery into shareable tiles."},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:126,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:112,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>r(u.id),children:[e.jsxDEV(vi,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:137,columnNumber:19},this),"Remove board"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:131,columnNumber:17},this),e.jsxDEV(ne,{size:"sm",className:"rounded-full",onClick:()=>{i.length&&d(u.id,i)},disabled:i.length===0,children:[e.jsxDEV(mg,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:149,columnNumber:19},this),"Add ",i.length||""," tile",i.length===1?"":"s"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:140,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("div",{className:"grid flex-1 grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-4 overflow-y-auto pr-1",children:[u.tiles.map(x=>{const S=x.imageId?t.find(m=>m.id===x.imageId)??null:null;return e.jsxDEV("article",{className:"flex flex-col gap-3 rounded-3xl border border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/35 p-4 text-slate-900 dark:text-slate-100 shadow-[0_20px_50px_rgba(14,165,233,0.25)]",children:[e.jsxDEV("div",{className:"relative overflow-hidden rounded-2xl border border-slate-300/50 dark:border-white/10 bg-slate-200 dark:bg-black/50",children:S?e.jsxDEV("img",{src:S.dataUrl||S.blobUrl,alt:x.title,className:"h-40 w-full object-cover"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:167,columnNumber:25},this):e.jsxDEV("div",{className:"flex h-40 items-center justify-center text-xs uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:"No image linked"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:173,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:165,columnNumber:21},this),e.jsxDEV("input",{value:x.title,onChange:m=>c(u.id,x.id,{title:m.target.value}),className:"rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:178,columnNumber:21},this),e.jsxDEV("textarea",{value:x.subtitle||"",onChange:m=>c(u.id,x.id,{subtitle:m.target.value}),placeholder:"Notes",className:"h-16 rounded-xl border border-white/10 bg-black/40 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:185,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-slate-700 dark:text-slate-300",children:[e.jsxDEV("span",{children:x.layout},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:194,columnNumber:23},this),e.jsxDEV(ne,{variant:"ghost",size:"sm",className:"rounded-full px-3",onClick:()=>f(u.id,x.id),children:"Remove"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:195,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:193,columnNumber:21},this)]},x.id,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:161,columnNumber:19},this)}),u.tiles.length===0&&e.jsxDEV("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-300/50 dark:border-white/15 bg-slate-100 dark:bg-black/30 p-6 text-center text-sm uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:[e.jsxDEV(Js,{className:"h-6 w-6"},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:210,columnNumber:19},this),"Drop or select gallery images to start tiles"]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:155,columnNumber:13},this),p.length>0&&e.jsxDEV("footer",{className:"rounded-2xl border border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/35 px-4 py-3 text-[11px] uppercase tracking-[0.3em] text-slate-900 dark:text-slate-300",children:[p.length," gallery image",p.length===1?"":"s",' selected — click "Add" to convert into tiles.']},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:217,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:110,columnNumber:11},this):e.jsxDEV("div",{className:"flex h-full items-center justify-center rounded-3xl border border-dashed border-slate-300/50 dark:border-white/15 bg-slate-100 dark:bg-black/35 text-sm uppercase tracking-[0.35em] text-slate-600 dark:text-slate-400",children:"Create a tile board to get started."},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:224,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:108,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/GalleryTileBoards.tsx",lineNumber:54,columnNumber:5},this)}function L0({surfaceClassName:s,activeImage:t,adjustments:i,adjustmentControls:n,adjustmentPresets:a,activePresetKey:o,onApplyPreset:l,onResetAdjustments:r,onUpdateAdjustment:d,onApplyAdjustmentsToSelection:c,canApplyAdjustmentsToSelection:f,selectionCount:b,creativeTools:D,quickActions:u,activeTool:p,activeToolLabel:x,onSelectTool:S,activeQuickAction:m,onQuickAction:v,layerList:g,visibleLayers:N,onToggleLayer:w,onToggleFavorite:A,inspectorImageStyle:I,onOpenLightbox:B,onLaunchStudio:W,nameDraft:se,onNameDraftChange:ie,tagDraft:R,onTagDraftChange:F,onSaveMetadata:k,onResetMetadata:Q,lookbooks:J,onToggleLookbook:O,onDropFiles:me,urlText:de,onUrlTextChange:fe,urlLoading:ae,onImportByUrl:L,selectedIdsCount:H,isActiveInSelection:le}){const[ue,K]=h.useState(!1),C=$=>{$.preventDefault();const U=Array.from($.dataTransfer?.files||[]).filter(G=>G.type.startsWith("image/"));U.length&&me(U),K(!1)},P=t?new Date(Number(t.createdAt||Date.now())).toLocaleString():"",ee=t?(t.tags||[]).join(" · "):"";return e.jsxDEV("aside",{className:je("flex h-full flex-col gap-5 overflow-hidden rounded-[32px] border p-6",s),children:[e.jsxDEV("div",{className:je("rounded-3xl border border-dashed px-4 py-3 text-[11px] uppercase tracking-[0.35em] transition",ue?"border-sky-400/80 bg-sky-500/15 text-sky-100":"border-slate-300/50 dark:border-white/15 bg-slate-100 dark:bg-black/25 text-slate-700 dark:text-slate-300"),onDragEnter:$=>{$.preventDefault(),K(!0)},onDragOver:$=>{$.preventDefault()},onDragLeave:$=>{$.preventDefault(),K(!1)},onDrop:C,children:"Drop photos to edit instantly"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:167,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center justify-between text-sm font-semibold uppercase tracking-[0.3em] text-slate-900 dark:text-slate-100",children:[e.jsxDEV("span",{children:"Photo studio"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:191,columnNumber:9},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-3 text-xs uppercase tracking-[0.3em]",onClick:W,children:"Open studio"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:192,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:190,columnNumber:7},this),t?e.jsxDEV("div",{className:"flex-1 space-y-4 overflow-y-auto pr-1",children:[e.jsxDEV("div",{className:"overflow-hidden rounded-3xl border border-slate-300/40 dark:border-white/10 bg-white dark:bg-black/40",children:[t.unsupported?e.jsxDEV("div",{className:"flex aspect-[4/3] items-center justify-center text-xs uppercase tracking-[0.3em] text-slate-400 dark:text-slate-300",children:"No preview available"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:206,columnNumber:15},this):e.jsxDEV("img",{src:t.dataUrl||t.blobUrl,alt:t.name,className:"w-full object-cover",style:I},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-300/40 dark:border-white/10",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:t.name},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:219,columnNumber:17},this),e.jsxDEV("div",{className:"text-[11px] uppercase tracking-[0.3em] text-slate-600 dark:text-slate-300",children:ee||"Untagged"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:220,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:218,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:t.favorite?"default":"ghost",className:je("rounded-full px-4",t.favorite?"bg-amber-400 text-black":"text-slate-200"),onClick:()=>A(t.id),children:[e.jsxDEV(Ga,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:233,columnNumber:17},this),t.favorite?"Favorited":"Favorite"]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:224,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:204,columnNumber:11},this),e.jsxDEV(wn,{title:"Adjustments",defaultOpen:!0,children:[a.length>0&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[11px] uppercase tracking-[0.3em] text-slate-700 dark:text-slate-300",children:[e.jsxDEV("span",{children:"Presets"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:243,columnNumber:19},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-3",disabled:!f,onClick:c,children:["Sync to selection",b>0?` (${b})`:""]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:244,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:242,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:a.map($=>e.jsxDEV(F0,{label:$.label,description:$.description,active:o===$.key,onClick:()=>l($.key)},$.key,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:257,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:255,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:241,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:n.map($=>e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-700 dark:text-slate-300",children:[e.jsxDEV("span",{children:$.label},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:273,columnNumber:21},this),e.jsxDEV("span",{children:i[$.key]},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:274,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:272,columnNumber:19},this),e.jsxDEV("input",{type:"range",min:$.min,max:$.max,step:$.step??1,value:i[$.key],onChange:U=>d($.key,Number(U.target.value)),className:"h-1 w-full cursor-pointer appearance-none rounded-full bg-white/20"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:276,columnNumber:19},this)]},$.key,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:271,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:269,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 text-xs",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:"ghost",size:"sm",className:"rounded-full px-3",onClick:r,children:"Reset"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:290,columnNumber:17},this),e.jsxDEV(B0,{canApply:f,selectionCount:b,isActiveInSelection:le},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:293,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:289,columnNumber:15},this),e.jsxDEV(ne,{variant:"ghost",size:"sm",className:"rounded-full px-3",onClick:()=>B(t.id),children:"View live"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:299,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:288,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:239,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(ne,{variant:"secondary",size:"sm",className:"rounded-full px-4",onClick:W,children:"Launch studio overlay"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:310,columnNumber:11},this),e.jsxDEV(wn,{title:"Creative tools",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:D.map($=>e.jsxDEV(M0,{label:$.label,icon:$.icon,active:p===$.key,onClick:()=>S($.key)},$.key,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:324,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:322,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 text-[11px] uppercase tracking-[0.3em] text-slate-700 dark:text-slate-300",children:["Active · ",x]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:333,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:321,columnNumber:11},this),e.jsxDEV(wn,{title:"Quick actions",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:u.map($=>e.jsxDEV(_0,{label:$.label,description:$.description,icon:$.icon,active:m===$.key,onClick:()=>v($)},$.key,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:341,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:339,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:338,columnNumber:11},this),e.jsxDEV(wn,{title:"Layers",children:[e.jsxDEV("div",{className:"mb-3 flex justify-end",children:e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-3",onClick:()=>v({key:"new-layer",label:"New layer",description:"Staged for compositing",icon:vd}),children:"+ Layer"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:355,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:354,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1.5",children:g.map($=>e.jsxDEV(O0,{layer:$,visible:N[$.key]??!0,onToggle:()=>w($.key)},$.key,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:371,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:369,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:353,columnNumber:11},this),e.jsxDEV(wn,{title:"Metadata",children:[e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-300",children:"Filename"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:384,columnNumber:17},this),e.jsxDEV("input",{value:se,onChange:$=>ie($.target.value),className:"w-full rounded-xl border border-white/10 bg-black/35 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:385,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:383,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-300",children:"Tags"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:392,columnNumber:17},this),e.jsxDEV("textarea",{value:R,onChange:$=>F($.target.value),className:"h-20 w-full rounded-xl border border-white/10 bg-black/35 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none",placeholder:"comma separated"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:393,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:391,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:382,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2 text-xs text-slate-300",children:[e.jsxDEV(ne,{size:"sm",className:"rounded-full px-4",onClick:k,children:"Save metadata"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:402,columnNumber:15},this),e.jsxDEV("button",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-400 transition hover:text-slate-200",onClick:Q,children:"Reset fields"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:405,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:401,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:381,columnNumber:11},this),e.jsxDEV(wn,{title:"Look books",children:e.jsxDEV("div",{className:"space-y-2",children:[J.length===0&&e.jsxDEV("div",{className:"rounded-xl border border-dashed border-white/20 px-3 py-3 text-xs opacity-70",children:"Create a look book on the left to organise hero dishes."},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:417,columnNumber:17},this),J.map($=>{const U=t?$.imageIds.includes(t.id):!1;return e.jsxDEV("label",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-xs",children:[e.jsxDEV("span",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-white/15 bg-black/40",children:e.jsxDEV("svg",{viewBox:"0 0 24 24",className:"h-3.5 w-3.5 text-slate-200","aria-hidden":"true",children:e.jsxDEV("path",{d:"M4 5h7l2 2h7v12H4z",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:435,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:430,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:429,columnNumber:23},this),$.name]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:428,columnNumber:21},this),e.jsxDEV("input",{type:"checkbox",checked:U,onChange:G=>O($.id,G.target.checked)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:447,columnNumber:21},this)]},$.id,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:424,columnNumber:19},this)})]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:415,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:414,columnNumber:11},this),e.jsxDEV(wn,{title:"Import by URL",children:[e.jsxDEV("textarea",{value:de,onChange:$=>fe($.target.value),placeholder:"https://example.com/photo.jpg",className:"mt-1 h-24 w-full rounded-xl border border-white/10 bg-black/35 px-3 py-2 text-xs focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:459,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",disabled:ae,className:"mt-3 rounded-full px-4",onClick:L,children:ae?"Fetching…":"Add images"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:465,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:458,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1 text-xs text-slate-600 dark:text-slate-300",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(jh,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:477,columnNumber:15},this),ee||"No tags yet"]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:476,columnNumber:13},this),e.jsxDEV("div",{children:P},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:480,columnNumber:13},this),e.jsxDEV("div",{children:t.type||"Unknown file type"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:481,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:475,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:203,columnNumber:9},this):e.jsxDEV("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 text-sm text-slate-600 dark:text-slate-200",children:e.jsxDEV("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"Select an image to begin editing."},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:486,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:485,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:166,columnNumber:5},this)}function wn({title:s,defaultOpen:t=!1,children:i}){const[n,a]=h.useState(t);return e.jsxDEV("div",{className:"rounded-3xl border border-slate-300/40 dark:border-white/12 bg-slate-50 dark:bg-black/30 p-4",children:[e.jsxDEV("button",{className:"flex w-full items-center justify-between text-[11px] uppercase tracking-[0.35em] text-slate-900 dark:text-slate-200",onClick:()=>a(o=>!o),children:[e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:507,columnNumber:9},this),e.jsxDEV(Bn,{className:je("h-4 w-4 transition-transform",n?"rotate-0":"-rotate-90")},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:508,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:503,columnNumber:7},this),n&&e.jsxDEV("div",{className:"mt-3 space-y-3 text-slate-900 dark:text-slate-100",children:i},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:515,columnNumber:16},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:502,columnNumber:5},this)}function M0({label:s,icon:t,active:i,onClick:n}){return e.jsxDEV("button",{onClick:n,className:je("flex items-center gap-2 rounded-2xl border px-3 py-2 text-left text-xs uppercase tracking-[0.3em] transition",i?"border-sky-500/60 bg-sky-500/15 text-sky-100 shadow-[0_16px_36px_rgba(14,165,233,0.35)]":"border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/30 text-slate-900 dark:text-slate-200 hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:bg-sky-500/10"),children:[e.jsxDEV(t,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:538,columnNumber:7},this),e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:539,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:529,columnNumber:5},this)}function _0({label:s,description:t,icon:i,active:n,onClick:a}){return e.jsxDEV("button",{onClick:a,className:je("flex flex-col items-start gap-1 rounded-2xl border px-3 py-2 text-left transition",n?"border-sky-500/60 bg-sky-500/15 text-sky-700 dark:text-sky-100 shadow-[0_16px_36px_rgba(14,165,233,0.35)]":"border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/25 text-slate-900 dark:text-slate-200 hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:bg-sky-500/10"),children:[e.jsxDEV("span",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em]",children:[e.jsxDEV(i,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:564,columnNumber:9},this)," ",s]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:563,columnNumber:7},this),e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.25em] text-slate-400",children:t},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:566,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:554,columnNumber:5},this)}function O0({layer:s,visible:t,onToggle:i}){return e.jsxDEV("div",{className:"flex items-center justify-between gap-2 rounded-2xl border border-slate-300/50 dark:border-white/10 bg-slate-100 dark:bg-black/35 px-3 py-2 text-xs uppercase tracking-[0.3em] text-slate-900 dark:text-slate-200",children:[e.jsxDEV("button",{onClick:i,className:"rounded-full border border-white/20 bg-black/40 p-1 text-white transition hover:border-sky-400/50 hover:text-sky-200","aria-label":t?"Hide layer":"Show layer",children:t?e.jsxDEV(vd,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:585,columnNumber:20},this):e.jsxDEV(pg,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:585,columnNumber:54},this)},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:580,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col gap-0.5",children:[e.jsxDEV("span",{children:s.name},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:588,columnNumber:9},this),e.jsxDEV("span",{className:"text-[9px] text-slate-600 dark:text-slate-400",children:s.meta},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:589,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:587,columnNumber:7},this),s.locked?e.jsxDEV(Ln,{className:"h-3.5 w-3.5 text-slate-400"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:592,columnNumber:9},this):e.jsxDEV("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[9px] text-slate-300",children:"FX"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:594,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:579,columnNumber:5},this)}function F0({label:s,description:t,active:i,onClick:n}){return e.jsxDEV("button",{onClick:n,className:je("flex flex-col rounded-2xl border px-3 py-2 text-left text-xs uppercase tracking-[0.3em] transition",i?"border-sky-500/70 bg-sky-500/20 text-sky-700 dark:text-sky-100 shadow-[0_12px_30px_rgba(56,189,248,0.35)]":"border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/30 text-slate-900 dark:text-slate-200 hover:border-sky-300/40 dark:hover:border-sky-400/40 hover:bg-sky-500/10"),children:[e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:618,columnNumber:7},this),e.jsxDEV("span",{className:"text-[9px] text-slate-600 dark:text-slate-400 normal-case tracking-[0.2em]",children:t},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:619,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:609,columnNumber:5},this)}function B0({canApply:s,selectionCount:t,isActiveInSelection:i}){return t?s?e.jsxDEV("span",{className:"rounded-full border border-sky-300/40 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-sky-700 dark:text-sky-100",children:i?"Synced selection":"Active + selection"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:648,columnNumber:5},this):e.jsxDEV("span",{className:"rounded-full border border-amber-300/40 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-amber-700 dark:text-amber-200",children:"Add more selections"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:641,columnNumber:7},this):e.jsxDEV("span",{className:"rounded-full border border-slate-300/60 dark:border-white/15 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-slate-700 dark:text-slate-400",children:"Select images to sync adjustments"},void 0,!1,{fileName:"/app/code/client/components/gallery/PhotoStudioPanel.tsx",lineNumber:633,columnNumber:7},this)}const U0={s:"grid-cols-[repeat(auto-fill,minmax(150px,1fr))]",m:"grid-cols-[repeat(auto-fill,minmax(200px,1fr))]",l:"grid-cols-[repeat(auto-fill,minmax(260px,1fr))]"},$0=30,cr={exposure:0,contrast:0,warmth:0,saturation:0,focus:0},z0=[{key:"exposure",label:"Exposure",min:-60,max:60},{key:"contrast",label:"Contrast",min:-50,max:60},{key:"saturation",label:"Saturation",min:-60,max:60},{key:"warmth",label:"Warmth",min:-90,max:90,step:1},{key:"focus",label:"Focus",min:-40,max:40}],bu=[{key:"studio",label:"Studio glow",description:"Soft brightness, lifted warmth",values:{exposure:18,contrast:8,saturation:12,warmth:14,focus:6}},{key:"natural",label:"Natural light",description:"Balanced tone and color",values:{exposure:6,contrast:4,saturation:5,warmth:-4,focus:2}},{key:"noir",label:"Noir high contrast",description:"Dramatic monochrome punch",values:{exposure:-8,contrast:28,saturation:-50,warmth:2,focus:10}}],Vo=[{key:"select",label:"Select",icon:Jr},{key:"lasso",label:"Lasso",icon:fg},{key:"brush",label:"Brush",icon:hg},{key:"pen",label:"Pen",icon:bg},{key:"smudge",label:"Smudge",icon:Vh},{key:"stamp",label:"Stamp",icon:Ch},{key:"picker",label:"Color pick",icon:Eh},{key:"erase",label:"Erase",icon:Ng},{key:"cut",label:"Cut",icon:xg},{key:"magic",label:"Magic",icon:yd}],G0=[{key:"remove-bg",label:"Remove background",description:"Isolate subject automatically",icon:oa},{key:"resize",label:"Resize & crop",description:"Canvas, ratio and framing",icon:Jr},{key:"color",label:"Color grade",description:"Balance warmth and tone",icon:Vh},{key:"layers",label:"Merge layers",description:"Combine selected elements",icon:Ka},{key:"heal",label:"Repair details",description:"Smudge & clone stamping",icon:Ch},{key:"composite",label:"Add overlay",description:"Blend another photo",icon:Sh}];function H0({id:s,name:t,src:i,tags:n,favorite:a,unsupported:o,active:l,selected:r,thumbSize:d,onClick:c,onDoubleClick:f,onDelete:b}){const{t:D}=Vs();return e.jsxDEV("button",{onClick:c,onDoubleClick:f,className:je("group relative flex flex-col overflow-hidden rounded-3xl border text-left transition duration-300",l?"ring-2 ring-sky-400 shadow-[0_35px_70px_rgba(14,165,233,0.35)]":"ring-1 ring-transparent shadow-[0_22px_60px_rgba(15,23,42,0.22)]",r&&!l&&"ring-2 ring-sky-300",o?"bg-slate-200 dark:bg-slate-900/45":"bg-white dark:bg-slate-900/30 border-slate-300/50 dark:border-slate-700/60"),"data-echo-key":`card:gallery:item:${s}`,children:[e.jsxDEV("div",{className:"relative",children:[o?e.jsxDEV("div",{className:"flex aspect-[4/3] w-full items-center justify-center bg-slate-300 dark:bg-slate-800 text-xs uppercase tracking-[0.3em] text-slate-700 dark:text-slate-300",children:D("gallery.noPreview")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:238,columnNumber:11},this):e.jsxDEV("img",{src:i,alt:t,loading:"lazy",className:je("w-full object-cover transition duration-500 group-hover:scale-[1.05]",d==="s"?"aspect-square":d==="l"?"aspect-[5/4]":"aspect-[4/3]"),onError:u=>{const p=u.currentTarget;p.onerror=null,p.src="/placeholder.svg",p.classList.add("opacity-70")}},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:242,columnNumber:11},this),a&&e.jsxDEV("div",{className:"pointer-events-none absolute right-3 bottom-3 z-20 flex items-center gap-1 rounded-full bg-black/60 dark:bg-black/60 px-2 py-1 text-[10px] uppercase tracking-[0.3em] text-amber-700 dark:text-amber-200",children:[e.jsxDEV(Ga,{className:"h-3 w-3 fill-amber-400 dark:fill-amber-300 text-amber-400 dark:text-amber-300"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:264,columnNumber:13},this)," Fav"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:263,columnNumber:11},this),r&&e.jsxDEV("span",{className:"pointer-events-none absolute left-3 top-3 z-20 flex h-2.5 w-2.5 items-center justify-center rounded-full border border-white/50 bg-sky-400/80 shadow-[0_0_8px_rgba(56,189,248,0.9)]"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:268,columnNumber:11},this),e.jsxDEV("div",{className:"absolute right-3 top-3 z-20 flex gap-2 opacity-0 transition group-hover:opacity-100",children:e.jsxDEV("span",{role:"button",tabIndex:0,onClick:u=>{u.preventDefault(),u.stopPropagation(),b()},onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),u.stopPropagation(),b())},className:"flex h-9 w-9 cursor-pointer items-center justify-center rounded-full bg-slate-300/80 dark:bg-black/70 text-slate-900 dark:text-white backdrop-blur transition hover:bg-red-400 dark:hover:bg-red-600/80 focus:outline-none focus:ring-2 focus:ring-red-300 dark:focus:ring-red-400/70","aria-label":"Delete",children:e.jsxDEV(vi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:289,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:271,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:270,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:236,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col gap-3 px-4 pb-4 pt-3",children:[e.jsxDEV("div",{className:"text-sm font-semibold leading-tight text-slate-900 dark:text-slate-100 line-clamp-2",children:t},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:294,columnNumber:9},this),n.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.25em] text-sky-600 dark:text-sky-100/90",children:[n.slice(0,3).map(u=>e.jsxDEV("span",{className:"rounded-full border border-sky-400/50 bg-sky-500/15 px-2 py-0.5",children:u},u,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:298,columnNumber:15},this)),n.length>3&&e.jsxDEV("span",{className:"rounded-full bg-black/40 px-2 py-0.5",children:["+",n.length-3]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:306,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:296,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:293,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:223,columnNumber:5},this)}function q0(){const{t:s}=Vs(),{images:t,lookbooks:i,tileBoards:n,addLookBook:a,addImagesToLookBook:o,removeImagesFromLookBook:l,deleteLookBook:r,updateLookBook:d,addImages:c,linkImagesToRecipesByFilename:f,addTagsToImages:b,updateImage:D,exportAllZip:u,restoreDemo:p,deleteImage:x,createTileBoard:S,updateTileBoard:m,deleteTileBoard:v,addTileToBoard:g,updateTileInBoard:N,removeTileFromBoard:w}=ln(),[A,I]=h.useState(null),[B,W]=h.useState(!1),[se,ie]=h.useState(""),[R,F]=h.useState([]),[k,Q]=h.useState(""),[J,O]=h.useState("newest"),[me,de]=h.useState("s"),[fe,ae]=h.useState("all"),[L,H]=h.useState(null),[le,ue]=h.useState(!1),[K,C]=h.useState(null),[P,ee]=h.useState(""),[$,U]=h.useState(""),[G,re]=h.useState(""),[V,Y]=h.useState(!1),[T,y]=h.useState(0),[E,j]=h.useState(""),[q,te]=h.useState(!1),[Z,ve]=h.useState({}),[ke,De]=h.useState({}),[We,ze]=h.useState(Vo[0].key),[st,_t]=h.useState(null),[Nt,ye]=h.useState({}),[pt,ct]=h.useState(!1),[Ot,Es]=h.useState("grid"),[qt,ws]=h.useState(null),[Kt,fs]=h.useState(!1),Cs=h.useRef(null),xs=50*1024*1024,It=500*1024*1024,ls=["image/jpeg","image/png","image/webp","image/gif"],zs=h.useMemo(()=>t.filter(Se=>Se.favorite).length,[t]),ys=h.useMemo(()=>Date.now()-$0*24*60*60*1e3,[]),we=h.useMemo(()=>t.filter(Se=>typeof Se.createdAt=="number"&&Se.createdAt>0?Se.createdAt>=ys:!1).length,[t,ys]),qe=h.useMemo(()=>i.find(Se=>Se.id===L)??null,[i,L]),Qe=h.useMemo(()=>{if(!t.length)return[];const Se=new Map,Le="Untagged";t.forEach(at=>{const ht=typeof at.createdAt=="number"?at.createdAt:0;(at.tags&&at.tags.length>0?at.tags:[Le]).forEach(_=>{const M=_.trim()||Le,X=Se.get(M)??{count:0,lastSeen:0};Se.set(M,{count:X.count+1,lastSeen:Math.max(X.lastSeen,ht)})})});const Fe=Date.now();return Array.from(Se.entries()).sort((at,ht)=>ht[1].count!==at[1].count?ht[1].count-at[1].count:ht[1].lastSeen-at[1].lastSeen).slice(0,6).map(([at,ht])=>{const gt=ht.lastSeen?Math.floor((Fe-ht.lastSeen)/864e5):null;let _="Archive";return gt===null?_="Untimed":gt<=2?_="Fresh":gt<=7?_="This week":gt<=30&&(_="Recent"),{tag:at,count:ht.count,freshnessLabel:_}})},[t]),ot=h.useMemo(()=>{let Se=t.slice();if(fe==="favorites")Se=Se.filter(Fe=>Fe.favorite);else if(fe==="recent")Se=Se.filter(Fe=>typeof Fe.createdAt=="number"&&Fe.createdAt>=ys);else if(fe==="lookbook"&&qe){const Fe=new Set(qe.imageIds);Se=Se.filter(at=>Fe.has(at.id))}if(k.trim()){const Fe=k.trim().toLowerCase();Se=Se.filter(at=>{const ht=(at.tags||[]).some(gt=>gt.toLowerCase().includes(Fe));return at.name.toLowerCase().includes(Fe)||ht})}const Le=Se.slice();return Le.sort((Fe,at)=>{const ht=typeof Fe.createdAt=="number"?Fe.createdAt:0,gt=typeof at.createdAt=="number"?at.createdAt:0;switch(J){case"favorites":return!!at.favorite!=!!Fe.favorite?Number(at.favorite)-Number(Fe.favorite):gt-ht;case"oldest":return ht-gt;case"name":return Fe.name.localeCompare(at.name);case"newest":default:return gt-ht}}),Le},[t,fe,qe,k,J,ys]);h.useEffect(()=>{F(Se=>Se.filter(Le=>ot.some(Fe=>Fe.id===Le)))},[ot]),h.useEffect(()=>{if(!ot.length){C(null);return}(!K||!ot.some(Se=>Se.id===K))&&C(ot[0].id)},[ot,K]),h.useEffect(()=>{!qt&&n.length>0&&ws(n[0].id)},[n,qt]);const ft=h.useMemo(()=>t.find(Se=>Se.id===K)??null,[t,K]);h.useEffect(()=>{ft?(ee(ft.name),U((ft.tags||[]).join(", "))):(ee(""),U(""))},[ft?.id]);const xt=h.useMemo(()=>{if(!ft)return[];const Le=(ft.tags||[]).slice(0,2).map((Fe,at)=>({key:`tag-${at}`,name:`${Fe} overlay`,meta:"Tag layer"}));return[{key:"base",name:ft.name,meta:"Raster",locked:!0},...Le,{key:"color-grade",name:"Color grade",meta:"Adjustment"},{key:"retouch",name:"Retouch",meta:"Stamp blend"}]},[ft]),jt=h.useMemo(()=>Vo.find(Se=>Se.key===We)?.label??"Select",[We]);h.useEffect(()=>{ye(Se=>{const Le={};return xt.forEach(Fe=>{Le[Fe.key]=Se[Fe.key]??!0}),Le})},[xt]);const At=Se=>{ye(Le=>({...Le,[Se]:!(Le[Se]??!0)}))},Vt=Se=>{_t(Se.key),I(`${Se.label} staged. Fine tune with creative tools.`)},Qt=h.useMemo(()=>{if(!K)return{...cr};const Se=Z[K]??cr;return{exposure:Se.exposure??0,contrast:Se.contrast??0,warmth:Se.warmth??0,saturation:Se.saturation??0,focus:Se.focus??0}},[K,Z]),ks=K?ke[K]??null:null,Yt=K?R.filter(Se=>Se!==K).length:R.length,Gt=K?R.includes(K):!1,_s=Yt>0,Ys=h.useMemo(()=>{const{exposure:Se,contrast:Le,warmth:Fe,saturation:at,focus:ht}=Qt,gt=[`brightness(${(1+Se/80).toFixed(3)})`,`contrast(${(1+Le/80+Math.max(ht,0)/140).toFixed(3)})`,`saturate(${(1+at/80).toFixed(3)})`,`hue-rotate(${Fe}deg)`];ht<0&&gt.push(`blur(${(Math.abs(ht)/14).toFixed(2)}px)`);const _=ht>10?`0 28px 60px rgba(14,165,233,${Math.min(.45,.2+ht/120).toFixed(2)})`:"0 26px 60px rgba(15,23,42,0.3)";return{filter:gt.join(" "),boxShadow:_}},[Qt]),Ts=Se=>{Se.length&&(ie(""),W(!0),window.__pending_files=Se)},Ei=async()=>{const Se=window.__pending_files||[];if(!Se.length){W(!1);return}const Le=se.split(",").map(gt=>gt.trim()).filter(Boolean);W(!1);const Fe=[];let at=0;const ht=[];for(const gt of Se){if(gt.size>xs){Fe.push(`${gt.name}: File exceeds 50MB limit (${(gt.size/1024/1024).toFixed(1)}MB)`);continue}if(!ls.includes(gt.type)){Fe.push(`${gt.name}: Unsupported format. Only JPEG, PNG, WebP, and GIF are supported.`);continue}at+=gt.size,ht.push(gt)}if(at>It&&Fe.push("Total upload size exceeds 500MB limit. Please upload fewer files."),Fe.length>0&&(I(`⚠️ ${Fe[0]} (${Fe.length} file${Fe.length!==1?"s":""} failed validation)`),console.warn("File validation errors:",Fe)),ht.length===0){I("❌ No valid files to upload. Please check file formats and sizes."),window.__pending_files=void 0;return}fs(!0),I(`Uploading ${ht.length} file${ht.length!==1?"s":""}...`),console.debug("Starting image import with tags:",Le);try{const gt=await c(ht,{tags:Le});if(gt===0)I(`⚠️ No images added. ${Fe.length>0?Fe[0]:"Please check file formats."}`),console.warn("No images were successfully added");else{const _=`✓ Added ${gt} image${gt===1?"":"s"}`,M=ht.length-gt,X=M>0?` (${M} file${M!==1?"s":""} could not be processed)`:"";I(_+X),console.info("Successfully added",gt,"images")}}catch(gt){const _=gt instanceof Error?gt.message:"Unknown error";I(`❌ Error uploading images: ${_}`),console.error("Error importing images:",gt)}finally{fs(!1)}window.__pending_files=void 0},oe=()=>{Cs.current?.click()},Ne=(Se,Le)=>{const Fe=Se.metaKey||Se.ctrlKey;C(Le),F(Fe?at=>at.includes(Le)?at.filter(ht=>ht!==Le):[...at,Le]:[Le])},Ue=Se=>{const Le=ot.findIndex(Fe=>Fe.id===Se);Le>=0&&(y(Le),Y(!0))},Me=Se=>{const Le=t.find(Fe=>Fe.id===Se);Le&&D(Se,{favorite:!Le.favorite})},Ct=Se=>{confirm("Delete this image?")&&(x(Se),I(s("common.delete")))},Ws=()=>{const Se=G.split(",").map(Le=>Le.trim()).filter(Boolean);!Se.length||!R.length||(b(R,Se),re(""),I(`Tagged ${R.length} image${R.length===1?"":"s"}.`),F([]))},es=()=>{if(!ft)return;const Se=P.trim();if(!Se){I(s("gallery.nameCannotBeEmpty"));return}const Le=$.split(",").map(Fe=>Fe.trim()).filter(Boolean);D(ft.id,{name:Se,tags:Le}),I(s("gallery.preparingExport"))},ti=()=>{ft&&(ee(ft.name),U((ft.tags||[]).join(", ")),I(s("gallery.clearSelection")))},Qs=(Se,Le)=>{ft&&(Le?(o(Se,[ft.id]),I(s("gallery.preparingExport"))):(l(Se,[ft.id]),I(s("gallery.clearSelection"))))},Zs=async()=>{const Se=E.split(/\s+/).map(Le=>Le.trim()).filter(Le=>/^https?:\/\//i.test(Le));if(!Se.length){I(s("gallery.preparingExport"));return}te(!0),fs(!0);try{const Le=[],Fe=[];for(const at of Se)try{console.debug("Fetching image from URL:",at);const ht=await fetch(at);if(!ht.ok)throw new Error(`HTTP ${ht.status}`);const gt=await ht.blob(),_=at.split("?")[0].split("#")[0].split("/").pop()||`image-${Date.now()}.jpg`;Le.push(new File([gt],_.replace(/[^A-Za-z0-9_.-]/g,"_"),{type:gt.type||"image/jpeg"}))}catch(ht){console.warn("Failed to fetch image from URL:",at,ht),Fe.push(at),I(s("gallery.failedFetch").replace("{url}",at).replace("{error}",ht?.message??"error"))}if(Le.length){console.debug("Adding",Le.length,"images from URLs");const at=await c(Le,{tags:[]});at>0?(I(`✓ Added ${at} image${at===1?"":"s"} from URLs.${Fe.length>0?` (${Fe.length} failed)`:""}`),j("")):I(s("gallery.noImagesAdded"))}else Fe.length>0&&I(s("gallery.failedFetchUrls").replace("{count}",String(Fe.length)))}catch(Le){console.error("Error importing images from URLs:",Le),I(s("gallery.errorImportingImages"))}finally{te(!1),fs(!1)}},Ri=async()=>{I(s("gallery.preparingExport"));try{await u(),I(s("gallery.exportReady"))}catch(Se){Se instanceof Error&&Se.message,I(s("gallery.exportFailed"))}},us=()=>{f(),I(s("gallery.linkRecipes"))},Os=Se=>{const Le=Se.trim();if(!Le)return!1;const Fe=a(Le,R);return F([]),H(Fe),ae("lookbook"),ue(!0),I(`Look book "${Le}" created.`),!0},Rs=()=>{if(qe){ue(!0);return}if(i.length>0){H(i[0].id),ae("lookbook"),ue(!0);return}I("Create a look book to preview flip motion.")},Xs=(Se,Le)=>{const Fe=Le.trim();Fe&&(d(Se,{name:Fe}),I(`Look book renamed to ${Fe}.`))},Ss=Se=>{r(Se),L===Se&&(H(null),ae("all")),I("Look book removed.")},Gs=(Se,Le)=>{K&&(ve(Fe=>{const ht={...Fe[K]??cr,[Se]:Le};return{...Fe,[K]:ht}}),De(Fe=>({...Fe,[K]:null})))},li=()=>{K&&(ve(Se=>{const Le={...Se};return delete Le[K],Le}),De(Se=>{const Le={...Se};return delete Le[K],Le}))},ci=Se=>{if(!K)return;const Le=bu.find(Fe=>Fe.key===Se);Le&&(ve(Fe=>({...Fe,[K]:{...Le.values}})),De(Fe=>({...Fe,[K]:Se})),I(`Preset "${Le.label}" applied.`))},si=()=>{if(!K)return;const Se=R.filter(Fe=>Fe!==K);if(Se.length===0)return;const Le=Z[K]??cr;ve(Fe=>{const at={...Fe};return Se.forEach(ht=>{at[ht]={...Le}}),at}),De(Fe=>{const at={...Fe},ht=Fe[K]??null;return Se.forEach(gt=>{at[gt]=ht}),at}),I(`Synced adjustments to ${Se.length} image${Se.length===1?"":"s"}.`)},di=Se=>{R.length&&(R.forEach(Le=>{const Fe=t.find(at=>at.id===Le);Fe&&Fe.favorite!==Se&&D(Le,{favorite:Se})}),I(Se?`Marked ${R.length} image${R.length===1?"":"s"} as favorite.`:`Removed favorite from ${R.length} image${R.length===1?"":"s"}.`),Se||F([]))};return e.jsxDEV("div",{className:je("relative mx-auto max-w-[1640px] space-y-4 rounded-[48px] border px-4 py-5 sm:px-8 lg:px-10 lg:py-7","luccca-theme border-slate-800/70 bg-slate-950/92 text-slate-100 shadow-[0_90px_200px_rgba(14,165,233,0.4)]"),"data-echo-key":"page:recipes:gallery",children:[e.jsxDEV("div",{className:"grid gap-5 lg:min-h-[calc(100vh-170px)] lg:grid-cols-[230px_minmax(0,1fr)_320px] xl:min-h-[calc(100vh-190px)]",children:[e.jsxDEV(P0,{totalCount:t.length,favoriteCount:zs,recentCount:we,activeFilter:fe,activeLookBookId:L,tagClusters:Qe,lookbooks:i,selectedIdsCount:R.length,surfaceClassName:"border-slate-700/60 bg-slate-900/75",onFilterChange:Se=>{ae(Se),Se!=="lookbook"&&H(null),Se!=="all"&&Q("")},onLookbookChange:Se=>{Se?(H(Se),ae("lookbook")):(H(null),ae("all"))},onTagSelect:Se=>{Q(Se)},onRestoreDemo:()=>{p(),I("Demo gallery restored.")},onCreateLookBook:Os,onPreviewLookbook:Rs,onRenameLookBook:Xs,onDeleteLookBook:Ss,onDropFiles:Ts},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:991,columnNumber:9},this),e.jsxDEV(Xh,{multiple:!0,onFiles:Ts,busy:Kt,className:je("relative overflow-hidden rounded-[32px] border","border-slate-700/60 bg-slate-900/70"),children:[e.jsxDEV("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_top,_rgba(125,211,252,0.14),_transparent_70%)]"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1039,columnNumber:11},this),e.jsxDEV("div",{className:"relative flex h-full flex-col",children:[e.jsxDEV("div",{className:"relative z-20 flex flex-col gap-4 px-6 pt-6 pb-4",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxDEV("div",{className:"flex items-center gap-2 rounded-full border border-slate-300/50 dark:border-white/10 bg-slate-100 dark:bg-black/45 px-4 py-2 text-[11px] uppercase tracking-[0.35em] text-slate-900 dark:text-slate-200",children:[e.jsxDEV("button",{type:"button",onClick:()=>Es("grid"),className:je("rounded-full px-3 py-1 transition",Ot==="grid"?"bg-sky-500 text-black":"bg-transparent text-slate-900 dark:text-slate-200 hover:text-sky-700 dark:hover:text-sky-200"),children:"Photo grid"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1044,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>Es("tiles"),className:je("rounded-full px-3 py-1 transition",Ot==="tiles"?"bg-sky-500 text-black":"bg-transparent text-slate-900 dark:text-slate-200 hover:text-sky-700 dark:hover:text-sky-200"),children:"Tile boards"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1056,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1043,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1042,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"rounded-lg border border-cyan-400/30 bg-gradient-to-r from-cyan-500/5 to-blue-500/5 px-4 py-2 text-xs text-cyan-200/80",children:["💡 ",e.jsxDEV("span",{className:"font-medium",children:"Quick tip:"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1072,columnNumber:22},this)," ",s("gallery.quickTip")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1071,columnNumber:17},this),e.jsxDEV("div",{className:"rounded-lg border border-emerald-400/30 bg-gradient-to-r from-emerald-500/5 to-green-500/5 px-4 py-2 text-xs text-emerald-200/80",children:["✓ ",e.jsxDEV("span",{className:"font-medium",children:"Production ready:"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1075,columnNumber:21},this)," ",s("gallery.productionReady")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1074,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1070,columnNumber:15},this),Ot==="grid"&&e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV(K0,{filter:k,onFilterChange:Q,sort:J,onSortChange:O,thumbSize:me,onThumbSizeChange:de,onUpload:oe,onExport:Ri,onLink:us},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1080,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1079,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1041,columnNumber:13},this),e.jsxDEV("div",{className:"relative flex-1",children:[Ot==="grid"&&R.length>0&&e.jsxDEV("div",{className:"pointer-events-none absolute inset-x-0 bottom-6 z-30 flex justify-center px-3",children:e.jsxDEV(Y0,{count:R.length,bulkTagDraft:G,onBulkTagChange:re,onApplyTags:Ws,onClear:()=>F([]),onFavorite:()=>di(!0),onUnfavorite:()=>di(!1)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1098,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1097,columnNumber:17},this),e.jsxDEV("div",{className:"pointer-events-none absolute bottom-6 left-6 z-30 hidden max-w-[320px] md:block",children:e.jsxDEV(Q0,{t:s},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1111,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1110,columnNumber:15},this),Ot==="grid"?e.jsxDEV(Z0,{images:ot,thumbSize:me,activeId:K,selectedIds:R,onSelect:Ne,onOpenLightbox:Ue,onDelete:Ct,gridTemplates:U0,onRestoreDemo:()=>{p(),I("Demo gallery restored.")}},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1115,columnNumber:17},this):e.jsxDEV("div",{className:"flex h-full flex-col overflow-hidden",children:e.jsxDEV(W0,{boards:n,images:t,selectedImageIds:R,activeBoardId:qt,onSelectBoard:Se=>ws(Se),onCreateBoard:Se=>{const Le=S({name:Se,category:"custom",imageIds:R});ws(Le),I(`Tile board "${Se}" created.`)},onRenameBoard:(Se,Le)=>{m(Se,{name:Le}),I(`Board renamed to ${Le}.`)},onDeleteBoard:Se=>{v(Se),ws(Le=>Le===Se?n.filter(Fe=>Fe.id!==Se)[0]?.id??null:Le),I("Board removed.")},onAddTiles:(Se,Le)=>{if(!Le.length)return;const Fe=Array.from(new Set(Le));Fe.forEach((at,ht)=>{const gt=t.find(_=>_.id===at)??null;g(Se,{title:gt?.name??`Tile ${ht+1}`,subtitle:gt?"Imported from gallery":void 0,imageId:gt?.id??null,tags:gt?.tags??[],layout:ht%2===0?"landscape":"portrait",accent:["#38bdf8","#f472b6","#a855f7","#facc15"][ht%4]})}),I(`Added ${Fe.length} tile${Fe.length===1?"":"s"} to board.`),F([])},onUpdateTile:(Se,Le,Fe)=>{N(Se,Le,Fe),I("Tile updated.")},onRemoveTile:(Se,Le)=>{w(Se,Le),I("Tile removed.")}},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1131,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1130,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1095,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1040,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1033,columnNumber:9},this),e.jsxDEV(L0,{surfaceClassName:"border-slate-700/60 bg-slate-900/75",activeImage:ft,adjustments:Qt,adjustmentControls:z0,adjustmentPresets:bu,activePresetKey:ks,onApplyPreset:ci,onResetAdjustments:li,onUpdateAdjustment:Gs,onApplyAdjustmentsToSelection:si,canApplyAdjustmentsToSelection:_s,selectionCount:R.length,creativeTools:Vo,quickActions:G0,activeTool:We,activeToolLabel:jt,onSelectTool:ze,activeQuickAction:st,onQuickAction:Vt,layerList:xt,visibleLayers:Nt,onToggleLayer:At,onToggleFavorite:Me,inspectorImageStyle:Ys,onOpenLightbox:Ue,onLaunchStudio:()=>ct(!0),nameDraft:P,onNameDraftChange:ee,tagDraft:$,onTagDraftChange:U,onSaveMetadata:es,onResetMetadata:ti,lookbooks:i,onToggleLookbook:Qs,onDropFiles:Ts,urlText:E,onUrlTextChange:j,urlLoading:q,onImportByUrl:Zs,selectedIdsCount:R.length,isActiveInSelection:Gt},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1191,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:990,columnNumber:7},this),A&&e.jsxDEV("div",{className:je("rounded-[24px] border px-4 py-3 text-sm","border-slate-700/50 bg-slate-900/60 text-slate-200"),children:A},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1237,columnNumber:9},this),e.jsxDEV("input",{ref:Cs,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Se=>{const Le=Array.from(Se.target.files||[]);Le.length&&Ts(Le),Cs.current&&(Cs.current.value="")}},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1240,columnNumber:7},this),e.jsxDEV(ss,{open:B,onOpenChange:W,children:e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Tag images on import"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1256,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1255,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("input",{value:se,onChange:Se=>ie(Se.target.value),placeholder:s("recipeSearch.searchByName"),className:"w-full rounded-md border bg-background px-3 py-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1259,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>W(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1266,columnNumber:15},this),e.jsxDEV(ne,{onClick:Ei,children:"Import"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1269,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1265,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1258,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1254,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1253,columnNumber:7},this),e.jsxDEV(k0,{open:V,onClose:()=>Y(!1),images:ot.map(Se=>({id:Se.id,src:Se.dataUrl||Se.blobUrl,name:Se.name,favorite:Se.favorite,unsupported:Se.unsupported})),index:T,onPrev:()=>y(Se=>(Se-1+ot.length)%ot.length),onNext:()=>y(Se=>(Se+1)%ot.length),onToggleFavorite:Me,className:"luccca-theme lightbox-overlay"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1275,columnNumber:7},this),e.jsxDEV(S0,{open:le,onClose:()=>ue(!1),title:qe?.name,images:(qe?.imageIds||[]).map(Se=>{const Le=t.find(at=>at.id===Se),Fe=Le?.tags||[];return{id:Se,src:Le?.dataUrl||Le?.blobUrl,name:Le?.name,tags:Fe,description:Fe.length>0?`Highlights ${Fe.slice(0,3).join(" · ")}${Fe.length>3?" +":""}`:void 0}}),className:"luccca-theme"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1292,columnNumber:7},this),e.jsxDEV(R0,{open:pt,onClose:()=>ct(!1),image:ft,adjustments:Qt,activeTool:We,onSelectTool:ze,layers:xt,visibleLayers:Nt,onToggleLayer:At,onResetAdjustments:li,onQuickAction:Vt,activeQuickAction:st,onSave:()=>I("Overlay changes saved.")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1313,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:983,columnNumber:5},this)}function K0({filter:s,onFilterChange:t,sort:i,onSortChange:n,thumbSize:a,onThumbSizeChange:o,onUpload:l,onExport:r,onLink:d}){const{t:c}=Vs();return e.jsxDEV("div",{className:"pointer-events-auto flex w-full max-w-3xl flex-col gap-4 rounded-[28px] border border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-[radial-gradient(circle_at_top,_rgba(14,23,42,0.95),_rgba(14,25,48,0.72))] px-6 py-4 shadow-[0_28px_80px_rgba(15,23,42,0.55)] backdrop-blur-xl",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV("div",{className:"relative min-w-[220px] flex-1",children:[e.jsxDEV(qi,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-sky-600 dark:text-sky-200/70"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1360,columnNumber:11},this),e.jsxDEV("input",{value:s,onChange:f=>t(f.target.value),placeholder:c("recipeSearch.searchByName"),className:"w-full rounded-full border border-slate-300/50 dark:border-white/15 bg-white dark:bg-white/10 pl-10 pr-3 py-2 text-sm text-slate-900 dark:text-slate-100 placeholder:text-slate-600 dark:placeholder:text-slate-300/80 focus:border-sky-400 focus:outline-none focus:ring-0"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1361,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1359,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("div",{className:"flex items-center gap-1 rounded-full border border-slate-300/50 dark:border-white/14 bg-slate-200 dark:bg-black/30 px-3 py-1.5 text-slate-900 dark:text-slate-100 shadow-[0_12px_30px_rgba(8,15,30,0.38)]",children:[e.jsxDEV(gg,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1370,columnNumber:13},this),e.jsxDEV("select",{value:i,onChange:f=>n(f.target.value),className:"bg-transparent text-xs focus:outline-none text-slate-900 dark:text-slate-100",children:[e.jsxDEV("option",{value:"newest",children:"Newest"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1376,columnNumber:15},this),e.jsxDEV("option",{value:"oldest",children:"Oldest"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1377,columnNumber:15},this),e.jsxDEV("option",{value:"favorites",children:"Favorites"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1378,columnNumber:15},this),e.jsxDEV("option",{value:"name",children:"Name"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1379,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1371,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1369,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-1 rounded-full border border-slate-300/50 dark:border-white/10 bg-slate-200 dark:bg-black/25 px-3 py-1.5 text-slate-900 dark:text-slate-100",children:[e.jsxDEV(Fa,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1383,columnNumber:13},this),e.jsxDEV("select",{value:a,onChange:f=>o(f.target.value),className:"bg-transparent text-xs focus:outline-none text-slate-900 dark:text-slate-100",children:[e.jsxDEV("option",{value:"s",children:"Small"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1389,columnNumber:15},this),e.jsxDEV("option",{value:"m",children:"Medium"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1390,columnNumber:15},this),e.jsxDEV("option",{value:"l",children:"Large"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1391,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1384,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1382,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1368,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1358,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[e.jsxDEV(ne,{onClick:l,className:"rounded-full bg-gradient-to-r from-sky-400 via-sky-500 to-sky-400 px-5 text-black shadow-[0_18px_36px_rgba(56,189,248,0.35)] hover:from-sky-300 hover:to-sky-400",children:[e.jsxDEV(Rh,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1398,columnNumber:11},this)," Upload"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1397,columnNumber:9},this),e.jsxDEV(ne,{variant:"outline",onClick:r,className:"rounded-full border-white/30 bg-white/10 px-4 text-white hover:bg-white/20",children:[e.jsxDEV(Ni,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1405,columnNumber:11},this)," Export ZIP"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1400,columnNumber:9},this),e.jsxDEV(ne,{variant:"secondary",onClick:d,className:"rounded-full bg-white/90 px-4 text-slate-900 shadow-[0_18px_36px_rgba(255,255,255,0.25)] hover:bg-white",children:[e.jsxDEV(Or,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1412,columnNumber:11},this)," Link recipes"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1407,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1396,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1357,columnNumber:5},this)}function Y0({count:s,bulkTagDraft:t,onBulkTagChange:i,onApplyTags:n,onClear:a,onFavorite:o,onUnfavorite:l}){const{t:r}=Vs();return e.jsxDEV("div",{className:"pointer-events-auto flex max-w-2xl flex-wrap items-center gap-3 rounded-full border border-slate-300/50 dark:border-white/12 bg-slate-100 dark:bg-black/65 px-5 py-3 text-xs text-slate-900 dark:text-slate-100 shadow-[0_20px_60px_rgba(15,23,42,0.45)] backdrop-blur-lg",children:[e.jsxDEV("span",{className:"font-semibold uppercase tracking-[0.3em]",children:[s," selected"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1441,columnNumber:7},this),e.jsxDEV("input",{value:t,onChange:d=>i(d.target.value),onKeyDown:d=>{d.key==="Enter"&&(d.preventDefault(),n())},placeholder:r("gallery.applyTags"),className:"flex-1 rounded-full border border-transparent bg-slate-200 dark:bg-black/30 px-3 py-1 text-xs text-slate-900 dark:text-slate-100 placeholder:text-slate-600 dark:placeholder:text-slate-400 focus:border-sky-400 focus:outline-none"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1442,columnNumber:7},this),e.jsxDEV(ne,{size:"sm",className:"rounded-full px-4",onClick:n,children:r("gallery.applyTags")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1454,columnNumber:7},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-4",onClick:o,children:r("gallery.markFavorite")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1457,columnNumber:7},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-4",onClick:l,children:r("gallery.clearFavorite")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1460,columnNumber:7},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",className:"rounded-full px-4",onClick:a,children:r("gallery.clearSelection")},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1463,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1440,columnNumber:5},this)}function Q0({t:s}){return e.jsxDEV("div",{className:"pointer-events-none rounded-2xl border border-dashed border-cyan-400/40 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 px-4 py-3 text-[11px] uppercase tracking-[0.3em] text-cyan-300/80 shadow-lg shadow-cyan-500/20",children:["💡 ",s("gallery.dragDropHint")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1472,columnNumber:5},this)}function Z0({images:s,thumbSize:t,activeId:i,selectedIds:n,onSelect:a,onOpenLightbox:o,onDelete:l,gridTemplates:r,onRestoreDemo:d}){return Vs(),s.length?e.jsxDEV("div",{className:"h-full overflow-y-auto px-6 pb-10",children:e.jsxDEV("div",{className:je("grid gap-5",r[t]),"data-echo-key":"section:gallery:grid",children:s.map(c=>e.jsxDEV(H0,{id:c.id,name:c.name,src:c.dataUrl||c.blobUrl,tags:c.tags||[],favorite:c.favorite,unsupported:c.unsupported,active:i===c.id,selected:n.includes(c.id),thumbSize:t,onClick:f=>a(f,c.id),onDoubleClick:()=>o(c.id),onDelete:()=>l(c.id)},c.id,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1533,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1525,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1524,columnNumber:5},this):e.jsxDEV("div",{className:"flex h-full flex-col items-center justify-center gap-6 text-sm",children:[e.jsxDEV("div",{className:"max-w-xs text-center space-y-2",children:[e.jsxDEV(Rh,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-600"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1506,columnNumber:11},this),e.jsxDEV("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"No images in gallery"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1507,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Drag and drop images here, or use the upload button to add photos to your gallery."},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1510,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1505,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxDEV(ne,{variant:"outline",className:"rounded-full",onClick:()=>d(),children:"Load demo images"},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1515,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1514,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Gallery.tsx",lineNumber:1504,columnNumber:7},this)}const X0=Bx,ni=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Ux,{ref:i,className:je("border-b",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:13,columnNumber:3},void 0));ni.displayName="AccordionItem";const ai=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV($x,{className:"flex",children:e.jsxDEV(sh,{ref:n,className:je("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[t,e.jsxDEV(Bn,{className:"h-4 w-4 shrink-0 transition-transform duration-200"},void 0,!1,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:35,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:26,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:25,columnNumber:3},void 0));ai.displayName=sh.displayName;const ri=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV(ih,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:e.jsxDEV("div",{className:je("pb-4 pt-0",s),children:t},void 0,!1,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:50,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/accordion.tsx",lineNumber:45,columnNumber:3},void 0));ri.displayName=ih.displayName;const Nu=s=>{if(typeof structuredClone=="function")return structuredClone(s);try{return JSON.parse(JSON.stringify(s))}catch{return Array.isArray(s)?[...s]:s&&typeof s=="object"?{...s}:s}},xu=[{id:"exp-ferment-01",title:"Smoked koji custard",status:"testing",lastUpdated:"2h ago",owner:"A. Vega",notes:"Dial in double-ferment schedule. Current batch holding saline edge; consider maple lacto brine.",tags:["fermentation","dessert","winter menu"],hypothesis:"Layering cold-smoke with maple lacto brine will yield a satin custard with amplified retronasal smoke while preserving silken structure.",variablesUnderTest:["Maple brine salinity 1.6% vs 1.8%","Smoke dwell time 30 vs 45 minutes","Koji inoculation at 18%"],sensoryTargets:["Satin wobble at 1.2 Hz on rheometer","Smoke intensity 6/10 on tasting panel","Residual sweetness under 12° Brix"],testPlan:["Profile texture on rheometer after 12h set","Quantify maple volatiles via GC sniff session","Hold at 2°C for 24h to monitor syneresis"],equipment:["Circulating cold smoker","Rheon texture analyzer","Gas chromatograph sniff port"],launchWindow:"Tasting menu wk 9",textureObjectives:["Custard wobble stays within 0.8–1.3 Hz band","Cold-smoke lacquer without visible weeping after 24h"],flavorConstellations:["Smoked koji custard × maple lacto brine × spruce tip garnish","Fermented cream backbone balanced with buckwheat cacao crunch"],futureFoodAngles:["Valorize koji whey as a dessert texture builder","Route smoker waste heat into low-carbon dessert flights"]},{id:"exp-carbon-02",title:"Carbonic citrus pearls",status:"ideation",lastUpdated:"6h ago",owner:"M. Ruiz",notes:"Need shelf-life test. Explore pairing with aged daikon broth for welcome toast amuse.",tags:["spark","amuse","welcome"],hypothesis:"Encasing carbonated yuzu curd in alginate pearls will deliver an effervescent burst without collapse during tray pass.",variablesUnderTest:["CO₂ charge 18 bar vs 22 bar","Alginate bath calcium ppm","Holding temperature 2°C vs 5°C"],sensoryTargets:["Perlage sensation within 3 seconds of bite","Acid perception balanced at 5/10","Shell snap audible at 30 cm"],testPlan:["Run 90-minute pass holding to map effervescence decay","Measure dissolved CO₂ post-encapsulation","Record guest feedback on sparkle intensity"],equipment:["Carbonation rig","Immersion circulator","High-speed data logger"],launchWindow:"Welcome toast revamp",textureObjectives:["Membranes stay intact for 90-minute tray pass","Sparkle perception sustained across 6 tasters"],flavorConstellations:["Carbonated yuzu pearl × aged daikon broth × electric daisy tincture","Finger lime oil layered with kombu vapor for mineral lift"],futureFoodAngles:["Position sparkling solids as non-alcoholic celebration ritual","Refillable CO₂ capsules to eliminate single-use siphon chargers"]},{id:"exp-satin-03",title:"Velvet oyster emulsion",status:"ready",lastUpdated:"Yesterday",owner:"C. Nguyen",notes:"Approved for service preview—capture allergen handoff.",tags:["seafood","sauce","preview"],hypothesis:"Stabilizing raw oyster liquor with lecithin and xanthan will create a velvet sheen while retaining salinity cues.",variablesUnderTest:["Xanthan inclusion 0.05%","Shear speed 2200 rpm","Service temperature 8°C"],sensoryTargets:["Mirror gloss finish","Salinity 3.2%","Umami linger 9/10"],testPlan:["Hold emulsion for 4h under pass lamp","Rapid cool re-test for break","Plate with nitrogen-frozen herb powder"],equipment:["Pacojet","Rotor-stator blender","Nitrogen tunnel"],launchWindow:"Chef's counter prelude",textureObjectives:["Sheen maintains under pass lamp for 12 minutes","Emulsion coats spoon with zero break at 8°C"],flavorConstellations:["Velvet oyster emulsion × nitrogen-frozen herb powder × smoked leek oil","Sea lettuce gel layered with pickled green strawberry kosho"],futureFoodAngles:["Showcase regenerative shellfish as climate-positive luxury","Prototype cold-chain friendly oyster emulsion retail pack"]}],J0=[{id:"task-01",label:"Capture yield curves for koji custard",owner:"QA Team",due:"Today"},{id:"task-02",label:"Source electric daisy micro-lot",owner:"Purchasing",due:"Tomorrow",isBlocked:!0},{id:"task-03",label:"Calibrate sous-vide ovens",owner:"Ops",due:"Friday"}],ev=[{headline:"Menu margin guardrails engaged",detail:"Projected cost delta now +2.1% vs baseline thanks to AI assortment.",metric:"▲ 2.1%"},{headline:"Guest sentiment heatmap",detail:"Spark textures trending 18% above control; continue A/B with velvet baseline.",metric:"18% uplift"},{headline:"Supplier volatility risk",detail:"Citrus micro-lot at 62% supply. Run dual sourcing contingency."}],Cd=h.createContext(null);function tv({children:s}){const[t,i]=h.useState(xu),[n,a]=h.useState(xu[0]?.id??""),[o,l]=h.useState(""),r=h.useCallback(()=>typeof crypto<"u"&&"randomUUID"in crypto?`exp-${crypto.randomUUID()}`:`exp-${Date.now().toString(36)}${Math.random().toString(36).slice(2,6)}`,[]),d=h.useCallback(A=>A?.map(I=>I.trim()).filter(Boolean)??[],[]),c=h.useCallback(A=>{i(I=>I.map(B=>B.id===A?{...B,status:B.status==="archived"?"ideation":"archived",lastUpdated:"Just now"}:B))},[]),f=h.useCallback((A,I)=>{i(B=>B.map(W=>W.id===A?{...W,status:I,lastUpdated:"Just now"}:W))},[]),b=h.useCallback((A,I)=>{i(B=>B.map(W=>W.id===A?{...W,notes:I,lastUpdated:"Just now"}:W))},[]),D=h.useCallback(A=>{const I=r(),B={id:I,title:A.title.trim(),status:A.status??"ideation",lastUpdated:"Just now",owner:A.owner.trim(),notes:A.notes?.trim()||A.hypothesis.trim(),tags:(()=>{const W=d(A.tags);return W.length?W:["lab"]})(),hypothesis:A.hypothesis.trim(),variablesUnderTest:d(A.variablesUnderTest),sensoryTargets:d(A.sensoryTargets),testPlan:d(A.testPlan),equipment:d(A.equipment),launchWindow:A.launchWindow?.trim()||"TBD",textureObjectives:d(A.textureObjectives),flavorConstellations:d(A.flavorConstellations),futureFoodAngles:d(A.futureFoodAngles)};return i(W=>[B,...W]),a(I),I},[r,d]),u=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,variablesUnderTest:[...se.variablesUnderTest,B],lastUpdated:"Just now"}:se))},[]),p=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,testPlan:[...se.testPlan,B],lastUpdated:"Just now"}:se))},[]),x=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,sensoryTargets:[...se.sensoryTargets,B],lastUpdated:"Just now"}:se))},[]),S=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,textureObjectives:[...se.textureObjectives,B],lastUpdated:"Just now"}:se))},[]),m=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,flavorConstellations:[...se.flavorConstellations,B],lastUpdated:"Just now"}:se))},[]),v=h.useCallback((A,I)=>{const B=I.trim();B&&i(W=>W.map(se=>se.id===A?{...se,futureFoodAngles:[...se.futureFoodAngles,B],lastUpdated:"Just now"}:se))},[]),g=h.useCallback(()=>({experiments:Nu(t),focusExperimentId:n,searchQuery:o}),[t,n,o]),N=h.useCallback(A=>{const I=Array.isArray(A?.experiments)?Nu(A.experiments):[];i(I);const B=A?.focusExperimentId,W=I.length?I.some(se=>se.id===B)?B:I[0].id:"";a(W),l(typeof A?.searchQuery=="string"?A.searchQuery:"")},[i,a,l]),w=h.useMemo(()=>({experiments:t,focusExperimentId:n,setFocusExperiment:a,searchQuery:o,setSearchQuery:l,backlog:J0,insights:ev,toggleArchive:c,updateNotes:b,setExperimentStatus:f,createExperiment:D,appendVariable:u,appendTestStep:p,appendSensoryTarget:x,appendTextureObjective:S,appendFlavorConstellation:m,appendFutureFoodAngle:v,serializeState:g,hydrateState:N}),[t,n,o,c,b,f,D,u,p,x,S,m,v,g,N]);return e.jsxDEV(Cd.Provider,{value:w,children:s},void 0,!1,{fileName:"/app/code/client/stores/rdLabStore.tsx",lineNumber:497,columnNumber:10},this)}function sv(){return h.useContext(Cd)}function no(){const s=h.useContext(Cd);if(!s)throw new Error("useRDLabStore must be used within RDLabProvider");return s}const iv=["Bar","Global","Grab & Go","Outlet","Pastry"];function nv(s){const{mode:t="recipe",isCollapsed:i,onToggle:n,onOpenLabs:a,onCloseLabs:o,selectedAllergens:l,onAllergensChange:r,selectedNationality:d,onNationalityChange:c,selectedCourses:f,onCoursesChange:b,selectedRecipeType:D,onRecipeTypeChange:u,selectedPrepMethod:p,onPrepMethodChange:x,selectedCookingEquipment:S,onCookingEquipmentChange:m,selectedRecipeAccess:v,onRecipeAccessChange:g,image:N,onImageChange:w,onRecipeImport:A,taxonomy:I,onTaxonomyChange:B,isGlobal:W=!1,onGlobalChange:se}=s,[ie,R]=h.useState("active"),[F,k]=h.useState(""),[Q,J]=h.useState(()=>{try{return localStorage.getItem("recipe:chef-notes")||""}catch{return""}}),[O,me]=h.useState(!1),[de,fe]=h.useState([]),ae=(Y,T,y)=>{T(Y.includes(y)?Y.filter(E=>E!==y):[...Y,y])},L=Y=>B({...I,...Y}),H=Y=>Y.slice(0,3),le=sv(),ue=t==="rnd",K=h.useMemo(()=>{if(le)return le.experiments.find(Y=>Y.id===le.focusExperimentId)??le.experiments[0]},[le]),C=h.useMemo(()=>{if(!le)return[];const{experiments:Y,focusExperimentId:T}=le,y=K?.id??T,E=Y.filter(q=>q.id!==y);return(E.length>0?E:Y).slice(0,4)},[le,K?.id]),P=le?.backlog??[],ee=le?.insights??[],$=h.useMemo(()=>["fixed top-16 right-0 z-[70] h-[80vh] w-72 overflow-hidden rounded-tl-2xl rounded-bl-2xl border-l border-t backdrop-blur-sm shadow-inner transition-transform duration-500 ease-in-out no-callout",i?"translate-x-full":"translate-x-0",ue?"bg-gradient-to-b from-cyan-50/70 via-white/85 to-emerald-100/60 border-cyan-300/50 text-slate-900 dark:from-slate-950/90 dark:via-cyan-950/40 dark:to-slate-950/70 dark:border-cyan-500/40 dark:text-cyan-100":"bg-gradient-to-b from-gray-100/60 via-gray-200/50 to-gray-300/60 border-gray-400/50 text-black dark:from-slate-950/85 dark:via-slate-900/60 dark:to-slate-900/70 dark:border-slate-700/60 dark:text-slate-100"].join(" "),[i,ue]);h.useEffect(()=>{const Y=T=>{if(!(T.ctrlKey||T.metaKey))return;const E={p:"pastry",t:"technique",c:"course",a:"allergens",d:"diets",m:"meal",u:"cuisine",s:"service",y:"difficulty",e:"equipment"}[T.key.toLowerCase()];E&&(T.preventDefault(),i&&n(),fe(j=>j.includes(E)?j:[...j,E]),setTimeout(()=>{document.querySelector(`[data-accordion-section='${E}']`)?.scrollIntoView({behavior:"smooth",block:"nearest"})},0))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[i,n]);const U=async()=>{if(!(!F||O)){me(!0);try{const Y=await fetch("/api/recipe/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:F})}),T=await Y.json();if(!Y.ok)throw new Error(T?.error||`Import failed (${Y.status})`);await A?.(T),k("")}catch(Y){alert(Y?.message||"Failed to import recipe")}finally{me(!1)}}},G=async()=>{try{const Y=await navigator.clipboard.readText();Y&&k(Y)}catch{}},re=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"border-b border-gray-300/50 p-4 pt-5 dark:border-slate-700/60",children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-300",children:"Recipe ingestion"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:187,columnNumber:13},this),e.jsxDEV("h3",{className:"text-sm font-semibold tracking-tight text-slate-700 dark:text-slate-100",children:"Import & metadata curation"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:190,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:186,columnNumber:11},this),e.jsxDEV("button",{type:"button",onClick:()=>a?.(),className:"flex h-9 w-9 items-center justify-center rounded-full border border-slate-300 bg-white/80 text-slate-600 transition hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-300 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-cyan-500/30 dark:bg-slate-950/60 dark:text-cyan-200 dark:hover:bg-slate-950/80 dark:focus-visible:ring-cyan-400/50 dark:focus-visible:ring-offset-slate-950","aria-label":"Open R&D Labs",children:e.jsxDEV(Ph,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:185,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Recipe URL"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:204,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-1",children:[e.jsxDEV("input",{className:"flex-1 rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 placeholder-gray-400 shadow-sm transition-colors focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100 dark:placeholder-slate-500",value:F,onChange:Y=>k(Y.target.value),placeholder:"Enter recipe URL"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:206,columnNumber:13},this),e.jsxDEV("button",{type:"button",onClick:G,className:"rounded border border-gray-400/50 bg-white/70 px-3 py-2 text-sm text-slate-600 transition hover:bg-white/90 dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-200 dark:hover:bg-slate-900/80",title:"Paste from clipboard",children:"Paste"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:212,columnNumber:13},this),e.jsxDEV("button",{type:"button",onClick:U,disabled:O,className:`flex items-center justify-center rounded px-3 py-2 text-sm text-white transition ${O?"cursor-not-allowed bg-gray-400":"bg-blue-500 hover:bg-blue-600 dark:bg-cyan-500 dark:hover:bg-cyan-400"}`,children:O?e.jsxDEV("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white/30 border-t-white"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:231,columnNumber:17},this):e.jsxDEV(vg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:233,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:220,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:205,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:203,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:184,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 space-y-4 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-slate-600 dark:scrollbar-track-slate-800",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Recipe Image"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:242,columnNumber:11},this),e.jsxDEV("input",{type:"file",onChange:Y=>{const T=Y.target.files?.[0];T&&w(URL.createObjectURL(T))},className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-xs text-slate-600 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:243,columnNumber:11},this),N&&e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("img",{src:N,alt:"Preview",className:"h-32 w-full rounded border object-cover"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:253,columnNumber:15},this),e.jsxDEV("button",{type:"button",className:"mt-2 flex w-full items-center justify-center gap-2 rounded bg-blue-500 px-3 py-2 text-xs font-medium text-white transition hover:bg-blue-600 dark:bg-cyan-500 dark:hover:bg-cyan-400",onClick:()=>{try{window.dispatchEvent(new CustomEvent("openImageEditor",{detail:{image:N}}))}catch{}},children:[e.jsxDEV(Ih,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:265,columnNumber:17},this)," Edit Image"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:241,columnNumber:9},this),e.jsxDEV(X0,{type:"multiple",value:de,onValueChange:Y=>fe(Array.isArray(Y)?Y:[Y]),children:[e.jsxDEV(ni,{value:"recipe","data-accordion-section":"recipe",children:[e.jsxDEV(ai,{children:"Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:273,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"space-y-1 text-xs",children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:D.includes("Full Recipe"),onChange:()=>ae(D,u,"Full Recipe")},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:277,columnNumber:19},this),"Full Recipe"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:276,columnNumber:17},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:D.includes("Sub Recipe"),onChange:()=>ae(D,u,"Sub Recipe")},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:286,columnNumber:19},this),"Sub Recipe"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:285,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:275,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:274,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:272,columnNumber:11},this),e.jsxDEV(ni,{value:"status","data-accordion-section":"status",children:[e.jsxDEV(ai,{children:"Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:299,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("select",{value:ie,onChange:Y=>R(Y.target.value),className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100",children:[e.jsxDEV("option",{value:"active",children:"Active"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:306,columnNumber:17},this),e.jsxDEV("option",{value:"draft",children:"In Development"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:307,columnNumber:17},this),e.jsxDEV("option",{value:"archived",children:"Archived"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:301,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:300,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:298,columnNumber:11},this),e.jsxDEV(ni,{value:"access","data-accordion-section":"access",children:[e.jsxDEV(ai,{children:"Recipe Access"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:314,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:iv.map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:v.includes(Y),onChange:()=>ae(v,g,Y)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:320,columnNumber:23},this),Y]},Y,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:319,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:317,columnNumber:17},this),e.jsxDEV("div",{className:"border-t border-gray-400/30 dark:border-slate-700/40 pt-3",children:e.jsxDEV("label",{className:"flex items-start gap-2",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75 mt-0.5",checked:W,onChange:Y=>se?.(Y.target.checked)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:332,columnNumber:21},this),e.jsxDEV("span",{className:"text-xs leading-tight",children:[e.jsxDEV("div",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Make Global Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:339,columnNumber:23},this),e.jsxDEV("div",{className:"text-gray-600 dark:text-slate-400",children:"Available to all outlets. Share updates with chef approval."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:340,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:338,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:331,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:330,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:316,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:315,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:313,columnNumber:11},this),e.jsxDEV(ni,{value:"allergens","data-accordion-section":"allergens",children:[e.jsxDEV(ai,{children:"Allergens"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:349,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:gi("allergens").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.allergens.includes(Y.slug),onChange:()=>{const T=I.allergens.includes(Y.slug)?I.allergens.filter(y=>y!==Y.slug):[...I.allergens,Y.slug];L({allergens:T}),r(T)}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:354,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:353,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:351,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:350,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:348,columnNumber:11},this),e.jsxDEV(ni,{value:"diets","data-accordion-section":"diets",children:[e.jsxDEV(ai,{children:"Diets"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:374,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:gi("diets").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.diets.includes(Y.slug),onChange:()=>{const T=I.diets.includes(Y.slug)?I.diets.filter(y=>y!==Y.slug):[...I.diets,Y.slug];L({diets:T})}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:379,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:378,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:376,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:375,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:373,columnNumber:11},this),e.jsxDEV(ni,{value:"meal","data-accordion-section":"meal",children:[e.jsxDEV(ai,{children:"Meal Period"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:398,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("select",{className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100",value:I.mealPeriod||"",onChange:Y=>L({mealPeriod:Y.target.value||void 0}),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:405,columnNumber:17},this),gi("meal-period").map(Y=>e.jsxDEV("option",{value:Y.slug,children:Y.label},Y.slug,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:407,columnNumber:19},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:400,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:399,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:397,columnNumber:11},this),e.jsxDEV(ni,{value:"cuisine","data-accordion-section":"cuisine",children:[e.jsxDEV(ai,{children:"Cuisine"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:416,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("select",{className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100",value:I.cuisine||"",onChange:Y=>{const T=Y.target.value||void 0;L({cuisine:T}),c(T?[T]:[])},children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:427,columnNumber:17},this),gi("cuisines").map(Y=>e.jsxDEV("option",{value:Y.slug,children:Y.label},Y.slug,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:429,columnNumber:19},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:418,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:417,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:415,columnNumber:11},this),e.jsxDEV(ni,{value:"service","data-accordion-section":"service",children:[e.jsxDEV(ai,{children:"Service Style"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:438,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("select",{className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100",value:I.serviceStyle||"",onChange:Y=>L({serviceStyle:Y.target.value||void 0}),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:445,columnNumber:17},this),gi("service-style").map(Y=>e.jsxDEV("option",{value:Y.slug,children:Y.label},Y.slug,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:447,columnNumber:19},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:440,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:439,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:437,columnNumber:11},this),e.jsxDEV(ni,{value:"difficulty","data-accordion-section":"difficulty",children:[e.jsxDEV(ai,{children:"Difficulty"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:456,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("select",{className:"w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100",value:I.difficulty||"",onChange:Y=>L({difficulty:Y.target.value||void 0}),children:[e.jsxDEV("option",{value:"",children:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:463,columnNumber:17},this),gi("difficulty").map(Y=>e.jsxDEV("option",{value:Y.slug,children:Y.label},Y.slug,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:465,columnNumber:19},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:457,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:455,columnNumber:11},this),e.jsxDEV(ni,{value:"course","data-accordion-section":"course",children:[e.jsxDEV(ai,{children:"Course / Service"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:474,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"max-h-40 overflow-auto rounded border border-dashed border-gray-300/60 p-2 dark:border-slate-700/60",children:gi("course").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.course.includes(Y.slug),onChange:()=>{const T=I.course.includes(Y.slug)?I.course.filter(y=>y!==Y.slug):[...I.course,Y.slug];L({course:T}),b(T)}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:479,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:478,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:476,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:475,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:473,columnNumber:11},this),e.jsxDEV(ni,{value:"technique","data-accordion-section":"technique",children:[e.jsxDEV(ai,{children:"Technique (up to 3)"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:499,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"max-h-40 overflow-auto rounded border border-dashed border-gray-300/60 p-2 dark:border-slate-700/60",children:gi("technique").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.technique.includes(Y.slug),onChange:()=>{const y=I.technique.includes(Y.slug)?I.technique.filter(E=>E!==Y.slug):H([...I.technique,Y.slug]);L({technique:y}),x(y)}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:504,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:503,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:501,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:500,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:498,columnNumber:11},this),e.jsxDEV(ni,{value:"pastry","data-accordion-section":"pastry",children:[e.jsxDEV(ai,{children:"Pastry"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:525,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"max-h-40 overflow-auto rounded border border-dashed border-gray-300/60 p-2 dark:border-slate-700/60",children:gi("pastry").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.pastry.includes(Y.slug),onChange:()=>{const T=I.pastry.includes(Y.slug)?I.pastry.filter(y=>y!==Y.slug):[...I.pastry,Y.slug];L({pastry:T})}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:530,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:529,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:527,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:526,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:524,columnNumber:11},this),e.jsxDEV(ni,{value:"components","data-accordion-section":"components",children:[e.jsxDEV(ai,{children:"Components"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:549,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"max-h-40 overflow-auto rounded border border-dashed border-gray-300/60 p-2 dark:border-slate-700/60",children:gi("components").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.components.includes(Y.slug),onChange:()=>{const T=I.components.includes(Y.slug)?I.components.filter(y=>y!==Y.slug):[...I.components,Y.slug];L({components:T})}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:554,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:553,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:551,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:550,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:548,columnNumber:11},this),e.jsxDEV(ni,{value:"equipment","data-accordion-section":"equipment",children:[e.jsxDEV(ai,{children:"Equipment"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:573,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("div",{className:"max-h-40 overflow-auto rounded border border-dashed border-gray-300/60 p-2 dark:border-slate-700/60",children:gi("equipment").map(Y=>e.jsxDEV("label",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("input",{type:"checkbox",className:"scale-75",checked:I.equipment.includes(Y.slug)||S.includes(Y.slug),onChange:()=>{const T=I.equipment.includes(Y.slug)?I.equipment.filter(E=>E!==Y.slug):[...I.equipment,Y.slug];L({equipment:T});const y=S.includes(Y.slug)?S.filter(E=>E!==Y.slug):[...S,Y.slug];m(y)}},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:578,columnNumber:21},this),Y.label]},Y.slug,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:577,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:575,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:574,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:572,columnNumber:11},this),e.jsxDEV(ni,{value:"notes","data-accordion-section":"notes",children:[e.jsxDEV(ai,{children:"Chef Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:601,columnNumber:13},this),e.jsxDEV(ri,{children:e.jsxDEV("textarea",{value:Q,onChange:Y=>{const T=Y.target.value;J(T);try{localStorage.setItem("recipe:chef-notes",T)}catch{}try{window.dispatchEvent(new CustomEvent("recipe:chef-notes",{detail:T}))}catch{}},placeholder:"Notes only you see. Printed under Nutrition.",className:"h-20 w-full rounded border border-gray-400/50 bg-gray-100/50 p-2 text-sm text-slate-700 transition focus:bg-white focus:outline-none dark:border-slate-700/60 dark:bg-slate-900/60 dark:text-cyan-100 dark:placeholder-slate-500"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:603,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:602,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:600,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:271,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:240,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:183,columnNumber:5},this),V=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center justify-between border-b border-cyan-200/60 p-4 dark:border-cyan-500/30",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-600 dark:text-cyan-200/70",children:"R&D signal deck"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:633,columnNumber:11},this),e.jsxDEV("h3",{className:"text-sm font-semibold tracking-tight text-cyan-900 dark:text-cyan-100",children:K?.title??"Activation stream"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:636,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:632,columnNumber:9},this),e.jsxDEV("button",{type:"button",onClick:()=>o?.(),className:"flex h-9 w-9 items-center justify-center rounded-full border border-cyan-300/60 bg-cyan-500/15 text-cyan-900 transition hover:bg-cyan-500/25 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-2 focus-visible:ring-offset-cyan-50 dark:border-cyan-500/40 dark:bg-cyan-500/20 dark:text-cyan-100","aria-label":"Return to recipe tools",children:e.jsxDEV(Ah,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:646,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:640,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:631,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 space-y-4 overflow-y-auto px-4 py-4 text-sm scrollbar-thin scrollbar-thumb-cyan-200/70 scrollbar-track-cyan-100/40 dark:scrollbar-thumb-cyan-500/50 dark:scrollbar-track-slate-900/50",children:le?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("section",{className:"rounded-2xl border border-cyan-300/40 bg-cyan-50/70 p-4 shadow-inner dark:border-cyan-500/30 dark:bg-slate-950/60",children:[e.jsxDEV("header",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.35em] text-cyan-700 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:"Focus experiment"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:654,columnNumber:17},this),e.jsxDEV("span",{children:K?.status??"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:655,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:653,columnNumber:15},this),e.jsxDEV("h4",{className:"mt-2 text-base font-semibold tracking-tight text-cyan-900 dark:text-cyan-100",children:K?.title??"No experiment selected"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:657,columnNumber:15},this),e.jsxDEV("p",{className:"mt-2 text-xs leading-relaxed text-cyan-800/80 dark:text-cyan-100/80",children:K?.notes??"Select an experiment to view notes and context."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:660,columnNumber:15},this),K?e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2 text-[11px] uppercase tracking-[0.3em] text-cyan-700/80 dark:text-cyan-200/80",children:[e.jsxDEV("span",{children:["Owner: ",K.owner]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:665,columnNumber:19},this),e.jsxDEV("span",{children:["Updated: ",K.lastUpdated]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:666,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:664,columnNumber:17},this):null,e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:(K?.tags??[]).map(Y=>e.jsxDEV("span",{className:"rounded-full bg-cyan-500/15 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-700 dark:bg-cyan-500/20 dark:text-cyan-200",children:Y},Y,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:671,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:669,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:652,columnNumber:13},this),e.jsxDEV("section",{className:"space-y-3 rounded-2xl border border-cyan-200/40 bg-white/80 p-4 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/50",children:[e.jsxDEV("header",{className:"flex items-center justify-between text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-700 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:"Discovery queue"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:683,columnNumber:17},this),e.jsxDEV("span",{children:C.length},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:684,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:682,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[C.map(Y=>{const T=Y.id===le.focusExperimentId;return e.jsxDEV("button",{type:"button",onClick:()=>le.setFocusExperiment(Y.id),className:`w-full rounded-xl border px-3 py-2 text-left text-xs transition ${T?"border-cyan-400 bg-cyan-500/10 text-cyan-900 dark:border-cyan-400/70 dark:bg-cyan-500/20 dark:text-cyan-100":"border-transparent bg-white/60 text-slate-600 hover:border-cyan-300/70 hover:bg-cyan-500/10 hover:text-cyan-900 dark:bg-slate-950/40 dark:text-cyan-200/70 dark:hover:border-cyan-400/40 dark:hover:text-cyan-50"}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em]",children:[e.jsxDEV("span",{children:Y.status},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:701,columnNumber:25},this),e.jsxDEV("span",{children:Y.lastUpdated},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:702,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:700,columnNumber:23},this),e.jsxDEV("div",{className:"mt-1 font-semibold tracking-tight",children:Y.title},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:704,columnNumber:23},this),e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.35em] text-cyan-700/80 dark:text-cyan-200/70",children:Y.tags.map(y=>e.jsxDEV("span",{children:y},y,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:707,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:705,columnNumber:23},this)]},Y.id,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:690,columnNumber:21},this)}),C.length===0&&e.jsxDEV("div",{className:"rounded-xl border border-dashed border-cyan-300/60 bg-white/70 px-3 py-2 text-xs text-cyan-700 dark:border-cyan-500/40 dark:bg-slate-950/50 dark:text-cyan-200/70",children:"No additional experiments in queue. Create a new study from the R&D suite."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:714,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:686,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:681,columnNumber:13},this),e.jsxDEV("section",{className:"space-y-3 rounded-2xl border border-cyan-200/40 bg-white/80 p-4 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/50",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-700 dark:text-cyan-200/70",children:"Backlog triggers"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:722,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[P.map(Y=>e.jsxDEV("div",{className:"flex items-start justify-between gap-3 rounded-xl border border-cyan-200/40 bg-white/70 px-3 py-2 text-xs dark:border-cyan-500/30 dark:bg-slate-950/60",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold text-cyan-900 dark:text-cyan-100",children:Y.label},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:732,columnNumber:23},this),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.35em] text-cyan-700/80 dark:text-cyan-200/70",children:["Owner: ",Y.owner]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:733,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:731,columnNumber:21},this),e.jsxDEV("div",{className:"text-right text-[10px] uppercase tracking-[0.35em] text-cyan-700/80 dark:text-cyan-200/70",children:[e.jsxDEV("div",{className:"font-semibold",children:Y.due},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:738,columnNumber:23},this),Y.isBlocked?e.jsxDEV("span",{className:"mt-1 inline-flex items-center rounded-full bg-rose-500/20 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.35em] text-rose-600 dark:text-rose-300",children:"Blocked"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:740,columnNumber:25},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:737,columnNumber:21},this)]},Y.id,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:727,columnNumber:19},this)),P.length===0&&e.jsxDEV("div",{className:"rounded-xl border border-dashed border-cyan-300/60 bg-white/70 px-3 py-2 text-xs text-cyan-700 dark:border-cyan-500/40 dark:bg-slate-950/60 dark:text-cyan-200/70",children:"Backlog is clear. Stay close to the live experiments feed for new actions."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:748,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:725,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:721,columnNumber:13},this),e.jsxDEV("section",{className:"space-y-2 rounded-2xl border border-cyan-200/40 bg-white/80 p-4 text-xs shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/50 dark:text-cyan-100",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-700 dark:text-cyan-200/70",children:"Insights feed"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:756,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[ee.map((Y,T)=>e.jsxDEV("div",{className:"rounded-xl border border-cyan-200/40 bg-white/70 px-3 py-2 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/60",children:[e.jsxDEV("div",{className:"text-xs font-semibold text-cyan-900 dark:text-cyan-100",children:Y.headline},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:765,columnNumber:21},this),e.jsxDEV("p",{className:"text-[11px] leading-relaxed text-cyan-800/80 dark:text-cyan-200/80",children:Y.detail},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:766,columnNumber:21},this),Y.metric?e.jsxDEV("div",{className:"mt-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-emerald-600 dark:text-emerald-300",children:Y.metric},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:768,columnNumber:23},this):null]},`${Y.headline}-${T}`,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:761,columnNumber:19},this)),ee.length===0&&e.jsxDEV("div",{className:"rounded-xl border border-dashed border-cyan-300/60 bg-white/70 px-3 py-2 text-xs text-cyan-700 dark:border-cyan-500/40 dark:bg-slate-950/60 dark:text-cyan-200/70",children:"No insights captured yet. Sync experiments to populate this feed."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:775,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:759,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:755,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:651,columnNumber:11},this):e.jsxDEV("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-cyan-300/60 bg-cyan-50/60 p-6 text-center text-sm text-cyan-700 dark:border-cyan-500/30 dark:bg-slate-950/60 dark:text-cyan-200/70",children:"R&D workspace data is not available in this view."},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:783,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:649,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:630,columnNumber:5},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{"aria-label":"Toggle sidebar",onClick:n,onContextMenu:Y=>Y.preventDefault(),className:"fixed right-0 top-1/2 z-[71] -translate-y-1/2 select-none rounded-l-full border border-gray-300 bg-background px-2 py-3 shadow hover:bg-muted dark:border-slate-700 dark:bg-slate-900/70 dark:hover:bg-slate-900",style:{transform:"translateY(-50%)"},children:e.jsxDEV("div",{className:"flex flex-col items-center gap-1",children:[e.jsxDEV("span",{className:"block h-4 w-0.5 bg-gray-400"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:801,columnNumber:11},this),e.jsxDEV("span",{className:"block h-4 w-0.5 bg-gray-400"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:802,columnNumber:11},this),e.jsxDEV("span",{className:"block h-4 w-0.5 bg-gray-400"},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:803,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:800,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:793,columnNumber:7},this),e.jsxDEV("div",{onContextMenu:Y=>Y.preventDefault(),className:$,children:!i&&e.jsxDEV("div",{className:"flex h-full flex-col",children:ue?V():re()},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:807,columnNumber:26},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:806,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RightSidebar.tsx",lineNumber:792,columnNumber:5},this)}function av({isOpen:s,image:t,onClose:i,onApply:n,isDarkMode:a}){const o=h.useRef(null),[l,r]=h.useState(null),[d,c]=h.useState(100),[f,b]=h.useState(100),[D,u]=h.useState(100),[p,x]=h.useState("free");if(h.useEffect(()=>{if(!s||!t)return;const m=new Image;m.crossOrigin="anonymous",m.onload=()=>r(m),m.src=t},[s,t]),h.useEffect(()=>{const m=o.current;if(!m||!l)return;const v=m.getContext("2d");if(!v)return;let g=Math.min(880,l.naturalWidth||l.width),N=Math.min(500,l.naturalHeight||l.height);if(p!=="free"){const[se,ie]=p.split(":").map(Number),R=880,F=500,k=se/ie;R/F>k?(N=F,g=Math.round(N*k)):(g=R,N=Math.round(g/k))}m.width=g,m.height=N,v.clearRect(0,0,g,N),v.filter=`brightness(${d}%) contrast(${f}%) saturate(${D}%)`;const w=Math.min(g/(l.naturalWidth||l.width),N/(l.naturalHeight||l.height)),A=Math.round((l.naturalWidth||l.width)*w),I=Math.round((l.naturalHeight||l.height)*w),B=Math.floor((g-A)/2),W=Math.floor((N-I)/2);v.drawImage(l,B,W,A,I)},[l,d,f,D,p]),!s)return null;const S=()=>{const m=o.current;m&&(n(m.toDataURL("image/png")),i())};return e.jsxDEV("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:`${a?"bg-black/90 border border-cyan-400/50 text-cyan-300":"bg-white text-black"} rounded-xl p-4 md:p-6 w-[95vw] max-w-5xl max-h-[95vh] overflow-auto shadow-2xl`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h3",{className:"text-lg font-bold",children:"Image Editor"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:53,columnNumber:11},this),e.jsxDEV("button",{onClick:i,className:"text-sm px-2 py-1 rounded border hover:bg-black/10",children:"✕"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:54,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"md:col-span-2",children:e.jsxDEV("canvas",{ref:o,className:"w-full max-w-full bg-[#0b1220] rounded"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:58,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:57,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-1",children:"Aspect"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:62,columnNumber:15},this),e.jsxDEV("select",{className:"w-full border rounded px-2 py-1 bg-transparent",value:p,onChange:m=>x(m.target.value),children:[e.jsxDEV("option",{value:"free",children:"Free"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:64,columnNumber:17},this),e.jsxDEV("option",{value:"1:1",children:"1:1"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:65,columnNumber:17},this),e.jsxDEV("option",{value:"4:3",children:"4:3"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:66,columnNumber:17},this),e.jsxDEV("option",{value:"16:9",children:"16:9"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:67,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:63,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-1",children:["Brightness (",d,"%)"]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:71,columnNumber:15},this),e.jsxDEV("input",{type:"range",min:0,max:200,value:d,onChange:m=>c(Number(m.target.value)),className:"w-full"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:72,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-1",children:["Contrast (",f,"%)"]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:75,columnNumber:15},this),e.jsxDEV("input",{type:"range",min:0,max:200,value:f,onChange:m=>b(Number(m.target.value)),className:"w-full"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:76,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-1",children:["Saturation (",D,"%)"]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:79,columnNumber:15},this),e.jsxDEV("input",{type:"range",min:0,max:200,value:D,onChange:m=>u(Number(m.target.value)),className:"w-full"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:80,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("div",{className:"pt-2 flex gap-3",children:[e.jsxDEV("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save & Close"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:83,columnNumber:15},this),e.jsxDEV("button",{onClick:i,className:"px-4 py-2 rounded border",children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:84,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/ImageEditorModal.tsx",lineNumber:50,columnNumber:5},this)}const rv={calories:2e3,fat:78,saturatedFat:20,transFat:null,carbs:275,fiber:28,sugars:50,protein:50,sodium:2300},ov=[{label:"Total Fat",field:"fat",unit:"g"},{label:"Saturated Fat",field:"saturatedFat",unit:"g"},{label:"Trans Fat",field:"transFat",unit:"g"},{label:"Total Carbohydrate",field:"carbs",unit:"g"},{label:"Dietary Fiber",field:"fiber",unit:"g"},{label:"Total Sugars",field:"sugars",unit:"g"},{label:"Protein",field:"protein",unit:"g"},{label:"Sodium",field:"sodium",unit:"mg"}],lv=(s,t)=>Number.isFinite(s)?t==="mg"?`${Math.round(s)} ${t}`:s>=10?`${s.toFixed(1)} ${t}`:`${s.toFixed(2)} ${t}`:"0",cv=(s,t)=>{const i=rv[s];return!i||i<=0?"":`${Math.round(Math.max(t,0)/i*100)}%`};function dv({data:s,servings:t,perServing:i}){if(!s)return null;const n=i&&t>0?s.perServing:s.totals,a=Math.round((s.coverage||0)*100),o=n.calories===0&&n.fat===0&&n.carbs===0&&n.protein===0;return e.jsxDEV("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start",children:[e.jsxDEV("div",{className:"w-[290px] rounded-2xl border border-white/40 bg-white p-4 text-slate-900 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950 dark:text-cyan-50",children:[e.jsxDEV("div",{className:"border-b border-black pb-2 text-3xl font-black tracking-tight dark:border-cyan-200",children:"Nutrition Facts"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV("div",{className:"mt-2 flex items-center justify-between text-sm font-medium",children:[e.jsxDEV("span",{children:i?"Per serving":"Whole recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:89,columnNumber:11},this),e.jsxDEV("span",{children:["Servings: ",t>0?t:"—"]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex items-end justify-between text-base font-semibold",children:[e.jsxDEV("span",{children:"Calories"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("span",{className:"text-3xl font-black",children:Math.round(n.calories||0)},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:94,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 border-t border-black pt-2 text-xs font-semibold uppercase tracking-[0.15em] text-muted-foreground",children:"% Daily Value*"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:100,columnNumber:9},this),e.jsxDEV("div",{className:"mt-2 space-y-1 text-sm",children:ov.map(l=>{const r=(l.field==="sodium",n[l.field]),d=lv(r,l.unit),c=cv(l.field,(l.field==="sodium",r));return e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:l.label},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:110,columnNumber:17},this),e.jsxDEV("span",{className:"font-medium",children:[d,c?e.jsxDEV("span",{className:"ml-2 text-xs font-semibold text-slate-500 dark:text-cyan-300",children:c},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:113,columnNumber:30},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:111,columnNumber:17},this)]},l.field,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:109,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 text-[11px] text-muted-foreground",children:"* Percent Daily Values are based on a 2,000 calorie diet. Adjust serving counts to match packaging requirements."},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV("div",{className:"mt-2 rounded-lg bg-slate-100 px-3 py-2 text-[11px] text-slate-600 dark:bg-cyan-900/30 dark:text-cyan-200",children:["Database coverage: ",e.jsxDEV("strong",{children:[a,"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:123,columnNumber:30},this),a<95?" – review unknown ingredients below.":""]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:122,columnNumber:9},this),o?e.jsxDEV("div",{className:"mt-2 rounded-lg bg-amber-50 px-3 py-2 text-[11px] text-amber-800 dark:bg-amber-900/30 dark:text-amber-100",children:"No measurable quantities detected. Include units (oz, cup, g) for each ingredient or specify exact weights."},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:127,columnNumber:11},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:84,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 space-y-3",children:[s.unknown.length?e.jsxDEV("div",{className:"rounded-xl border border-amber-400/50 bg-amber-50/70 p-3 text-xs text-amber-800 dark:border-amber-300/40 dark:bg-amber-900/30 dark:text-amber-50",children:[e.jsxDEV("div",{className:"font-semibold uppercase tracking-[0.18em]",children:"Unknown ingredients"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:136,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-1",children:s.unknown.map(l=>e.jsxDEV("li",{children:[e.jsxDEV("span",{className:"font-medium",children:l.original},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:140,columnNumber:19},this),l.suggestion?e.jsxDEV("span",{className:"text-muted-foreground",children:[" — try mapping to ",e.jsxDEV("code",{children:l.suggestion},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:142,columnNumber:79},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:142,columnNumber:21},this):null]},l.original,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:139,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:135,columnNumber:11},this):null,s.breakdown.length?e.jsxDEV("div",{className:"rounded-xl border border-white/40 bg-white/80 p-3 text-xs text-slate-800 shadow-sm dark:border-cyan-500/30 dark:bg-slate-950/70 dark:text-cyan-50",children:[e.jsxDEV("div",{className:"mb-2 text-sm font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Ingredient contribution"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:152,columnNumber:13},this),e.jsxDEV("div",{className:"max-h-64 overflow-auto",children:e.jsxDEV("table",{className:"w-full table-fixed border-separate border-spacing-y-1",children:[e.jsxDEV("thead",{className:"text-[11px] uppercase tracking-[0.12em] text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"w-6/12 text-left",children:"Ingredient"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:159,columnNumber:21},this),e.jsxDEV("th",{className:"w-2/12 text-right",children:"g"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:160,columnNumber:21},this),e.jsxDEV("th",{className:"w-2/12 text-right",children:"kcal"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:161,columnNumber:21},this),e.jsxDEV("th",{className:"w-2/12 text-right",children:"Protein"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:162,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:158,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:157,columnNumber:17},this),e.jsxDEV("tbody",{children:s.breakdown.map((l,r)=>e.jsxDEV("tr",{className:`rounded-lg ${l.matchKey?"bg-white/70 dark:bg-cyan-900/30":"bg-red-50/70 text-red-800 dark:bg-red-900/30 dark:text-red-100"}`,children:[e.jsxDEV("td",{className:"truncate px-2 py-1 align-middle",children:[e.jsxDEV("div",{className:"font-medium",children:l.original},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:172,columnNumber:25},this),e.jsxDEV("div",{className:"text-[10px] text-muted-foreground",children:l.matchKey?`${l.matchKey}${l.confidence<.6?" (low confidence)":""}`:"Unmapped"},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:173,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:171,columnNumber:23},this),e.jsxDEV("td",{className:"px-2 py-1 text-right align-middle",children:Math.round(l.grams)},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:177,columnNumber:23},this),e.jsxDEV("td",{className:"px-2 py-1 text-right align-middle",children:Math.round(l.macros.calories)},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:178,columnNumber:23},this),e.jsxDEV("td",{className:"px-2 py-1 text-right align-middle",children:[l.macros.protein.toFixed(1)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:179,columnNumber:23},this)]},`${l.original}-${r}`,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:167,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:165,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:156,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:155,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:151,columnNumber:11},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:133,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/NutritionLabel.tsx",lineNumber:83,columnNumber:5},this)}const ao=zx,ro=Gx,Qa=h.forwardRef(({className:s,align:t="center",sideOffset:i=4,...n},a)=>e.jsxDEV(Hx,{children:e.jsxDEV(nh,{ref:a,align:t,sideOffset:i,className:je("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n},void 0,!1,{fileName:"/app/code/client/components/ui/popover.tsx",lineNumber:15,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/popover.tsx",lineNumber:14,columnNumber:3},void 0));Qa.displayName=nh.displayName;function uv({variant:s="card",isDark:t,className:i,contentClassName:n,align:a="end"}){const{language:o,setLanguage:l}=md(),{t:r}=Vs(),d=ko.find(D=>D.code===o)??ko[0],c=je(s==="card"?"flex h-full min-h-[4.25rem] w-full items-center justify-center rounded-2xl border px-4 py-3 shadow-inner transition-colors":"inline-flex h-9 w-14 items-center justify-center rounded-full border text-2xl transition-colors",t?s==="card"?"border-cyan-400/40 bg-cyan-900/30 text-cyan-100 hover:bg-cyan-900/50":"border-cyan-400/40 bg-slate-900/70 text-cyan-100 hover:bg-slate-900/60":s==="card"?"border-slate-200 bg-white/90 text-slate-800 hover:bg-white":"border-slate-300 bg-white/90 text-slate-700 hover:bg-white",i),f=D=>je("relative flex aspect-square items-center justify-center rounded-lg border text-3xl transition",t?D?"border-cyan-400/60 bg-cyan-500/20 text-cyan-100":"border-cyan-500/25 bg-slate-950/70 text-cyan-200 hover:bg-slate-900/70":D?"border-slate-500 bg-slate-200 text-slate-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-100"),b=r("recipe.tools.language","Change Language");return e.jsxDEV(ao,{children:[e.jsxDEV(ro,{asChild:!0,children:e.jsxDEV("button",{type:"button",className:c,title:`${b} (${d.label})`,"aria-label":`${b}, ${d.label}`,children:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"sr-only",children:`${b} (${d.label})`},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("span",{className:"text-2xl leading-none","aria-hidden":!0,children:d.flag},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:73,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:71,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV(Qa,{align:a,className:je("w-72 p-4",t?"bg-slate-900/95 text-cyan-100":"bg-white/95 text-slate-900",n),children:e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:ko.map(D=>{const u=D.code===o;return e.jsxDEV("button",{type:"button",onClick:()=>l(D.code),className:f(u),"aria-pressed":u,children:[e.jsxDEV("span",{className:"sr-only",children:D.label},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:100,columnNumber:17},this),e.jsxDEV("span",{className:"text-2xl leading-none","aria-hidden":!0,children:D.flag},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:101,columnNumber:17},this),u?e.jsxDEV(vn,{className:je("absolute right-1.5 top-1.5 h-4 w-4 rounded-full p-0.5 shadow",t?"bg-cyan-500 text-slate-950":"bg-slate-900 text-white"),"aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:105,columnNumber:19},this):null]},D.code,!0,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:93,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:89,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:79,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/LanguageMenu.tsx",lineNumber:63,columnNumber:5},this)}const gu=[{id:"crisp-bright",family:"Crisp",descriptors:["snappy","aerated","glasslike"],idealPairings:["yuzu gel","compressed cucumber","white tea vapor"],suggestedTechniques:["isomalt tuile","liquid nitrogen shatter","rapid dehydrate"],platingNotes:"Offset with a single satin element to control perceived dryness."},{id:"velvet-lush",family:"Velvet",descriptors:["lush","slow-melt","rounded"],idealPairings:["black garlic caramel","toasted sesame praline","maraschino cherry skin"],suggestedTechniques:["thermostable ganache","sous-vide custard","whipped mascarpone"]},{id:"spark-tension",family:"Spark",descriptors:["kinetic","tingling","volatile"],idealPairings:["Sichuan pepper oil","electric daisy","citric snow"],suggestedTechniques:["carbonic acid pearls","nitrous espuma","acidulated dust"],platingNotes:"Keep within 8 minute window for peak bloom."},{id:"smoke-satin",family:"Satin",descriptors:["glossy","smoked","silken"],idealPairings:["roasted mushroom broth","miso butterscotch","charred leek ash"],suggestedTechniques:["gelatin glaze","smoked agar film","pacotized parfait"]}],mv=[{id:"signal-ferment",title:"Koji Ferment x Citrus",category:"Flavor Systems",metric:"+18% menu adoption",delta:"▲ 6.2% vs last quarter",confidence:"high",summary:"Cross-pollinate dry-aged citrus peels with shiro koji for a bright umami core."},{id:"signal-hyperlocal",title:"Hyperlocal Aromatics",category:"Sourcing",metric:"62 partner farms",delta:"▲ 4 new winemakers onboarded",confidence:"medium",summary:"Guests respond to micro lot pairings framed with origin cards at the pass."},{id:"signal-ai",title:"AI Assisted Costing",category:"Operations",metric:"12.4h saved / week",delta:"▼ 1.5h vs previous sprint",confidence:"high",summary:"Recipe variants prioritized by real-time margin guardrails reduce waste 9%."}],pv=[{id:"playlist-chroma",title:"Chroma Immersion",mood:"High-energy test kitchen",tracks:["Chromatic Lift","Spectral Drift","Ultraviolet Baton"]},{id:"playlist-late-service",title:"Late Service Calm",mood:"After-hours refinement",tracks:["Indigo Static","Koan for Steam","Slow Orbit"]}],vu=[{id:"fermented-spark",name:"Fermented Spark Mesh",textureHook:"Carbonated citrus pearls suspended in alginate film",flavorDrivers:["Yuzu curd cultured with jun tea","Koji brine reduced with finger lime oil","Electric daisy tincture for tingling lift"],balancingNotes:["Smoked salt honey shard for crunch","Frozen coconut kefir snow to quench acidity","Compressed Asian pear for linear sweetness"],futureAngle:"Low-waste carbonation using reclaimed citrus fiber",applications:["Welcome toast service amuse","Shelf-stable retail kit with on-demand CO₂ charge"]},{id:"velvet-brine",name:"Velvet Brine Cascade",textureHook:"Silken custard stabilized with koji whey and sea lettuce gel",flavorDrivers:["Smoked maple lacto brine","Braised kombu caramel","Roasted koji oil for umami sheen"],balancingNotes:["Pickled spruce tips for brightness","Fermented black apple vinegar","Buckwheat cacao crumble for contrast"],futureAngle:"Circular menu design using reclaimed whey streams",applications:["Dessert course with warm-cold textural duel","Retail jarred custard with reheat instructions"]},{id:"osmanthus-aerogel",name:"Osmanthus Aerogel Bloom",textureHook:"Freeze-dried soy milk aerogel layered with hydroponic blossoms",flavorDrivers:["Osmanthus blossom distillate","Fermented apricot kernel milk","Kombucha vinegar caramel"],balancingNotes:["Charred pine pollen dust","Grapefruit segment cured in jasmine salt","Szechuan peppercorn hydrosol mist"],futureAngle:"Climate-adaptive aromatics grown in vertical farms",applications:["Tasting menu intermezzo","Retail confection highlighting botanical perfumery"]},{id:"umami-nucleus",name:"Umami Nucleus",textureHook:"Layered gel terrine alternating broth gel and fibrous mycelium crouton",flavorDrivers:["Black koji soy reduction","Roasted seaweed oil infused with charred leek","Cultured sunflower cream"],balancingNotes:["Green strawberry kosho","Cold smoked kombu glass","Sprouted barley koji crunch"],futureAngle:"Fungi-forward center-of-plate replacing animal marrow",applications:["Shareable bar snack","Retail heat-and-eat center with broth concentrate"]}],zr=[{id:"upcycled-streams",theme:"Upcycled Fermentation Streams",signal:"Koji whey export market up 28% YoY",insight:"Beverage brands want ready-to-infuse cultured concentrates for low-waste launches.",action:"Prototype shelf-stable koji whey reductions paired with sparkling acid bases."},{id:"adaptive-aromatics",theme:"Adaptive Aromatics",signal:"Indoor blossom farms reporting 40% cost drop on osmanthus and jasmine",insight:"Vertical agriculture enables perfumed flavor layers previously cost prohibitive.",action:"Build aroma libraries that can be misted, spun, or freeze-dried into signature kits."},{id:"mycelium-protein",theme:"Mycelium Protein Architecture",signal:"Fungi scaffolding patents growing 3× over two years",insight:"Texture innovation is the unlock for fungi-centric center-of-plate adoption.",action:"Model terrine-style builds that mimic marrow and foie gras mouthfeel."},{id:"carbonated-textures",theme:"Carbonated Textures",signal:"Sparkling solids searches up 62% in global trend dashboards",insight:"Consumers seek effervescent bite experiences beyond beverages.",action:"Scale alginate-carbonated pearls with rapid pass QA testing protocols."}];function fv(){const{experiments:s,focusExperimentId:t,setFocusExperiment:i,searchQuery:n,setSearchQuery:a,createExperiment:o}=no(),l=h.useMemo(()=>{if(!n.trim())return s;const O=n.toLowerCase();return s.filter(me=>[me.title,me.owner,me.notes,me.hypothesis,me.tags.join(" "),me.variablesUnderTest.join(" "),me.sensoryTargets.join(" "),me.textureObjectives.join(" "),me.flavorConstellations.join(" "),me.futureFoodAngles.join(" ")].join(" ").toLowerCase().includes(O))},[s,n]),[r,d]=h.useState(""),[c,f]=h.useState("Lab Team"),[b,D]=h.useState(""),[u,p]=h.useState(""),[x,S]=h.useState(""),[m,v]=h.useState(""),[g,N]=h.useState(""),[w,A]=h.useState(""),[I,B]=h.useState(""),[W,se]=h.useState(""),[ie,R]=h.useState(""),F=h.useCallback((O,me)=>{O(de=>{const fe=de.trim();return fe.length?`${fe}
${me}`:me})},[]),k=O=>O.split(/[\n,]/).map(me=>me.trim()).filter(Boolean),Q=O=>{O.preventDefault();const me=r.trim(),de=b.trim();if(!me||!de)return;const fe=c.trim()||"Lab Team",ae=o({title:me,hypothesis:de,owner:fe,tags:k(g),variablesUnderTest:k(u),sensoryTargets:k(x),equipment:k(m),textureObjectives:k(I),flavorConstellations:k(W),futureFoodAngles:k(ie),testPlan:["Bench validation queued"],notes:de,launchWindow:w.trim()});i(ae),a(""),d(""),D(""),p(""),S(""),v(""),N(""),A(""),B(""),se(""),R("")},J=!r.trim()||!b.trim();return e.jsxDEV("div",{className:"flex h-full min-h-0 flex-col gap-5 overflow-y-auto pr-1",children:[e.jsxDEV("div",{className:"rounded-2xl border border-white/20 bg-white/6 p-4 backdrop-blur md:bg-white/10 dark:border-cyan-500/25 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/80",children:"Discovery Queue"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV("input",{type:"search",value:n,onChange:O=>a(O.target.value),placeholder:"Search textures, owners, status",className:"mt-3 w-full rounded-xl border border-white/30 bg-white/40 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none ring-0 transition focus:border-sky-500 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-900/40 dark:text-cyan-100 dark:focus:border-cyan-400"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:108,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-[10px] uppercase tracking-[0.35em] text-cyan-100/70",children:[e.jsxDEV("span",{className:"chalk-breath",children:["Textures ",gu.length]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:116,columnNumber:11},this),e.jsxDEV("span",{className:"chalk-breath",children:["Constellations ",vu.length]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:117,columnNumber:11},this),e.jsxDEV("span",{className:"chalk-breath",children:["Drivers ",zr.length]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:118,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:115,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:104,columnNumber:7},this),e.jsxDEV("div",{className:"rounded-2xl border border-white/20 bg-white/8 p-4 backdrop-blur md:bg-white/14 dark:border-cyan-500/25 dark:bg-cyan-500/10",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/80",children:"Rapid prototyping"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:123,columnNumber:9},this),e.jsxDEV("p",{className:"mt-1 text-[11px] text-slate-500 dark:text-cyan-200/70",children:"Spin up a fresh experiment with hypothesis, variables, and target service window before you hit the bench."},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:126,columnNumber:9},this),e.jsxDEV("form",{onSubmit:Q,className:"mt-3 space-y-3 text-xs text-slate-600 dark:text-cyan-200/80",children:[e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxDEV("input",{value:r,onChange:O=>d(O.target.value),placeholder:"Working title",className:"rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:131,columnNumber:13},this),e.jsxDEV("input",{value:c,onChange:O=>f(O.target.value),placeholder:"Lab owner / lead",className:"rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV("textarea",{value:b,onChange:O=>D(O.target.value),placeholder:"Hypothesis: what will this technique unlock?",rows:3,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:144,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxDEV("textarea",{value:u,onChange:O=>p(O.target.value),placeholder:"Variables under test (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:152,columnNumber:13},this),e.jsxDEV("textarea",{value:x,onChange:O=>S(O.target.value),placeholder:"Sensory targets (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:159,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:151,columnNumber:11},this),e.jsxDEV("textarea",{value:m,onChange:O=>v(O.target.value),placeholder:"Key instrumentation (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:167,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxDEV("textarea",{value:I,onChange:O=>B(O.target.value),placeholder:"Texture objectives (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-emerald-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:175,columnNumber:13},this),e.jsxDEV("textarea",{value:W,onChange:O=>se(O.target.value),placeholder:"Flavor constellations (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-rose-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:182,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:174,columnNumber:11},this),e.jsxDEV("textarea",{value:ie,onChange:O=>R(O.target.value),placeholder:"Future-of-food angles (comma or newline separated)",rows:2,className:"w-full rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-indigo-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:190,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxDEV("input",{value:g,onChange:O=>N(O.target.value),placeholder:"Tags (comma separated)",className:"rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:198,columnNumber:13},this),e.jsxDEV("input",{value:w,onChange:O=>A(O.target.value),placeholder:"Launch window or service",className:"rounded-lg border border-white/30 bg-white/60 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:204,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-between gap-3 text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:"Use quick adds below or split entries with commas or new lines."},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:212,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:J,className:`rounded-full px-4 py-2 text-[11px] font-semibold transition ${J?"cursor-not-allowed border border-white/40 bg-white/30 text-slate-400 dark:border-cyan-500/15 dark:bg-slate-950/50 dark:text-cyan-300/40":"border border-sky-400/50 bg-sky-500/80 text-white shadow-sm hover:bg-sky-500 dark:border-cyan-400/50 dark:bg-cyan-500/80"}`,children:"Add to bench"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:213,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:211,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:129,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:122,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 min-h-0 overflow-hidden rounded-2xl border border-white/15 bg-white/4 backdrop-blur-sm dark:border-cyan-500/20 dark:bg-slate-950/40",children:[e.jsxDEV("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3 text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:border-cyan-500/20 dark:text-cyan-300/70",children:[e.jsxDEV("span",{children:"Active experiments"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV("span",{children:l.length},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:231,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-y-auto px-2 py-3 pr-1",children:l.map(O=>{const me=O.id===t;return e.jsxDEV("button",{type:"button",onClick:()=>i(O.id),className:je("group relative flex w-full flex-col gap-2 rounded-xl border px-3 py-3 text-left transition",me?"border-sky-400/60 bg-sky-500/10 text-slate-900 shadow-[0_0_24px_rgba(56,189,248,0.35)] dark:border-cyan-400/60 dark:bg-cyan-500/15 dark:text-cyan-100":"border-transparent bg-white/20 text-slate-600 hover:border-sky-300/60 hover:bg-white/50 hover:text-slate-900 dark:bg-slate-900/40 dark:text-cyan-200/60 dark:hover:border-cyan-400/40 dark:hover:text-cyan-50"),children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.25em]",children:[e.jsxDEV("span",{children:O.status},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:249,columnNumber:19},this),e.jsxDEV("span",{children:O.lastUpdated},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:250,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:248,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm font-semibold tracking-tight",children:O.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:252,columnNumber:17},this),e.jsxDEV("p",{className:"text-[11px] leading-relaxed text-slate-500 dark:text-cyan-200/70",children:O.hypothesis},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:255,columnNumber:17},this),e.jsxDEV("div",{className:"mt-1 flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.3em] text-slate-400 dark:text-cyan-300/60",children:[e.jsxDEV("span",{children:"Variables:"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:259,columnNumber:19},this),O.variablesUnderTest.slice(0,3).map(de=>e.jsxDEV("span",{className:"rounded-full border border-white/40 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em] dark:border-cyan-400/30",children:de},de,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:261,columnNumber:21},this))]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:258,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-[11px] font-medium uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-300/70",children:O.tags.map(de=>e.jsxDEV("span",{className:"rounded-full bg-white/60 px-2 py-1 dark:bg-cyan-500/10",children:de},de,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:268,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:["Lead: ",O.owner]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:274,columnNumber:19},this),e.jsxDEV("span",{children:["Launch: ",O.launchWindow]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:275,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:273,columnNumber:17},this)]},O.id,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:237,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:233,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:228,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-3 rounded-2xl border border-white/15 bg-white/6 p-4 text-xs leading-relaxed text-slate-600 backdrop-blur dark:border-cyan-500/25 dark:bg-slate-950/60 dark:text-cyan-100/80",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-cyan-200",children:"Texture Reference Index"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:284,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:gu.map(O=>e.jsxDEV("div",{className:"rounded-xl border border-white/20 bg-white/30 p-3 dark:border-cyan-500/20 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:O.family},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:291,columnNumber:17},this),e.jsxDEV("span",{children:O.descriptors.join(" • ")},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:292,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:290,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[13px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-cyan-100",children:"Pairing Targets"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV("div",{className:"mt-1 text-[12px] leading-relaxed text-slate-600 dark:text-cyan-100/80",children:O.idealPairings.join(", ")},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:297,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Techniques"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:300,columnNumber:15},this),e.jsxDEV("div",{className:"text-[12px] text-slate-500 dark:text-cyan-200/80",children:O.suggestedTechniques.join(" · ")},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:303,columnNumber:15},this),O.platingNotes?e.jsxDEV("div",{className:"mt-2 text-[11px] italic text-slate-500/80 dark:text-cyan-200/70",children:O.platingNotes},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:307,columnNumber:17},this):null,e.jsxDEV("div",{className:"mt-3 flex justify-end",children:e.jsxDEV("button",{type:"button",onClick:()=>F(B,`${O.family}: ${O.descriptors.join(" / ")} finish`),className:"rounded-full border border-white/30 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-slate-500 transition hover:border-sky-400 hover:text-slate-800 dark:border-cyan-500/20 dark:text-cyan-200/80 dark:hover:border-cyan-400 dark:hover:text-cyan-50",children:"Add texture cue"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:312,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:311,columnNumber:15},this)]},O.id,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:289,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:287,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:283,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-3 rounded-2xl border border-white/15 bg-white/6 p-4 text-xs leading-relaxed text-slate-600 backdrop-blur dark:border-cyan-500/25 dark:bg-slate-950/60 dark:text-cyan-100/80",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-cyan-200",children:"Flavor Constellation Library"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:331,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:vu.map(O=>e.jsxDEV("div",{className:"rounded-xl border border-white/20 bg-white/30 p-3 dark:border-cyan-500/20 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:O.name},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:338,columnNumber:17},this),e.jsxDEV("span",{children:O.futureAngle},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:339,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:337,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-100",children:"Texture hook"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:341,columnNumber:15},this),e.jsxDEV("p",{className:"text-[12px] text-slate-600 dark:text-cyan-100/80",children:O.textureHook},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:344,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/80",children:"Flavor drivers"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:345,columnNumber:15},this),e.jsxDEV("ul",{className:"mt-1 space-y-1 text-[12px] text-slate-600 dark:text-cyan-100/80",children:O.flavorDrivers.map(me=>e.jsxDEV("li",{children:me},me,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:350,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:348,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/80",children:"Balancing notes"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:353,columnNumber:15},this),e.jsxDEV("ul",{className:"mt-1 space-y-1 text-[12px] text-slate-600 dark:text-cyan-100/80",children:O.balancingNotes.map(me=>e.jsxDEV("li",{children:me},me,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:358,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:356,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Builds"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:361,columnNumber:15},this),e.jsxDEV("div",{className:"text-[11px] text-slate-500 dark:text-cyan-200/80",children:O.applications.join(" · ")},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:364,columnNumber:15},this),e.jsxDEV("div",{className:"mt-3 flex justify-end",children:e.jsxDEV("button",{type:"button",onClick:()=>F(se,`${O.name}: ${O.flavorDrivers.join(" + ")} | ${O.textureHook}`),className:"rounded-full border border-white/30 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-slate-500 transition hover:border-rose-400 hover:text-slate-800 dark:border-cyan-500/20 dark:text-cyan-200/80 dark:hover:border-cyan-400 dark:hover:text-cyan-50",children:"Add flavor constellation"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:368,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:367,columnNumber:15},this)]},O.id,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:336,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:334,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:330,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-3 rounded-2xl border border-white/15 bg-white/6 p-4 text-xs leading-relaxed text-slate-600 backdrop-blur dark:border-cyan-500/25 dark:bg-slate-950/60 dark:text-cyan-100/80",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-700 dark:text-cyan-200",children:"Future of Food Drivers"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:387,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:zr.map(O=>e.jsxDEV("div",{className:"rounded-xl border border-white/20 bg-white/30 p-3 dark:border-cyan-500/20 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:O.theme},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:394,columnNumber:17},this),e.jsxDEV("span",{children:O.signal},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:395,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:393,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] text-slate-600 dark:text-cyan-100/80",children:O.insight},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:397,columnNumber:15},this),e.jsxDEV("div",{className:"mt-1 text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Action"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:400,columnNumber:15},this),e.jsxDEV("div",{className:"text-[11px] text-slate-500 dark:text-cyan-200/80",children:O.action},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:403,columnNumber:15},this),e.jsxDEV("div",{className:"mt-3 flex justify-end",children:e.jsxDEV("button",{type:"button",onClick:()=>F(R,`${O.theme}: ${O.action}`),className:"rounded-full border border-white/30 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-slate-500 transition hover:border-emerald-400 hover:text-slate-800 dark:border-cyan-500/20 dark:text-cyan-200/80 dark:hover:border-cyan-400 dark:hover:text-cyan-50",children:"Add future angle"},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:405,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:404,columnNumber:15},this)]},O.id,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:392,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:390,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:386,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/DiscoveryPanel.tsx",lineNumber:103,columnNumber:5},this)}const yu={ideation:"bg-amber-400/20 text-amber-700 dark:text-amber-200",testing:"bg-sky-400/20 text-sky-700 dark:text-sky-200",ready:"bg-emerald-400/20 text-emerald-700 dark:text-emerald-200",archived:"bg-slate-500/20 text-slate-600 dark:text-slate-200"},hv=["ideation","testing","ready","archived"];function bv(){const{experiments:s,focusExperimentId:t,toggleArchive:i,updateNotes:n,setExperimentStatus:a,appendVariable:o,appendTestStep:l,appendSensoryTarget:r,appendTextureObjective:d,appendFlavorConstellation:c,appendFutureFoodAngle:f}=no(),b=h.useMemo(()=>s.find(H=>H.id===t)??s[0],[s,t]),[D,u]=h.useState(b?.notes??""),[p,x]=h.useState(""),[S,m]=h.useState(""),[v,g]=h.useState(""),[N,w]=h.useState(""),[A,I]=h.useState(""),[B,W]=h.useState(""),se=H=>{b&&a(b.id,H.target.value)},ie=H=>{H.preventDefault(),!(!b||!p.trim())&&(o(b.id,p),x(""))},R=H=>{H.preventDefault(),!(!b||!S.trim())&&(l(b.id,S),m(""))},F=H=>{H.preventDefault(),!(!b||!v.trim())&&(r(b.id,v),g(""))},k=H=>{H.preventDefault(),!(!b||!N.trim())&&(d(b.id,N),w(""))},Q=H=>{H.preventDefault(),!(!b||!A.trim())&&(c(b.id,A),I(""))},J=H=>{H.preventDefault(),!(!b||!B.trim())&&(f(b.id,B),W(""))},O=!p.trim(),me=!S.trim(),de=!v.trim(),fe=!N.trim(),ae=!A.trim(),L=!B.trim();return b?e.jsxDEV("div",{className:"flex h-full min-h-0 flex-col gap-5 overflow-y-auto pr-1",children:[e.jsxDEV("div",{className:"rounded-2xl border border-white/15 bg-gradient-to-br from-white/60 via-white/30 to-white/10 p-6 backdrop-blur dark:border-cyan-500/25 dark:from-slate-950/80 dark:via-slate-900/50 dark:to-cyan-950/30",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/60",children:"Active Workbench"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:108,columnNumber:13},this),e.jsxDEV("h2",{className:"text-2xl font-semibold tracking-[0.08em] text-slate-900 dark:text-cyan-100",children:b.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-[12px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{className:je("rounded-full px-2 py-1 text-[11px] font-medium",yu[b.status]??yu.ideation),children:b.status},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV("span",{children:["Owner: ",b.owner]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:123,columnNumber:15},this),e.jsxDEV("span",{children:["Updated: ",b.lastUpdated]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:124,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:107,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col items-end gap-2 text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{children:"Stage"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("select",{value:b.status,onChange:se,className:"rounded-full border border-white/40 bg-white/70 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-600 outline-none transition hover:border-sky-400 focus:border-sky-500 focus:text-slate-800 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100 dark:hover:border-cyan-400 dark:focus:border-cyan-300",children:hv.map(H=>e.jsxDEV("option",{value:H,children:H.toUpperCase()},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:136,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("button",{type:"button",className:"rounded-full border border-white/30 bg-white/50 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-700 transition hover:border-slate-500/60 hover:bg-white/80 dark:border-cyan-500/30 dark:bg-slate-950/50 dark:text-cyan-200 dark:hover:border-cyan-400 dark:hover:bg-slate-950/80",onClick:()=>i(b.id),children:b.status==="archived"?"Reopen":"Archive"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:127,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:106,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-3 text-[10px] uppercase tracking-[0.35em] text-cyan-200/80",children:[e.jsxDEV("span",{className:"chalk-breath",children:[b.textureObjectives.length," texture cues"]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:152,columnNumber:11},this),e.jsxDEV("span",{className:"chalk-breath",children:[b.flavorConstellations.length," flavor maps"]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:153,columnNumber:11},this),e.jsxDEV("span",{className:"chalk-breath",children:[b.futureFoodAngles.length," future bets"]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:154,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:151,columnNumber:9},this),e.jsxDEV("div",{className:"mt-6 rounded-2xl border border-white/20 bg-white/50 p-4 text-sm text-slate-700 shadow-inner dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-100",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Experiment context"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:157,columnNumber:11},this),e.jsxDEV("p",{className:"mt-2 leading-relaxed text-slate-600 dark:text-cyan-100/80",children:b.notes},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:156,columnNumber:9},this),e.jsxDEV("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:[e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Variables under test"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-cyan-100/80",children:b.variablesUnderTest.length?b.variablesUnderTest.map(H=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"mt-1 inline-block h-1.5 w-1.5 flex-shrink-0 rounded-full bg-sky-500"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:174,columnNumber:21},this),e.jsxDEV("span",{children:H},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:175,columnNumber:21},this)]},H,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:173,columnNumber:19},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Log your control vs variant deltas to map the experiment."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:179,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:170,columnNumber:13},this),e.jsxDEV("form",{onSubmit:ie,className:"mt-3 flex gap-2 text-xs",children:[e.jsxDEV("input",{value:p,onChange:H=>x(H.target.value),placeholder:"Add variable delta",className:"flex-1 rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:185,columnNumber:15},this),e.jsxDEV("button",{type:"submit",disabled:O,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${O?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-sky-500/40 bg-sky-500/80 text-white hover:bg-sky-500 dark:border-cyan-400/40 dark:bg-cyan-500/80"}`,children:"Add"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:166,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Sensory targets"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:206,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-cyan-100/80",children:b.sensoryTargets.length?b.sensoryTargets.map(H=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"mt-1 inline-block h-1.5 w-1.5 flex-shrink-0 rounded-full bg-emerald-500"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:213,columnNumber:21},this),e.jsxDEV("span",{children:H},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:214,columnNumber:21},this)]},H,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:212,columnNumber:19},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Define the mouthfeel, visual, or aromatic endpoints you are aiming for."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:218,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("form",{onSubmit:F,className:"mt-3 flex gap-2 text-xs",children:[e.jsxDEV("input",{value:v,onChange:H=>g(H.target.value),placeholder:"Log sensory observation",className:"flex-1 rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-emerald-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:224,columnNumber:15},this),e.jsxDEV("button",{type:"submit",disabled:de,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${de?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-emerald-500/40 bg-emerald-500/80 text-white hover:bg-emerald-500 dark:border-emerald-400/40 dark:bg-emerald-500/80"}`,children:"Add"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:223,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Protocol queue"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:245,columnNumber:13},this),e.jsxDEV("ol",{className:"mt-2 list-decimal space-y-2 pl-5 text-sm text-slate-600 dark:text-cyan-100/80",children:b.testPlan.length?b.testPlan.map(H=>e.jsxDEV("li",{children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:250,columnNumber:51},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Draft the next bench steps, measurements, or service simulations."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:252,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:248,columnNumber:13},this),e.jsxDEV("form",{onSubmit:R,className:"mt-3 flex gap-2 text-xs",children:[e.jsxDEV("input",{value:S,onChange:H=>m(H.target.value),placeholder:"Add protocol step",className:"flex-1 rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-indigo-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:258,columnNumber:15},this),e.jsxDEV("button",{type:"submit",disabled:me,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${me?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-indigo-500/40 bg-indigo-500/80 text-white hover:bg-indigo-500 dark:border-indigo-400/40 dark:bg-indigo-500/80"}`,children:"Queue"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:264,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:257,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:244,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Instrumentation & launch"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:279,columnNumber:13},this),e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2 text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:b.equipment.length?b.equipment.map(H=>e.jsxDEV("span",{className:"rounded-full border border-white/40 px-2 py-1 text-[11px] font-semibold dark:border-cyan-500/30",children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:285,columnNumber:19},this)):e.jsxDEV("span",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"List the lab rigs or plating tools required."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:293,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:282,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4 rounded-xl border border-white/30 bg-white/70 p-3 text-sm text-slate-600 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/60 dark:text-cyan-100",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Launch window"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:299,columnNumber:15},this),e.jsxDEV("div",{className:"mt-1 font-semibold text-slate-700 dark:text-cyan-100",children:b.launchWindow},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:302,columnNumber:15},this),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400 dark:text-cyan-300/60",children:["Status: ",b.status]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:305,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:298,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:278,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Texture blueprint"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:312,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-cyan-100/80",children:b.textureObjectives.length?b.textureObjectives.map(H=>e.jsxDEV("li",{className:"rounded-lg border border-white/25 bg-white/60 px-3 py-2 text-xs uppercase tracking-[0.3em] text-slate-500 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/50 dark:text-cyan-200/80",children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:318,columnNumber:19},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Define the sensory checkpoints you will measure."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:323,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:315,columnNumber:13},this),e.jsxDEV("form",{onSubmit:k,className:"mt-3 space-y-2 text-xs",children:[e.jsxDEV("textarea",{value:N,onChange:H=>w(H.target.value),rows:2,placeholder:"e.g. Custard wobble holds at 1 Hz after 24h",className:"w-full rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-emerald-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:329,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:fe,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${fe?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-emerald-400/40 bg-emerald-500/80 text-white hover:bg-emerald-500 dark:border-emerald-400/50 dark:bg-emerald-500/80"}`,children:"Pin objective"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:337,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:336,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:328,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:311,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Flavor architecture"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-cyan-100/80",children:b.flavorConstellations.length?b.flavorConstellations.map(H=>e.jsxDEV("li",{className:"rounded-lg border border-white/25 bg-white/60 px-3 py-2 text-xs uppercase tracking-[0.3em] text-slate-500 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/50 dark:text-cyan-200/80",children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:359,columnNumber:19},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Map the base, amplifier, and balancing elements."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:364,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:356,columnNumber:13},this),e.jsxDEV("form",{onSubmit:Q,className:"mt-3 space-y-2 text-xs",children:[e.jsxDEV("textarea",{value:A,onChange:H=>I(H.target.value),rows:2,placeholder:"e.g. Miso caramel × burnt citrus oil × spruce tip salt",className:"w-full rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-rose-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:370,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:ae,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${ae?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-rose-400/40 bg-rose-500/80 text-white hover:bg-rose-500 dark:border-rose-400/40 dark:bg-rose-500/80"}`,children:"Log constellation"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:378,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:377,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:369,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:352,columnNumber:11},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Future-of-food hypotheses"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:394,columnNumber:13},this),e.jsxDEV("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-cyan-100/80",children:b.futureFoodAngles.length?b.futureFoodAngles.map(H=>e.jsxDEV("li",{className:"rounded-lg border border-white/25 bg-white/60 px-3 py-2 text-xs uppercase tracking-[0.3em] text-slate-500 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/50 dark:text-cyan-200/80",children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:400,columnNumber:19},this)):e.jsxDEV("li",{className:"italic text-slate-400 dark:text-cyan-300/60",children:"Describe the climate, nutrition, or supply impact goals."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:405,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:397,columnNumber:13},this),e.jsxDEV("form",{onSubmit:J,className:"mt-3 space-y-2 text-xs",children:[e.jsxDEV("textarea",{value:B,onChange:H=>W(H.target.value),rows:2,placeholder:"e.g. Upcycle koji whey into sparkling dessert bases",className:"w-full rounded-lg border border-white/40 bg-white/80 px-3 py-2 text-slate-700 outline-none transition focus:border-indigo-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:411,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{type:"submit",disabled:L,className:`rounded-full px-3 py-2 text-[11px] font-semibold uppercase tracking-[0.3em] transition ${L?"cursor-not-allowed border border-white/40 bg-white/40 text-slate-400 dark:border-cyan-500/20 dark:bg-slate-950/60":"border border-indigo-400/40 bg-indigo-500/80 text-white hover:bg-indigo-500 dark:border-indigo-400/40 dark:bg-indigo-500/80"}`,children:"Capture angle"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:419,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:418,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:410,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:393,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:165,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:105,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col gap-3 rounded-2xl border border-white/15 bg-white/60 p-4 shadow-inner backdrop-blur-sm dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Lab log — append updates"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:437,columnNumber:9},this),e.jsxDEV("textarea",{value:D,onChange:H=>u(H.target.value),onBlur:()=>n(b.id,D),className:"flex-1 rounded-xl border border-white/40 bg-white/80 px-3 py-3 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/25 dark:bg-slate-950/70 dark:text-cyan-100",rows:10,placeholder:"Capture experiments, anomalies, plating adjustments, guardrail breaches..."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:440,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3 text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:"Autosaves on blur — current snapshot stored in lab store."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:449,columnNumber:11},this),e.jsxDEV("button",{type:"button",onClick:()=>{u(""),n(b.id,"")},className:"rounded-full border border-white/40 px-3 py-1 text-[11px] font-semibold tracking-[0.35em] text-slate-600 transition hover:border-slate-500/60 hover:bg-white/80 dark:border-cyan-500/25 dark:text-cyan-200 dark:hover:border-cyan-400 dark:hover:bg-slate-950/60",children:"Clear notes"},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:450,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:448,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:436,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3 text-[12px] text-slate-600 dark:text-cyan-200/70",children:b.tags.map(H=>e.jsxDEV("div",{className:"rounded-xl border border-white/20 bg-gradient-to-br from-white/70 via-white/40 to-white/20 px-3 py-2 text-center uppercase tracking-[0.35em] shadow-sm dark:border-cyan-500/25 dark:from-slate-950/70 dark:via-slate-900/60 dark:to-cyan-900/40",children:H},H,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:465,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:463,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:104,columnNumber:5},this):e.jsxDEV("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-white/20 bg-white/10 text-sm text-slate-600 dark:border-cyan-500/20 dark:bg-slate-950/50 dark:text-cyan-200/70",children:"Select an experiment to activate the workbench."},void 0,!1,{fileName:"/app/code/client/components/RDLab/WorkbenchPanel.tsx",lineNumber:97,columnNumber:7},this)}function Nv(){const{backlog:s,insights:t,experiments:i}=no(),n=h.useMemo(()=>i.slice(0,4).map(a=>({id:a.id,title:a.title,stage:a.status,launchWindow:a.launchWindow,variables:a.variablesUnderTest.slice(0,2)})),[i]);return e.jsxDEV("div",{className:"flex h-full min-h-0 flex-col gap-5 overflow-y-auto pr-1",children:[e.jsxDEV("section",{className:"rounded-2xl border border-white/20 bg-gradient-to-br from-white/60 via-white/30 to-white/10 p-5 backdrop-blur dark:border-cyan-500/25 dark:from-slate-950/70 dark:via-slate-900/60 dark:to-cyan-950/40",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/70",children:"Live signals"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:24,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 space-y-4",children:mv.map(a=>e.jsxDEV("article",{className:"rounded-xl border border-white/30 bg-white/50 p-4 text-sm text-slate-700 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/70 dark:text-cyan-100",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:a.category},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:34,columnNumber:17},this),e.jsxDEV("span",{children:a.metric},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:35,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:33,columnNumber:15},this),e.jsxDEV("h3",{className:"mt-1 text-sm font-semibold tracking-tight text-slate-900 dark:text-cyan-100",children:a.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:37,columnNumber:15},this),e.jsxDEV("p",{className:"mt-1 text-xs leading-relaxed text-slate-600 dark:text-cyan-200/80",children:a.summary},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:40,columnNumber:15},this),a.delta?e.jsxDEV("div",{className:"mt-2 text-[11px] font-medium uppercase tracking-[0.3em] text-emerald-600 dark:text-emerald-300",children:a.delta},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:44,columnNumber:17},this):null]},a.id,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:29,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:27,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:23,columnNumber:7},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/20 bg-white/60 p-4 text-sm text-slate-700 shadow-inner backdrop-blur dark:border-cyan-500/20 dark:bg-slate-950/70 dark:text-cyan-100",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/70",children:"Backlog triggers"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV("ul",{className:"mt-3 space-y-3",children:s.map(a=>e.jsxDEV("li",{className:"flex items-start justify-between gap-3 rounded-xl border border-white/30 bg-white/80 px-3 py-2 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/60",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xs font-semibold text-slate-700 dark:text-cyan-100",children:a.label},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:64,columnNumber:17},this),e.jsxDEV("div",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:["Owner: ",a.owner]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:67,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:63,columnNumber:15},this),e.jsxDEV("div",{className:"text-right text-[11px] uppercase tracking-[0.35em]",children:[e.jsxDEV("div",{className:"font-semibold text-slate-600 dark:text-cyan-200",children:a.due},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:72,columnNumber:17},this),a.isBlocked?e.jsxDEV("span",{className:"mt-1 inline-flex items-center justify-center rounded-full bg-rose-500/20 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.35em] text-rose-600 dark:text-rose-300",children:"Blocked"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:74,columnNumber:19},this):null]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:71,columnNumber:15},this)]},a.id,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:59,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:53,columnNumber:7},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/20 bg-gradient-to-br from-white/70 via-white/35 to-white/10 p-4 text-sm text-slate-700 shadow-sm backdrop-blur dark:border-cyan-500/25 dark:from-slate-950/70 dark:via-slate-900/55 dark:to-cyan-950/40 dark:text-cyan-100",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/70",children:"Future of food radar"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-3 text-[10px] uppercase tracking-[0.35em] text-cyan-100/70",children:e.jsxDEV("span",{className:"chalk-breath",children:[zr.length," drivers tracked"]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 space-y-3",children:zr.map(a=>e.jsxDEV("article",{className:"rounded-xl border border-white/30 bg-white/60 p-3 shadow-inner dark:border-cyan-500/20 dark:bg-slate-950/60",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:a.theme},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:98,columnNumber:17},this),e.jsxDEV("span",{children:a.signal},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:99,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:97,columnNumber:15},this),e.jsxDEV("p",{className:"mt-2 text-xs leading-relaxed text-slate-600 dark:text-cyan-200/80",children:a.insight},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:101,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 rounded-lg border border-white/30 bg-white/70 px-3 py-2 text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:border-cyan-500/20 dark:bg-slate-950/60 dark:text-cyan-200/70",children:a.action},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:102,columnNumber:15},this)]},a.id,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:93,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:84,columnNumber:7},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/20 bg-gradient-to-br from-white/80 via-white/40 to-white/20 p-4 text-sm text-slate-700 shadow-sm backdrop-blur dark:border-cyan-500/25 dark:from-slate-950/70 dark:via-slate-900/55 dark:to-cyan-950/40 dark:text-cyan-100",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-600 dark:text-cyan-200/70",children:"Lab soundstage"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:111,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 space-y-3",children:pv.map(a=>e.jsxDEV("div",{className:"rounded-xl border border-white/30 bg-white/60 p-3 shadow-inner dark:border-cyan-500/20 dark:bg-slate-950/60",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:a.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:117,columnNumber:15},this),e.jsxDEV("div",{className:"text-[11px] uppercase tracking-[0.3em] text-slate-400 dark:text-cyan-200/60",children:a.mood},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:120,columnNumber:15},this),e.jsxDEV("div",{className:"mt-2 text-[12px] text-slate-600 dark:text-cyan-200/80",children:a.tracks.join(" • ")},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:123,columnNumber:15},this)]},a.id,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:116,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:114,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:110,columnNumber:7},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 text-sm text-slate-700 shadow-inner backdrop-blur-sm dark:border-cyan-500/20 dark:bg-slate-950/70 dark:text-cyan-100",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Pipeline radar"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 space-y-3",children:n.length?n.map(a=>e.jsxDEV("div",{className:"rounded-xl border border-white/30 bg-white/70 p-3 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/60",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-200/70",children:[e.jsxDEV("span",{children:a.stage},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:143,columnNumber:19},this),e.jsxDEV("span",{children:a.launchWindow},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:144,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:142,columnNumber:17},this),e.jsxDEV("div",{className:"mt-1 text-sm font-semibold tracking-tight text-slate-800 dark:text-cyan-100",children:a.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:146,columnNumber:17},this),a.variables.length?e.jsxDEV("div",{className:"mt-2 flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.3em] text-slate-400 dark:text-cyan-300/70",children:a.variables.map(o=>e.jsxDEV("span",{className:"rounded-full bg-white/60 px-2 py-1 dark:bg-cyan-500/10",children:o},o,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:152,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:150,columnNumber:19},this):null]},a.id,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:138,columnNumber:15},this)):e.jsxDEV("div",{className:"rounded-xl border border-dashed border-white/40 px-3 py-4 text-center text-xs italic text-slate-400 dark:border-cyan-500/30 dark:text-cyan-300/60",children:"Queue experiments to populate pipeline radar."},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:161,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:135,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:131,columnNumber:7},this),e.jsxDEV("section",{className:"rounded-2xl border border-white/15 bg-white/60 p-4 text-xs text-slate-600 shadow-inner backdrop-blur-sm dark:border-cyan-500/20 dark:bg-slate-950/70 dark:text-cyan-200/80",children:[e.jsxDEV("header",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-cyan-200/70",children:"Insights feed"},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:169,columnNumber:9},this),e.jsxDEV("ul",{className:"mt-3 space-y-3",children:t.map((a,o)=>e.jsxDEV("li",{className:"rounded-xl border border-white/20 bg-white/70 px-3 py-2 shadow-sm dark:border-cyan-500/20 dark:bg-slate-950/60",children:[e.jsxDEV("div",{className:"text-xs font-semibold text-slate-700 dark:text-cyan-100",children:a.headline},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:175,columnNumber:15},this),e.jsxDEV("p",{className:"text-[11px] leading-relaxed text-slate-500 dark:text-cyan-200/70",children:a.detail},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:176,columnNumber:15},this),a.metric?e.jsxDEV("div",{className:"mt-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-emerald-600 dark:text-emerald-300",children:a.metric},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:178,columnNumber:17},this):null]},o,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:174,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:172,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:168,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/InsightsPanel.tsx",lineNumber:22,columnNumber:5},this)}const Du=s=>{if(!s)return"";try{const t=new Date(s);return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(t)}catch{return s}},xv=h.memo(function({isDarkMode:t,projectName:i,createdAt:n,updatedAt:a,vision:o,textureFocus:l,flavorNotes:r,launchTarget:d,focusExperiment:c,experimentsCount:f,discoveryQueue:b,backlog:D,insights:u}){const p=h.useMemo(()=>t?{border:"border-cyan-400/30",background:"bg-slate-950/70",heading:"text-cyan-200/80",text:"text-cyan-100/80",badge:"bg-cyan-500/10 border-cyan-400/20 text-cyan-200/80"}:{border:"border-white/40",background:"bg-white/85",heading:"text-slate-700",text:"text-slate-600",badge:"bg-white/70 border-white/60 text-slate-600"},[t]);return e.jsxDEV("aside",{className:"relative flex w-full max-w-[285px] shrink-0 flex-col gap-4 overflow-y-auto border-l border-white/10 bg-black/20 px-5 pb-6 pt-6 backdrop-blur-sm dark:border-cyan-500/25 dark:bg-slate-950/40",children:[e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4 shadow-[0_20px_50px_-40px_rgba(15,23,42,0.9)]`,children:[e.jsxDEV("div",{className:`text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:"Active session"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:84,columnNumber:9},this),e.jsxDEV("h3",{className:"mt-2 text-lg font-semibold tracking-tight text-white dark:text-cyan-100",children:i},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:87,columnNumber:9},this),e.jsxDEV("dl",{className:`mt-3 space-y-2 text-xs leading-relaxed ${p.text}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em]",children:"Created"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV("dd",{children:Du(n)},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em]",children:"Last saved"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:96,columnNumber:13},this),e.jsxDEV("dd",{children:Du(a)},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em]",children:"Experiments"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:100,columnNumber:13},this),e.jsxDEV("dd",{children:f},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:81,columnNumber:7},this),(o||l||r||d)&&e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4`,children:[e.jsxDEV("div",{className:`text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:"Strategic focus"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:108,columnNumber:11},this),e.jsxDEV("dl",{className:`mt-3 space-y-3 text-xs leading-relaxed ${p.text}`,children:[o&&e.jsxDEV("div",{children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em] text-[10px] opacity-80",children:"North star"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:114,columnNumber:17},this),e.jsxDEV("dd",{className:"mt-1 whitespace-pre-line",children:o},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:115,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:113,columnNumber:15},this),l&&e.jsxDEV("div",{children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em] text-[10px] opacity-80",children:"Texture agenda"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("dd",{className:"mt-1 whitespace-pre-line",children:l},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:119,columnNumber:15},this),r&&e.jsxDEV("div",{children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em] text-[10px] opacity-80",children:"Flavor architecture"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV("dd",{className:"mt-1 whitespace-pre-line",children:r},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:127,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:125,columnNumber:15},this),d&&e.jsxDEV("div",{children:[e.jsxDEV("dt",{className:"uppercase tracking-[0.3em] text-[10px] opacity-80",children:"Launch window"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV("dd",{className:"mt-1 whitespace-pre-line",children:d},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:131,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:107,columnNumber:9},this),c&&e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4`,children:[e.jsxDEV("div",{className:`flex items-center justify-between text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:[e.jsxDEV("span",{children:"Workbench spotlight"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:143,columnNumber:13},this),e.jsxDEV("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] uppercase tracking-[0.3em] text-white/80 dark:border-cyan-500/30",children:c.status},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("div",{className:"mt-3 text-sm font-semibold leading-snug text-white dark:text-cyan-100",children:c.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:148,columnNumber:11},this),e.jsxDEV("p",{className:`mt-2 text-xs leading-relaxed ${p.text}`,children:c.notes},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:151,columnNumber:11},this),e.jsxDEV("div",{className:"mt-3 flex flex-wrap gap-2",children:c.tags.slice(0,3).map(x=>e.jsxDEV("span",{className:`rounded-full border px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] ${p.badge}`,children:x},x,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:156,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:154,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:141,columnNumber:9},this),b.length>0&&e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4`,children:[e.jsxDEV("div",{className:`text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:"Discovery queue"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:169,columnNumber:11},this),e.jsxDEV("ul",{className:`mt-3 space-y-2 text-xs ${p.text}`,children:b.slice(0,4).map(x=>e.jsxDEV("li",{className:"rounded-xl border border-white/10 bg-white/5 p-3 dark:border-cyan-400/20 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-white/80 dark:text-cyan-100/80",children:x.title},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:175,columnNumber:17},this),e.jsxDEV("p",{className:"mt-1 leading-relaxed opacity-80",children:x.hypothesis},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:178,columnNumber:17},this)]},x.id,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:174,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:168,columnNumber:9},this),D.length>0&&e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4`,children:[e.jsxDEV("div",{className:`text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:"Lab backlog"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:187,columnNumber:11},this),e.jsxDEV("ul",{className:`mt-3 space-y-2 text-xs leading-relaxed ${p.text}`,children:D.map(x=>e.jsxDEV("li",{className:`rounded-xl border border-white/10 bg-white/5 p-3 backdrop-blur-sm dark:border-cyan-400/20 dark:bg-cyan-500/5 ${x.isBlocked?"border-dashed":""}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[10px] uppercase tracking-[0.3em] opacity-80",children:[e.jsxDEV("span",{children:x.owner},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:199,columnNumber:19},this),e.jsxDEV("span",{children:x.due},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:200,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:198,columnNumber:17},this),e.jsxDEV("p",{className:"mt-1 leading-relaxed",children:x.label},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:202,columnNumber:17},this),x.isBlocked?e.jsxDEV("div",{className:"mt-2 rounded-full border border-amber-400/40 bg-amber-400/10 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-100",children:"Blocked"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:204,columnNumber:19},this):null]},x.id,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:192,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:190,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:186,columnNumber:9},this),u.length>0&&e.jsxDEV("section",{className:`rounded-2xl border ${p.border} ${p.background} p-4`,children:[e.jsxDEV("div",{className:`text-[11px] font-semibold uppercase tracking-[0.35em] ${p.heading}`,children:"Signals & insights"},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:216,columnNumber:11},this),e.jsxDEV("ul",{className:`mt-3 space-y-3 text-xs leading-relaxed ${p.text}`,children:u.slice(0,4).map(x=>e.jsxDEV("li",{className:"rounded-xl border border-white/10 bg-white/5 p-3 dark:border-cyan-400/20 dark:bg-cyan-500/5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[10px] uppercase tracking-[0.3em] text-white/80 dark:text-cyan-100/80",children:[e.jsxDEV("span",{children:x.headline},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:223,columnNumber:19},this),x.metric?e.jsxDEV("span",{className:"rounded-full border border-emerald-400/30 bg-emerald-500/10 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.3em] text-emerald-100",children:x.metric},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:225,columnNumber:21},this):null]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:222,columnNumber:17},this),e.jsxDEV("p",{className:"mt-1 opacity-85",children:x.detail},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:230,columnNumber:17},this)]},x.headline,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:221,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:219,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:215,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/RDLabSessionSidebar.tsx",lineNumber:78,columnNumber:5},this)}),wa="w-full rounded-xl border border-white/20 bg-white/80 px-3 py-2 text-sm text-slate-700 shadow-sm outline-none transition focus:border-sky-400 focus:bg-white focus:text-slate-900 dark:border-cyan-500/30 dark:bg-slate-950/70 dark:text-cyan-100 dark:focus:border-cyan-400";function gv({open:s,onOpenChange:t,onSubmit:i}){const[n,a]=h.useState(""),[o,l]=h.useState(""),[r,d]=h.useState(""),[c,f]=h.useState(""),[b,D]=h.useState("");h.useEffect(()=>{if(!s){l(""),d(""),f(""),D("");return}a(p=>p||"Untitled Lab")},[s]);const u=p=>{p.preventDefault();const x=n.trim();x&&(i({name:x,vision:o.trim(),textureFocus:r.trim(),flavorNotes:c.trim(),launchTarget:b.trim()}),a(""),l(""),d(""),f(""),D(""),t(!1))};return e.jsxDEV(ss,{open:s,onOpenChange:t,children:e.jsxDEV(is,{className:"w-full max-w-xl overflow-hidden border border-cyan-500/20 bg-[#050a15]/95 text-cyan-100",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{className:"text-xl font-semibold tracking-[0.18em] uppercase text-cyan-100",children:"Launch new R&D project"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:71,columnNumber:11},this),e.jsxDEV(yi,{className:"text-sm text-cyan-200/80",children:"Define the north star for this lab so every experiment inherits the same intent."},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:70,columnNumber:9},this),e.jsxDEV("form",{onSubmit:u,className:"space-y-4 text-sm text-cyan-100/80",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-cyan-200/80",children:"Project name"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV("input",{className:`${wa} mt-1`,value:n,onChange:p=>a(p.target.value),placeholder:"Velvet textures initiative",required:!0},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:83,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-cyan-200/80",children:"Vision / north star"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV("textarea",{className:`${wa} mt-1 min-h-[96px] whitespace-pre-wrap`,value:o,onChange:p=>l(p.target.value),placeholder:"Prototype a regenerative dessert program that leans on low-waste custards."},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-cyan-200/80",children:"Texture agenda"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV("input",{className:`${wa} mt-1`,value:r,onChange:p=>d(p.target.value),placeholder:"Satin custards, sparkling solids, hyper-aerated foams"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:107,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-cyan-200/80",children:"Flavor architecture"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV("input",{className:`${wa} mt-1`,value:c,onChange:p=>f(p.target.value),placeholder:"Koji smoke, maple brine, forest citrus"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:102,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-cyan-200/80",children:"Launch window or milestone"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:127,columnNumber:13},this),e.jsxDEV("input",{className:`${wa} mt-1`,value:b,onChange:p=>D(p.target.value),placeholder:"Spring tasting menu preview — Week 9"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:126,columnNumber:11},this),e.jsxDEV(Li,{className:"pt-2",children:e.jsxDEV(ne,{type:"submit",className:"rounded-full border border-cyan-400/40 bg-cyan-500/80 px-5 py-2 text-[12px] font-semibold uppercase tracking-[0.3em] text-white transition hover:bg-cyan-500",children:"Capture Blueprint"},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:138,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:78,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:69,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/RDLab/NewProjectDialog.tsx",lineNumber:68,columnNumber:5},this)}const Eu=[{recipeText:"heirloom carrots, peeled",inventoryId:"ing-heirloom-carrot",confidence:1},{recipeText:"heirloom carrots",inventoryId:"ing-heirloom-carrot",confidence:.95},{recipeText:"carrots, peeled",inventoryId:"ing-heirloom-carrot",confidence:.85},{recipeText:"whole blanched almonds",inventoryId:"ing-whole-blanched-almonds",confidence:1},{recipeText:"almonds, blanched",inventoryId:"ing-whole-blanched-almonds",confidence:.95},{recipeText:"prime beef short rib, boneless",inventoryId:"ing-beef-short-rib",confidence:1},{recipeText:"beef short rib",inventoryId:"ing-beef-short-rib",confidence:.9},{recipeText:"short rib",inventoryId:"ing-beef-short-rib",confidence:.8},{recipeText:"beef tallow",inventoryId:"ing-beef-tallow",confidence:1},{recipeText:"tallow",inventoryId:"ing-beef-tallow",confidence:.95},{recipeText:"fresh garlic cloves, jumbo",inventoryId:"ing-fresh-garlic-cloves",confidence:1},{recipeText:"garlic cloves",inventoryId:"ing-fresh-garlic-cloves",confidence:.95},{recipeText:"garlic",inventoryId:"ing-fresh-garlic-cloves",confidence:.8},{recipeText:"organic coconut milk",inventoryId:"ing-organic-coconut-milk",confidence:1},{recipeText:"coconut milk",inventoryId:"ing-organic-coconut-milk",confidence:.95},{recipeText:"agar powder",inventoryId:"ing-agar-powder",confidence:1},{recipeText:"agar",inventoryId:"ing-agar-powder",confidence:.95},{recipeText:"madagascar vanilla bean paste",inventoryId:"ing-vanilla-bean-paste",confidence:1},{recipeText:"vanilla bean paste",inventoryId:"ing-vanilla-bean-paste",confidence:.95},{recipeText:"vanilla paste",inventoryId:"ing-vanilla-bean-paste",confidence:.9},{recipeText:"fermented calabrian chili puree",inventoryId:"ing-calabrian-chili",confidence:1},{recipeText:"calabrian chili",inventoryId:"ing-calabrian-chili",confidence:.95},{recipeText:"chili puree",inventoryId:"ing-calabrian-chili",confidence:.8},{recipeText:"wildflower honey, raw",inventoryId:"ing-wildflower-honey",confidence:1},{recipeText:"wildflower honey",inventoryId:"ing-wildflower-honey",confidence:.95},{recipeText:"raw honey",inventoryId:"ing-wildflower-honey",confidence:.85},{recipeText:"honey",inventoryId:"ing-wildflower-honey",confidence:.7},{recipeText:"mirepoix blend, diced",inventoryId:"ing-mirepoix-blend",confidence:1},{recipeText:"mirepoix",inventoryId:"ing-mirepoix-blend",confidence:.95},{recipeText:"fresh meyer lemons",inventoryId:"ing-meyer-lemon",confidence:1},{recipeText:"meyer lemons",inventoryId:"ing-meyer-lemon",confidence:.95},{recipeText:"lemons",inventoryId:"ing-meyer-lemon",confidence:.7}];function vv(s,t){const i=s.length,n=t.length,a=Array(i+1).fill(null).map(()=>Array(n+1).fill(0));for(let o=0;o<=i;o++)a[o][0]=o;for(let o=0;o<=n;o++)a[0][o]=o;for(let o=1;o<=i;o++)for(let l=1;l<=n;l++)s[o-1]===t[l-1]?a[o][l]=a[o-1][l-1]:a[o][l]=1+Math.min(a[o-1][l],a[o][l-1],a[o-1][l-1]);return a[i][n]}function zc(s,t){const i=Math.max(s.length,t.length);return i===0?1:1-vv(s.toLowerCase(),t.toLowerCase())/i}function yv(s){const t=s.toLowerCase().split(/\s+/),i=[];for(const n of Ed){const a=n.canonicalName.toLowerCase().split(/\s+/);for(const o of a)if(t.some(l=>l.includes(o)||o.includes(l))){i.push(n.id);break}}return Array.from(new Set(i))}function Dv(s){const t=s.toLowerCase().trim(),i=Eu.find(l=>l.recipeText.toLowerCase()===t);if(i)return i;const n=Eu.find(l=>t.includes(l.recipeText.toLowerCase())||l.recipeText.toLowerCase().includes(t));if(n&&n.confidence>=.8)return{...n,confidence:Math.min(n.confidence,.85)};let a=null;for(const l of Ed){const r=zc(s,l.canonicalName);r>.6&&(!a||r>a.similarity)&&(a={inventoryId:l.id,similarity:r})}if(a&&a.similarity>.7)return{recipeText:s,inventoryId:a.inventoryId,confidence:a.similarity,notes:"Fuzzy matched"};const o=yv(s);return o.length>0?{recipeText:s,inventoryId:o[0],confidence:.5,notes:"Matched by keyword"}:null}function Ev(s,t=.6){const i=s.toLowerCase().trim();if(i.length===0)return[];const n=[];for(const a of Ed){const o=zc(i,a.canonicalName);if(o>=t&&n.push({recipeText:a.canonicalName,inventoryId:a.id,confidence:o}),a.description){const l=zc(i,a.description);l>=t&&l>o&&n.push({recipeText:a.description,inventoryId:a.id,confidence:l})}}return n.sort((a,o)=>o.confidence-a.confidence)}function wv({value:s,onSelect:t,onClear:i,suggestedText:n,showPrice:a=!0,className:o}){const{t:l}=Vs(),[r,d]=h.useState(""),[c,f]=h.useState(!1),[b,D]=h.useState(null),u=h.useMemo(()=>n?Dv(n):null,[n]),p=h.useMemo(()=>{const w=b||(s&&s.startsWith("ing-")?s:null);return w?So(w):null},[b,s]),x=h.useMemo(()=>{if(!r.trim()){if(u&&u.confidence>=.6){const A=So(u.inventoryId);return A?[A]:[]}return[]}return Ev(r,.5).map(A=>So(A.inventoryId)).filter(A=>A!==void 0)},[r,u]),S=h.useCallback(w=>{D(w.id),t(w.id,w),f(!1),d("")},[t]),m=h.useCallback(()=>{D(null),d(""),i?.()},[i]),v=h.useMemo(()=>!p||p.supplierLinks.length===0?null:p.supplierLinks[0],[p]),g=h.useMemo(()=>p?hu(p):null,[p]),N=u&&!b?u.confidence:null;return e.jsxDEV("div",{className:je("space-y-2",o),children:[e.jsxDEV(ao,{open:c,onOpenChange:f,children:[e.jsxDEV(ro,{asChild:!0,children:e.jsxDEV("div",{className:"relative",children:p?e.jsxDEV(ne,{variant:"outline",className:"w-full justify-between gap-2 pr-2",onClick:()=>f(!c),children:[e.jsxDEV("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxDEV(Or,{className:"h-4 w-4 flex-shrink-0 text-cyan-600"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:121,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium truncate",children:p.canonicalName},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV(cn,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground",onClick:w=>{w.stopPropagation(),m()}},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:126,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:115,columnNumber:15},this):u&&N?e.jsxDEV(ne,{variant:"ghost",className:je("w-full justify-between gap-2",N>=.8?"border border-cyan-200":"border border-yellow-200"),onClick:()=>f(!c),children:e.jsxDEV("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N>=.8?e.jsxDEV(vn,{className:"h-4 w-4 flex-shrink-0 text-green-600"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:145,columnNumber:21},this):e.jsxDEV(to,{className:"h-4 w-4 flex-shrink-0 text-yellow-600"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:147,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm truncate",children:u.recipeText},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:149,columnNumber:19},this),e.jsxDEV(et,{variant:"secondary",className:"text-xs flex-shrink-0",children:[Math.round(N*100),"%"]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:152,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:143,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:135,columnNumber:15},this):e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start gap-2 text-muted-foreground",onClick:()=>f(!c),children:[e.jsxDEV(qi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:163,columnNumber:17},this),e.jsxDEV("span",{children:l("common.search","Search")},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:164,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:158,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:113,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:112,columnNumber:9},this),e.jsxDEV(Qa,{className:"w-80 p-0",align:"start",children:e.jsxDEV("div",{className:"space-y-2 p-3",children:[e.jsxDEV(Xe,{autoFocus:!0,placeholder:l("common.search","Search ingredients..."),value:r,onChange:w=>d(w.target.value),className:"h-8"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:172,columnNumber:13},this),u&&!r&&e.jsxDEV($a.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},className:je("p-2 rounded text-sm border-l-2 flex items-start gap-2",N>=.8?"bg-green-50 border-green-500 dark:bg-green-950":"bg-yellow-50 border-yellow-500 dark:bg-yellow-950"),children:e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium",children:N>=.8?"Auto-matched":"Suggested"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:192,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs opacity-75",children:[u.notes&&`${u.notes} • `,Math.round(N*100),"% confidence"]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:195,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:191,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:181,columnNumber:15},this),e.jsxDEV(wd,{children:x.length>0?e.jsxDEV("div",{className:"max-h-64 overflow-auto space-y-1",children:x.map(w=>{const A=hu(w),I=u?.inventoryId===w.id&&!r;return e.jsxDEV($a.button,{initial:{opacity:0,y:-2},animate:{opacity:1,y:0},exit:{opacity:0,y:-2},onClick:()=>S(w),className:je("w-full text-left p-2 rounded transition-colors text-sm",I?"bg-cyan-100 hover:bg-cyan-200 dark:bg-cyan-900 dark:hover:bg-cyan-800":"hover:bg-muted"),children:e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"font-medium truncate",children:w.canonicalName},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:229,columnNumber:29},this),w.description&&e.jsxDEV("p",{className:"text-xs opacity-60 truncate",children:w.description},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:233,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:228,columnNumber:27},this),a&&A!==null&&e.jsxDEV(et,{variant:"secondary",className:"text-xs flex-shrink-0",children:["$",A.toFixed(2),"/",w.primaryUnit]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:239,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:227,columnNumber:25},this)},w.id,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:214,columnNumber:23},this)})},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:206,columnNumber:17},this):r.trim()&&x.length===0?e.jsxDEV("p",{className:"p-2 text-sm text-muted-foreground text-center",children:l("common.no_results","No ingredients found")},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:250,columnNumber:17},this):null},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:204,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:171,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:111,columnNumber:7},this),p&&a&&e.jsxDEV("div",{className:"text-xs space-y-1 pl-1",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Cost per unit:"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:262,columnNumber:13},this),e.jsxDEV("span",{className:"font-semibold",children:["$",g?.toFixed(2)??"N/A"," / ",p.primaryUnit]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:263,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:261,columnNumber:11},this),v&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Supplier:"},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:269,columnNumber:15},this),e.jsxDEV("span",{className:"font-medium",children:v.supplierName},void 0,!1,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:270,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:268,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:260,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/IngredientSelector.tsx",lineNumber:110,columnNumber:5},this)}const Hn=(s,t,i,n)=>`w-full rounded-lg border px-2.5 py-1.5 text-sm ${i?"text-right":""} ${s?"border-cyan-500/30 bg-slate-900/70 text-cyan-100 placeholder-cyan-400/50 focus:ring-cyan-400/60 focus:ring-offset-slate-950":"border-slate-200 bg-white text-slate-900 placeholder-slate-400 focus:ring-sky-300/60 focus:ring-offset-white"} focus:outline-none focus:ring-2 focus:ring-offset-1 ${t??""} ${n?"opacity-60":""}`,kv=({isDarkMode:s,ingredients:t,currencySymbol:i,totalCost:n,theoreticalVolumeLabel:a,activeCount:o,averageYield:l,methodOptions:r,methodOptionsId:d,onFieldChange:c,onFieldBlur:f,onAddRow:b,onRemoveRow:D,onReorderRow:u,onGridKeyDown:p,onAddSubRecipe:x,onAddDivider:S,supplierQuotes:m,onApplySupplierQuote:v})=>{const{t:g}=Vs(),[N,w]=h.useState(null),A=(ie,R,F)=>{c(ie,"item")({target:{value:F.name||F.id}}),F.currentPrice&&c(ie,"cost")({target:{value:String(F.currentPrice)}}),w(null)},I=ie=>R=>{R.dataTransfer.setData("text/plain",String(ie)),R.dataTransfer.effectAllowed="move"},B=ie=>{ie.preventDefault(),ie.dataTransfer.dropEffect="move"},W=ie=>R=>{R.preventDefault();const F=Number(R.dataTransfer.getData("text/plain"));Number.isNaN(F)||u(F,ie)},se=ie=>{ie.preventDefault();const R=Number(ie.dataTransfer.getData("text/plain"));Number.isNaN(R)||u(R,t.length)};return e.jsxDEV("div",{className:`rounded-2xl border p-4 shadow-lg ${s?"bg-slate-950/50 border-cyan-500/25 shadow-cyan-500/10":"bg-white border-slate-200 shadow-slate-300/40"}`,"data-echo-key":"section:add:ingredients",children:[e.jsxDEV("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:`text-lg font-semibold uppercase tracking-[0.28em] ${s?"text-cyan-300":"text-slate-700"}`,children:"Ingredients"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:127,columnNumber:11},void 0),e.jsxDEV("p",{className:`mt-1 max-w-xl text-xs leading-relaxed ${s?"text-cyan-200/60":"text-slate-500"}`,children:"Track each component with quantity, unit, prep method, yield %, and cost to keep recipe costing and lab documentation aligned."},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:134,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:126,columnNumber:9},void 0),e.jsxDEV("div",{className:`flex flex-col items-end text-xs ${s?"text-cyan-200/80":"text-slate-600"}`,children:[e.jsxDEV("span",{children:[g("recipe.ingredients.activeItems","Active items"),":"," ",e.jsxDEV("strong",{className:s?"text-cyan-100":"text-slate-900",children:o},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:149,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:147,columnNumber:11},void 0),e.jsxDEV("span",{children:[g("recipe.ingredients.totalCost","Total cost"),":"," ",e.jsxDEV("strong",{className:s?"text-cyan-100":"text-slate-900",children:[i,n.toFixed(2)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:153,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:151,columnNumber:11},void 0),e.jsxDEV("span",{children:[g("recipe.ingredients.averageYield","Avg yield"),":"," ",e.jsxDEV("strong",{className:s?"text-cyan-100":"text-slate-900",children:l==null?"—":`${l.toFixed(1)}%`},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:160,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:158,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:125,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-3 overflow-x-auto",children:e.jsxDEV("div",{className:"min-w-[960px] space-y-1",onDragOver:B,onDrop:se,children:[e.jsxDEV("div",{className:`grid grid-cols-[minmax(2.75rem,3.5rem),5rem,7ch,minmax(18rem,2fr),minmax(13.5rem,1.25fr),6.5ch,14.5ch,2.5rem] items-center gap-2.5 rounded-xl px-2.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.22em] ${s?"bg-slate-900/70 text-cyan-200/70":"bg-slate-100 text-slate-600"}`,children:[e.jsxDEV("span",{children:"#"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:178,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.qty","Qty")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:179,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.unit","Unit")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:180,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.item","Ingredient")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:181,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.prep","Method / Prep")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:182,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.yield","Yield %")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:183,columnNumber:13},void 0),e.jsxDEV("span",{children:g("recipe.ingredients.columns.cost","Cost")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:184,columnNumber:13},void 0),e.jsxDEV("span",{},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:185,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:173,columnNumber:11},void 0),t.map((ie,R)=>{const F=ie.type==="divider",k=ie.subId??`${R}`,Q=m?.[k]??[],J=F?s?"border-cyan-500/30 bg-cyan-500/10":"border-slate-300 bg-slate-100/80":s?"border-cyan-500/20 bg-slate-950/40 shadow-[0_12px_28px_-18px_rgba(34,211,238,0.45)]":"border-slate-200 bg-white shadow-[0_12px_28px_-18px_rgba(15,23,42,0.35)]";return F?e.jsxDEV("div",{className:`flex items-center gap-2.5 rounded-2xl border px-2.5 py-1.5 transition-colors ${J}`,onDragOver:B,onDrop:W(R),"data-row-kind":ie.type,children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{type:"button",draggable:!0,onDragStart:I(R),className:`flex h-6 w-6 items-center justify-center rounded-full border text-xs ${s?"border-cyan-500/40 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-500 hover:bg-slate-200/80"}`,title:g("recipe.ingredients.dragHandle","Drag to reorder"),"aria-label":g("recipe.ingredients.dragHandle","Drag to reorder"),children:e.jsxDEV(du,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:221,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:209,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs font-semibold text-slate-500 dark:text-cyan-300",children:R+1},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:223,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:208,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex flex-1 justify-center",children:e.jsxDEV("input",{"data-row":R,"data-col":2,value:ie.item,onChange:c(R,"item"),onKeyDown:p,className:`w-full max-w-[240px] rounded-full border px-4 py-1 text-center text-[10px] font-semibold uppercase tracking-[0.4em] outline-none transition ${s?"border-cyan-500/40 bg-cyan-500/10 text-cyan-100 focus:border-cyan-300":"border-slate-300/80 bg-slate-50 text-slate-600 focus:border-slate-500"}`,placeholder:g("recipe.ingredients.placeholders.step","Step label")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:228,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:227,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-end",children:e.jsxDEV("button",{type:"button",onClick:()=>D(R),className:`rounded-full border p-1 transition ${s?"border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-600 hover:bg-slate-100"}`,title:g("recipe.ingredients.removeRow","Remove step"),"aria-label":g("recipe.ingredients.removeRow","Remove step"),children:e.jsxDEV(uu,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:254,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:243,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:242,columnNumber:19},void 0)]},ie.subId??`${R}-${ie.item||"divider"}`,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:201,columnNumber:17},void 0):e.jsxDEV("div",{className:`grid grid-cols-[minmax(2.75rem,3.5rem),5rem,7ch,minmax(18rem,2fr),minmax(13.5rem,1.25fr),6.5ch,14.5ch,2.5rem] items-stretch gap-2.5 rounded-2xl border px-2.5 py-1.5 transition-colors ${J}`,onDragOver:B,onDrop:W(R),"data-row-kind":ie.type,children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{type:"button",draggable:!0,onDragStart:I(R),className:`flex h-6 w-6 items-center justify-center rounded-full border text-xs ${s?"border-cyan-500/40 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-500 hover:bg-slate-200/80"}`,title:g("recipe.ingredients.dragHandle","Drag to reorder"),"aria-label":g("recipe.ingredients.dragHandle","Drag to reorder"),children:e.jsxDEV(du,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:282,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:270,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-xs font-semibold text-slate-500 dark:text-cyan-300",children:R+1},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:284,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:269,columnNumber:17},void 0),e.jsxDEV("input",{"data-row":R,"data-col":0,value:ie.qty,onChange:c(R,"qty"),onKeyDown:p,disabled:F,className:Hn(s,"px-2",!1,F),placeholder:g("recipe.ingredients.placeholders.qty","1 1/2")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:288,columnNumber:17},void 0),e.jsxDEV("input",{"data-row":R,"data-col":1,value:ie.unit,onChange:c(R,"unit"),onKeyDown:p,className:Hn(s,"px-2 text-center uppercase",!1),placeholder:g("recipe.ingredients.placeholders.unit","QTS")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:298,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative flex items-center gap-1",children:[e.jsxDEV("input",{"data-row":R,"data-col":2,value:ie.item,onChange:c(R,"item"),onKeyDown:p,className:Hn(s,void 0,!1,!1),placeholder:g("recipe.ingredients.placeholders.item","Ingredient")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV(ao,{open:N===R,onOpenChange:O=>w(O?R:null),children:[e.jsxDEV(ro,{asChild:!0,children:e.jsxDEV("button",{className:`shrink-0 p-1.5 rounded transition-colors ${ie.inventoryId?s?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":s?"bg-slate-700/50 text-slate-400 hover:bg-slate-700":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,title:"Link to supplier",children:e.jsxDEV(Or,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:331,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:323,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:322,columnNumber:21},void 0),e.jsxDEV(Qa,{className:"w-72",align:"start",children:e.jsxDEV(wv,{suggestedText:ie.item,showPrice:!0,onSelect:(O,me)=>A(R,O,me)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:335,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:334,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:321,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:311,columnNumber:17},void 0),e.jsxDEV("input",{"data-row":R,"data-col":3,value:ie.prep,onChange:c(R,"prep"),onKeyDown:p,list:r.length?d:void 0,className:Hn(s,void 0,!1,!1),placeholder:g("recipe.ingredients.placeholders.prep","Method or prep notes")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:343,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-col gap-1",children:e.jsxDEV("input",{"data-row":R,"data-col":4,value:ie.yield,onChange:c(R,"yield"),onBlur:f(R,"yield"),onKeyDown:p,className:Hn(s,"px-2 text-center",!0,!1),maxLength:6,placeholder:g("recipe.ingredients.placeholders.yield","100")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:354,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:353,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative flex w-full flex-col gap-1",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("span",{className:`pointer-events-none text-sm font-semibold ${s?"text-cyan-300":"text-slate-500"}`,children:i},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:368,columnNumber:21},void 0),e.jsxDEV("input",{"data-row":R,"data-col":5,value:ie.cost,onChange:c(R,"cost"),onBlur:f(R,"cost"),onKeyDown:p,className:Hn(s,"px-2 text-right",!1,!1),maxLength:14,placeholder:g("recipe.ingredients.placeholders.cost","0.00")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:375,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:367,columnNumber:19},void 0),Q.length>0&&e.jsxDEV("div",{className:`rounded-lg border border-dashed p-2 ${s?"border-cyan-500/20 bg-cyan-500/5 text-cyan-100":"border-slate-300/70 bg-slate-50 text-slate-600"}`,children:[Q.slice(0,2).map(O=>{const me=`${O.sku}-${O.supplierId}`,de=O.unitCost!=null?`${O.currency} ${O.unitCost.toFixed(2)} / ${O.unitCostUnit??O.packUnit}`:`${O.currency} ${O.pricePerPack.toFixed(2)} per ${O.packSize}${O.packUnit}`,fe=O.estimatedCost!=null?`${i}${O.estimatedCost.toFixed(2)} for qty`:`${O.currency} ${O.pricePerPack.toFixed(2)} pack`;return e.jsxDEV("div",{className:"flex items-start justify-between gap-2 text-[10px]",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"font-semibold",children:[O.supplierName,e.jsxDEV("span",{className:"ml-1 font-normal text-[9px] opacity-80",children:de},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:409,columnNumber:33},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:407,columnNumber:31},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-[9px] opacity-75",children:[e.jsxDEV("span",{children:["LT ",O.leadTimeDays,"d"]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:414,columnNumber:33},void 0),e.jsxDEV("span",{children:["Min ",O.minOrderPacks," pack",O.minOrderPacks>1?"s":""]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:415,columnNumber:33},void 0),e.jsxDEV("span",{children:fe},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:416,columnNumber:33},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:413,columnNumber:31},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:406,columnNumber:29},void 0),v&&O.estimatedCost!=null&&e.jsxDEV("button",{type:"button",onClick:()=>v(R,O),className:`rounded-full px-2 py-1 text-[10px] font-semibold transition ${s?"border border-cyan-400/40 text-cyan-100 hover:bg-cyan-500/20":"border border-slate-400 text-slate-700 hover:bg-slate-200"}`,children:"Apply"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:420,columnNumber:31},void 0)]},me,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:405,columnNumber:27},void 0)}),Q.length>2&&e.jsxDEV("div",{className:"mt-1 text-[9px] opacity-70",children:["+",Q.length-2," additional supplier option",Q.length-2>1?"s":""]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:436,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:388,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:366,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-end",children:e.jsxDEV("button",{type:"button",onClick:()=>D(R),className:`rounded-full border p-1 transition ${s?"border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-600 hover:bg-slate-100"}`,title:g("recipe.ingredients.removeRow","Remove row"),"aria-label":g("recipe.ingredients.removeRow","Remove row"),children:e.jsxDEV(uu,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:456,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:445,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:444,columnNumber:17},void 0)]},ie.subId??`${R}-${ie.item||"blank"}`,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:262,columnNumber:15},void 0)}),r.length>0&&e.jsxDEV("datalist",{id:d,children:r.map(ie=>e.jsxDEV("option",{value:ie},ie,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:465,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:463,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:168,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:167,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-xs",children:[e.jsxDEV("div",{className:s?"text-cyan-200/75":"text-slate-500",children:[g("recipe.ingredients.volumeLabel","Theoretical volume captured"),":"," ",e.jsxDEV("span",{className:"font-semibold text-slate-700 dark:text-cyan-100",children:a},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:475,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:473,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>b(),className:`flex items-center gap-1 rounded-full px-3 py-1.5 text-sm font-semibold transition ${s?"bg-cyan-500/20 text-cyan-100 hover:bg-cyan-500/30":"bg-slate-900 text-white hover:bg-slate-700"}`,children:[e.jsxDEV(Th,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:489,columnNumber:13},void 0),g("recipe.ingredients.addIngredient","Add ingredient")]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:480,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:x,className:`flex items-center gap-1 rounded-full px-3 py-1.5 text-sm transition ${s?"border border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:[e.jsxDEV(Or,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:501,columnNumber:13},void 0),g("recipe.ingredients.addSubRecipe","Add sub recipe")]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:492,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:S,className:`flex items-center gap-1 rounded-full px-3 py-1.5 text-sm transition ${s?"border border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:g("recipe.ingredients.addDivider","Add break")},void 0,!1,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:504,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:479,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:472,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/IngredientsGrid.tsx",lineNumber:117,columnNumber:5},void 0)},hn=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(ah,{ref:i,className:je("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsxDEV(qx,{className:je("flex items-center justify-center text-current"),children:e.jsxDEV(vn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/checkbox.tsx",lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/checkbox.tsx",lineNumber:19,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/checkbox.tsx",lineNumber:11,columnNumber:3},void 0));hn.displayName=ah.displayName;const Sv=({open:s,onOpenChange:t,options:i,onConfirm:n,isDarkMode:a,formatCurrency:o})=>{const[l,r]=h.useState(""),[d,c]=h.useState(new Set);h.useEffect(()=>{s||(r(""),c(new Set))},[s]);const f=h.useMemo(()=>{if(!l.trim())return i;const p=l.trim().toLowerCase();return i.filter(x=>[x.title,x.course,x.cuisine,...x.tags??[]].filter(Boolean).join(" ").toLowerCase().includes(p))},[i,l]),b=p=>{c(x=>{const S=new Set(x);return S.has(p)?S.delete(p):S.add(p),S})},D=()=>{if(!d.size)return;const p=i.filter(x=>d.has(x.id));n(p),t(!1)},u=p=>{n([p]),t(!1)};return e.jsxDEV(ss,{open:s,onOpenChange:t,children:e.jsxDEV(is,{className:je("max-w-3xl space-y-4 border-0 bg-white/95 p-6 shadow-xl dark:bg-slate-950/95",a?"border border-cyan-500/20 text-cyan-100":"border border-slate-200 text-slate-900"),children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{className:"flex items-center gap-2 text-base font-semibold uppercase tracking-[0.28em]",children:[e.jsxDEV(Ka,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:101,columnNumber:13},void 0),"Add Sub Recipe"]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:100,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:99,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Xe,{value:l,onChange:p=>r(p.target.value),placeholder:"Search recipes by name, tag, course, or cuisine",className:je("w-full rounded-xl border px-3 py-2 pr-9 text-sm",a?"border-cyan-500/30 bg-slate-950/60 text-cyan-100 placeholder:text-cyan-300/60":"border-slate-200 bg-white text-slate-800 placeholder:text-slate-400")},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV(qi,{className:"pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:107,columnNumber:11},void 0),e.jsxDEV("div",{className:je("text-xs uppercase tracking-[0.28em]",a?"text-cyan-200/70":"text-slate-500"),children:[f.length," recipes available"]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:106,columnNumber:9},void 0),e.jsxDEV(Ds,{className:"max-h-[360px] overflow-hidden rounded-2xl border border-dashed",children:e.jsxDEV("div",{className:je("divide-y",a?"divide-cyan-500/15 bg-slate-950/40":"divide-slate-200 bg-white/70"),children:f.length===0?e.jsxDEV("div",{className:je("flex h-40 items-center justify-center text-sm",a?"text-cyan-200/70":"text-slate-500"),children:"No recipes match your search."},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:144,columnNumber:15},void 0):f.map(p=>{const x=d.has(p.id);return e.jsxDEV("button",{type:"button",onClick:()=>b(p.id),onDoubleClick:()=>u(p),className:je("flex w-full cursor-pointer items-start gap-3 px-4 py-3 text-left transition",x?a?"border-l-2 border-cyan-400/80 bg-cyan-500/10":"border-l-2 border-sky-400 bg-sky-100/70":a?"hover:bg-cyan-500/5":"hover:bg-slate-100/70"),children:[e.jsxDEV(hn,{checked:x,onCheckedChange:()=>b(p.id),onClick:S=>S.stopPropagation(),className:je("mt-1 h-4 w-4",a?"border-cyan-500/50 data-[state=checked]:bg-cyan-400":"border-slate-300 data-[state=checked]:bg-slate-900")},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:172,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-1 flex-col gap-1",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-semibold tracking-[0.08em]",children:p.title},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:185,columnNumber:25},void 0),p.course?e.jsxDEV(et,{variant:"outline",className:je("uppercase tracking-[0.25em]",a?"border-cyan-500/30 text-cyan-200/80":"border-slate-300 text-slate-600"),children:p.course},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:189,columnNumber:27},void 0):null,p.cuisine?e.jsxDEV(et,{variant:"outline",className:je("uppercase tracking-[0.25em]",a?"border-cyan-500/30 text-cyan-200/80":"border-slate-300 text-slate-600"),children:p.cuisine},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:202,columnNumber:27},void 0):null]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:184,columnNumber:23},void 0),p.tags&&p.tags.length>0?e.jsxDEV("div",{className:je("flex flex-wrap gap-1 text-[11px] uppercase tracking-[0.28em]",a?"text-cyan-200/70":"text-slate-400"),children:p.tags.map(S=>e.jsxDEV("span",{children:S},S,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:223,columnNumber:29},void 0))},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:216,columnNumber:25},void 0):null,(p.yieldQty||p.yieldUnit)&&e.jsxDEV("div",{className:je("text-[11px] uppercase tracking-[0.28em]",a?"text-cyan-200/65":"text-slate-400"),children:["Yield: ",p.yieldQty??"—"," ",p.yieldUnit??""]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:228,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:183,columnNumber:21},void 0),e.jsxDEV("div",{className:je("whitespace-nowrap text-sm font-semibold",a?"text-cyan-200":"text-slate-700"),children:o(p.cost,p.currency)},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:238,columnNumber:21},void 0)]},p.id,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:156,columnNumber:19},void 0)})},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:135,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:134,columnNumber:9},void 0),e.jsxDEV(Li,{children:[e.jsxDEV(ne,{type:"button",variant:"ghost",onClick:()=>t(!1),className:je("mt-2 sm:mt-0",a?"text-cyan-200 hover:bg-cyan-500/10":"text-slate-600"),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:254,columnNumber:11},void 0),e.jsxDEV(ne,{type:"button",onClick:D,disabled:!d.size,className:je(a?"bg-cyan-500 text-slate-950 hover:bg-cyan-400":"bg-slate-900 text-white hover:bg-slate-800"),children:["Add ",d.size?`(${d.size})`:""]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:253,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:91,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/SubRecipePicker.tsx",lineNumber:90,columnNumber:5},void 0)},Gr=[{id:"rm-veloute-base",name:"Roasted Vegetable Velouté Base",category:"sauce",description:"Slow-roasted root vegetables and aromatics emulsified into a velvety base ideal for soups or finishing sauces.",defaultYieldPercent:86,standardBatchQty:18,standardBatchUnit:"L",portionSize:240,portionUnit:"ML",defaultPortions:75,supplierId:"sup-harvest-kitchens",leadTimeDays:2,tags:["plant-based","ready-to-serve","gluten-free"]},{id:"rm-braised-short-rib",name:"Cabernet Braised Short Rib",category:"protein",description:"Boneless beef short rib braised with cabernet, mirepoix, and veal stock; portioned and blast-chilled for service.",defaultYieldPercent:68,standardBatchQty:22,standardBatchUnit:"KG",portionSize:170,portionUnit:"G",defaultPortions:110,supplierId:"sup-urban-butcher",leadTimeDays:4,tags:["premium","ready-to-heat","chef-series"]},{id:"rm-confit-garlic",name:"Confit Garlic Puree",category:"condiment",description:"Whole garlic cloves confit in olive oil and whipped into a smooth puree with lemon and thyme.",defaultYieldPercent:92,standardBatchQty:12,standardBatchUnit:"KG",portionSize:45,portionUnit:"G",defaultPortions:240,supplierId:"sup-coastal-produce",leadTimeDays:1,tags:["mise-en-place","bulk","vegan"]},{id:"rm-vegan-panna-cotta",name:"Coconut Cashew Panna Cotta",category:"dessert",description:"Silky coconut and cashew panna cotta set with agar and vanilla bean; plated in recyclable ramekins.",defaultYieldPercent:93,standardBatchQty:9,standardBatchUnit:"L",portionSize:150,portionUnit:"G",defaultPortions:60,supplierId:"sup-atelier-patisserie",leadTimeDays:3,tags:["vegan","gluten-free","premium"]},{id:"rm-fermented-chili",name:"Fermented Calabrian Chili Paste",category:"condiment",description:"Three-week fermented Calabrian chilies balanced with honey, citrus, and smoked salt.",defaultYieldPercent:88,standardBatchQty:8,standardBatchUnit:"KG",portionSize:35,portionUnit:"G",defaultPortions:185,supplierId:"sup-lavilla-preserves",leadTimeDays:5,tags:["artisanal","small-batch","spicy"]}];function jv(s){return Gr.find(t=>t.id===s)}const dr=864e5;function Vv({targetPortions:s,portionSize:t,portionUnit:i,expectedYieldPercent:n,inputUnit:a,shrinkageBufferPercent:o=5,leadTimeDays:l=2,standardBatchQty:r,standardBatchUnit:d,demandHistory:c=[]}){if(!Number.isFinite(s)||s<=0||!Number.isFinite(t)||t<=0||!Number.isFinite(n)||n<=0)return null;const f=_r(i||""),b=ou(t,f),D=ou(1,a);if(!b||!D)return null;if(b.dimension!==D.dimension)return{recommendedInputQty:Math.round(s*t/(n/100)),recommendedInputUnit:a.toUpperCase(),recommendedBatches:1,expectedPortionsCovered:Math.round(s),coverageDays:Cv(s,c),bufferPercent:o,averageDailyDemand:Gc(c),warnings:["Portion units do not match input units. Recommendation is based on direct ratio without conversion."],nextAvailabilityDate:ur(Date.now()+l*dr),reviewDate:ur(Date.now()+Math.max(l-1,1)*dr)};const S=b.value*s/(n/100)/D.value*(1+o/100),m=r||0,v=m>0?Math.max(1,Math.ceil(S/m)):1,g=n/100,N=S*D.value*g,w=Math.floor(N/b.value),A=Gc(c),I=A>0?w/A:0;return{recommendedInputQty:Hr(S,3),recommendedInputUnit:a.toUpperCase(),recommendedBatches:v,expectedPortionsCovered:w,coverageDays:Hr(I,2),bufferPercent:o,averageDailyDemand:A,warnings:[],nextAvailabilityDate:ur(Date.now()+l*dr),reviewDate:ur(Date.now()+Math.max(l-1,1)*dr)}}function Gc(s){if(!s.length)return 0;const t=new Map;for(const a of s){const o=a.date.slice(0,10);t.set(o,(t.get(o)??0)+Math.max(a.portions,0))}const i=Array.from(t.values());if(!i.length)return 0;const n=i.reduce((a,o)=>a+o,0);return Hr(n/i.length,2)}function Cv(s,t){const i=Gc(t);return i<=0?0:Hr(s/i,2)}function Hr(s,t){if(!Number.isFinite(s))return 0;const i=Math.pow(10,t);return Math.round(s*i)/i}function ur(s){try{return new Date(s).toISOString().slice(0,10)}catch{return""}}const Co=s=>Math.max(0,Math.min(9999,s)),wu=()=>{try{return new Date().toISOString().slice(0,10)}catch{return""}},ii="rounded-md border bg-background px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary/40",ku="rounded-lg border bg-background/40 p-3",mi=s=>_r(s).toUpperCase(),Ro=(s,t=0)=>Number.isFinite(s)?s.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t}):"—",Rv=({defaultInputQty:s,defaultInputUnit:t,recipeName:i,defaultMethod:n="",methodOptions:a=[],onClose:o,item:l})=>{const{addRecord:r,removeRecord:d,listForIngredient:c,listForMethod:f}=Wf(),[b,D]=h.useState(l?.trim()||""),[u,p]=h.useState(""),[x,S]=h.useState(n.trim()),[m,v]=h.useState(""),[g,N]=h.useState(wu()),[w,A]=h.useState(Number.isFinite(s)&&s>0?s:0),[I,B]=h.useState(mi(t||"G")),[W,se]=h.useState(0),[ie,R]=h.useState(mi(t||I||"G")),[F,k]=h.useState(""),[Q,J]=h.useState("ingredient"),[O,me]=h.useState(""),[de,fe]=h.useState(0),[ae,L]=h.useState(0),[H,le]=h.useState(mi(t||I||"G")),[ue,K]=h.useState(0),[C,P]=h.useState(8),[ee,$]=h.useState(2),[U,G]=h.useState(null),re=h.useMemo(()=>O?jv(O):void 0,[O]);h.useEffect(()=>{l&&l.trim()&&D(l.trim())},[l]),h.useEffect(()=>{S(n.trim())},[n]),h.useEffect(()=>{R(ye=>ye||I)},[I]),h.useEffect(()=>{if(Q!=="readyMade"){H.trim()||le(mi(ie||I||"G"));return}const ye=re??Gr[0];ye&&(O||me(ye.id),b.trim()||D(ye.name),x.trim()||S("Ready-made integration"),w||A(ye.standardBatchQty),I.trim()||B(mi(ye.standardBatchUnit)),H.trim()||le(mi(ye.portionUnit)),ae||L(ye.portionSize),ue||K(ye.defaultPortions),(!ee||ee<=0)&&$(ye.leadTimeDays))},[Q,re,O,b,x,w,I,H,ae,ue,ee,ie]);const V=b.trim()||i.trim(),Y=_r(I),T=_r(ie),y=h.useMemo(()=>V?c(V):[],[V,c]),E=h.useMemo(()=>{const ye=x.trim();return ye?f(ye):[]},[x,f]),j=h.useMemo(()=>{const ye=[...y,...E],pt=new Map;for(const ct of ye)pt.has(ct.id)||pt.set(ct.id,ct);return Array.from(pt.values()).sort((ct,Ot)=>Ot.recordedAt-ct.recordedAt)},[y,E]),q=h.useMemo(()=>{const ye=new Set;for(const pt of a){const ct=pt.trim();ct&&ye.add(ct)}for(const pt of j){const ct=pt.method?.trim();ct&&ye.add(ct)}return Array.from(ye)},[a,j]),te=h.useMemo(()=>{if(!Number.isFinite(w)||w<=0||!Number.isFinite(W)||W<0||!I||!ie)return null;const ye=vx(w,Y,W,T);return ye!=null&&Number.isFinite(ye)?Co(ye):Y===T&&w!==0&&Number.isFinite(W)||lu(I,ie)&&w!==0?Co(W/w*100):null},[w,W,I,ie,Y,T]),Z=h.useMemo(()=>!I||!ie||te!=null||!Number.isFinite(w)||w<=0||!Number.isFinite(W)||W<=0?!1:!(Y===T)&&!lu(I,ie),[te,w,W,I,ie,Y,T]),ve=h.useMemo(()=>O?j.filter(ye=>ye.itemType==="readyMade"&&ye.readyMadeId===O&&(ye.forecastPortions||ye.outputPortions)).map(ye=>({date:new Date(ye.recordedAt).toISOString().slice(0,10),portions:ye.forecastPortions??ye.outputPortions??0})).filter(ye=>ye.portions>0):[],[j,O]),ke=h.useMemo(()=>{if(te!=null)return te;if(!O)return re?.defaultYieldPercent??null;const ye=j.filter(pt=>pt.itemType==="readyMade"&&pt.readyMadeId===O&&pt.yieldPercent!=null).map(pt=>pt.yieldPercent);return ye.length===0?re?.defaultYieldPercent??null:ye.reduce((pt,ct)=>pt+ct,0)/ye.length},[te,j,O,re]),De=h.useMemo(()=>{if(Q!=="readyMade"||ke==null||ke<=0)return null;const ye=Math.max(ue,de);if(!Number.isFinite(ye)||ye<=0)return null;const pt=ae>0?ae:re?.portionSize??0,ct=H.trim()||re?.portionUnit||ie||I;return!Number.isFinite(pt)||pt<=0?null:Vv({targetPortions:ye,portionSize:pt,portionUnit:ct,expectedYieldPercent:ke,inputUnit:mi(I),shrinkageBufferPercent:C,leadTimeDays:ee,standardBatchQty:re?.standardBatchQty,standardBatchUnit:re?.standardBatchUnit,demandHistory:ve})},[Q,ke,ue,de,ae,H,ie,I,C,ee,re,ve]),We=te==null?"—":Ir(te),ze=()=>S(""),st=()=>{const ye=V.trim();if(!ye){G("Enter the ingredient or component this yield represents.");return}const pt=x.trim();if(!pt){G("Enter the method that was tested before saving.");return}if(Q==="readyMade"&&!re){G("Select a ready-made catalog item before saving.");return}const ct=te??ke??null;if(ct==null){G("Enter compatible units or provide ready-made defaults so we can compute the yield %.");return}r({ingredientName:ye,prepDescription:pt,method:pt,tester:m.trim()||void 0,testDate:g?.trim()||void 0,code:u.trim()||void 0,notes:F.trim()||void 0,inputQty:w,inputUnit:mi(I),outputQty:W,outputUnit:mi(ie),yieldPercent:ct,itemType:Q,readyMadeId:Q==="readyMade"&&(O||re?.id)||void 0,readyMadeName:Q==="readyMade"?re?.name||ye:void 0,outputPortions:Q==="readyMade"&&(de||ue)||void 0,portionSize:Q==="readyMade"&&(ae||re?.portionSize)||void 0,portionUnit:Q==="readyMade"?H.trim()||re?.portionUnit||mi(ie||I):void 0,batchSize:Q==="readyMade"?w:void 0,batchUnit:Q==="readyMade"?mi(I):void 0,forecastPortions:Q==="readyMade"&&(ue||de)||void 0,shrinkageBufferPercent:Q==="readyMade"?C:void 0,leadTimeDays:Q==="readyMade"?ee:void 0,demandHistory:Q==="readyMade"?ve:void 0,procurementPlan:Q==="readyMade"?De:null}),G(null),o()},_t=ye=>{D(ye.ingredientName),S(ye.method),v(ye.tester??""),N(ye.testDate??wu()),p(ye.code??""),A(ye.inputQty),B(mi(ye.inputUnit)),se(ye.outputQty),R(mi(ye.outputUnit)),k(ye.notes??""),G(null)},Nt=ye=>{d(ye)};return e.jsxDEV("div",{className:"space-y-4 text-sm",children:[U&&e.jsxDEV("div",{className:"rounded-md border border-red-300 bg-red-50 px-3 py-2 text-xs text-red-600",children:U},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:406,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-[minmax(16rem,1fr),minmax(18rem,1fr),minmax(10rem,1fr)]",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Ingredient / component"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:412,columnNumber:11},void 0),e.jsxDEV("input",{value:b,onChange:ye=>D(ye.target.value),className:ii,placeholder:"e.g., Heirloom carrots (peeled)"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:413,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:411,columnNumber:9},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Method"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:421,columnNumber:11},void 0),e.jsxDEV("input",{value:x,onChange:ye=>S(ye.target.value),className:ii,list:q.length?"yield-method-options":void 0,placeholder:"e.g., Fire roasted"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:422,columnNumber:11},void 0),q.length>0&&e.jsxDEV("datalist",{id:"yield-method-options",children:q.map(ye=>e.jsxDEV("option",{value:ye},ye,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:432,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:430,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:420,columnNumber:9},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Test code"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:438,columnNumber:11},void 0),e.jsxDEV("input",{value:u,onChange:ye=>p(ye.target.value),className:ii,placeholder:"YLD-001"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:439,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:437,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:410,columnNumber:7},void 0),e.jsxDEV("div",{className:"rounded-lg border border-dashed bg-background/30 p-3",children:[e.jsxDEV("label",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:[e.jsxDEV("input",{type:"checkbox",checked:Q==="readyMade",onChange:ye=>J(ye.target.checked?"readyMade":"ingredient"),className:"h-4 w-4 rounded border-muted-foreground"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:450,columnNumber:11},void 0),"Link yield to ready-made catalog item"]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:449,columnNumber:9},void 0),Q==="readyMade"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"mt-3 grid gap-3 md:grid-cols-[minmax(16rem,1fr),minmax(12rem,0.8fr),minmax(10rem,0.6fr)]",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Catalog item"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:464,columnNumber:17},void 0),e.jsxDEV("select",{value:O,onChange:ye=>me(ye.target.value),className:ii,children:[e.jsxDEV("option",{value:"",children:"Select ready-made"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:470,columnNumber:19},void 0),Gr.map(ye=>e.jsxDEV("option",{value:ye.id,children:ye.name},ye.id,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:472,columnNumber:21},void 0))]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:465,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:463,columnNumber:15},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Forecast portions"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:479,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",min:0,value:ue,onChange:ye=>K(Number(ye.target.value)),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:480,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:478,columnNumber:15},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Buffer %"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:489,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",min:0,value:C,onChange:ye=>P(Number(ye.target.value)),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:490,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:488,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:462,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-3 grid gap-3 md:grid-cols-[repeat(4,minmax(8rem,1fr))]",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Measured portions"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:501,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",min:0,value:de,onChange:ye=>fe(Number(ye.target.value)),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:502,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:500,columnNumber:15},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Portion size"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:511,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",min:0,value:ae,onChange:ye=>L(Number(ye.target.value)),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:512,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:510,columnNumber:15},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Portion unit"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:521,columnNumber:17},void 0),e.jsxDEV("input",{value:H,onChange:ye=>le(ye.target.value.toUpperCase()),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:522,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:520,columnNumber:15},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Lead time (days)"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:529,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",min:0,value:ee,onChange:ye=>$(Number(ye.target.value)),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:530,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:528,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Effective yield"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:539,columnNumber:17},void 0),e.jsxDEV("div",{className:"rounded-md border bg-background px-2 py-2 text-sm font-semibold",children:ke!=null?`${Ir(ke)}%`:"—"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:540,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:538,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:499,columnNumber:13},void 0),re?.description&&e.jsxDEV("p",{className:"mt-3 text-xs leading-relaxed text-muted-foreground",children:re.description},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:546,columnNumber:15},void 0),De&&e.jsxDEV("div",{className:"mt-3 grid gap-2 rounded-md border bg-background/40 p-3 text-xs",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Recommended input"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:553,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold",children:[Ro(De.recommendedInputQty,2),` ${De.recommendedInputUnit}`]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:554,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:552,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Portions covered"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:560,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold",children:Ro(De.expectedPortionsCovered)},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:561,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:559,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Coverage window"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:566,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold",children:[Ro(De.coverageDays,1)," days"]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:567,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:565,columnNumber:17},void 0),e.jsxDEV("div",{children:["Next availability ",De.nextAvailabilityDate||"—","; review on"," ",De.reviewDate||"—","."]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:571,columnNumber:17},void 0),De.warnings.length>0&&e.jsxDEV("ul",{className:"list-disc space-y-1 pl-4 text-[11px] text-amber-600",children:De.warnings.map(ye=>e.jsxDEV("li",{children:ye},ye,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:579,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:577,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:551,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:461,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:448,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-[minmax(12rem,1fr),minmax(12rem,1fr),minmax(10rem,0.8fr)]",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Tester"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:591,columnNumber:11},void 0),e.jsxDEV("input",{value:m,onChange:ye=>v(ye.target.value),className:ii,placeholder:"Chef's name"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:592,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:590,columnNumber:9},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Test date"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:600,columnNumber:11},void 0),e.jsxDEV("input",{type:"date",value:g,onChange:ye=>N(ye.target.value),className:ii},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:601,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:599,columnNumber:9},void 0),e.jsxDEV("div",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Yield %"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:609,columnNumber:11},void 0),e.jsxDEV("div",{className:"rounded-md border bg-background px-2 py-2 text-sm font-semibold",children:We},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:610,columnNumber:11},void 0),Z&&e.jsxDEV("span",{className:"text-xs text-amber-600",children:"Enter matching weight or volume units to compute the yield accurately."},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:614,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:608,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:589,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{className:ku,children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase text-muted-foreground",children:"Input"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:623,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Quantity"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:626,columnNumber:15},void 0),e.jsxDEV("input",{type:"number",value:w,onChange:ye=>A(Number(ye.target.value)),className:ii,min:0,step:"any"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:627,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:625,columnNumber:13},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Unit"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:637,columnNumber:15},void 0),e.jsxDEV("input",{value:I,onChange:ye=>B(ye.target.value.toUpperCase()),className:ii,placeholder:"QTS"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:638,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:636,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:624,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:622,columnNumber:9},void 0),e.jsxDEV("div",{className:ku,children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase text-muted-foreground",children:"Measured output"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:648,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Quantity"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:653,columnNumber:15},void 0),e.jsxDEV("input",{type:"number",value:W,onChange:ye=>se(Number(ye.target.value)),className:ii,min:0,step:"any"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:654,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:652,columnNumber:13},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Unit"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:664,columnNumber:15},void 0),e.jsxDEV("input",{value:ie,onChange:ye=>R(ye.target.value.toUpperCase()),className:ii,placeholder:"L"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:665,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:663,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:651,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:647,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:621,columnNumber:7},void 0),e.jsxDEV("label",{className:"grid gap-1",children:[e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Notes"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:677,columnNumber:9},void 0),e.jsxDEV("textarea",{value:F,onChange:ye=>k(ye.target.value),rows:3,className:"rounded-md border bg-background px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary/40",placeholder:"Observations, prep adjustments, lab commentary"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:678,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:676,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex flex-wrap justify-end gap-3 text-sm",children:[e.jsxDEV("button",{type:"button",className:"rounded-md border px-3 py-1.5 text-muted-foreground hover:bg-muted",onClick:o,children:"Cancel"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:688,columnNumber:9},void 0),e.jsxDEV("button",{type:"button",className:"rounded-md border border-primary bg-primary px-3 py-1.5 font-semibold text-primary-foreground hover:opacity-90",onClick:st,children:"Save test"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:695,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:687,columnNumber:7},void 0),e.jsxDEV("div",{className:"pt-2",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs font-medium",children:[e.jsxDEV("span",{children:"Recent chef yields"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:706,columnNumber:11},void 0),x.trim()&&E.length>0&&e.jsxDEV("button",{type:"button",className:"text-muted-foreground underline",onClick:ze,children:"Clear method filter"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:708,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:705,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-2 max-h-56 overflow-auto rounded border",children:j.length===0?e.jsxDEV("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No tests logged yet."},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:719,columnNumber:13},void 0):e.jsxDEV("table",{className:"min-w-full text-xs",children:[e.jsxDEV("thead",{className:"bg-muted/60 text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-2 text-left",children:"Ingredient"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:724,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-left",children:"Method"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:725,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-left",children:"Tester"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:726,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-left",children:"Input"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:727,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-left",children:"Measured"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:728,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-right",children:"Yield %"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:729,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-right",children:"Recorded"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:730,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-2 text-right",children:"Actions"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:731,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:723,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:722,columnNumber:15},void 0),e.jsxDEV("tbody",{children:j.map(ye=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-2 align-top",children:ye.ingredientName},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:737,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 align-top",children:ye.method||"—"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:738,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 align-top",children:ye.tester||"—"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:739,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 align-top",children:[ye.inputQty," ",mi(ye.inputUnit)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:740,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 align-top",children:[ye.outputQty," ",mi(ye.outputUnit)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:743,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 text-right align-top",children:ye.yieldPercent==null?"—":Ir(ye.yieldPercent)},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:746,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 text-right align-top text-muted-foreground",children:Uc(ye.recordedAt,{addSuffix:!0})},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:751,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-2 text-right align-top",children:e.jsxDEV("div",{className:"flex items-center justify-end gap-2",children:[e.jsxDEV("button",{type:"button",className:"rounded border px-2 py-1 hover:bg-muted",onClick:()=>_t(ye),children:"Load"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:756,columnNumber:25},void 0),e.jsxDEV("button",{type:"button",className:"rounded border border-destructive px-2 py-1 text-destructive hover:bg-destructive/10",onClick:()=>Nt(ye.id),children:"Delete"},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:763,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:755,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:754,columnNumber:21},void 0)]},ye.id,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:736,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:734,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:721,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:717,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:704,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/YieldLabForm.tsx",lineNumber:404,columnNumber:5},void 0)},Pv={title:null,items:[]},db=h.createContext(void 0),Iv=({children:s})=>{const[t,i]=h.useState(Pv),n=h.useCallback(l=>{i({title:l.title??null,items:Array.isArray(l.items)?[...l.items]:[]})},[]),a=h.useCallback(()=>{i({title:null,items:[]})},[]),o=h.useMemo(()=>({config:t,setToolbar:n,resetToolbar:a}),[t,n,a]);return e.jsxDEV(db.Provider,{value:o,children:s},void 0,!1,{fileName:"/app/code/client/context/PageToolbarContext.tsx",lineNumber:70,columnNumber:5},void 0)},oo=()=>{const s=h.useContext(db);if(!s)throw new Error("usePageToolbar must be used within a PageToolbarProvider");return s};let Po=0;const ub=()=>(Po=(Po+1)%Number.MAX_SAFE_INTEGER,`ing-${Date.now().toString(36)}-${Po.toString(36)}`),Ii=(s={})=>({type:s.type??"ingredient",qty:s.qty??"",unit:s.unit??"",item:s.item??"",prep:s.prep??"",yield:s.yield??"",cost:s.cost??"",subId:s.subId??ub(),costPerUnit:s.costPerUnit??null,supplierId:s.supplierId??null,supplierName:s.supplierName??null,supplierSku:s.supplierSku??null,inventoryId:s.inventoryId??null,inventoryName:s.inventoryName??null,mappingConfidence:s.mappingConfidence??void 0,totalCost:s.totalCost??null,costVariance:s.costVariance??null,costPerServing:s.costPerServing??null,lastUpdatedAt:s.lastUpdatedAt??void 0}),Av=(s="Step Break")=>Ii({type:"divider",qty:"",unit:"",item:s,prep:"",yield:"",cost:"",costPerUnit:null,supplierId:null,supplierName:null,supplierSku:null}),na=[32,36,32],Su=[20,26,20],Ti=s=>{if(!Array.isArray(s)||s.length!==3)return na;const t=s.map((a,o)=>{const l=Number(a);return Number.isFinite(l)?Math.max(Su[o],Math.min(80,l)):na[o]}),i=Su.reduce((a,o)=>a+o,0);return t.reduce((a,o)=>a+o,0)<i?na:t},Vn=s=>typeof s=="string"?s:s==null?"":String(s),Io=s=>{const t=Vn(s).trim();return t.length?t:null},ju="recipe:rnd:sessions:v1",Ao="recipe:rnd:active-session",Vu="recipe:rnd:save-hint-count",Tv=1100,Wv=s=>{if(!s||typeof s!="object")return null;const t=s,i=typeof t.id=="string"&&t.id.trim().length?t.id:null;if(!i)return null;const n=typeof t.name=="string"&&t.name.trim().length?t.name.trim():"Untitled Lab",a=t.snapshot??{},o={experiments:Array.isArray(a.experiments)?a.experiments:[],focusExperimentId:typeof a.focusExperimentId=="string"?a.focusExperimentId:"",searchQuery:typeof a.searchQuery=="string"?a.searchQuery:""},l=new Date().toISOString();return{id:i,name:n,createdAt:typeof t.createdAt=="string"&&t.createdAt.length?t.createdAt:l,updatedAt:typeof t.updatedAt=="string"&&t.updatedAt.length?t.updatedAt:l,layout:Ti(t.layout),snapshot:o,vision:typeof t.vision=="string"?t.vision:void 0,textureFocus:typeof t.textureFocus=="string"?t.textureFocus:void 0,flavorNotes:typeof t.flavorNotes=="string"?t.flavorNotes:void 0,launchTarget:typeof t.launchTarget=="string"?t.launchTarget:void 0}},Lv=()=>typeof crypto<"u"&&"randomUUID"in crypto?`rd-${crypto.randomUUID()}`:`rd-${Date.now().toString(36)}${Math.random().toString(36).slice(2,6)}`,Cu=s=>{if(!s)return"";try{return new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(new Date(s))}catch{return s}},fi=s=>{const t=s??Ii(),i=t,n=i.type==="divider"?"divider":"ingredient",a=i.subId??"",o=typeof a=="string"?a.trim():String(a??"").trim(),l={...t,type:n,subId:o||ub(),qty:Vn(i.qty??t.qty),unit:Vn(i.unit??t.unit),item:Vn(i.item??t.item),prep:Vn(i.prep??t.prep),yield:Vn(i.yield??t.yield),cost:Vn(i.cost??t.cost),costPerUnit:null,supplierId:Io(i.supplierId??t.supplierId),supplierName:Io(i.supplierName??t.supplierName),supplierSku:Io(i.supplierSku??t.supplierSku)};if(l.type!=="divider"){const r=fn(String(l.qty)),d=$c(l.cost),c=Number.isFinite(d)&&Number.isFinite(r)&&Math.abs(r)>Number.EPSILON?Number((d/r).toFixed(6)):null,f=i.costPerUnit,b=typeof f=="number"&&Number.isFinite(f)?Number(f.toFixed(6)):null;l.costPerUnit=c??b}return l},Ks=s=>s.filter(Boolean).map(t=>fi(t)),Ru=s=>{const t=String(s||"").trim();if(!t)return"";const i=t.replace(/[^0-9:]/g,"");if(!i)return"";const n=i.split(":");let a=0,o=0;if(n.length===1){if(o=Number(n[0]||0),!Number.isFinite(o))return""}else if(a=Number(n[0]||0),o=Number(n[1]||0),!Number.isFinite(a)||!Number.isFinite(o))return"";a=Math.max(0,Math.floor(a)),o=Math.max(0,Math.floor(o)),o>=60&&(a+=Math.floor(o/60),o%=60);const l=[];return a>0&&l.push(`${a} hr.`),o>0&&l.push(`${o} min.`),l.length?l.join(" "):""},Mv=()=>{const[s,t]=h.useState(""),{t:i}=Vs(),{findBestMatch:n}=Wf(),{setToolbar:a,resetToolbar:o}=oo(),l=yx(),r=h.useRef(()=>{}),d=h.useRef(()=>{}),c=h.useRef(()=>{}),[f,b]=h.useState([Ii()]),D=h.useRef([]),u=h.useRef([]),p=h.useRef(null),x=h.useRef(""),S=h.useRef(null),[m,v]=h.useState("1. "),[g,N]=h.useState(!1),[w,A]=h.useState("idle"),{addRecipe:I,updateRecipe:B,addImages:W,recipes:se}=ln(),ie=If(),{toast:R}=Ci(),F=h.useRef(null),[k,Q]=h.useState(()=>{try{return document.documentElement.classList.contains("dark")}catch{return!1}}),me=`group relative flex h-9 w-9 items-center justify-center rounded-full border text-xs transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${k?"border-cyan-500/30 bg-slate-900/70 text-cyan-100/90 hover:bg-slate-900/80 focus-visible:ring-cyan-400/60 focus-visible:ring-offset-slate-950":"border-slate-200 bg-white/85 text-slate-700 hover:bg-white focus-visible:ring-blue-200 focus-visible:ring-offset-white"}`,de=h.useCallback(()=>{r.current?.()},[]),fe=h.useCallback(()=>{d.current?.()},[]),ae=h.useCallback(()=>{c.current?.()},[]),[L,H]=h.useState(!1),le=h.useCallback(()=>{H(!0)},[]),[ue,K]=h.useState(!1),[C,P]=h.useState("recipe"),[ee,$]=h.useState(()=>{if(typeof window>"u")return na;try{const z=window.localStorage.getItem("recipe:rnd-layout");if(z)return Ti(JSON.parse(z))}catch{}return na});h.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem("recipe:rnd-layout",JSON.stringify(Ti(ee)))}catch{}},[ee]);const U=h.useCallback(z=>{!Array.isArray(z)||z.length!==3||$(xe=>{const ce=Ti(z);return xe.every((pe,be)=>pe===ce[be])?xe:ce})},[]);h.useEffect(()=>{P(z=>{const xe=L?"rnd":"recipe";return z===xe?z:xe})},[L]),h.useEffect(()=>{if(!L||($(ce=>{const pe=Ti(ce);return ce.every((be,Ae)=>be===pe[Ae])?ce:pe}),typeof document>"u"))return;const z=document.body.style.overflow;document.body.style.overflow="hidden";const xe=ce=>{ce.key==="Escape"&&H(!1)};return window.addEventListener("keydown",xe),()=>{document.body.style.overflow=z,window.removeEventListener("keydown",xe)}},[L]);const[G,re]=h.useState(null),[V,Y]=h.useState("");h.useEffect(()=>{Q(document.documentElement.classList.contains("dark"));const xe=be=>Q(String(be?.detail?.theme||"")==="dark");window.addEventListener("theme:change",xe);const ce=new MutationObserver(()=>{Q(document.documentElement.classList.contains("dark"))});ce.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const pe=be=>fs(String(be?.detail||""));return window.addEventListener("recipe:chef-notes",pe),()=>{window.removeEventListener("theme:change",xe),window.removeEventListener("recipe:chef-notes",pe),ce.disconnect()}},[]);const[T,y]=h.useState("Arial"),[E,j]=h.useState("14px"),[q,te]=h.useState([]),Z=Cn.useRef(!1),ve=z=>{Z.current=!0,te(z)},[ke,De]=h.useState([]),[We,ze]=h.useState([]),[st,_t]=h.useState([]),[Nt,ye]=h.useState([]),[pt,ct]=h.useState([]),[Ot,Es]=h.useState([]),[qt,ws]=h.useState(!1),[Kt,fs]=h.useState(()=>{try{return localStorage.getItem("recipe:chef-notes")||""}catch{return""}}),Cs=h.useRef(null),xs=720,[It,ls]=h.useState(null),[zs,ys]=h.useState(!1),[we,qe]=h.useState(!1),[Qe,ot]=h.useState("USD"),[ft,xt]=h.useState("Imperial"),[jt,At]=h.useState(6),[Vt,Qt]=h.useState("QTS"),ks=h.useRef(!1),[Yt,Gt]=h.useState(6),[_s,Ys]=h.useState("OZ"),[Ts,Ei]=h.useState(null),[oe,Ne]=h.useState(!1),Ue=h.useCallback(()=>{Ne(!0)},[]),[Me,Ct]=h.useState({...jo}),[Ws,es]=h.useState(!1),[ti,Qs]=h.useState(null),[Zs,Ri]=h.useState(!0),us=Cn.useRef(null),[Os,Rs]=h.useState(""),[Xs,Ss]=h.useState(""),[Gs,li]=h.useState(""),ci=h.useMemo(()=>{const z=s.trim().length>0,xe=f.some(tt=>tt?tt.type==="divider"?!!tt.item?.trim():[tt.item,tt.qty,tt.unit,tt.prep,tt.cost].some(Je=>!!(Je||"").toString().trim()):!1),ce=(m||"").trim(),pe=ce.length>0&&ce!=="1.",be=!!It,Ae=q.length>0,ge=Kt.trim().length>0,Re=ke.length>0||We.length>0||st.length>0||Nt.length>0||pt.length>0||Ot.length>0,_e=Os.trim().length>0||Xs.trim().length>0||Gs.trim().length>0;return!(z||xe||pe||be||Ae||ge||Re||_e)},[s,f,m,It,q,Kt,ke,We,st,Nt,pt,Ot,Os,Xs,Gs]),si=h.useMemo(()=>{if(!Number.isFinite(Yt))return 1;const z=Number(Yt)||1;return z>0?z:1},[Yt]),di=h.useMemo(()=>{if(!Ts)return null;const z=Ts.totals;if(!z)return{...Ts,yieldQty:si};const xe=1/si,ce=be=>{const Ae=Number(be??0);return Number.isFinite(Ae)?Ae*xe:0},pe={calories:Math.round(ce(z.calories)),fat:Number(ce(z.fat).toFixed(2)),saturatedFat:Number(ce(z.saturatedFat).toFixed(2)),transFat:Number(ce(z.transFat).toFixed(2)),carbs:Number(ce(z.carbs).toFixed(2)),fiber:Number(ce(z.fiber).toFixed(2)),sugars:Number(ce(z.sugars).toFixed(2)),protein:Number(ce(z.protein).toFixed(2)),sodium:Math.round(ce(z.sodium))};return{...Ts,perServing:pe,yieldQty:si}},[Ts,si]),Zi=h.useCallback(z=>{try{localStorage.removeItem("recipe:draft")}catch{}try{localStorage.removeItem("recipe:add:description")}catch{}try{localStorage.removeItem("recipe:chef-notes")}catch{}F.current=null,D.current=[],u.current=[],p.current&&(clearTimeout(p.current),p.current=null),x.current="",Z.current=!1,ks.current=!1,Cs.current&&(Cs.current.value=""),t(""),b([Ii()]),v("1. "),ls(null),ys(!1),qe(!1),te([]),De([]),ze([]),_t([]),ye([]),ct([]),Es([]),Ct({...jo}),ot("USD"),xt("Imperial"),At(6),Qt("QTS"),Gt(6),Ys("OZ"),Rs(""),Ss(""),li(""),Ei(null),es(!1),Qs(null),Ri(!0),fs(""),Ne(!1),z?.preserveSidebar||N(!1)},[t,b,v,ls,ys,qe,te,De,ze,_t,ye,ct,Es,Ct,ot,xt,At,Qt,Gt,Ys,Rs,Ss,li,Ei,es,Qs,Ri,fs,Ne,N,Ii]);h.useEffect(()=>()=>{S.current!==null&&(window.clearTimeout(S.current),S.current=null)},[]);const En=h.useCallback(()=>{if(w==="saving")return;if(ci){R({title:i("recipe.actions.finalizeEmptyTitle","Nothing to finalize"),description:i("recipe.actions.finalizeEmptyDescription","Add details before finalizing the recipe."),variant:"destructive"});return}let z=!1;A("saving");try{const xe=(s||"").trim()||"Untitled Recipe",ce=f.map(Je=>[Je.qty,Je.unit,Je.item,Je.prep].filter(Boolean).join(" ").trim()).filter(Boolean),pe=String(m||"").split(/\r?\n/).map(Je=>Je.trim()).filter(Boolean),be=It&&It.startsWith("data:")?[It]:void 0,Ae=di?.perServing??null,ge=di?{...di,savedAt:Date.now()}:Ts?{...Ts,savedAt:Date.now()}:null,Re=Ae?{calories:Ae.calories,fat:Ae.fat,carbs:Ae.carbs,protein:Ae.protein,fiber:Ae.fiber,sugars:Ae.sugars,sodium:Ae.sodium,cholesterol:void 0}:null,_e={source:"manual",taxonomy:Me,published:!0,yield:{quantity:jt,unit:Vt},portion:{count:Yt,unit:_s},times:{cook:Os,temp:Xs,prep:Gs},access:[...Ot],allergens:[...q],nationality:[...ke],courses:[...We],recipeType:[...st],prepMethod:[...Nt],cookingEquipment:[...pt],nutritionSnapshot:ge},tt={title:xe,ingredients:ce,instructions:pe,imageDataUrls:be,tags:[],nutrition:Re,extra:_e,isGlobal:qt,createdBy:"Current User",lastModifiedBy:"Current User",lastModifiedAt:Date.now()};F.current?B(F.current,tt):F.current=I(tt),z=!0,R({title:i("recipe.actions.finalizedTitle","Recipe finalized"),description:i("recipe.actions.finalizedDescription","Saved to your library and cleared for the next entry.")})}catch(xe){const ce=typeof xe?.message=="string"&&xe.message.trim().length?xe.message:i("recipe.actions.finalizedErrorFallback","Unexpected error");console.error("Finalize recipe failed",xe),R({title:i("recipe.actions.finalizedError","Unable to finalize recipe"),description:ce,variant:"destructive"})}finally{z?(A("success"),Zi({preserveSidebar:!0}),S.current!==null&&window.clearTimeout(S.current),S.current=window.setTimeout(()=>{A("idle"),S.current=null},2250)):A("idle")}},[I,B,Me,s,f,m,It,Zi,R,i,ci,w,jt,Vt,Yt,_s,Os,Xs,Gs,Ot,q,ke,We,st,Nt,pt,di,Ts]),Hs=h.useCallback(()=>{if(ci)return;const z=i("recipe.actions.clearConfirm","Clear all fields? This can't be undone.");window.confirm(z)&&(Zi(),R({title:i("recipe.actions.clearedTitle","Workspace cleared"),description:i("recipe.actions.clearedDescription","Start fresh with a blank recipe draft.")}))},[Zi,ci,i,R]),Mi=h.useMemo(()=>!se||se.length===0?[]:[...se].map(z=>{const xe=z.extra?.serverNotes,ce=typeof xe?.totals?.fullRecipeCost=="number"?xe.totals.fullRecipeCost:null,pe=typeof xe?.yieldQty=="number"?xe.yieldQty:null;return{id:z.id,title:z.title,course:z.course??null,cuisine:z.cuisine??null,tags:z.tags??[],cost:ce,currency:xe?.currency??null,yieldQty:pe,yieldUnit:xe?.yieldUnit??null}}).sort((z,xe)=>z.title.localeCompare(xe.title)),[se]),wi=z=>z==="EUR"?"€":z==="GBP"?"£":z==="JPY"?"¥":"$",Se=h.useCallback((z,xe)=>typeof z!="number"||Number.isNaN(z)?"—":`${wi(xe||Qe)}${z.toFixed(2)}`,[Qe]),Le=()=>f.reduce((z,xe)=>{if(xe.type==="divider")return z;const ce=$c(xe.cost);return z+(Number.isFinite(ce)?ce:0)},0),Fe=()=>{const z=Le(),xe=Yt>0?Yt:1;return z/xe},at="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold uppercase tracking-[0.35em] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60",gt=`${at} ${w==="success"?k?"bg-emerald-400 text-slate-950 hover:bg-emerald-300 focus-visible:ring-emerald-300/60 focus-visible:ring-offset-slate-950 disabled:opacity-100 disabled:pointer-events-none":"bg-emerald-500 text-white hover:bg-emerald-500/90 focus-visible:ring-emerald-400 focus-visible:ring-offset-white disabled:opacity-100 disabled:pointer-events-none":k?"bg-cyan-500 text-slate-950 hover:bg-cyan-400 focus-visible:ring-cyan-300/60 focus-visible:ring-offset-slate-950":"bg-slate-900 text-white hover:bg-slate-800 focus-visible:ring-slate-400 focus-visible:ring-offset-white"}`,_=`${at} ${k?"border border-cyan-400/60 text-cyan-200 hover:bg-cyan-500/10 focus-visible:ring-cyan-300/40 focus-visible:ring-offset-slate-950":"border border-slate-400 text-slate-700 hover:bg-slate-900/5 focus-visible:ring-slate-400/50 focus-visible:ring-offset-white"}`,M=k?"border-cyan-400/40 bg-slate-950/60 shadow-[0_0_32px_rgba(56,189,248,0.15)]":"border-slate-200 bg-white/80 shadow-[0_20px_40px_-24px_rgba(15,23,42,0.25)]",X=k?"text-cyan-200/90":"text-slate-600",he=k?"text-cyan-200/70":"text-slate-500",Ee=z=>{z.length&&(b(xe=>{const ce=Ks(xe.slice()),pe=be=>[be.qty,be.unit,be.item,be.prep,be.cost].map(Ae=>String(Ae??"").trim()).every(Ae=>Ae.length===0);return z.forEach(be=>{const Ae=ce.findIndex(_e=>pe(_e)),ge=typeof be.cost=="number"&&Number.isFinite(be.cost)?be.cost:null,Re=Ii({item:`Recipe - ${be.title}`,qty:"1",unit:be.yieldUnit??"",prep:"",yield:"100",cost:ge!=null?ge.toFixed(2):"",costPerUnit:ge??null});Ae>=0?ce[Ae]=Re:ce.push(Re)}),Ks(ce)}),setTimeout(()=>ts({...mt(),ts:Date.now()}),0))},Ve=z=>{const xe=z.filter(pe=>pe.type!=="divider").map(pe=>pe.item).join(" ").toLowerCase(),ce=new Set;return/(milk|cream|butter|cheese|half-?and-?half|yogurt|whey|ricotta|mozzarella|parmesan|parmigiano|pecorino|cheddar|gouda|feta)/.test(xe)&&ce.add("Dairy"),/flour|wheat|barley|rye|bread|pasta|cracker/.test(xe)&&ce.add("Gluten"),/egg\b|eggs\b|egg yolk|egg white/.test(xe)&&ce.add("Eggs"),/peanut/.test(xe)&&ce.add("Peanuts"),/almond|walnut|pecan|cashew|pistachio|hazelnut|macadamia/.test(xe)&&ce.add("Nuts"),/sesame/.test(xe)&&ce.add("Sesame"),/soy\b|soybean|soy sauce|tofu|edamame/.test(xe)&&ce.add("Soy"),/clam|shrimp|crab|lobster|scallop|oyster/.test(xe)&&ce.add("Shellfish"),/cod|salmon|tuna|anchov|trout|halibut|haddock|sardine/.test(xe)&&ce.add("Fish"),/onion|shallot|leek|scallion|chive/.test(xe)&&ce.add("Onion/Allium"),/garlic/.test(xe)&&ce.add("Garlic"),Array.from(ce)};h.useEffect(()=>{Z.current||te(Ve(f))},[f]);const Ce=h.useMemo(()=>`rounded-lg border px-1.5 py-0.5 text-xs font-semibold tracking-wide transition-colors focus:outline-none focus:ring-1 ${k?"bg-black/40 border-cyan-500/40 text-cyan-200 focus:border-cyan-300 focus:ring-cyan-400/40":"bg-white border-slate-300 text-slate-800 focus:border-slate-500 focus:ring-slate-300/70"}`,[k]),He=h.useMemo(()=>`font-bold uppercase tracking-[0.22em] text-[10px] text-center ${k?"text-cyan-300":"text-slate-700"}`,[k]),Rt=h.useMemo(()=>k?"text-cyan-400/80":"text-slate-500",[k]),kt=h.useMemo(()=>`inline-flex w-full items-center justify-center gap-1 rounded-lg border px-2 py-0.5 text-[11px] font-semibold leading-tight ${k?"border-cyan-400/40 bg-black/40 text-cyan-100":"border-slate-300 bg-white text-slate-800"}`,[k]),wt=h.useMemo(()=>Ru(Os),[Os]),ut=h.useMemo(()=>Ru(Gs),[Gs]),Dt=(z,xe)=>{const ce=xe.toUpperCase(),pe={TSP:1,TEASPOON:1,TEASPOONS:1,TBSP:3,TABLESPOON:3,TABLESPOONS:3,FLOZ:6,"FL OZ":6,OZFL:6,CUP:48,CUPS:48,PINT:96,PT:96,QUART:192,QT:192,QTS:192,QUARTS:192,GALLON:768,GAL:768,GALLONS:768},Ae=(tt=>tt.replace(/\./g,"").replace(/\s+/g,"").toUpperCase())(ce),ge=pe[Ae];if(!ge||!Number.isFinite(z))return{qty:z,unit:ce};let Re=z*ge;const _e=[["GALLON",768],["QUART",192],["PINT",96],["CUP",48],["FLOZ",6],["TBSP",3],["TSP",1]];for(const[tt,Je]of _e)if(Re>=Je){const zt=Re/Je;return{qty:Number(zt.toFixed(2)),unit:tt==="FLOZ"?"FL OZ":tt}}return{qty:z,unit:ce}},it=(z,xe)=>{const ce=xe.toUpperCase();return ce==="OZ"||ce==="OUNCE"||ce==="OUNCES"?z>=16?{qty:Number((z/16).toFixed(2)),unit:"LBS"}:{qty:z,unit:"OZ"}:{qty:z,unit:ce}};Cn.useEffect(()=>{const z=us.current;z&&document.activeElement!==z&&z.textContent!==m&&(z.textContent=m)},[m]);const mt=()=>({recipeName:s,ingredients:f,directions:m,isDarkMode:k,yieldQty:jt,yieldUnit:Vt,portionCount:Yt,portionUnit:_s,cookTime:Os,cookTemp:Xs,prepTime:Gs,selectedAllergens:q,selectedNationality:ke,selectedCourses:We,selectedRecipeType:st,selectedPrepMethod:Nt,selectedCookingEquipment:pt,selectedRecipeAccess:Ot,taxonomy:Me,image:It});h.useEffect(()=>{const z=JSON.stringify({recipeName:s,ingredients:f,directions:m,yieldQty:jt,yieldUnit:Vt});if(x.current!==z)return x.current=z,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{const xe=mt(),ce=f.filter(be=>be.type!=="divider").length,pe=[s.trim()||"Untitled recipe"];pe.push(`${ce} ingredient${ce===1?"":"s"}`),jt&&pe.push(`yield ${jt} ${Vt||""}`.trim()),l.recordVersionSnapshot({summary:pe.join(" · "),payload:xe,auto:!0,createdBy:"Auto capture"}),p.current=null},9e4),()=>{p.current&&(clearTimeout(p.current),p.current=null)}},[s,f,m,jt,Vt,l]);const ms=z=>{if(!z)return;t(z.recipeName||"");const ce=(z.ingredients||[Ii()]).map(be=>{if(be.qty&&be.unit)return be;const Ae=String(be.item||"");if(!Ae||!/^(\s*[0-9¼½¾⅓⅔⅛⅜⅝⅞]|\s*\/\d+|.*,)/i.test(Ae))return be;const ge=iu(Ae.replace(/^\s*\/(\d+)/,"1/$1"));return ge?{...be,qty:ge.qty??be.qty,unit:((ge.unit??be.unit)||"").toUpperCase(),item:ge.item??be.item,prep:ge.prep??be.prep}:be});b(Ks(ce)),v(z.directions||"1. "),Q(!!z.isDarkMode),At(z.yieldQty||0),Qt(z.yieldUnit||"QTS"),Gt(z.portionCount||1),Ys(z.portionUnit||"OZ"),Rs(z.cookTime||""),Ss(z.cookTemp||""),li(z.prepTime||""),te(z.selectedAllergens||[]),De(z.selectedNationality||[]),ze(z.selectedCourses||[]),_t(z.selectedRecipeType||[]),ye(z.selectedPrepMethod||[]),ct(z.selectedCookingEquipment||[]),Es(z.selectedRecipeAccess||[]),z.taxonomy&&Ct({...jo,...z.taxonomy}),ls(z.image||null);const pe=z.extra??{};if(pe&&typeof pe=="object"){if(pe.yield){const be=Number(pe.yield.quantity);Number.isFinite(be)&&be>=0&&At(be),pe.yield.unit&&Qt(String(pe.yield.unit).toUpperCase())}if(pe.portion){const be=Number(pe.portion.count);Number.isFinite(be)&&be>0&&Gt(be),pe.portion.unit&&Ys(String(pe.portion.unit).toUpperCase())}pe.times&&(pe.times.cook!=null&&Rs(String(pe.times.cook)),pe.times.temp!=null&&Ss(String(pe.times.temp)),pe.times.prep!=null&&li(String(pe.times.prep))),Array.isArray(pe.access)&&Es(pe.access.map(be=>String(be))),Array.isArray(pe.allergens)&&pe.allergens.length&&te(pe.allergens.map(be=>String(be))),Array.isArray(pe.nationality)&&pe.nationality.length&&De(pe.nationality.map(be=>String(be))),Array.isArray(pe.courses)&&pe.courses.length&&ze(pe.courses.map(be=>String(be))),Array.isArray(pe.recipeType)&&pe.recipeType.length&&_t(pe.recipeType.map(be=>String(be))),Array.isArray(pe.prepMethod)&&pe.prepMethod.length&&ye(pe.prepMethod.map(be=>String(be))),Array.isArray(pe.cookingEquipment)&&pe.cookingEquipment.length&&ct(pe.cookingEquipment.map(be=>String(be))),pe.nutritionSnapshot&&Ei(pe.nutritionSnapshot)}},ts=z=>{D.current.push(z),D.current.length>50&&D.current.shift(),localStorage.setItem("recipe:versions",JSON.stringify(D.current))};h.useEffect(()=>{const z=localStorage.getItem("recipe:draft");if(z)try{ms(JSON.parse(z))}catch{}const xe=localStorage.getItem("recipe:versions");if(xe)try{D.current=JSON.parse(xe)||[]}catch{}if(location.hash.startsWith("#r="))try{const ce=JSON.parse(atob(decodeURIComponent(location.hash.slice(3))));ms(ce)}catch{}},[]),h.useEffect(()=>{const z=xe=>{xe?.detail?.image&&ls(xe.detail.image),ys(!0)};return window.addEventListener("openImageEditor",z),()=>window.removeEventListener("openImageEditor",z)},[]),h.useEffect(()=>{const z=document.documentElement,xe=()=>Q(z.classList.contains("dark"));xe();const ce=new MutationObserver(xe);try{ce.observe(z,{attributes:!0,attributeFilter:["class"]})}catch{}return()=>{try{ce.disconnect()}catch{}}},[]),h.useEffect(()=>{localStorage.getItem("kb:culinary:seeded:v1")||(async()=>{try{const ce=await(await fetch("https://cdn.builder.io/o/assets%2Faccc7891edf04665961a321335d9540b%2F9770e28941e54ac1984842723ff5ddfa?alt=media&token=1331ec03-0eae-49a6-8e9d-5cfeff892419&apiKey=accc7891edf04665961a321335d9540b")).json(),pe={},be=(Re,_e=1)=>{const tt=String(Re||"").toLowerCase().trim();tt&&(pe[tt]=(pe[tt]||0)+_e)};if(Array.isArray(ce)&&ce.forEach(Re=>be(String(Re))),ce&&typeof ce=="object"){if(Array.isArray(ce.terms)&&ce.terms.forEach(Re=>be(String(Re))),ce.terms&&typeof ce.terms=="object"&&!Array.isArray(ce.terms))for(const[Re,_e]of Object.entries(ce.terms))be(Re,Number(_e)||1);Array.isArray(ce.aliases)&&ce.aliases.forEach(Re=>be(String(Re)))}const Ae=localStorage.getItem("kb:cook")||"{}",ge=JSON.parse(Ae||"{}");ge.terms={...ge.terms||{}};for(const[Re,_e]of Object.entries(pe))ge.terms[Re]=(ge.terms[Re]||0)+_e;localStorage.setItem("kb:cook",JSON.stringify(ge)),localStorage.setItem("kb:culinary:seeded:v1","1")}catch{}})()},[]),h.useEffect(()=>{const z=xe=>{const ce=xe?.detail?.type;ce&&(ce==="convertUnits"&&vo(),ce==="cycleCurrency"&&yo(),ce==="scale"&&Do(),ce==="saveVersion"&&ts({...mt(),ts:Date.now()}),ce==="openYieldLab"&&Ne(!0),ce==="finalizeImport"&&En())};return window.addEventListener("recipe:action",z),()=>window.removeEventListener("recipe:action",z)},[f,Yt,ft,Qe,En]),h.useEffect(()=>{const z=[{id:"scale",label:i("recipe.actions.scale","Scale Recipe"),ariaLabel:i("recipe.actions.scale","Scale Recipe"),icon:yg,onClick:de,className:me,title:i("recipe.actions.scale","Scale Recipe")},{id:"language",type:"custom",element:e.jsxDEV(uv,{variant:"compact",isDark:k,className:me,align:"end"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:1424,columnNumber:11},void 0)},{id:"convert",label:i("recipe.actions.convertUnits","Convert Units"),ariaLabel:i("recipe.actions.convertUnits","Convert Units"),icon:eo,onClick:fe,className:me,title:i("recipe.actions.convertUnits","Convert Units")},{id:"currency",label:i("recipe.actions.currency","Change Currency"),ariaLabel:i("recipe.actions.currency","Change Currency"),icon:Dg,onClick:ae,className:me,title:i("recipe.actions.currency","Change Currency")},{id:"yield",label:"Yield Lab",ariaLabel:"Yield Lab",icon:Ph,onClick:Ue,className:me,title:"Yield Lab"},{id:"rnd",label:"R&D Labs",ariaLabel:"R&D Labs",icon:Eg,onClick:le,className:me,title:"R&D Labs"}];return a({title:i("nav.addRecipe","Add Recipe"),items:z}),()=>{o()}},[a,o,me,de,fe,ae,Ue,le,k,i]),h.useEffect(()=>{const z=setTimeout(()=>{const xe=mt();localStorage.setItem("recipe:draft",JSON.stringify(xe));const ce=(s||"").trim(),pe=f.map(Ae=>[Ae.qty,Ae.unit,Ae.item,Ae.prep].filter(Boolean).join(" ").trim()).filter(Boolean),be=(m||"").split(/\r?\n/).map(Ae=>Ae.trim()).filter(Boolean);if(ce){const Ae={title:ce,ingredients:pe,instructions:be,extra:{taxonomy:Me},isGlobal:qt,lastModifiedBy:"Current User",lastModifiedAt:Date.now()};F.current?B(F.current,Ae):F.current=I({...Ae,tags:[],extra:{source:"manual",taxonomy:Me},createdBy:"Current User"})}},600);return()=>clearTimeout(z)},[s,f,m,k,jt,Vt,Yt,_s,Os,Xs,Gs,q,ke,We,st,Nt,pt,Ot,It]),h.useEffect(()=>{const z=setTimeout(()=>N(!0),450);return()=>clearTimeout(z)},[]),h.useEffect(()=>{const z=xe=>{if((xe.ctrlKey||xe.metaKey)&&xe.key.toLowerCase()==="s"){xe.preventDefault();const ce=mt();ts({...ce,ts:Date.now()})}if((xe.ctrlKey||xe.metaKey)&&xe.key.toLowerCase()==="z"){xe.preventDefault();const ce=D.current.pop();ce&&(u.current.push(mt()),ms(ce))}if((xe.ctrlKey||xe.metaKey)&&xe.shiftKey&&xe.key.toLowerCase()==="z"){xe.preventDefault();const ce=u.current.pop();ce&&(D.current.push(mt()),ms(ce))}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[]);const nt=h.useCallback((z,xe=0)=>{requestAnimationFrame(()=>{const ce=document.querySelector(`input[data-row="${z}"][data-col="${xe}"]`);ce&&(ce.focus(),ce.select())})},[]);h.useCallback((z,xe)=>{b(ce=>{if(z<0||z>=ce.length)return ce;const pe=ce.slice(),be=fi(pe[z]);return pe[z]=fi({...be,...xe}),pe})},[b]);const hs=h.useCallback(z=>{const xe=typeof z=="number"&&z>=0?z+1:f.length;b(ce=>{const pe=Ks(ce.slice()),be=typeof z=="number"&&z>=0&&z<ce.length?z+1:ce.length;return pe.splice(be,0,Ii()),Ks(pe)}),nt(xe,0)},[nt,f.length,b]),Ye=h.useCallback(z=>{b(xe=>{if(xe.length===1)return[Ii()];const ce=xe.slice();return z>=0&&z<ce.length&&ce.splice(z,1),Ks(ce.length?ce:[Ii()])}),nt(Math.max(0,z-1),0)},[nt,b]),Te=h.useCallback((z,xe)=>{z!==xe&&(b(ce=>{if(z<0||z>=ce.length)return ce;const pe=Ks(ce.slice()),[be]=pe.splice(z,1),Ae=Math.max(0,Math.min(xe,pe.length));return pe.splice(Ae,0,be),Ks(pe)}),nt(Math.max(0,Math.min(xe,f.length-1)),0))},[nt,f.length,b]),Be=h.useCallback(()=>{let z=0;b(xe=>{const ce=Ks(xe.slice()),be=`Step ${ce.filter(Ae=>Ae.type==="divider").length+1}`;return ce.push(Av(be)),z=ce.length-1,Ks(ce)}),setTimeout(()=>nt(z,2),0)},[nt,b]),dt=h.useCallback((z,xe)=>ce=>{const pe=ce.target.value;b(be=>{if(z<0||z>=be.length)return be;const Ae=be.slice(),ge=fi(Ae[z]);if(ge.type==="divider"&&xe!=="item")return be;let Re=pe;xe==="unit"&&(Re=Re.toUpperCase()),xe==="yield"&&(Re=Re.replace(/[^0-9.,]/g,"")),xe==="cost"&&(Re=Re.replace(/[^0-9.,-]/g,""));const _e=fi({...ge,[xe]:Re});if(xe==="qty"&&_e.type==="ingredient"){const tt=fn(Re);if(Number.isFinite(tt)&&Math.abs(tt)>Number.EPSILON&&_e.costPerUnit!=null){const Je=tt*_e.costPerUnit;_e.cost=Je.toFixed(2)}}return Ae[z]=_e,Ks(Ae)})},[b]),vt=h.useCallback((z,xe)=>ce=>{const pe=ce.target.value;if(!pe)return;const be=Number(pe.replace(/[^0-9.,-]/g,"").replace(/,/g,"."));Number.isFinite(be)&&b(Ae=>{if(z<0||z>=Ae.length)return Ae;const ge=Ae.slice(),Re=fi(ge[z]);if(Re.type==="divider")return Ae;if(xe==="yield"){const _e=Math.max(0,Math.min(999,be)),tt=_e%1===0?String(Math.round(_e)):_e.toFixed(2);ge[z]=fi({...Re,yield:tt})}else{const _e=Math.max(-999999,Math.min(999999,be)),tt=_e.toFixed(2),Je=fn(Re.qty),zt=Number.isFinite(Je)&&Math.abs(Je)>Number.EPSILON?_e/Je:Re.costPerUnit,Fs=typeof zt=="number"&&Number.isFinite(zt)?Number(zt.toFixed(6)):null;ge[z]=fi({...Re,cost:tt,costPerUnit:Fs})}return Ks(ge)})},[b]),lt=h.useMemo(()=>f.map(z=>{if(z.type==="divider")return null;const xe=z.item.trim();if(!xe)return null;const ce=z.prep.trim(),pe=Dx(xe,ce),be=n({item:xe,prep:ce||void 0,method:ce||void 0}),Ae=Ex(pe.percent,be?.percent!=null?be.percent:null),ge={basePercent:pe.percent,baseReason:pe.reason,baseRuleId:pe.ruleId,chefPercent:be?.percent??null,chefMethod:be?.method,chefNote:be?.note,chefRecordId:be?.recordId,combinedPercent:Ae.percent,source:Ae.source};return ge.basePercent==null&&ge.chefPercent==null?null:ge}),[f,n]),Zt=h.useRef(new Map);h.useEffect(()=>{b(z=>{let xe=!1;const ce=z.map((pe,be)=>{const Ae=fi(pe),ge=Ae.subId;if(Ae.type==="divider")return Zt.current.delete(ge),pe;const Re=lt[be],_e=Re?.combinedPercent??Re?.chefPercent??Re?.basePercent;if(_e==null)return Zt.current.delete(ge),pe;const tt=Ir(_e),Je=Ae.yield.trim(),zt=Zt.current.get(ge)??"";return Je&&Je!==tt&&Je!==zt?(Zt.current.delete(ge),pe):(Zt.current.set(ge,tt),Je===tt?pe:(xe=!0,fi({...Ae,yield:tt})))});return xe?Ks(ce):z})},[lt]);const bt=h.useMemo(()=>`prep-method-options-${Math.random().toString(36).slice(2)}`,[]),$t=h.useMemo(()=>{const z=Nt.map(ce=>ce.trim()).filter(Boolean),xe=Array.from(Me.technique??[]).map(ce=>String(ce).trim()).filter(Boolean);return Array.from(new Set([...z,...xe]))},[Nt,Me.technique]),{activeIngredientCount:js,averageIngredientYield:ui}=h.useMemo(()=>{let z=0,xe=0,ce=0;for(const pe of f){if(pe.type==="divider")continue;[pe.qty,pe.unit,pe.item,pe.prep,pe.cost].some(ge=>String(ge||"").trim().length>0)&&(z+=1);const Ae=Number(String(pe.yield||"").replace(/[^0-9.]/g,""));Number.isFinite(Ae)&&(xe+=Ae,ce+=1)}return{activeIngredientCount:z,averageIngredientYield:ce?xe/ce:null}},[f]),Ea=h.useMemo(()=>Le(),[f]),lx=5,cx=z=>{const xe=z.target,ce=Number(xe.dataset.row),pe=Number(xe.dataset.col);if(Number.isNaN(ce)||Number.isNaN(pe))return;const be=(Ae,ge)=>{const Re=document.querySelector(`input[data-row="${Ae}"][data-col="${ge}"]`);Re?.focus(),Re?.select()};if(z.key==="Tab"&&!z.shiftKey&&pe===lx&&ce===f.length-1){z.preventDefault(),hs(ce);return}z.key==="ArrowRight"&&(z.preventDefault(),be(ce,pe+1)),z.key==="ArrowLeft"&&(z.preventDefault(),be(ce,pe-1)),(z.key==="ArrowDown"||z.key==="Enter")&&(z.preventDefault(),be(ce+1,pe)),z.key==="ArrowUp"&&(z.preventDefault(),be(ce-1,pe))},vo=()=>{const z=ge=>{const Re=(ge||"").toUpperCase().trim();return Re.startsWith("TABLESPO")?"TBSP":Re.startsWith("TEASPO")||Re==="TSP"||Re==="TEASPOON"||Re==="TEASPOONS"?"TSP":Re==="TBSP"||Re==="TABLESPOON"||Re==="TABLESPOONS"?"TBSP":Re==="QT"||Re==="QTS"||Re==="QUART"||Re==="QUARTS"?"QTS":Re==="PT"?"PINT":Re==="LB"||Re==="POUND"||Re==="POUNDS"?"LBS":Re==="FLOZ"||Re==="FL OZ"?"FL OZ":Re==="GAL"?"GALLON":Re==="CUPS"?"CUP":Re},xe=f.map(ge=>{const Re=fi(ge),_e=fn(Re.qty),tt=z(Re.unit||"");if(!Number.isFinite(_e))return Re;if(["TSP","TBSP","FL OZ","CUP","PINT","QTS","QUART","QUARTS","GAL","GALLON"].includes(tt)){const zt=Dt(_e,tt);return{...Re,qty:String(zt.qty),unit:zt.unit}}if(tt==="OZ"||tt==="OUNCE"||tt==="OUNCES"){const zt=it(_e,tt);return{...Re,qty:String(zt.qty),unit:zt.unit}}return Re}),ce={OZ:{unit:"G",f:ge=>ge*28.3495},LBS:{unit:"KG",f:ge=>ge*.453592},QTS:{unit:"L",f:ge=>ge*.946353},TSP:{unit:"ML",f:ge=>ge*4.92892},TBSP:{unit:"ML",f:ge=>ge*14.7868},"FL OZ":{unit:"ML",f:ge=>ge*29.5735},CUP:{unit:"ML",f:ge=>ge*236.588},PINT:{unit:"ML",f:ge=>ge*473.176},GALLON:{unit:"L",f:ge=>ge*3.78541}},pe={G:{unit:"OZ",f:ge=>ge/28.3495},KG:{unit:"LBS",f:ge=>ge/.453592},L:{unit:"QTS",f:ge=>ge/.946353},ML:{unit:"TSP",f:ge=>ge/4.92892}},be=(ge,Re)=>{if(!ge)return ge;let _e=ge;return Re?_e=_e.replace(/(\d{2,3})\s*(?:°\s*)?(?:f|fahrenheit|degf|degrees\s*f)\b/gi,(tt,Je)=>{const zt=parseInt(Je,10);return`${Math.round((zt-32)*5/9)}°C`}):_e=_e.replace(/(\d{2,3})\s*(?:°\s*)?(?:c|celsius|degc|degrees\s*c)\b/gi,(tt,Je)=>{const zt=parseInt(Je,10);return`${Math.round(zt*9/5+32)}°F`}),_e},Ae=(ge,Re)=>{const _e=String(ge||"").trim();if(!_e)return _e;const tt=parseInt(_e.match(/(\d{2,3})/)?.[1]||"",10);if(!Number.isFinite(tt))return _e;if(Re){if(/(?:°?\s*F\b|fahrenheit)/i.test(_e)||/^(?:\d{2,3})$/.test(_e.replace(/[^0-9]/g,"")))return`${Math.round((tt-32)*5/9)}°C`}else if(/(?:°?\s*C\b|celsius)/i.test(_e)||/^(?:\d{2,3})$/.test(_e.replace(/[^0-9]/g,"")))return`${Math.round(tt*9/5+32)}°F`;return _e};if(ft==="Imperial"){if(b(Ks(xe.map(ge=>{const Re=fi(ge),_e=fn(Re.qty),tt=z(Re.unit),Je=ce[tt];return Number.isFinite(_e)&&Je?{...Re,qty:String(Number(Je.f(_e)).toFixed(2)),unit:Je.unit}:Re}))),["QTS","QT","QUART","QUARTS","GALLON","GAL","CUP","PINT","FL OZ","FLOZ","TSP","TBSP"].includes(Vt.toUpperCase())){const ge=ce[z(Vt)];ge&&(At(Number(ge.f(jt).toFixed(2))),Qt(ge.unit))}if(["QTS","QT","QUART","QUARTS","GALLON","GAL","CUP","PINT","FL OZ","FLOZ","TSP","TBSP"].includes(_s.toUpperCase())){const ge=ce[z(_s)];ge&&Ys(ge.unit)}Ss(ge=>Ae(ge,!0)),v(ge=>be(ge,!0)),xt("Metric")}else{if(b(Ks(f.map(ge=>{const Re=fi(ge),_e=fn(Re.qty),tt=z(Re.unit),Je=pe[tt];return Number.isFinite(_e)&&Je?{...Re,qty:String(Number(Je.f(_e)).toFixed(2)),unit:Je.unit}:Re}))),["L","ML","G","KG"].includes(Vt.toUpperCase())){const ge=pe[z(Vt)];ge&&(At(Number(ge.f(jt).toFixed(2))),Qt(ge.unit))}if(["L","ML","G","KG"].includes(_s.toUpperCase())){const ge=pe[z(_s)];ge&&Ys(ge.unit)}Ss(ge=>Ae(ge,!1)),v(ge=>be(ge,!1)),xt("Imperial")}},yo=()=>{const z=["USD","EUR","GBP","JPY"],xe={USD:1,EUR:.93,GBP:.82,JPY:155},ce=z.indexOf(Qe),pe=z[(ce+1)%z.length],be=xe[Qe],ge=xe[pe]/be;b(Ks(f.map(Re=>{const _e=fi(Re),tt=parseFloat(String(_e.cost).replace(/[$€£¥,\s]/g,""));return Number.isNaN(tt)?_e:{..._e,cost:(tt*ge).toFixed(2)}}))),ot(pe)},Do=()=>{const z=Number(prompt("Scale to how many portions?",String(Yt))||Yt);if(!z||z<=0)return;const xe=z/(Yt||1);b(Ks(f.map(ce=>{const pe=fi(ce);if(pe.type==="divider")return pe;const be=fn(pe.qty);if(!Number.isFinite(be))return pe;const Ae=be*xe,ge=$c(pe.cost),Re=Number.isFinite(ge)?Number(ge)*xe:null;return{...pe,qty:Ae.toFixed(2),cost:Re!=null?Re.toFixed(2):pe.cost}}))),Gt(z)};h.useEffect(()=>{d.current=vo},[vo]),h.useEffect(()=>{c.current=yo},[yo]),h.useEffect(()=>{r.current=Do},[Do]);const dx=()=>{const ce=[["qty","unit","item","prep","yield","cost"],...f.map(Ae=>[Ae.qty,Ae.unit,Ae.item,Ae.prep,Ae.yield,Ae.cost]),[""],["Directions"],...String(m||"").split(/\r?\n/).filter(Boolean).map((Ae,ge)=>[`${ge+1}. ${Ae}`])].map(Ae=>Ae.map(ge=>`"${String(ge).replace(/"/g,'""')}"`).join(",")).join(`
`),pe=new Blob([ce],{type:"text/csv"}),be=document.createElement("a");be.href=URL.createObjectURL(pe),be.download=`${(s||"recipe").replace(/[^a-z0-9-_]+/gi,"_")}.csv`,be.click(),URL.revokeObjectURL(be.href)},ux=()=>{const z=mt(),xe=`${location.origin}${location.pathname}#r=${encodeURIComponent(btoa(JSON.stringify(z)))}`,ce=s||"Recipe",pe=f.map(ge=>[ge.qty,ge.unit,ge.item,ge.prep].filter(Boolean).join(" ")).filter(Boolean).join(`
`),be=String(m||"").split(/\r?\n/).filter(Boolean).map((ge,Re)=>`${Re+1}. ${ge}`).join(`
`),Ae=`${ce}

Ingredients:
${pe||"-"}

Directions:
${be||"-"}

Link: ${xe}`;navigator.clipboard.writeText(Ae),alert(`${ce} copied to clipboard`)},mx=()=>{const z=(s||"").trim();if(!z)return R({title:i("recipe.validation.nameRequired","Add a recipe name"),description:i("recipe.validation.nameRequiredDetail","Enter a name before sending to Dish Assembly.")}),null;const xe=Ks(f),ce=xe.map(Je=>[Je.qty,Je.unit,Je.item,Je.prep].filter(Boolean).join(" ").trim()).filter(Boolean),pe=String(m||"").split(/\r?\n/).map(Je=>Je.trim()).filter(Boolean),be=It&&It.startsWith("data:")?[It]:void 0;let Ae="";try{Ae=localStorage.getItem("recipe:add:description")||""}catch{}const ge=wx({recipeName:z,ingredients:xe.filter(Je=>Je.type!=="divider").map(Je=>({qty:Je.qty,unit:Je.unit,item:Je.item,prep:Je.prep,yield:Je.yield,cost:Je.cost})),directions:m||"",selectedAllergens:q,selectedNationality:ke,selectedCourses:We,selectedRecipeType:st,selectedPrepMethod:Nt,selectedCookingEquipment:pt,image:It,yieldQty:jt,yieldUnit:Vt,portionCount:Yt,portionUnit:_s,currentCurrency:Qe,nutrition:Ts,fullRecipeCost:Le(),portionCost:Fe(),cookTime:Os,cookTemp:Xs,access:Ot}),Re=F.current!=null?se.find(Je=>Je.id===F.current)??null:null,tt={...Re&&Re.extra&&typeof Re.extra=="object"?{...Re.extra}:{},source:"manual",taxonomy:Me,chefNotes:Kt,serverNotes:ge};return F.current?B(F.current,{title:z,description:Ae,ingredients:ce,instructions:pe,imageDataUrls:be,extra:tt}):F.current=I({title:z,description:Ae,ingredients:ce,instructions:pe,imageDataUrls:be,tags:[],extra:tt}),ts({...mt(),ts:Date.now()}),F.current},px=()=>{const z=mx();if(z){try{sessionStorage.setItem("dishAssembly:incomingRecipeId",z)}catch{}ie("/?tab=dish-assembly")}};h.useEffect(()=>{if(ks.current)return;const z={TSP:1,TEASPOON:1,TEASPOONS:1,TBSP:3,TABLESPOON:3,TABLESPOONS:3,FLOZ:6,"FL OZ":6,OZFL:6,CUP:48,CUPS:48,PINT:96,PT:96,QUART:192,QT:192,QTS:192,QUARTS:192,GALLON:768,GAL:768,GALLONS:768},xe=pe=>(pe||"").replace(/\./g,"").replace(/\s+/g,"").toUpperCase();let ce=0;for(const pe of f){const be=fn(String(pe.qty||"")),Ae=z[xe(pe.unit||"")];if(Number.isFinite(be)&&Ae){const ge=Number(String(pe.yield||"").replace(/[^0-9.\-]/g,"")),Re=Number.isFinite(ge)&&ge>0?Math.max(0,Math.min(1,ge/100)):1;ce+=be*Ae*Re}}if(ce>0){const pe=[["GALLON",768],["QUART",192],["PINT",96],["CUP",48],["FLOZ",6],["TBSP",3],["TSP",1]];for(const[be,Ae]of pe)if(ce>=Ae){const ge=ce/Ae;At(Number(ge.toFixed(2))),Qt(be==="FLOZ"?"FL OZ":be==="QUART"?"QTS":be);break}}},[f]);function iu(z){if(!z)return null;const xe={"¼":"1/4","½":"1/2","¾":"3/4","⅓":"1/3","⅔":"2/3","⅛":"1/8","⅜":"3/8","⅝":"5/8","⅞":"7/8"};let ce=z.trim().replace(/[¼��¾⅓⅔⅛⅜⅝���]/g,Re=>xe[Re]||Re);ce=ce.replace(/^(?:\s*)\/(\d+)/,"1/$1"),ce=ce.replace(/(\d)(\s*)(\d\/\d)/,"$1 $3");const pe=ce.match(/^\s*([0-9]+(?:\.[0-9]+)?(?:\s+[0-9]+\/[0-9]+)?|[0-9]+\/[0-9]+)\s*([a-zA-Z\.]+)?\s*(.*)$/),be=new Set(["LBS","LB","OZ","TSP","TBSP","FL OZ","FLOZ","CUP","CUPS","PINT","PT","QTS","QT","QUART","QUARTS","GAL","GALLON","GALLONS","ML","L","G","KG","GRAM","GRAMS","LITER","LITERS","LITRES","EACH","EA"]),Ae=Re=>{const _e=(Re||"").replace(/\./g,"").toUpperCase();return _e?_e==="POUND"||_e==="POUNDS"||_e==="LB"?"LBS":_e==="OUNCE"||_e==="OUNCES"||_e==="OZS"?"OZ":_e==="TEASPOON"||_e==="TEASPOONS"?"TSP":_e==="TABLESPOON"||_e==="TABLESPOONS"?"TBSP":_e==="QUART"||_e==="QUARTS"||_e==="QT"?"QTS":_e==="FLOZ"?"FL OZ":_e==="CUPS"?"CUP":_e:"EACH"},ge=Re=>{let _e=Re.trim(),tt="";const Je=_e.indexOf(",");Je>=0&&(tt=_e.slice(Je+1).trim().toLowerCase(),_e=_e.slice(0,Je).trim());const zt=_e.match(/^(chopped|diced|minced|sliced|grated|crushed|pureed|melted|softened|cubed|julienned|shredded)\s+(.*)$/i);return zt&&(tt=tt||zt[1].toLowerCase(),_e=zt[2].trim()),{item:_e,prep:tt}};if(pe){const Re=pe[1],_e=pe[2]||"";let tt=pe[3]||"",Je=Re;const zt=Re.split(" ");if(zt.length===2&&/\d+\/\d+/.test(zt[1])){const[zn,Xi]=zt[1].split("/").map(Number);Je=String(Number(zt[0])+(Xi?zn/Xi:0))}else if(/^\d+\/\d+$/.test(Re)){const[zn,Xi]=Re.split("/").map(Number);Je=String(Xi?zn/Xi:Number(Re))}let Fs=Ae(_e);be.has(Fs)||(tt=`${_e} ${tt}`.trim(),Fs="EACH");const{item:xi,prep:ar}=ge(tt);return{qty:Je,unit:Fs||"EACH",item:xi,prep:ar}}if(/,/.test(ce)){const Re=ce.indexOf(","),_e=ce.slice(0,Re).trim(),tt=ce.slice(Re+1).trim().toLowerCase();return{item:_e,prep:tt}}return null}h.useEffect(()=>{let z=!1;const xe=f.map(ce=>{if(ce.qty&&ce.unit||!ce.item||!/^(\s*[0-9¼½¾⅓⅔⅛⅜⅝⅞]|\s*\/\d+|.*,)\b/i.test(String(ce.item)))return ce;const pe=iu(String(ce.item));if(!pe)return ce;const be={...ce,qty:pe.qty??ce.qty,unit:((pe.unit??ce.unit)||"").toUpperCase(),item:pe.item??ce.item,prep:pe.prep??ce.prep};return JSON.stringify(be)!==JSON.stringify(ce)&&(z=!0),be});z&&b(xe)},[f]);const fx=Cn.useMemo(()=>{const z={ML:1,L:1e3,TSP:4.92892,TBSP:14.7868,OZ:29.5735,"FL OZ":29.5735,CUP:240,PT:473.176,PINT:473.176,QTS:946.353,QT:946.353,GAL:3785.41,GALLON:3785.41};let xe=0;for(const ce of f){const pe=Number((ce.qty||"").toString().replace(/[^0-9.]/g,"")),be=(ce.unit||"").toUpperCase();if(!(!Number.isFinite(pe)||pe<=0)){if(z[be])xe+=pe*z[be];else if(be==="LBS"||be==="LB"||be==="G"||be==="GRAM"||be==="GRAMS"||be==="KG"){const Ae=be==="LBS"||be==="LB"?pe*453.592:be==="KG"?pe*1e3:pe;xe+=Ae}}}return xe},[f]),hx=z=>!z||z<=0?"—":z>=3785.41?`${(z/3785.41).toFixed(2)} GALLON`:z>=946.353?`${(z/946.353).toFixed(2)} QTS`:z>=473.176?`${(z/473.176).toFixed(2)} PINT`:z>=240?`${(z/240).toFixed(2)} CUP`:z>=29.5735?`${(z/29.5735).toFixed(1)} FL OZ`:`${Math.round(z)} ML`,bx=async()=>{try{es(!0),Qs(null);const z=f.filter(ge=>ge.qty||ge.item),xe=ge=>["TSP","TEASPOON","TEASPOONS","TBSP","TABLESPOON","TABLESPOONS","FLOZ","FL OZ","CUP","CUPS","PINT","PT","QUART","QUARTS","QT","QTS","GAL","GALLON","GALLONS","OZ","OUNCE","OUNCES","LB","LBS","POUND","POUNDS","G","GRAM","GRAMS","KG","ML","L","LITER","LITERS","LITRES","EACH","EA"].includes((ge||"").toUpperCase()),ce=z.map(ge=>{const Re=(ge.unit||"").toUpperCase();return xe(Re)?[ge.qty,ge.unit,ge.item,ge.prep].filter(Boolean).join(" "):[ge.item,ge.prep].filter(Boolean).join(", ")}),pe=z.map(ge=>{const Re=Number(String(ge.yield).replace(/[^0-9.\-]/g,""));return Number.isFinite(Re)?Re:null}),be=await fetch("/api/nutrition/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:s||"Recipe",ingr:ce,yields:pe,yieldQty:jt,yieldUnit:Vt,prepMethod:Nt.join(", ")})});if(!be.ok)throw new Error((await be.json().catch(()=>({})))?.error||`Request failed: ${be.status}`);const Ae=await be.json();Ei(Ae)}catch(z){Qs(z.message||"Unable to analyze nutrition")}finally{es(!1)}};return e.jsxDEV(tv,{children:e.jsxDEV("div",{className:"relative w-full min-h-screen transition-all duration-300 text-foreground","data-echo-key":"page:recipes:add",children:[e.jsxDEV("div",{className:"pt-4 h-full overflow-y-auto",children:e.jsxDEV("div",{className:"w-full px-3 sm:px-4 space-y-3 pb-5",children:[e.jsxDEV("div",{className:`flex flex-wrap items-center justify-between gap-3 rounded-2xl border px-4 py-3 ${M}`,"data-echo-key":"section:add:actions",children:[e.jsxDEV("div",{className:"max-w-xl space-y-1",children:[e.jsxDEV("span",{className:`text-[11px] font-semibold uppercase tracking-[0.4em] ${X}`,children:i("recipe.actions.finalizeHeading","Finalize workflow")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2701,columnNumber:17},void 0),e.jsxDEV("p",{className:`text-xs leading-relaxed ${he}`,children:i("recipe.actions.finalizeHint","Autosave is always on. Finalize stores this version and resets the workspace for your next dish.")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2706,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2700,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV("button",{type:"button",className:gt,onClick:En,disabled:ci||w==="saving",children:[w==="success"?e.jsxDEV(vn,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2721,columnNumber:21},void 0):w==="saving"?e.jsxDEV(Wh,{className:"h-4 w-4 animate-spin","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2723,columnNumber:21},void 0):e.jsxDEV(_a,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2725,columnNumber:21},void 0),w==="success"?i("recipe.actions.finalizedCTA","Saved"):w==="saving"?i("recipe.actions.finalizing","Saving..."):i("recipe.actions.finalize","Finalize & Clear")]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2714,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",className:_,onClick:Hs,disabled:ci,children:[e.jsxDEV(Nn,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2739,columnNumber:19},void 0),i("recipe.actions.clearForm","Clear Form")]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2733,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2713,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2696,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-start gap-2.5","data-echo-key":"section:add:basics",children:[e.jsxDEV("div",{className:`flex-1 min-w-0 border p-3 rounded-xl shadow-lg ${k?"border-cyan-400/30 bg-black/50 shadow-cyan-400/20":"border-gray-200 bg-white shadow-gray-200/50"} backdrop-blur-sm`,children:[e.jsxDEV("input",{type:"text",maxLength:50,value:s,onChange:z=>t(z.target.value),placeholder:i("recipe.fields.recipeName","RECIPE NAME"),className:`w-full text-lg font-semibold uppercase bg-transparent focus:outline-none transition-colors ${k?"text-cyan-400 placeholder-cyan-600":"text-gray-900 placeholder-gray-500"} focus:placeholder-gray-400`,"data-echo-key":"field:add:name"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2751,columnNumber:17},void 0),e.jsxDEV("textarea",{placeholder:i("recipe.fields.description","Description"),className:`mt-2 w-full border rounded-lg p-2.5 text-sm ${k?"bg-black/50 border-cyan-400/50 text-cyan-300":"bg-white border-gray-300"}`,rows:3,onChange:z=>localStorage.setItem("recipe:add:description",z.target.value),defaultValue:(()=>{try{return localStorage.getItem("recipe:add:description")||""}catch{return""}})(),"data-echo-key":"field:add:description"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2760,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("div",{className:`grid grid-cols-4 md:grid-cols-12 gap-1.5 text-[10px] sm:text-[11px] leading-tight ${k?"text-cyan-200":"text-slate-700"}`,children:[e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.cookTime","COOK TIME")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2789,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center justify-center gap-1",children:[e.jsxDEV("input",{value:Os,onChange:z=>Rs(z.target.value),placeholder:"2:30",className:`${Ce} w-full text-center`,"data-echo-key":"field:add:time"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2791,columnNumber:25},void 0),wt&&e.jsxDEV("span",{className:`text-[9px] font-medium uppercase ${Rt}`,children:wt},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2799,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2790,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2788,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.cookTemp","COOK TEMP")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2807,columnNumber:23},void 0),e.jsxDEV("input",{value:Xs,onChange:z=>{const xe=z.target.value.replace(/[^0-9]/g,"").slice(0,3),ce=ft==="Imperial"?"°F":"°C";Ss(xe?`${parseInt(xe,10)}${ce}`:"")},placeholder:"350°F",className:`${Ce} w-full text-center`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2808,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2806,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.prepTime","PREP TIME")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2821,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center justify-center gap-1",children:[e.jsxDEV("input",{value:Gs,onChange:z=>li(z.target.value),placeholder:"0:20",className:`${Ce} w-full text-center`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2823,columnNumber:25},void 0),ut&&e.jsxDEV("span",{className:`text-[9px] font-medium uppercase ${Rt}`,children:ut},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2830,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2822,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2820,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:"FULL RECIPE"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2838,columnNumber:23},void 0),e.jsxDEV("span",{className:kt,children:`${wi(Qe)}${Le().toFixed(2)}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2839,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2837,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.portionCost","PORTION COST")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2845,columnNumber:23},void 0),e.jsxDEV("span",{className:kt,children:`${wi(Qe)}${Fe().toFixed(2)}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2848,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2844,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-2",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.recipeType","RECIPE")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2854,columnNumber:23},void 0),e.jsxDEV("span",{className:kt,children:st.includes("Full Recipe")?i("recipe.labels.full","FULL"):st.includes("Sub Recipe")?i("recipe.labels.sub","SUB"):i("recipe.labels.unspecified","UNSPECIFIED")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2855,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2853,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col items-center gap-0.5 md:col-span-3",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.recipeAccess","RECIPE ACCESS")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2865,columnNumber:23},void 0),e.jsxDEV("span",{className:kt,children:Ot.length?Ot.join(", ").toUpperCase():i("recipe.labels.none","NONE")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2868,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2864,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-4 flex flex-col items-center gap-0.5 md:col-span-5",children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:He,children:"YIELD"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2877,columnNumber:25},void 0),e.jsxDEV("button",{type:"button",title:i("recipe.tools.yield","Yield Lab"),className:`rounded-lg border px-2 py-1 text-[9px] font-semibold uppercase tracking-[0.22em] ${k?"border-cyan-400/50 text-cyan-200":"border-slate-400 text-slate-700"}`,onClick:()=>Ne(!0),children:i("recipe.tools.yield","Yield Lab")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2878,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2876,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center justify-center gap-1",children:[e.jsxDEV("input",{type:"number",value:jt,onChange:z=>{ks.current=!0,At(Math.max(0,Number(z.target.value)))},className:`${Ce} w-16 flex-1 text-center`,"data-echo-key":"field:add:yield"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2892,columnNumber:25},void 0),e.jsxDEV("input",{value:Vt,onChange:z=>{ks.current=!0,Qt(z.target.value.toUpperCase())},className:`${Ce} w-14 flex-1 text-center uppercase`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2902,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2891,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2875,columnNumber:21},void 0),e.jsxDEV("div",{className:"col-span-4 flex flex-col items-center gap-0.5 md:col-span-4",children:[e.jsxDEV("span",{className:He,children:i("recipe.labels.portion","PORTION")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2914,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center justify-center gap-1",children:[e.jsxDEV("input",{type:"number",value:Yt,onChange:z=>Gt(Math.max(1,Number(z.target.value))),className:`${Ce} w-16 flex-1 text-center`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2916,columnNumber:25},void 0),e.jsxDEV("input",{value:_s,onChange:z=>Ys(z.target.value.toUpperCase()),className:`${Ce} w-14 flex-1 text-center uppercase`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2924,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2915,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2913,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2783,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2782,columnNumber:17},void 0),e.jsxDEV("div",{className:`mt-3 rounded-lg border p-2.5 ${k?"bg-blue-900/15 border-blue-400/30":"bg-blue-50 border-blue-200"}`,children:[e.jsxDEV("div",{className:`mb-1 text-sm font-semibold ${k?"text-blue-300":"text-blue-700"}`,children:i("recipe.labels.modifiers","Modifiers")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2940,columnNumber:19},void 0),e.jsxDEV("div",{className:`${k?"bg-blue-900/20 border-blue-400/30":"bg-blue-50 border-blue-200"} border rounded-md p-1 text-xs`,children:[(()=>{const z=new Set(Me.diets),xe=f.map(Re=>`${Re.qty} ${Re.unit} ${Re.item}`).join(" ").toLowerCase(),ce=/(beef|pork|chicken|lamb|fish|shrimp|gelatin)/,pe=[],be=(m||"").toLowerCase(),Ae=be.match(/(\d{2,3})\s*(?:°\s*)?(?:f|fahrenheit|degf)/i)||be.match(/(\d{2,3})\s*degrees?\s*f/i),ge=String(Xs||"").match(/\d{2,3}/)?.[0];return Ae&&ge&&Ae[1]!==ge&&pe.push(`Cook temp mismatch: directions ${Ae[1]}F vs field ${ge}F`),(z.has("vegetarian")||z.has("vegan"))&&ce.test(xe)&&pe.push("Selected diet conflicts with ingredients."),pe.length?e.jsxDEV("div",{className:"mb-1.5 text-red-600",children:pe.map((Re,_e)=>e.jsxDEV("div",{children:Re},_e,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2985,columnNumber:29},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2983,columnNumber:25},void 0):null})(),e.jsxDEV("div",{className:"grid grid-cols-8 gap-0.5",children:[Me.cuisine&&e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.cuisineLabel","Cuisine")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2993,columnNumber:27},void 0),e.jsxDEV("div",{children:Me.cuisine},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2996,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2992,columnNumber:25},void 0),Me.difficulty&&e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.difficultyLabel","Difficulty")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3001,columnNumber:27},void 0),e.jsxDEV("div",{children:Me.difficulty},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3004,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3e3,columnNumber:25},void 0),Me.mealPeriod&&e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.mealLabel","Meal")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3009,columnNumber:27},void 0),e.jsxDEV("div",{children:Me.mealPeriod},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3012,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3008,columnNumber:25},void 0),Me.serviceStyle&&e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.serviceLabel","Service")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3017,columnNumber:27},void 0),e.jsxDEV("div",{children:Me.serviceStyle},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3020,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3016,columnNumber:25},void 0),Me.course.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.courseLabel","Course")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3025,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.course].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3030,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3028,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3024,columnNumber:25},void 0),Me.pastry.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.pastryLabel","Pastry")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3042,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.pastry].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3047,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3045,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3041,columnNumber:25},void 0),Me.technique.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.techniqueLabel","Technique")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3059,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.technique].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3064,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3062,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3058,columnNumber:25},void 0),Me.components.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:i("recipe.labels.componentsLabel","Components")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3076,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.components].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3081,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3079,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3075,columnNumber:25},void 0),Me.equipment.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:"Equipment"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3093,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.equipment].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3096,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3094,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3092,columnNumber:25},void 0),Me.diets.length>0&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("div",{className:"font-semibold",children:"Diets"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3108,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-0.5",children:[...Me.diets].sort().map(z=>e.jsxDEV("span",{className:"rounded border px-1 py-0.5",children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3111,columnNumber:31},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3109,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3107,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2990,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2947,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2933,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2748,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex w-full flex-col gap-3 sm:w-72 lg:w-80 xl:flex-shrink-0",children:[e.jsxDEV("div",{className:`border rounded-xl flex flex-col justify-end shadow-lg backdrop-blur-sm ${k?"bg-black/50 border-cyan-400/30 shadow-[0_0_24px_rgba(34,211,238,0.25)]":"bg-white border-gray-200 shadow-gray-200/50"}`,style:{minHeight:"3rem"},children:e.jsxDEV("div",{className:"p-2.5 flex flex-col gap-1.5","data-echo-key":"section:add:allergens",children:[e.jsxDEV("div",{className:`font-semibold text-xs mb-1.5 ${k?"text-cyan-300":"text-gray-700"}`,children:i("recipe.labels.allergens","ALLERGENS")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3134,columnNumber:21},void 0),q.length?e.jsxDEV("div",{className:`grid grid-cols-6 gap-1 text-xs ${k?"text-cyan-300":"text-gray-700"}`,children:q.map(z=>e.jsxDEV("div",{children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3144,columnNumber:27},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3140,columnNumber:23},void 0):e.jsxDEV("div",{className:`text-xs italic ${k?"text-cyan-500":"text-gray-500"}`,children:i("recipe.labels.noAllergens","No allergens selected")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3148,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3130,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3126,columnNumber:17},void 0),e.jsxDEV("div",{className:`rounded-2xl border p-2 shadow-lg backdrop-blur-sm ${k?"bg-black/50 border-cyan-400/30 shadow-[0_0_18px_rgba(34,211,238,0.25)]":"bg-white border-gray-200 shadow-gray-200/40"}`,"data-echo-key":"section:add:photos",children:[e.jsxDEV("div",{className:`mb-1.5 text-xs font-semibold uppercase tracking-[0.22em] ${k?"text-cyan-300":"text-gray-700"}`,children:i("recipe.labels.photo","RECIPE IMAGE")},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3167,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("div",{className:"flex-shrink-0 w-44 h-44 md:w-52 md:h-52",children:It?e.jsxDEV("img",{src:It,alt:"Recipe",className:"h-full w-full rounded-md bg-white object-contain",style:{border:"0.5px solid #000",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)"}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3177,columnNumber:25},void 0):e.jsxDEV("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3 rounded-md border border-dashed border-gray-400/70 bg-gray-100 p-4",children:[e.jsxDEV("label",{className:"cursor-pointer text-xs text-gray-600","data-echo-key":"cta:add:upload",children:[e.jsxDEV("input",{type:"file",accept:"image/*",className:"hidden",onChange:async z=>{const xe=z.target.files?.[0];if(xe)try{const ce=new FileReader;ce.onload=()=>ls(String(ce.result)),ce.readAsDataURL(xe)}catch{}}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3193,columnNumber:29},void 0),"Upload Photo"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3189,columnNumber:27},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:"or"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3210,columnNumber:27},void 0),e.jsxDEV("button",{type:"button",onClick:()=>qe(!0),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",children:"Select from Gallery"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3211,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3188,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3175,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3174,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3159,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3125,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2744,columnNumber:13},void 0),e.jsxDEV("div",{className:"mt-1 space-y-3",children:[e.jsxDEV(kv,{isDarkMode:k,ingredients:f,currencySymbol:wi(Qe),totalCost:Ea,theoreticalVolumeLabel:hx(fx),activeCount:js,averageYield:ui,methodOptions:$t,methodOptionsId:bt,onFieldChange:dt,onFieldBlur:vt,onAddRow:hs,onRemoveRow:Ye,onReorderRow:Te,onGridKeyDown:cx,onAddSubRecipe:()=>K(!0),onAddDivider:Be},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3227,columnNumber:15},void 0),e.jsxDEV(u0,{ingredients:f,recipeTitle:s,servings:Yt||1},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3247,columnNumber:15},void 0),e.jsxDEV(Sv,{open:ue,onOpenChange:K,options:Mi,onConfirm:Ee,isDarkMode:k,formatCurrency:Se},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3253,columnNumber:15},void 0),e.jsxDEV(ss,{open:oe,onOpenChange:Ne,children:e.jsxDEV(is,{className:`w-full max-w-[min(960px,95vw)] border p-5 transition-shadow backdrop-blur-xl ${k?"border-cyan-400/40 bg-slate-950/92 shadow-[0_45px_140px_-25px_rgba(34,211,238,0.65)]":"border-slate-200/80 bg-white/97 shadow-[0_45px_140px_-25px_rgba(79,70,229,0.35)]"}`,children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Yield Lab"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3271,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3270,columnNumber:19},void 0),e.jsxDEV(Rv,{defaultInputQty:jt,defaultInputUnit:Vt,recipeName:s,defaultMethod:Nt[0]||"",methodOptions:$t,item:f.find(z=>z.type!=="divider"&&z.item.trim())?.item,onClose:()=>Ne(!1)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3273,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3263,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3262,columnNumber:15},void 0),e.jsxDEV(_v,{isOpen:L,onClose:()=>H(!1),isDarkMode:k,layout:ee,onLayoutChange:U,applyLayout:z=>$(z),defaultLayout:na},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3284,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3226,columnNumber:13},void 0),e.jsxDEV("div",{className:`rounded-2xl p-6 border ${k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:`font-bold text-xl ${k?"text-cyan-400":"text-gray-900"}`,children:"DIRECTIONS"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3299,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("input",{ref:Cs,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:async z=>{const xe=Array.from(z.target.files||[]);for(const ce of xe)try{const pe=await new Promise((Je,zt)=>{const Fs=new FileReader;Fs.onload=()=>{const xi=new Image;xi.onload=()=>Je(xi),xi.onerror=zt,xi.src=String(Fs.result)},Fs.onerror=zt,Fs.readAsDataURL(ce)}),be=Math.min(1,xs/(pe.width||xs)),Ae=Math.round((pe.width||xs)*be),ge=Math.round((pe.height||xs)*be),Re=document.createElement("canvas");Re.width=Ae,Re.height=ge;const _e=Re.getContext("2d");_e&&_e.drawImage(pe,0,0,Ae,ge);const tt=Re.toDataURL("image/jpeg",.85);v(Je=>(Je?Je+`
`:"")+`IMG:${tt}`)}catch{}z.target.value=""}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3305,columnNumber:19},void 0),e.jsxDEV("button",{title:"Insert Step Photo",className:`p-2 rounded-lg transition-all hover:bg-gray-100 ${k?"hover:bg-gray-700":""}`,onClick:()=>Cs.current?.click(),children:e.jsxDEV(Oa,{className:`w-5 h-5 ${k?"text-cyan-400":"text-gray-600"}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3359,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3354,columnNumber:19},void 0),e.jsxDEV("button",{title:"Bold",className:`p-2 rounded-lg transition-all hover:bg-gray-100 ${k?"hover:bg-gray-700":""}`,onClick:()=>document.execCommand("bold",!1),children:e.jsxDEV(wg,{className:`w-5 h-5 ${k?"text-cyan-400":"text-gray-600"}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3368,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3363,columnNumber:19},void 0),e.jsxDEV("button",{title:"Italic",className:`p-2 rounded-lg transition-all hover:bg-gray-100 ${k?"hover:bg-gray-700":""}`,onClick:()=>document.execCommand("italic",!1),children:e.jsxDEV(kg,{className:`w-5 h-5 ${k?"text-cyan-400":"text-gray-600"}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3377,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3372,columnNumber:19},void 0),e.jsxDEV("button",{title:"Underline",className:`p-2 rounded-lg transition-all hover:bg-gray-100 ${k?"hover:bg-gray-700":""}`,onClick:()=>document.execCommand("underline",!1),children:e.jsxDEV(Sg,{className:`w-5 h-5 ${k?"text-cyan-400":"text-gray-600"}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3386,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3381,columnNumber:19},void 0),e.jsxDEV("select",{className:`px-3 py-2 text-sm border rounded-lg ${k?"bg-black/50 border-cyan-400/50 text-cyan-300":"bg-white border-gray-200 text-gray-900"}`,value:T,onChange:z=>{y(z.target.value)},children:[e.jsxDEV("option",{children:"Arial"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3397,columnNumber:21},void 0),e.jsxDEV("option",{children:"Times"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3398,columnNumber:21},void 0),e.jsxDEV("option",{children:"Helvetica"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3399,columnNumber:21},void 0),e.jsxDEV("option",{children:"Georgia"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3400,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3390,columnNumber:19},void 0),e.jsxDEV("select",{className:`px-3 py-2 text-sm border rounded-lg ${k?"bg-black/50 border-cyan-400/50 text-cyan-300":"bg-white border-gray-200 text-gray-900"}`,value:E,onChange:z=>j(z.target.value),children:["12px","14px","16px","18px","20px"].map(z=>e.jsxDEV("option",{children:z},z,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3408,columnNumber:23},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3402,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3304,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3298,columnNumber:15},void 0),e.jsxDEV("div",{id:"directions-textarea",contentEditable:!0,suppressContentEditableWarning:!0,ref:us,spellCheck:!0,onDragOver:z=>{z.dataTransfer?.types?.includes("Files")&&z.preventDefault()},onDrop:async z=>{try{z.preventDefault();const xe=Array.from(z.dataTransfer?.files||[]).filter(ce=>ce.type.startsWith("image/"));for(const ce of xe){const pe=await new Promise((Je,zt)=>{const Fs=new FileReader;Fs.onload=()=>{const xi=new Image;xi.onload=()=>Je(xi),xi.onerror=zt,xi.src=String(Fs.result)},Fs.onerror=zt,Fs.readAsDataURL(ce)}),be=Math.min(1,xs/(pe.width||xs)),Ae=Math.round((pe.width||xs)*be),ge=Math.round((pe.height||xs)*be),Re=document.createElement("canvas");Re.width=Ae,Re.height=ge;const _e=Re.getContext("2d");_e&&_e.drawImage(pe,0,0,Ae,ge);const tt=Re.toDataURL("image/jpeg",.85);v(Je=>(Je?Je+`
`:"")+`IMG:${tt}`)}}catch{}},"data-echo-key":"field:add:steps",className:`prose prose-sm max-w-none w-full border p-3 rounded-xl shadow-sm transition-all focus:shadow-md focus:ring-2 resize-none min-h-[160px] overflow-y-auto ${k?"bg-black/50 border-cyan-400/50 text-cyan-300 focus:ring-cyan-400/30":"bg-white border-gray-200 text-gray-900 focus:ring-blue-400/30 focus:border-blue-400"}`,style:{lineHeight:"1.7",whiteSpace:"pre-wrap",fontFamily:T,fontSize:E},onKeyDown:z=>{const xe=us.current;if(!xe)return;const ce=window.getSelection();if(!(!ce||!ce.anchorNode)&&z.key==="Enter"&&!z.shiftKey){z.preventDefault();const pe=xe.textContent||"";let be=0;const Ae=ce.getRangeAt(0),ge=Ae.cloneRange();ge.selectNodeContents(xe),ge.setEnd(Ae.endContainer,Ae.endOffset),be=ge.toString().length;const _e=pe.slice(0,be),tt=pe.slice(be),Je=_e.lastIndexOf(`
`)+1,Fs=_e.slice(Je).match(/^\s*(\d+)[\.)]?\s*/),xi=Fs?String(Number(Fs[1])+1)+". ":"• ",ar=_e+`
`+xi+tt;xe.textContent=ar;const zn=be+1+xi.length,Xi=document.createRange(),nu=document.createTreeWalker(xe,NodeFilter.SHOW_TEXT);let Eo=0,rr=nu.nextNode();for(;rr;){const au=(rr.textContent||"").length;if(Eo+au>=zn){Xi.setStart(rr,zn-Eo),Xi.collapse(!0);break}Eo+=au,rr=nu.nextNode()}ce.removeAllRanges(),ce.addRange(Xi),v(ar)}},onInput:z=>{let xe=z.target.textContent||"";const ce={"fist ":"first ","teh ":"the ","mized ":"mixed ","choped ":"chopped ","whiskd ":"whisked "};let pe=xe;for(const[be,Ae]of Object.entries(ce))pe=pe.replace(new RegExp("(^|\\s)"+be,"gi"),ge=>ge.toLowerCase().endsWith(be)?ge.slice(0,-be.length)+Ae:ge);if(pe!==xe){z.target.textContent=pe;const be=window.getSelection();if(be){const Ae=document.createRange(),ge=us.current;Ae.selectNodeContents(ge),Ae.collapse(!1),be.removeAllRanges(),be.addRange(Ae)}}v(pe)}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3413,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3295,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("div",{className:"ml-auto",children:e.jsxDEV("button",{"data-echo-key":"cta:add:publish",onClick:()=>{const z=(s||"").trim()||"Untitled Recipe",xe=f.map(be=>[be.qty,be.unit,be.item,be.prep].filter(Boolean).join(" ").trim()).filter(Boolean),ce=String(m||"").split(/\r?\n/).map(be=>be.trim()).filter(Boolean),pe=It&&It.startsWith("data:")?[It]:void 0;F.current?B(F.current,{title:z,ingredients:xe,instructions:ce,imageDataUrls:pe,extra:{taxonomy:Me,published:!0}}):F.current=I({title:z,ingredients:xe,instructions:ce,imageDataUrls:pe,tags:[],extra:{source:"manual",taxonomy:Me,published:!0}}),alert(`Published ${z}`)},className:`px-3 py-2 text-sm rounded border ${k?"border-cyan-400/50 text-cyan-300":"border-gray-400 text-gray-800"}`,children:"Publish"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3558,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3557,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("button",{"data-echo-key":"cta:add:save",onClick:()=>{const z=(s||"").trim()||"Untitled Recipe",xe=f.map(be=>[be.qty,be.unit,be.item,be.prep].filter(Boolean).join(" ").trim()).filter(Boolean),ce=String(m||"").split(/\r?\n/).map(be=>be.trim()).filter(Boolean),pe=It&&It.startsWith("data:")?[It]:void 0;F.current?B(F.current,{title:z,ingredients:xe,instructions:ce,imageDataUrls:pe,extra:{taxonomy:Me}}):F.current=I({title:z,ingredients:xe,instructions:ce,imageDataUrls:pe,tags:[],extra:{source:"manual",taxonomy:Me}}),ts({...mt(),ts:Date.now()}),alert(`Saved ${z}`)},className:"flex items-center gap-2 text-gray-700 hover:text-black",children:[e.jsxDEV(_a,{className:"w-5 h-5"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3645,columnNumber:19},void 0),"Save"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3603,columnNumber:17},void 0),e.jsxDEV("button",{onClick:px,className:"flex items-center gap-2 text-primary hover:text-primary/80",children:[e.jsxDEV(Ah,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3652,columnNumber:19},void 0),i("recipe.actions.sendToDishAssembly","Send to Dish Assembly")]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3648,columnNumber:17},void 0),e.jsxDEV("button",{onClick:dx,className:"flex items-center gap-1 text-gray-700 hover:text-black",children:[e.jsxDEV(mu,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3662,columnNumber:19},void 0),"CSV"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3658,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>window.print(),className:"flex items-center gap-1 text-gray-700 hover:text-black",children:[e.jsxDEV(Ba,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3669,columnNumber:19},void 0),"Print"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3665,columnNumber:17},void 0),e.jsxDEV("button",{onClick:ux,className:"flex items-center gap-1 text-gray-700 hover:text-black",children:[e.jsxDEV(Bc,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3676,columnNumber:19},void 0),"Share"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3672,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{const z=s||"Recipe",xe=f.map(Ae=>[Ae.qty,Ae.unit,Ae.item,Ae.prep].filter(Boolean).join(" ")).filter(Boolean).join(`
`),ce=String(m||"").split(/\r?\n/).filter(Boolean).map((Ae,ge)=>`${ge+1}. ${Ae}`).join(`
`),pe=`${z}

Ingredients:
${xe||"-"}

Directions:
${ce||"-"}`,be=encodeURIComponent(pe);location.href=`sms:?&body=${be}`},className:"flex items-center gap-1 text-gray-700 hover:text-black",children:[e.jsxDEV(Bc,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3701,columnNumber:19},void 0),"SMS"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3679,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{const z=`<!DOCTYPE html><html><head><meta charset='utf-8'><title>${s||"Recipe"}</title></head><body><h1>${s||"Recipe"}</h1><h3>Ingredients</h3><ul>${f.map(pe=>`<li>${[pe.qty,pe.unit,pe.item,pe.prep].filter(Boolean).join(" ")}</li>`).join("")}</ul><h3>Directions</h3><pre style="white-space:pre-wrap;font-family:Arial, sans-serif;">${m}</pre></body></html>`,xe=new Blob([z],{type:"application/msword"}),ce=document.createElement("a");ce.href=URL.createObjectURL(xe),ce.download=`${(s||"recipe").replace(/[^a-z0-9-_]+/gi,"_")}.doc`,ce.click(),URL.revokeObjectURL(ce.href)},className:"flex items-center gap-1 text-gray-700 hover:text-black",children:[e.jsxDEV(mu,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3718,columnNumber:19},void 0),"Word"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3704,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3602,columnNumber:15},void 0),e.jsxDEV("button",{onClick:bx,disabled:Ws,className:`text-xs px-3 py-2 rounded ${k?"border border-cyan-400/50 hover:bg-cyan-900/20 text-cyan-300":"border border-gray-400 hover:bg-gray-100 text-gray-800"}`,children:Ws?"Analyzing…":"Generate Nutrition Label"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3722,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3556,columnNumber:13},void 0),e.jsxDEV("div",{className:`mt-3 rounded-2xl p-6 border ${k?"bg-gray-900/50 border-cyan-400/30":"bg-white/80 border-gray-200 shadow-sm"}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h3",{className:`font-bold text-xl ${k?"text-cyan-400":"text-gray-900"}`,children:"NUTRITION"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3735,columnNumber:17},void 0),di&&e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("button",{type:"button",onClick:()=>Ri(!0),className:`px-3 py-1 rounded-md border uppercase tracking-[0.18em] transition ${Zs?k?"border-cyan-400 bg-cyan-500/20 text-cyan-100":"border-blue-500 bg-blue-600 text-white":k?"border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:"Per Serving"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3743,columnNumber:23},void 0),e.jsxDEV("button",{type:"button",onClick:()=>Ri(!1),className:`px-3 py-1 rounded-md border uppercase tracking-[0.18em] transition ${Zs?k?"border-cyan-500/30 text-cyan-200 hover:bg-cyan-500/10":"border-slate-300 text-slate-700 hover:bg-slate-100":k?"border-cyan-400 bg-cyan-500/20 text-cyan-100":"border-blue-500 bg-blue-600 text-white"}`,children:"Whole Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3758,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3742,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"uppercase tracking-[0.28em] text-muted-foreground",children:"Servings"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3775,columnNumber:23},void 0),e.jsxDEV("div",{className:`flex items-center gap-1 rounded-lg border px-1 py-0.5 ${k?"border-cyan-500/40 bg-cyan-500/10":"border-slate-300 bg-white/70"}`,children:[e.jsxDEV("button",{type:"button",className:`flex h-6 w-6 items-center justify-center rounded-md transition ${k?"text-cyan-100 hover:bg-cyan-500/10":"text-slate-700 hover:bg-slate-200"}`,onClick:()=>Gt(Math.max(1,si-1)),"aria-label":"Decrease servings",children:e.jsxDEV(gd,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3795,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3785,columnNumber:25},void 0),e.jsxDEV("input",{type:"number",min:1,step:"0.25",value:si,onChange:z=>{const xe=Math.max(1,Number(z.target.value));Gt(xe)},className:`w-16 border-0 bg-transparent text-center text-sm font-semibold outline-none ${k?"text-cyan-100":"text-slate-800"}`},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3797,columnNumber:25},void 0),e.jsxDEV("button",{type:"button",className:`flex h-6 w-6 items-center justify-center rounded-md transition ${k?"text-cyan-100 hover:bg-cyan-500/10":"text-slate-700 hover:bg-slate-200"}`,onClick:()=>Gt(Math.max(1,si+1)),"aria-label":"Increase servings",children:e.jsxDEV(Js,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3820,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3810,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3778,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3774,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3741,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3734,columnNumber:15},void 0),!Ts&&!Ws&&!ti&&e.jsxDEV("div",{className:`${k?"text-cyan-400/70":"text-gray-500"}`,children:'Click "Generate Nutrition Label" to analyze this recipe.'},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3828,columnNumber:17},void 0),ti&&e.jsxDEV("div",{className:"text-red-500 text-sm",children:ti},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3835,columnNumber:17},void 0),di&&e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxDEV(dv,{data:di,servings:si,perServing:Zs},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3839,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-3 gap-3 text-sm self-start",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Yield:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3846,columnNumber:23},void 0)," ",jt," ",Vt]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3845,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Servings:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3850,columnNumber:23},void 0)," ",si]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3849,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Unit:"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3854,columnNumber:23},void 0)," ",_s]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3853,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3844,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3838,columnNumber:17},void 0),Kt&&e.jsxDEV("div",{className:`mt-4 rounded-xl border p-3 ${k?"border-gray-700 text-cyan-200":"border-gray-200 text-gray-800 bg-gradient-to-b from-white to-slate-50"}`,children:[e.jsxDEV("div",{className:"font-semibold mb-1",children:"Chef Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3863,columnNumber:19},void 0),e.jsxDEV("div",{className:"whitespace-pre-wrap text-sm",children:Kt},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3864,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3860,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3731,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2694,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2693,columnNumber:9},void 0),e.jsxDEV(nv,{mode:C,isCollapsed:g,onToggle:()=>N(!g),onOpenLabs:()=>H(!0),onCloseLabs:()=>H(!1),selectedAllergens:q,onAllergensChange:ve,selectedNationality:ke,onNationalityChange:De,selectedCourses:We,onCoursesChange:ze,selectedRecipeType:st,onRecipeTypeChange:_t,selectedPrepMethod:Nt,onPrepMethodChange:ye,selectedCookingEquipment:pt,onCookingEquipmentChange:ct,selectedRecipeAccess:Ot,onRecipeAccessChange:Es,image:It,onImageChange:ls,taxonomy:Me,onTaxonomyChange:Ct,isGlobal:qt,onGlobalChange:ws,onRecipeImport:async z=>{const xe=ce=>ce.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(z?.title&&t(xe(String(z.title)).toUpperCase()),z?.ingredients?.length){const ce=z.ingredients.map(pe=>{pe=xe(pe);const be={"¼":"1/4","½":"1/2","¾":"3/4","⅐":"1/7","⅑":"1/9","⅒":"1/10","⅓":"1/3","��":"2/3","⅕":"1/5","⅖":"2/5","⅗":"3/5","⅘":"4/5","⅙":"1/6","⅚":"5/6","⅛":"1/8","⅜":"3/8","⅝":"5/8","⅞":"7/8"};pe=pe.replace(/[���½¾⅐⅑��⅓⅔⅕⅖⅗���⅙⅚⅛⅜⅝⅞]/g,zt=>be[zt]||zt);const Ae=pe.match(/^\s*([0-9]+(?:\.[0-9]+)?(?:\s+[0-9]+\/[0-9]+)?)?\s*([a-zA-Z\.]+)?\s*(.*)$/),ge=Ae?.[1]?Ae[1]:"",Re=Ae?.[2]?Ae[2].toUpperCase():"",_e=(Ae?.[3]||"").trim(),[tt,...Je]=_e.split(",");return Ii({qty:ge,unit:Re,item:tt.trim(),prep:Je.join(",").trim(),yield:"",cost:""})});b(ce.length?ce:[Ii()])}if(z?.instructions){const ce=xe(String(z.instructions));v(ce),/recipe\s+follows|see\s+.+?\s+recipe/i.test(ce)&&fs(pe=>(pe?pe+`
`:"")+"Note: This recipe references a sub‑recipe (e.g., buttercream). Import or add the sub‑recipe and link it here.")}if(z?.image)try{const ce=String(z.image);fetch(ce).then(pe=>pe.blob()).then(async pe=>{const be=pe.type.includes("png")?"png":"jpg",Ae=`${(z.title||"cover").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-")}.${be}`;await W([new File([pe],Ae,{type:pe.type||"image/jpeg"})],{tags:["import","web"]});const ge=new FileReader;ge.onload=()=>ls(String(ge.result||ce)),ge.readAsDataURL(pe)}).catch(()=>ls(String(z.image)))}catch{ls(String(z.image))}if(z?.yield){const ce=String(z.yield),pe=ce.match(/([0-9]+(?:\.[0-9]+)?)/),be=ce.match(/(cups?|quarts?|pints?|gallons?|oz|ounces?|lb|lbs|servings?|qt|qts|gal)/i);pe&&be&&(At(Number(pe[1])),Qt(be[1].toUpperCase().replace("QUARTS","QTS").replace("QUART","QTS").replace("QT","QTS").replace("GAL","GALLON").replace("OUNCES","OZ").replace("OUNCE","OZ").replace("LBS","LBS").replace("LB","LBS").replace("CUPS","CUP")))}z?.cookTime&&Rs(String(z.cookTime)),z?.prepTime&&li(String(z.prepTime))}},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:3871,columnNumber:9},void 0),e.jsxDEV(av,{isOpen:zs,image:It,onClose:()=>ys(!1),onApply:z=>ls(z),isDarkMode:k},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4021,columnNumber:9},void 0),e.jsxDEV(m0,{open:we,onOpenChange:qe,onSelectImage:ls,isDarkMode:k},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4029,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2689,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:2688,columnNumber:5},void 0)};function _v({isOpen:s,onClose:t,isDarkMode:i,layout:n,onLayoutChange:a,applyLayout:o,defaultLayout:l}){const{experiments:r,focusExperimentId:d,searchQuery:c,backlog:f,insights:b,serializeState:D,hydrateState:u}=no(),p=typeof window<"u",[x,S]=h.useState([]),[m,v]=h.useState(""),[g,N]=h.useState(!1),[w,A]=h.useState("idle"),[I,B]=h.useState(""),[W,se]=h.useState(0),[ie,R]=h.useState(!1),[F,k]=h.useState(0),[Q,J]=h.useState(!1),O=h.useRef(null),me=i?"text-cyan-200/80":"text-slate-200/80",de="chalk-panel relative flex h-full min-h-0 flex-col overflow-hidden rounded-3xl border p-5 shadow-[inset_0_1px_0_rgba(15,23,42,0.08)] backdrop-blur-lg transition-colors duration-300",fe=i?"border-cyan-400/30 text-cyan-100/90":"border-slate-200/40 text-slate-100",ae=h.useMemo(()=>i?["bg-gradient-to-br from-slate-950/85 via-slate-900/65 to-teal-900/45 shadow-[0_0_42px_rgba(56,189,248,0.15)]","bg-gradient-to-br from-slate-950/80 via-cyan-900/55 to-slate-950/45 shadow-[0_0_40px_rgba(56,189,248,0.12)]","bg-gradient-to-br from-slate-950/78 via-slate-900/55 to-indigo-900/45 shadow-[0_0_38px_rgba(99,102,241,0.18)]"]:["bg-gradient-to-br from-slate-900/80 via-slate-800/55 to-teal-900/40 shadow-[0_0_36px_rgba(15,118,110,0.24)]","bg-gradient-to-br from-slate-900/75 via-teal-800/50 to-slate-900/40 shadow-[0_0_32px_rgba(34,197,94,0.18)]","bg-gradient-to-br from-slate-900/78 via-indigo-800/50 to-slate-900/40 shadow-[0_0_34px_rgba(79,70,229,0.18)]"],[i]),L="text-[11px] font-semibold uppercase tracking-[0.35em] text-cyan-100/80 drop-shadow-[0_0_6px_rgba(56,189,248,0.35)]",H=i?"group relative flex w-8 items-center justify-center rounded-full border border-cyan-400/30 bg-white/10 text-cyan-100 transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300/60 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950":"group relative flex w-8 items-center justify-center rounded-full border border-slate-600/40 bg-white/10 text-slate-100 transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-100/70 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900",le=h.useCallback(j=>{if(v(j),p)try{window.localStorage.setItem(Ao,j)}catch{}},[p]),ue=h.useCallback(j=>{if(p)try{window.localStorage.setItem(ju,JSON.stringify(j))}catch{}},[p]),K=h.useCallback(j=>{S(q=>{const te=j(q);return Object.is(te,q)||ue(te),te})},[ue]),C=h.useCallback(()=>{!p||!s||F>=5||k(j=>{if(j>=5)return j;const q=j+1;try{window.localStorage.setItem(Vu,String(q))}catch{}return J(!0),O.current&&window.clearTimeout(O.current),O.current=window.setTimeout(()=>{J(!1),O.current=null},3600),q})},[p,s,F]);h.useEffect(()=>{s||(J(!1),O.current&&(window.clearTimeout(O.current),O.current=null))},[s]),h.useEffect(()=>()=>{O.current&&window.clearTimeout(O.current)},[]),h.useEffect(()=>{if(!s||!p||g)return;let j=[];try{const ke=window.localStorage.getItem(ju);if(ke){const De=JSON.parse(ke);Array.isArray(De)&&(j=De.map(We=>Wv(We)).filter(We=>We!=null))}}catch{j=[]}if(!j.length){const ke=new Date().toISOString(),De=D(),We={id:"rd-preloaded",name:"Preloaded Lab",createdAt:ke,updatedAt:ke,layout:Ti(n),snapshot:De,vision:"Preserve the seeded experimentation environment with its original texture, flavor, and future-of-food scaffolding.",textureFocus:"Smoked custards, carbonated citrus pearls, velvet emulsions",flavorNotes:"Koji smoke layered with maple brine and electric citrus aromatics.",launchTarget:"Evergreen innovation baseline"};j=[We],ue(j);try{window.localStorage.setItem(Ao,We.id)}catch{}}const q=(()=>{try{return window.localStorage.getItem(Ao)}catch{return null}})(),te=j.some(ke=>ke.id===q)?q:j[0]?.id??"",Z=j.find(ke=>ke.id===te)??j[0];te&&le(te),S(j),Z&&(u(Z.snapshot),o(Ti(Z.layout)),B(Z.updatedAt));const ve=(()=>{try{return Number(window.localStorage.getItem(Vu)??"0")}catch{return 0}})();k(Number.isFinite(ve)?ve:0),N(!0)},[s,p,g,D,u,o,n,ue,le]);const P=h.useMemo(()=>x.find(j=>j.id===m)??null,[x,m]),ee=P?.name??"Untitled Lab",$=h.useMemo(()=>r.find(j=>j.id===d)??r[0],[r,d]),U=h.useMemo(()=>{if(!r.length)return[];const j=$?.id??d,q=r.filter(Z=>Z.id!==j);return(q.length?q:r).slice(0,4)},[r,$?.id,d]),G=h.useCallback(j=>{if(!g||!m)return null;const q=new Date().toISOString(),te=D();let Z=!1;return K(ve=>{let ke=!1;const De=ve.map(ze=>ze.id!==m?ze:(ke=!0,{...ze,snapshot:te,layout:Ti(n),updatedAt:q}));return ke?(Z=!0,[...De].sort((ze,st)=>new Date(st.updatedAt).getTime()-new Date(ze.updatedAt).getTime())):ve}),Z?(B(q),A("saved"),se(ve=>ve+1),C(),q):(j==="manual"&&A("idle"),null)},[g,m,D,K,n,C]),re=h.useCallback(j=>{if(!j||j===m)return;G("manual");const q=x.find(te=>te.id===j);q&&(u(q.snapshot),o(Ti(q.layout)),le(j),B(q.updatedAt),A("idle"),se(te=>te+1),J(!1))},[m,x,G,u,o,le]),V=h.useCallback(j=>{const q=new Date().toISOString(),te=Lv(),Z={experiments:[],focusExperimentId:"",searchQuery:""};u(Z),o(Ti(l));const ve={id:te,name:j.name.trim(),createdAt:q,updatedAt:q,layout:Ti(l),snapshot:Z,vision:j.vision,textureFocus:j.textureFocus,flavorNotes:j.flavorNotes,launchTarget:j.launchTarget};K(ke=>{const De=ke.filter(We=>We.id!==te);return[ve,...De]}),le(te),N(!0),B(q),A("saved"),se(ke=>ke+1),C(),R(!1)},[u,o,l,K,le,C]);if(h.useEffect(()=>{if(!s||!g||!m)return;A("saving");const j=window.setTimeout(()=>{G("auto")},Tv);return()=>window.clearTimeout(j)},[s,g,m,r,d,c,n,G]),h.useEffect(()=>{if(!p||w!=="saved")return;const j=window.setTimeout(()=>A("idle"),2400);return()=>window.clearTimeout(j)},[w,p]),!s||typeof document>"u")return null;const Y=m||"",T=x.length>0,y=()=>{G("manual"),t()},E=()=>{G("manual"),t()};return Af.createPortal(e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"fixed inset-0 z-[110] flex items-center justify-center px-4 py-6",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl",onClick:y},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4450,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 flex w-full max-w-[min(1240px,95vw)] flex-col",children:e.jsxDEV("div",{role:"dialog","aria-modal":"true","aria-labelledby":"rd-labs-title",className:`chalkboard-labs relative flex max-h-[90vh] min-h-[540px] w-full flex-col overflow-hidden rounded-3xl border bg-[#070d16]/95 text-slate-100 shadow-[0_40px_120px_-60px_rgba(15,23,42,0.65)] ${i?"border-cyan-500/25 text-cyan-100/90":"border-slate-700/35 text-slate-100"}`,children:e.jsxDEV("div",{className:"relative z-10 flex h-full min-h-0 flex-col",children:[e.jsxDEV("header",{className:"relative z-10 flex shrink-0 items-start justify-between gap-3 border-b border-white/10 bg-black/40 px-4 py-3 backdrop-blur-sm",children:[e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV("h2",{id:"rd-labs-title",className:"text-lg font-semibold uppercase tracking-[0.35em] text-cyan-100/90",children:"R&D Labs"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4465,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-[10px] uppercase tracking-[0.45em] text-cyan-100/70",children:[e.jsxDEV("span",{className:"chalk-breath",children:"Texture"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4472,columnNumber:21},this),e.jsxDEV("span",{className:"chalk-breath",children:"Flavor"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4473,columnNumber:21},this),e.jsxDEV("span",{className:"chalk-breath",children:"Future"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4474,columnNumber:21},this),e.jsxDEV("span",{className:"text-cyan-100/60",children:["Active project • ",ee]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4475,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4471,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4464,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap items-center justify-end gap-3 text-right",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("button",{type:"button",onClick:E,className:"inline-flex h-9 items-center gap-1.5 rounded-full border border-white/25 bg-white/10 px-3.5 text-[10px] font-semibold uppercase tracking-[0.35em] text-cyan-100 transition hover:border-white/40 hover:bg-white/15 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300/70",children:"Save and Close"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4482,columnNumber:21},this),Q?e.jsxDEV("div",{className:"pointer-events-none absolute right-full top-1/2 mr-3 -translate-y-1/2 rounded-lg border border-white/20 bg-white/10 px-2.5 py-1.5 text-[10px] font-semibold uppercase tracking-[0.3em] text-cyan-100 shadow-[0_12px_30px_-18px_rgba(56,189,248,0.65)] dark:border-cyan-500/30 dark:bg-cyan-500/10",children:"Saving will lock in the last state."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4490,columnNumber:23},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4481,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>R(!0),className:"inline-flex h-9 items-center gap-1.5 rounded-full border border-cyan-400/30 bg-cyan-500/20 px-3.5 text-[10px] font-semibold uppercase tracking-[0.35em] text-cyan-100 transition hover:border-cyan-300/50 hover:bg-cyan-500/30 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-cyan-300/60",children:"New Project"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4495,columnNumber:19},this),e.jsxDEV("div",{className:"w-[220px]",children:e.jsxDEV(cs,{value:Y,onValueChange:re,disabled:!T||!Y,children:[e.jsxDEV(rs,{className:"h-9 rounded-full border border-white/25 bg-white/10 text-[11px] font-semibold uppercase tracking-[0.28em] text-cyan-100 backdrop-blur transition hover:border-white/40 focus:ring-0 focus:ring-offset-0",children:e.jsxDEV(ds,{placeholder:"Reopen a saved session"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4509,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4508,columnNumber:23},this),e.jsxDEV(os,{className:"bg-slate-900/95 text-cyan-100 backdrop-blur-md",children:x.map(j=>e.jsxDEV(yt,{value:j.id,children:e.jsxDEV("div",{className:"flex flex-col gap-0.5",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:j.name},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4515,columnNumber:31},this),e.jsxDEV("span",{className:"text-xs opacity-70",children:Cu(j.updatedAt)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4516,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4514,columnNumber:29},this)},j.id,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4513,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4511,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4503,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4502,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4480,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4463,columnNumber:15},this),e.jsxDEV("div",{className:"relative z-10 flex flex-1 min-h-0 overflow-hidden",children:[e.jsxDEV("div",{className:"flex flex-1 min-h-0 flex-col gap-3 px-4 pb-4 pt-4",children:[e.jsxDEV("p",{className:`max-w-3xl text-sm leading-relaxed ${me}`,children:"Drag the dividers to resize each workspace. Use these surfaces for experiments, documentation, and automation flows. Layout widths persist so your lab reopens exactly how you left it."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4529,columnNumber:19},this),e.jsxDEV(Nx,{direction:"horizontal",onLayout:a,className:"relative z-10 flex h-full min-h-0 items-stretch gap-3",children:[e.jsxDEV(wo,{minSize:20,order:1,defaultSize:n[0],className:"flex min-h-0",children:e.jsxDEV("section",{"data-chalk-label":"INSPIRE",className:`${de} ${fe} ${ae[0]}`,children:[e.jsxDEV("header",{className:L,children:"Discovery runway"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4543,columnNumber:25},this),e.jsxDEV("p",{className:`mt-2 text-xs leading-relaxed ${me}`,children:"Stage inspiration, competitive research, and sourcing notes here."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4544,columnNumber:25},this),e.jsxDEV("div",{className:"mt-3 flex-1 min-h-0 overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-2.5 shadow-inner shadow-cyan-500/5",children:e.jsxDEV(fv,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4548,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4547,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4539,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4538,columnNumber:21},this),e.jsxDEV(ru,{className:H,children:e.jsxDEV("span",{className:"pointer-events-none h-10 w-0.5 rounded-full bg-white/60 opacity-80 transition group-hover:bg-cyan-200/80"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4553,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4552,columnNumber:21},this),e.jsxDEV(wo,{minSize:26,order:2,defaultSize:n[1],className:"flex min-h-0",children:e.jsxDEV("section",{"data-chalk-label":"FORMULATE",className:`${de} ${fe} ${ae[1]}`,children:[e.jsxDEV("header",{className:L,children:"Workbench"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4560,columnNumber:25},this),e.jsxDEV("p",{className:`mt-2 text-xs leading-relaxed ${me}`,children:"Reserve this lane for formulations, live tests, or shared prototypes."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4561,columnNumber:25},this),e.jsxDEV("div",{className:"mt-3 flex-1 min-h-0 overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-2.5 shadow-inner shadow-cyan-500/5",children:e.jsxDEV(bv,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4565,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4564,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4556,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4555,columnNumber:21},this),e.jsxDEV(ru,{className:H,children:e.jsxDEV("span",{className:"pointer-events-none h-10 w-0.5 rounded-full bg-white/60 opacity-80 transition group-hover:bg-cyan-200/80"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4570,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4569,columnNumber:21},this),e.jsxDEV(wo,{minSize:20,order:3,defaultSize:n[2],className:"flex min-h-0",children:e.jsxDEV("section",{"data-chalk-label":"SYNTHESIZE",className:`${de} ${fe} ${ae[2]}`,children:[e.jsxDEV("header",{className:L,children:"Insight stack"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4577,columnNumber:25},this),e.jsxDEV("p",{className:`mt-2 text-xs leading-relaxed ${me}`,children:"Pin KPIs, AI summaries, or vendor comparisons for rapid decisions."},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4578,columnNumber:25},this),e.jsxDEV("div",{className:"mt-3 flex-1 min-h-0 overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-2.5 shadow-inner shadow-cyan-500/5",children:e.jsxDEV(Nv,{},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4582,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4581,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4573,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4572,columnNumber:21},this)]},n.join("-"),!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4532,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4528,columnNumber:17},this),e.jsxDEV(xv,{isDarkMode:i,projectName:ee,createdAt:P?.createdAt??I,updatedAt:P?.updatedAt??I,vision:P?.vision,textureFocus:P?.textureFocus,flavorNotes:P?.flavorNotes,launchTarget:P?.launchTarget,focusExperiment:$,experimentsCount:r.length,discoveryQueue:U,backlog:f,insights:b},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4588,columnNumber:17},this),e.jsxDEV("div",{className:"pointer-events-none absolute bottom-4 right-4 flex flex-col items-end gap-1.5",children:[w==="saving"?e.jsxDEV("div",{className:"flex items-center gap-1.5 rounded-full border border-cyan-400/30 bg-cyan-500/10 px-3 py-1.5 text-[11px] font-medium uppercase tracking-[0.3em] text-cyan-100 shadow-[0_18px_48px_-36px_rgba(56,189,248,0.55)]",children:[e.jsxDEV("span",{className:"h-2 w-2 animate-pulse rounded-full bg-cyan-300"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4606,columnNumber:23},this),"Saving ",ee,"…"]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4605,columnNumber:21},this):null,w==="saved"&&I?e.jsxDEV("div",{className:"flex items-center gap-1.5 rounded-full border border-cyan-400/40 bg-cyan-500/15 px-3 py-1.5 text-[11px] font-semibold uppercase tracking-[0.3em] text-cyan-100 shadow-[0_25px_60px_-40px_rgba(56,189,248,0.75)] animate-rd-save-pulse",children:[e.jsxDEV("span",{className:"h-2 w-2 rounded-full bg-emerald-300"},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4615,columnNumber:23},this),"(",ee,") Last saved ",Cu(I)]},W,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4611,columnNumber:21},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4603,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4527,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4462,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4452,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4451,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4449,columnNumber:7},this),e.jsxDEV(gv,{open:ie,onOpenChange:R,onSubmit:V},void 0,!1,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4625,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/RecipeInputPage.tsx",lineNumber:4448,columnNumber:5},this),document.body)}function Ov(){return e.jsxDEV(Mv,{},void 0,!1,{fileName:"/app/code/client/pages/sections/AddRecipe.tsx",lineNumber:5,columnNumber:10},this)}const Ki=Kx,Yi=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(oh,{ref:i,className:je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/tabs.tsx",lineNumber:12,columnNumber:3},void 0));Yi.displayName=oh.displayName;const bs=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(lh,{ref:i,className:je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/tabs.tsx",lineNumber:27,columnNumber:3},void 0));bs.displayName=lh.displayName;const St=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(rh,{ref:i,className:je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/tabs.tsx",lineNumber:42,columnNumber:3},void 0));St.displayName=rh.displayName;const Fv=[{value:"inventory",label:"Inventory & Supplies",description:"Supplier catalogs, stock health, purchase orders, and conversions in one workspace."},{value:"nutrition",label:"Nutrition/Allergens",description:"Track dietary flags, allergen callouts, menu compliance, and guest-facing disclosures."},{value:"haccp",label:"HACCP/Compliance",description:"Smart logs, checklists, and automated monitoring for HACCP plans and food safety audits."}],mr=[{slug:"orgs",label:"Multi‑tenant Orgs/SSO",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:32,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Organizations with roles (Owner, Admin, Editor, Viewer)"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:34,columnNumber:11},void 0),e.jsxDEV("li",{children:"Invite by email, role-based access control, audit trail"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:35,columnNumber:11},void 0),e.jsxDEV("li",{children:"SSO via OAuth2/OIDC (Google, Microsoft, Okta)"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:36,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:33,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:38,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Use Supabase Auth or Auth.js; RBAC tables (orgs, memberships, roles)"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:40,columnNumber:11},void 0),e.jsxDEV("li",{children:"Row-level security by org_id on all records"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:43,columnNumber:11},void 0),e.jsxDEV("li",{children:"Sentry for security/event logging"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:44,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:39,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:31,columnNumber:7},void 0)},{slug:"workspaces",label:"Team Workspaces / Sync",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:54,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Shared collections, real-time presence, comments"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:56,columnNumber:11},void 0),e.jsxDEV("li",{children:"Cloud sync with optimistic updates and conflict resolution"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:57,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:55,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:59,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Supabase Realtime or Convex for live sync"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:61,columnNumber:11},void 0),e.jsxDEV("li",{children:"Activity feed with per-entity history"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:62,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:60,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:53,columnNumber:7},void 0)},{slug:"pricing",label:"Pricing/COGS/Menu",body:e.jsxDEV("div",{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-100/80 p-3 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[e.jsxDEV("p",{className:"font-semibold",children:"Pricing intelligence is live"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:73,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-xs text-emerald-800/80 dark:text-emerald-100/80",children:"Ingredient costs, yield factors, recipe COGS, and menu engineering views are wired into the Recipe Search and Menu Collection workflows."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:74,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:72,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:"Shipped highlights"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:79,columnNumber:11},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Normalized ingredient catalog with supplier price history and automatic yield adjustments."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:81,columnNumber:13},void 0),e.jsxDEV("li",{children:"Recipe cards surface contribution margin with menu engineering quadrants (stars, plowhorses, puzzles, dogs)."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV("li",{children:"Dashboard widgets surface margin alerts and pricing recommendations."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:83,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:78,columnNumber:9},void 0),e.jsxDEV("div",{className:"rounded-lg border bg-muted/40 p-3 dark:bg-zinc-800/60",children:[e.jsxDEV("p",{className:"font-medium",children:"Next iteration"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:87,columnNumber:11},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Outlet-specific overrides for costs and target margins."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:89,columnNumber:13},void 0),e.jsxDEV("li",{children:"Automated buying recommendations tied to vendor delivery calendars."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:90,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:88,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:86,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:71,columnNumber:7},void 0)},{slug:"approvals",label:"Approvals/Versioning",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:101,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Draft → Review → Approved workflow with comments"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:103,columnNumber:11},void 0),e.jsxDEV("li",{children:"Version snapshots, diffs, rollbacks"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:104,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:102,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:106,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Immutable version table; reviewer assignments"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:108,columnNumber:11},void 0),e.jsxDEV("li",{children:"Notifications via email/Zapier"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:109,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:107,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:100,columnNumber:7},void 0)},{slug:"api",label:"API/Webhooks/Zapier",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:119,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Public REST/GraphQL, API keys per org"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:121,columnNumber:11},void 0),e.jsxDEV("li",{children:"Outgoing webhooks and Zapier actions"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:120,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:124,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Rate limits, audit logs, HMAC signatures"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:126,columnNumber:11},void 0),e.jsxDEV("li",{children:"Docs portal with examples"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:127,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:125,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:118,columnNumber:7},void 0)},{slug:"mobile",label:"Mobile/Offline",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:137,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"PWA with home-screen install"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV("li",{children:"Offline edits and background sync"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:138,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:142,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Service worker, IndexedDB cache, conflict resolution"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("li",{children:"Responsive pages for phones/tablets"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:145,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:143,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:136,columnNumber:7},void 0)},{slug:"multi",label:"Multi-location",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:155,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Sites/locations with overrides and rollouts"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:157,columnNumber:11},void 0),e.jsxDEV("li",{children:"Centralized content with local variations"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:158,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:156,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:160,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Inheritance model by location_id"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:162,columnNumber:11},void 0),e.jsxDEV("li",{children:"Release waves and publish windows"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:163,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:161,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:154,columnNumber:7},void 0)},{slug:"billing",label:"Billing/Subscriptions",body:e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{className:"font-medium",children:"What it includes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:173,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Plans, seats, meter-based usage, invoices"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:175,columnNumber:11},void 0),e.jsxDEV("li",{children:"Trials, coupons, dunning and proration"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:174,columnNumber:9},void 0),e.jsxDEV("p",{className:"font-medium",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:178,columnNumber:9},void 0),e.jsxDEV("ul",{className:"list-disc pl-5",children:[e.jsxDEV("li",{children:"Stripe Billing + Customer Portal"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:180,columnNumber:11},void 0),e.jsxDEV("li",{children:"Org-scoped entitlements checked server-side"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:181,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:179,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:172,columnNumber:7},void 0)}];function Bv(){const{t:s}=Vs();return e.jsxDEV("div",{className:"container mx-auto space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"rounded-xl border bg-white/95 p-3 ring-1 ring-black/5 dark:bg-zinc-900 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"LUCCCA SaaS Roadmap"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:193,columnNumber:9},this),e.jsxDEV("div",{className:"text-base font-semibold",children:s("menu.capabilities")},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:194,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:192,columnNumber:7},this),e.jsxDEV("div",{className:"rounded-xl border bg-white/95 p-4 ring-1 ring-black/5 dark:bg-zinc-900 dark:ring-sky-500/15",children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:s("menu.operationalSuites")},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"These modules are fully coded and wired into the production experience. Jump into any workspace below."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Fv.map(t=>e.jsxDEV(xx,{to:`/?tab=${t.value}`,className:"rounded-lg border bg-white/80 p-4 text-left shadow-sm transition hover:-translate-y-0.5 hover:bg-white hover:shadow-md dark:bg-zinc-800/80",children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:t.label},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV("p",{className:"mt-1 text-xs text-muted-foreground",children:t.description},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:214,columnNumber:17},this)]},t.value,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:208,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:206,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:198,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:197,columnNumber:7},this),mr.length?e.jsxDEV("div",{className:"rounded-xl border bg-white/95 p-4 ring-1 ring-black/5 dark:bg-zinc-900 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"mb-4 space-y-1",children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:"Remaining roadmap"},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:226,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"High-level milestones that remain in discovery or backlog planning."},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:227,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:225,columnNumber:11},this),e.jsxDEV(Ki,{defaultValue:mr[0].slug,className:"w-full",children:[e.jsxDEV(Yi,{className:"flex flex-wrap gap-1 rounded-lg bg-muted p-1",children:mr.map(t=>e.jsxDEV(bs,{value:t.slug,className:"text-xs",children:t.label},t.slug,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:235,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:233,columnNumber:13},this),mr.map(t=>e.jsxDEV(St,{value:t.slug,className:"mt-3",children:e.jsxDEV("div",{className:"rounded-xl border bg-white/95 p-4 ring-1 ring-black/5 dark:bg-zinc-900 dark:ring-sky-500/15",children:t.body},void 0,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:250,columnNumber:17},this)},t.slug,!1,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:245,columnNumber:15},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:232,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:224,columnNumber:9},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/SaasRoadmap.tsx",lineNumber:191,columnNumber:5},this)}const mb=["Milk","Eggs","Fish","Shellfish","Tree Nuts","Peanuts","Wheat","Soy","Sesame","Gluten","Sulfites","Mustard"],Uv={vegan:{allow:["Vegetables","Legumes","Whole Grains","Seeds","Fruits"],avoid:["Meat","Fish","Eggs","Dairy","Honey","Gelatin"]},vegetarian:{allow:["Vegetables","Legumes","Dairy","Eggs","Whole Grains"],avoid:["Meat","Fish","Shellfish"]},keto:{allow:["Meat","Fish","Eggs","Cheese","Low-carb Vegetables"],avoid:["Sugar","Grains","High-carb Fruit","Starches"]},halal:{allow:["Halal Certified Meat","Seafood","Vegetables","Legumes"],avoid:["Pork","Alcohol","Non-Halal Meat","Blood"]},kosher:{allow:["Kosher Meat","Fish with Fins and Scales","Vegetables","Dairy (with rules)","Grains"],avoid:["Pork","Shellfish","Meat with Dairy","Non-Kosher Slaughter"]}};function Tn(s="id"){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`${s}-${crypto.randomUUID()}`:`${s}-${Math.random().toString(36).slice(2)}-${Date.now().toString(36)}`}function Bt(s,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:2}).format(s)}function $v(s,t){return!Number.isFinite(s)||!Number.isFinite(t)||t===0?"0%":`${Math.round(s/t*100)}%`}const pb=[{id:"sup-blue-farms",name:"Blue Farms Dairy",contact:"support@bluefarmsdairy.com · +1 404-555-2211",leadTimeDays:2,reliability:.96,certifications:["USDA Organic","SQF Level 2"],allergensHandled:["Milk"],notes:"Refrigerated deliveries by 8am. Requires dock seal."},{id:"sup-green-market",name:"Green Market Produce Co",contact:"orders@greenmarket.co · +1 212-555-8710",leadTimeDays:1,reliability:.91,certifications:["GFSI","PrimusGFS"],allergensHandled:["Tree Nuts","Peanuts"],notes:"Allocates allergens on separate pallets. Shared allergen manifest available."},{id:"sup-coastal-seafood",name:"Coastal Seafood Imports",contact:"logistics@coastalseafood.io · +1 305-555-0345",leadTimeDays:3,reliability:.88,certifications:["MSC Chain of Custody","HACCP"],allergensHandled:["Fish","Shellfish"],notes:"Requires temp probe on receipt. FedEx Freight tracking shared automatically."}],fb=[{id:"item-butter-eu",sku:"BF-DAIRY-25KG",name:"European Butter 82% Fat",supplierId:"sup-blue-farms",category:"Dairy",storageArea:"Cooler • Shelf 2",baseUnit:"kg",units:{kg:{display:"Kilogram",toBase:1},case:{display:"Case (10 x 2.5kg)",toBase:25},lb:{display:"Pound",toBase:.453592}},costPerBase:5.15,currency:"USD",parLevelBase:60,onHandBase:42,safetyStockBase:20,allergens:["Milk"],critical:!0,lastAuditISO:new Date().toISOString()},{id:"item-pistachio",sku:"GM-NUT-11LB",name:"Shelled Pistachios",supplierId:"sup-green-market",category:"Dry Storage",storageArea:"Dry • Rack B3",baseUnit:"kg",units:{kg:{display:"Kilogram",toBase:1},lb:{display:"Pound",toBase:.453592},case:{display:"Case (5 kg)",toBase:5}},costPerBase:14.9,currency:"USD",parLevelBase:25,onHandBase:12,safetyStockBase:8,allergens:["Tree Nuts"],critical:!0,lastAuditISO:new Date(Date.now()-120*3600*1e3).toISOString()},{id:"item-cream-38",sku:"BF-CREAM-2L",name:"Heavy Cream 38%",supplierId:"sup-blue-farms",category:"Dairy",storageArea:"Cooler • Shelf 1",baseUnit:"l",units:{l:{display:"Litre",toBase:1},case:{display:"Case (12 x 1L)",toBase:12},ml:{display:"Millilitre",toBase:.001}},costPerBase:3.45,currency:"USD",parLevelBase:80,onHandBase:66,safetyStockBase:40,allergens:["Milk"],critical:!0,lastAuditISO:new Date(Date.now()-48*3600*1e3).toISOString()},{id:"item-salmon-atl",sku:"CS-ATL-TRIM",name:"Atlantic Salmon Portions",supplierId:"sup-coastal-seafood",category:"Seafood",storageArea:"Freezer • Rack F1",baseUnit:"kg",units:{kg:{display:"Kilogram",toBase:1},case:{display:"Case (20 x 200g)",toBase:4},portion:{display:"Portion 200g",toBase:.2}},costPerBase:18.75,currency:"USD",parLevelBase:35,onHandBase:18,safetyStockBase:12,allergens:["Fish"],critical:!1,lastAuditISO:new Date(Date.now()-216*3600*1e3).toISOString()}],hb=[{id:"po-2403",supplierId:"sup-green-market",status:"confirmed",expectedDate:new Date(Date.now()+48*3600*1e3).toISOString(),createdAt:new Date().toISOString(),submittedBy:"William Morrison",lines:[{id:"pol-1",itemId:"item-pistachio",qty:3,unit:"case"},{id:"pol-2",itemId:"item-butter-eu",qty:2,unit:"case"}]},{id:"po-2404",supplierId:"sup-blue-farms",status:"draft",expectedDate:new Date(Date.now()+96*3600*1e3).toISOString(),createdAt:new Date().toISOString(),submittedBy:"William Morrison",notes:"Hold shipment until cream tank sanitized (ticket QA-18).",lines:[{id:"pol-3",itemId:"item-cream-38",qty:4,unit:"case"}]}],zv={draft:"Draft",submitted:"Submitted",confirmed:"Confirmed",in_transit:"In transit",received:"Received"},za=["draft","submitted","confirmed","in_transit","received"],Gv="accc7891edf04665961a321335d9540b",Hv="Purchasing_Receiving",qv="https://cdn.builder.io/api/v3/content";function To(s){return Array.isArray(s)?s:s?typeof s=="object"?Object.values(s):[s]:[]}function Bs(s){if(typeof s=="string")return s.trim();if(typeof s=="number")return String(s);if(typeof s=="boolean")return s?"true":"false";if(Array.isArray(s))return s.map(t=>Bs(t)).filter(t=>t.length>0).join(", ");if(s&&typeof s=="object"){const t=s,i=["text","value","label","name","title"];for(const n of i)if(typeof t[n]=="string"&&t[n])return Bs(t[n])}return""}function sn(s,t){if(typeof s=="number"&&Number.isFinite(s))return s;if(typeof s=="string"){const i=s.replace(/[^0-9.,-]+/g,"").replace(/,/g,"."),n=Number(i);if(Number.isFinite(n))return n}if(typeof s=="boolean")return s?1:0;if(Array.isArray(s))for(const i of s){const n=sn(i,Number.NaN);if(Number.isFinite(n))return n}return t}function Hc(s,t,i){return Math.min(Math.max(s,t),i)}function Kv(s){const t=sn(s,NaN);return Number.isFinite(t)?t>1.5?Hc(t/100,0,1):Hc(t,0,1):.9}function qc(s){const t=new Set;if(Array.isArray(s))for(const i of s){const n=Bs(i);if(n)t.add(n);else if(i&&typeof i=="object"&&typeof i.name=="string"){const a=Bs(i.name);a&&t.add(a)}}else{const i=Bs(s);i&&t.add(i)}return Array.from(t)}function qr(s){return s.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"entry"}function Rd(s,t){let i=s,n=1;for(;t.has(i);)i=`${s}-${n++}`;return t.add(i),i}function Us(s){if(typeof s=="string"&&s.trim())return s.trim();if(typeof s=="number")return String(s);if(!s||typeof s!="object")return null;const t=s,i=["id","code","sku","key","value","name","ref"];for(const a of i){const o=t[a];if(typeof o=="string"&&o.trim())return o.trim()}const n=t.where;if(n&&typeof n=="object")for(const a of Object.values(n)){const o=Us(a);if(o)return o}if(Array.isArray(t.ids))for(const a of t.ids){const o=Us(a);if(o)return o}return null}function Vi(s,t,i){const n=Us(t);if(!n)return;const a=n.toLowerCase();s.has(a)||s.set(a,i)}function Kc(s,t){const i=Us(s);return i?t.get(i.toLowerCase())??null:null}function Yv(s,t){const i={},n=(a,o)=>{const l=a.trim();if(!l)return;const r=Bs(o.display??o.label??o.name)||l,d=sn(o.toBase??o.factor??o.multiplier??o.value,NaN),c=Number.isFinite(d)&&d!==0?d:1;i[l]={display:r,toBase:c}};if(Array.isArray(s))for(const a of s){if(!a||typeof a!="object")continue;const o=a,l=Bs(o.key??o.code??o.unit??o.name)||t;n(l,o)}else if(s&&typeof s=="object")for(const[a,o]of Object.entries(s))n(a,o&&typeof o=="object"?o:{});if(i[t]||(i[t]={display:t,toBase:1}),Object.keys(i).length===0){const a=t;i[a]={display:a,toBase:1}}return i}function Qv(s){const t=new Map,i=new Set,n=[];return s.forEach((a,o)=>{if(!a||typeof a!="object")return;const l=a,r=Us(l.id)??Us(l.supplierId)??Us(l.vendorId)??Us(l.code)??Us(l.name),d=r?`builder-sup-${qr(r)}`:`builder-sup-${o+1}`,c=Rd(d,i);Vi(t,r,c),Vi(t,l.id,c),Vi(t,l.supplierId,c),Vi(t,l.vendorId,c),Vi(t,l.code,c),Vi(t,l.name,c);const f=Bs(l.name??l.title??l.label)||`Supplier ${o+1}`,b=Bs(l.contact??l.email??l.phone??l.primaryContact??l.contactInfo)||"Contact not provided",D=sn(l.leadTimeDays??l.leadTime??l.leadDays??l.lead_time,2),u=Kv(l.reliability??l.reliabilityPercent??l.ontimePercent??l.onTimeRate??l.score),p=qc(l.certifications??l.certificationsList??l.badges??l.qualityMarks),x=qc(l.allergensHandled??l.allergens??l.allergenZones??l.allergenFlags),S=Bs(l.notes??l.description??l.remarks??l.comment??l.memo)||void 0;n.push({id:c,name:f,contact:b,leadTimeDays:Hc(Math.round(D),0,365),reliability:u,certifications:p,allergensHandled:x,notes:S})}),{suppliers:n,map:t}}function Zv(s,t,i){const n=new Map,a=new Map,o=new Set,l=[];return s.forEach((r,d)=>{if(!r||typeof r!="object")return;const c=r,f=Us(c.id)??Us(c.itemId)??Us(c.catalogId)??Us(c.sku)??Us(c.code)??Us(c.name),b=f?`builder-item-${qr(f)}`:`builder-item-${d+1}`,D=Rd(b,o);Vi(n,f,D),Vi(n,c.id,D),Vi(n,c.itemId,D),Vi(n,c.catalogId,D),Vi(n,c.sku,D),Vi(n,c.code,D),Vi(n,c.name,D);const u=Bs(c.name??c.title??c.displayName)||`Catalog item ${d+1}`,p=Bs(c.sku??c.code??c.catalogCode??c.id)||u.toUpperCase().replace(/\s+/g,"-"),x=Bs(c.baseUnit??c.unit??c.defaultUnit??c.purchaseUnit??c.inventoryUnit).toLowerCase()||"each",S=Yv(c.units??c.conversions??c.unitOptions??c.unitVariants,x),m=Kc(c.supplierId??c.supplier??c.vendor??c.vendorId??c.distributor,t)??i[0]?.id??"supplier-unknown",v=sn(c.costPerBase??c.costPerBaseUnit??c.cost??c.unitCost,0),g=sn(c.parLevelBase??c.parLevel??c.par??c.par_units,0),N=sn(c.onHandBase??c.onHand??c.stockOnHand??c.quantityOnHand,0),w=sn(c.safetyStockBase??c.safetyStock??c.safety??c.buffer,0),A=qc(c.allergens??c.allergenFlags??c.allergenTags??c.allergenNotes),I=typeof c.critical=="boolean"?c.critical:!!(c.criticalItem??c.isCritical??c.criticalFlag),B=Bs(c.lastAuditISO??c.lastAuditAt??c.updatedAt)||void 0,W={id:D,sku:p,name:u,supplierId:m,category:Bs(c.category??c.categoryName??c.type)||"General",storageArea:Bs(c.storageArea??c.storage??c.location)||"Storage",baseUnit:x,units:S,costPerBase:Math.max(0,Math.round(v*100)/100),currency:Bs(c.currency??c.currencyCode??c.currency_symbol)||"USD",parLevelBase:Math.max(0,g),onHandBase:Math.max(0,N),safetyStockBase:Math.max(0,w),allergens:A,critical:I,lastAuditISO:B?Yc(B):new Date().toISOString()};l.push(W),a.set(D,x)}),{items:l,map:n,unitDefaults:a}}function Xv(s){if(typeof s!="string")return"draft";const t=s.trim().toLowerCase().replace(/[\s-]+/g,"_");return{draft:"draft",submitted:"submitted",confirmed:"confirmed",in_transit:"in_transit",intransit:"in_transit",transit:"in_transit",shipped:"in_transit",pending:"submitted",approved:"confirmed",completed:"received",closed:"received",received:"received"}[t]??(za.includes(t)?t:"draft")}function Yc(s){if(typeof s=="string"&&s.trim()){const t=Date.parse(s);if(!Number.isNaN(t))return new Date(t).toISOString()}return typeof s=="number"&&Number.isFinite(s)?new Date(s).toISOString():new Date().toISOString()}function bb(s){return{...s,certifications:[...s.certifications],allergensHandled:[...s.allergensHandled]}}function Jv(s){return Object.fromEntries(Object.entries(s).map(([t,i])=>[t,{...i}]))}function Nb(s){return{...s,units:Jv(s.units),allergens:[...s.allergens]}}function e1(s){return{...s}}function xb(s){return{...s,lines:s.lines.map(e1)}}const Wo={suppliers:pb.map(bb),items:fb.map(Nb),orders:hb.map(xb)};function t1(){return{suppliers:Wo.suppliers.map(bb),items:Wo.items.map(Nb),orders:Wo.orders.map(xb)}}function s1(s,t,i,n,a){const o=[],l=new Set;return s.forEach((r,d)=>{if(!r||typeof r!="object")return;const c=r,f=Us(c.id)??Us(c.poNumber)??Us(c.number)??Us(c.po),b=f?`builder-po-${qr(f)}`:`builder-po-${d+1}`,D=Rd(b,l),u=Kc(c.supplierId??c.supplier??c.vendor??c.vendorId??c.account,t)??i[0]?.id??"supplier-unknown",p=Xv(c.status??c.state??c.stage),x=Yc(c.expectedDate??c.expected??c.deliveryDate??c.eta??c.receiveBy),S=Yc(c.createdAt??c.created??c.submittedAt??c.updatedAt??Date.now()),m=Bs(c.submittedBy??c.createdBy??c.owner??c.user)||"System",v=Bs(c.notes??c.note??c.comments??c.memo)||void 0,g=Array.isArray(c.lines)?c.lines:Array.isArray(c.items)?c.items:Array.isArray(c.entries)?c.entries:[],N=[];g.forEach((w,A)=>{if(!w||typeof w!="object")return;const I=w,B=I.itemId??I.item??I.catalogItem??I.product??I.sku??I.code,W=Kc(B,n);if(!W)return;const se=sn(I.qty??I.quantity??I.amount??I.units,0);if(!Number.isFinite(se)||se<=0)return;const ie=Bs(I.unit??I.uom??I.measure)||a.get(W)||"each",R=Us(I.id??I.lineId)??`builder-pol-${qr(D)}-${A+1}`;N.push({id:R,itemId:W,qty:se,unit:ie})}),N.length&&o.push({id:D,supplierId:u,status:p,expectedDate:x,createdAt:S,submittedBy:m,notes:v,lines:N})}),o}async function i1(){const s=`${qv}/${encodeURIComponent(Hv)}?apiKey=${Gv}&limit=1`,t=await fetch(s);if(!t.ok){if(t.status===404)throw new Error("Purchasing_Receiving model not found in Builder.io. Ensure the dataset exists and is published.");let p="";try{p=await t.text()}catch{p=""}throw new Error(`Builder.io responded with ${t.status}. ${p}`.trim())}const i=await t.json(),n=Array.isArray(i.results)&&i.results.length>0?i.results[0]?.data:i.data;if(!n||typeof n!="object")throw new Error("Builder.io response did not include Purchasing_Receiving data.");const a=n,o=To(a.suppliers??a.supplierCatalog??a.vendors??a.supplier_list??[]),{suppliers:l,map:r}=Qv(o),d=To(a.catalog??a.items??a.catalogItems??a.inventoryItems??a.inventory??[]),{items:c,map:f,unitDefaults:b}=Zv(d,r,l),D=To(a.purchaseOrders??a.orders??a.po??a.purchasing??a.receiving??[]),u=s1(D,r,l,f,b);return{suppliers:l,items:c,orders:u}}function gb(s){return za.indexOf(s)}function Pd(s,t,i){const n=s.units[i];return n?t*n.toBase:t}function Id(s,t,i){const n=s.units[i];return n?t/n.toBase:t}function vb(s){if(!s)return"—";try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return s}}function n1({isLoading:s,onImport:t,lastImportAt:i,metrics:n}){const a=n?`${n.suppliers} suppliers · ${n.items} catalog items · ${n.orders} purchase orders`:"Import the latest supplier catalog and purchase orders from Builder.io.",o=i?new Date(i).toLocaleString():null;return e.jsxDEV("div",{className:"flex flex-col gap-2 rounded-xl border bg-white/95 p-4 ring-1 ring-black/5 dark:bg-zinc-900 dark:ring-sky-500/15 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:"Purchasing & Receiving"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1013,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:a},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1014,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1012,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center",children:[o?e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["Last import: ",o]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1018,columnNumber:11},this):null,e.jsxDEV(ne,{type:"button",size:"sm",onClick:t,disabled:s,className:"whitespace-nowrap",children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Wh,{className:"mr-2 h-3.5 w-3.5 animate-spin"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1031,columnNumber:15},this),"Importing…"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1030,columnNumber:13},this):"Import from Builder.io"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1022,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1016,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1011,columnNumber:5},this)}function a1({suppliers:s,onCreateSupplier:t}){const[i,n]=h.useState(!1),[a,o]=h.useState({name:"",contact:"",leadTimeDays:2,reliability:.9,certifications:[],allergensHandled:[],notes:""}),[l,r]=h.useState(""),d=a.name.trim().length>0&&a.contact.trim().length>0;return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Supplier catalog"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1066,columnNumber:9},this),e.jsxDEV(Lt,{children:"Preferred partners with lead times, certifications, and allergen separation notes."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1067,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1065,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-between gap-2",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:[s.length," approved suppliers · SLA monitored"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1074,columnNumber:11},this),e.jsxDEV(ss,{open:i,onOpenChange:c=>{n(c),c||(o({name:"",contact:"",leadTimeDays:2,reliability:.9,certifications:[],allergensHandled:[],notes:""}),r(""))},children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{size:"sm",children:"New supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1096,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1095,columnNumber:13},this),e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"Add supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1100,columnNumber:17},this),e.jsxDEV(yi,{children:"Capture allergen handling and compliance information for onboarding."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1101,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1099,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(Xe,{placeholder:"Supplier name",value:a.name,onChange:c=>o(f=>({...f,name:c.target.value}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1107,columnNumber:17},this),e.jsxDEV(Xe,{placeholder:"Primary contact (email · phone)",value:a.contact,onChange:c=>o(f=>({...f,contact:c.target.value}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1114,columnNumber:17},this),e.jsxDEV("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Lead time (days)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1123,columnNumber:21},this),e.jsxDEV(Xe,{type:"number",min:0,value:a.leadTimeDays,onChange:c=>o(f=>({...f,leadTimeDays:Number(c.target.value??0)}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1126,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1122,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Reliability %"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1139,columnNumber:21},this),e.jsxDEV(Xe,{type:"number",min:0,max:100,value:Math.round(a.reliability*100),onChange:c=>o(f=>({...f,reliability:Math.max(0,Math.min(1,Number(c.target.value)/100||0))}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1140,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1138,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1121,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Certifications"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1158,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:a.certifications.map(c=>e.jsxDEV(et,{variant:"secondary",className:"cursor-pointer",onClick:()=>o(f=>({...f,certifications:f.certifications.filter(b=>b!==c)})),children:c},c,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1163,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1161,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(Xe,{placeholder:"Add certification",value:l,onChange:c=>r(c.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1181,columnNumber:21},this),e.jsxDEV(ne,{type:"button",variant:"secondary",onClick:()=>{l.trim()&&(o(c=>({...c,certifications:Array.from(new Set([...c.certifications,l.trim()]))})),r(""))},children:"Add"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1186,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1180,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1157,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("span",{className:"text-sm text-muted-foreground",children:"Allergens handled"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1205,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:mb.map(c=>{const f=a.allergensHandled.includes(c);return e.jsxDEV("button",{type:"button",className:je("rounded-full border px-3 py-1 text-xs transition",f?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),onClick:()=>o(b=>({...b,allergensHandled:f?b.allergensHandled.filter(D=>D!==c):[...b.allergensHandled,c]})),children:c},c,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1212,columnNumber:25},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1208,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1204,columnNumber:17},this),e.jsxDEV($s,{rows:3,placeholder:"Receiving notes, cut-off times, QA requirements",value:a.notes,onChange:c=>o(f=>({...f,notes:c.target.value}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1238,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1106,columnNumber:15},this),e.jsxDEV(Li,{className:"pt-4",children:e.jsxDEV(ne,{disabled:!d,onClick:()=>{d&&(t(a),n(!1))},children:"Save supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1248,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1247,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1098,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1077,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1073,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-3 lg:grid-cols-2",children:s.map(c=>e.jsxDEV("div",{className:"rounded-lg border bg-white/80 p-4 shadow-sm dark:bg-zinc-900",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:c.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1270,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:c.contact},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1271,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1269,columnNumber:17},this),e.jsxDEV(et,{variant:c.reliability>.93?"default":"secondary",children:[Math.round(c.reliability*100),"% OTIF"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1275,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1268,columnNumber:15},this),e.jsxDEV("div",{className:"mt-3 grid gap-2 text-xs text-foreground/80",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Lead time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1285,columnNumber:19},this),e.jsxDEV("span",{children:[c.leadTimeDays," days"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1286,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1284,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:c.certifications.map(f=>e.jsxDEV(et,{variant:"outline",children:f},f,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1290,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1288,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium text-foreground",children:"Allergen zones"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1296,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-1 pt-1",children:c.allergensHandled.length===0?e.jsxDEV("span",{className:"text-muted-foreground",children:"None declared"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1301,columnNumber:23},this):c.allergensHandled.map(f=>e.jsxDEV(et,{variant:"secondary",children:f},f,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1306,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1299,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1295,columnNumber:17},this),c.notes?e.jsxDEV("p",{className:"rounded-md bg-muted/60 p-2 text-muted-foreground",children:c.notes},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1314,columnNumber:19},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1283,columnNumber:15},this)]},c.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1264,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1262,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1072,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1064,columnNumber:5},this)}function r1({items:s,suppliers:t}){const i=h.useMemo(()=>s.reduce((l,r)=>l+r.onHandBase*r.costPerBase,0),[s]),n=h.useMemo(()=>s.filter(l=>l.onHandBase<l.parLevelBase).sort((l,r)=>l.onHandBase-r.onHandBase),[s]),a=h.useMemo(()=>{const l=new Map;for(const r of s){const d=r.supplierId,c=l.get(d)||{value:0,count:0};c.value+=r.onHandBase*r.costPerBase,c.count+=1,l.set(d,c)}return Array.from(l.entries()).map(([r,d])=>({supplierId:r,...d}))},[s]),o=h.useMemo(()=>{const l=s.filter(d=>d.critical).length,r=s.filter(d=>d.critical&&d.onHandBase<d.safetyStockBase).length;return{totalCritical:l,lowCritical:r}},[s]);return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Inventory health"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1371,columnNumber:9},this),e.jsxDEV(Lt,{children:"Snapshot of stock value, reorder priorities, and safety stock coverage."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1372,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1370,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxDEV("div",{className:"rounded-lg bg-primary/10 p-4",children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"On-hand value"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1380,columnNumber:13},this),e.jsxDEV("div",{className:"text-2xl font-semibold",children:Bt(i,s[0]?.currency??"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1381,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[s.length," tracked catalog items"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1384,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1379,columnNumber:11},this),e.jsxDEV("div",{className:"rounded-lg bg-secondary p-4",children:[e.jsxDEV("div",{className:"text-xs text-secondary-foreground",children:"Critical exposure"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1389,columnNumber:13},this),e.jsxDEV("div",{className:"text-2xl font-semibold text-secondary-foreground",children:[o.lowCritical,"/",o.totalCritical]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1392,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-secondary-foreground",children:"Below safety stock threshold"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1395,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1388,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1378,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-lg border p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"Reorder priorities"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1401,columnNumber:11},this),e.jsxDEV("div",{className:"mt-2 grid gap-2 text-xs",children:n.length===0?e.jsxDEV("span",{className:"text-muted-foreground",children:"All items above par levels."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1404,columnNumber:15},this):n.map(l=>{const r=t.find(f=>f.id===l.supplierId),d=l.parLevelBase-l.onHandBase,c=Id(l,Math.max(d,l.safetyStockBase-l.onHandBase),"case");return e.jsxDEV("div",{className:"flex items-center justify-between rounded border bg-muted/60 px-3 py-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium text-foreground/90",children:l.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1424,columnNumber:23},this),e.jsxDEV("div",{className:"text-muted-foreground",children:[r?.name??"Supplier unknown"," · Par"," ",Math.round(l.parLevelBase)," ",l.baseUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1427,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1423,columnNumber:21},this),e.jsxDEV(et,{variant:"destructive",children:["Order ",Math.max(1,Math.ceil(c))," case",Math.max(1,Math.ceil(c))>1?"s":""]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1432,columnNumber:21},this)]},l.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1419,columnNumber:19},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1402,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1400,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-lg border p-3",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"Value by supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1443,columnNumber:11},this),e.jsxDEV("div",{className:"mt-2 space-y-2 text-xs",children:a.map(l=>{const r=t.find(d=>d.id===l.supplierId);return e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:r?.name??l.supplierId},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1452,columnNumber:19},this),e.jsxDEV("div",{className:"text-foreground/80",children:[Bt(l.value,s[0]?.currency??"USD")," (",$v(l.value,i),")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1453,columnNumber:19},this)]},l.supplierId,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1448,columnNumber:17},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1444,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1442,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1377,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1369,columnNumber:5},this)}function o1({items:s,suppliers:t,onAdjustStock:i,onUpdatePar:n}){const[a,o]=h.useState("all"),l=h.useMemo(()=>a==="all"?s:s.filter(w=>w.supplierId===a),[s,a]),[r,d]=h.useState(null),[c,f]=h.useState("0"),[b,D]=h.useState("case"),[u,p]=h.useState("0"),[x,S]=h.useState("0"),m=h.useCallback((w,A)=>{if(d(w.id),A==="stock"){f("0");const I=w.units.case?"case":w.baseUnit;D(I),p("0"),S("0")}else{p(String(Math.round(w.parLevelBase))),S(String(Math.round(w.safetyStockBase))),f("0");const I=w.units.case?"case":w.baseUnit;D(I)}},[]),v=l.find(w=>w.id===r)??s.find(w=>w.id===r)??null,[g,N]=h.useState("stock");return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{children:"Catalog & stock counts"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1527,columnNumber:11},this),e.jsxDEV(Lt,{children:"Track on-hand levels, allergen tagging, and convert purchase packs to production units."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1528,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1526,columnNumber:9},this),e.jsxDEV(cs,{value:a,onValueChange:w=>o(w),children:[e.jsxDEV(rs,{className:"w-[230px]",children:e.jsxDEV(ds,{placeholder:"Filter by supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1540,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1539,columnNumber:11},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"all",children:"All suppliers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1543,columnNumber:13},this),t.map(w=>e.jsxDEV(yt,{value:w.id,children:w.name},w.id,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1545,columnNumber:15},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1542,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1533,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1525,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV(Ds,{className:"max-h-[420px] rounded-lg border",children:e.jsxDEV("table",{className:"w-full min-w-[720px] table-fixed text-left text-xs",children:[e.jsxDEV("thead",{className:"bg-muted/70 text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-3",children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1557,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"Supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1558,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"On hand"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1559,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"Par / Safety"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1560,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"Allergens"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1561,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"Cost / base"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1562,columnNumber:17},this),e.jsxDEV("th",{className:"p-3",children:"Last audit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1563,columnNumber:17},this),e.jsxDEV("th",{className:"p-3 text-right",children:"Actions"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1564,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1556,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1555,columnNumber:13},this),e.jsxDEV("tbody",{children:l.map(w=>{const A=t.find(W=>W.id===w.supplierId),I=w.parLevelBase-w.onHandBase,B=I>0;return e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{className:"font-medium text-foreground/90",children:w.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1577,columnNumber:23},this),e.jsxDEV("div",{className:"text-muted-foreground",children:w.sku},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1580,columnNumber:23},this),e.jsxDEV("div",{className:"mt-1 text-muted-foreground",children:w.storageArea},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1581,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1576,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{children:A?.name??"Unknown"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1586,columnNumber:23},this),e.jsxDEV("div",{className:"text-muted-foreground",children:A?`${A.leadTimeDays} day SLA`:"No SLA"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1587,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1585,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{className:"font-medium",children:[Math.round(w.onHandBase)," ",w.baseUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1594,columnNumber:23},this),w.units.case?e.jsxDEV("div",{className:"text-muted-foreground",children:[Math.round(Id(w,w.onHandBase,"case")*10)/10," ","cases"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1598,columnNumber:25},this):null,B?e.jsxDEV("div",{className:"mt-1 text-destructive",children:["Short ",Math.round(I)," ",w.baseUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1606,columnNumber:25},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1593,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{children:[Math.round(w.parLevelBase)," ",w.baseUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1612,columnNumber:23},this),e.jsxDEV("div",{className:"text-muted-foreground",children:["Safety ",Math.round(w.safetyStockBase)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1615,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1611,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:w.allergens.length===0?e.jsxDEV(et,{variant:"outline",children:"None"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1622,columnNumber:27},this):w.allergens.map(W=>e.jsxDEV(et,{variant:"destructive",children:W},W,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1625,columnNumber:29},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1620,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1619,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{children:[Bt(w.costPerBase,w.currency)," /"," ",w.baseUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1633,columnNumber:23},this),w.units.case?e.jsxDEV("div",{className:"text-muted-foreground",children:[Bt(w.costPerBase*w.units.case.toBase,w.currency)," ","/ case"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1638,columnNumber:25},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1632,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top",children:[e.jsxDEV("div",{children:vb(w.lastAuditISO)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1648,columnNumber:23},this),e.jsxDEV("div",{className:"text-muted-foreground",children:new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(Math.round((new Date(w.lastAuditISO).getTime()-Date.now())/(24*3600*1e3)),"day")},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1649,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1647,columnNumber:21},this),e.jsxDEV("td",{className:"p-3 align-top text-right",children:e.jsxDEV("div",{className:"flex flex-col items-end gap-2",children:[e.jsxDEV(ne,{size:"sm",className:"h-8 px-3 text-xs",variant:"secondary",onClick:()=>{N("stock"),m(w,"stock")},children:"Record count"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1664,columnNumber:25},this),e.jsxDEV(ne,{size:"sm",className:"h-8 px-3 text-xs",variant:"ghost",onClick:()=>{N("par"),m(w,"par")},children:"Update par"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1675,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1663,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1662,columnNumber:21},this)]},w.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1575,columnNumber:19},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1567,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1554,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1553,columnNumber:9},this),e.jsxDEV(ss,{open:!!r,onOpenChange:w=>{w||(d(null),f("0"))},children:e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:g==="stock"?"Record stock count":"Update par levels"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1705,columnNumber:15},this),e.jsxDEV(yi,{children:g==="stock"?"Capture the latest cycle count with unit conversion handled automatically.":"Adjust par and safety stock for demand planning."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1708,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1704,columnNumber:13},this),v?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"rounded-md bg-muted/60 p-3 text-sm",children:v.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1716,columnNumber:17},this),g==="stock"?e.jsxDEV("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Quantity counted"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1722,columnNumber:23},this),e.jsxDEV(Xe,{type:"number",value:c,onChange:w=>f(w.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1725,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1721,columnNumber:21},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Counted unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1732,columnNumber:23},this),e.jsxDEV(cs,{value:b,onValueChange:D,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1737,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1736,columnNumber:25},this),e.jsxDEV(os,{children:Object.entries(v.units).map(([w,A])=>e.jsxDEV(yt,{value:w,children:A.display},w,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1742,columnNumber:31},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1739,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1735,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1731,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1720,columnNumber:19},this):e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Par (base unit)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1754,columnNumber:23},this),e.jsxDEV(Xe,{value:u,onChange:w=>p(w.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1757,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1753,columnNumber:21},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Safety stock"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1763,columnNumber:23},this),e.jsxDEV(Xe,{value:x,onChange:w=>S(w.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1766,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1762,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1752,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1715,columnNumber:15},this):null,e.jsxDEV(Li,{className:"pt-4",children:e.jsxDEV(ne,{onClick:()=>{if(v){if(g==="stock"){const w=Number(c);if(!Number.isFinite(w))return;const A=v.onHandBase+Pd(v,w,b);i(v.id,Math.max(0,A))}else{const w=Number(u),A=Number(x);if(!Number.isFinite(w)||!Number.isFinite(A))return;n(v.id,Math.max(0,w),Math.max(0,A))}d(null)}},children:"Save"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1776,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1775,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1703,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1694,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1552,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1524,columnNumber:5},this)}function l1({items:s,suppliers:t,orders:i,onAdvance:n,onReceive:a,onCreate:o}){const[l,r]=h.useState(!1),[d,c]=h.useState(t[0]?.id??""),[f,b]=h.useState(()=>new Date().toISOString().slice(0,10)),[D,u]=h.useState(""),[p,x]=h.useState([{id:Tn("pol"),itemId:s[0]?.id??"",qty:1,unit:s[0]&&s[0].units.case?"case":s[0]?.baseUnit??""}]),S=h.useMemo(()=>{const m=new Map;for(const v of i){const g=m.get(v.supplierId)??[];g.push(v),m.set(v.supplierId,g)}return m},[i]);return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Purchase orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1856,columnNumber:9},this),e.jsxDEV(Lt,{children:"Track lifecycle from draft to receipt and trigger auto-receiving into stock levels."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1857,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1855,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(ss,{open:l,onOpenChange:m=>{r(m),m||(c(t[0]?.id??""),b(new Date().toISOString().slice(0,10)),u(""),x([{id:Tn("pol"),itemId:s[0]?.id??"",qty:1,unit:s[0]&&s[0].units.case?"case":s[0]?.baseUnit??""}]))},children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{size:"sm",children:"Create PO"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1887,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1886,columnNumber:13},this),e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"New purchase order"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1891,columnNumber:17},this),e.jsxDEV(yi,{children:"Draft a purchase order with allergen-aware routing for inbound QC."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1892,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1890,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1900,columnNumber:21},this),e.jsxDEV(cs,{value:d,onValueChange:c,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1906,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1905,columnNumber:23},this),e.jsxDEV(os,{children:t.map(m=>e.jsxDEV(yt,{value:m.id,children:m.name},m.id,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1910,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1908,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1901,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1899,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Expected delivery"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1918,columnNumber:21},this),e.jsxDEV(Xe,{type:"date",value:f,onChange:m=>b(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1921,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1917,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1898,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"Line items"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1929,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:p.map((m,v)=>{const g=s.find(N=>N.id===m.itemId);return e.jsxDEV("div",{className:"grid gap-2 rounded-md border p-2 sm:grid-cols-[2fr_1fr_1fr_auto]",children:[e.jsxDEV(cs,{value:m.itemId,onValueChange:N=>x(w=>w.map(A=>A.id===m.id?{...A,itemId:N,unit:s.find(I=>I.id===N)?.units.case?"case":s.find(I=>I.id===N)?.baseUnit??""}:A)),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1960,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1959,columnNumber:29},this),e.jsxDEV(os,{children:s.map(N=>e.jsxDEV(yt,{value:N.id,children:N.name},N.id,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1964,columnNumber:33},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1962,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1938,columnNumber:27},this),e.jsxDEV(Xe,{type:"number",value:m.qty,onChange:N=>x(w=>w.map(A=>A.id===m.id?{...A,qty:Number(N.target.value)}:A))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1970,columnNumber:27},this),e.jsxDEV(cs,{value:m.unit,onValueChange:N=>x(w=>w.map(A=>A.id===m.id?{...A,unit:N}:A)),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1994,columnNumber:31},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1993,columnNumber:29},this),e.jsxDEV(os,{children:g?Object.entries(g.units).map(([N,w])=>e.jsxDEV(yt,{value:N,children:w.display},N,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1999,columnNumber:37},this)):null},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1996,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1983,columnNumber:27},this),e.jsxDEV("div",{className:"flex items-center justify-end",children:v>0?e.jsxDEV(ne,{variant:"ghost",size:"icon","aria-label":"Remove line",onClick:()=>x(N=>N.filter(w=>w.id!==m.id)),children:"×"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2008,columnNumber:31},this):null},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2006,columnNumber:27},this)]},m.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1934,columnNumber:25},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1930,columnNumber:19},this),e.jsxDEV(ne,{variant:"secondary",size:"sm",onClick:()=>x(m=>[...m,{id:Tn("pol"),itemId:s[0]?.id??"",qty:1,unit:s[0]&&s[0].units.case?"case":s[0]?.baseUnit??""}]),children:"Add line"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2026,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1928,columnNumber:17},this),e.jsxDEV($s,{rows:3,placeholder:"Receiving notes, QA holds, trajectory tracking",value:D,onChange:m=>u(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2047,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1897,columnNumber:15},this),e.jsxDEV(Li,{className:"pt-4",children:e.jsxDEV(ne,{onClick:()=>{!d||p.some(m=>!m.itemId||m.qty<=0)||(o({supplierId:d,expectedDate:new Date(f).toISOString(),submittedBy:"System",lines:p,notes:D}),r(!1))},children:"Create draft"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2055,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2054,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1889,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1864,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1863,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:t.map(m=>{const v=S.get(m.id)??[];return e.jsxDEV("div",{className:"rounded-lg border p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:m.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2085,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[v.length," open orders · ",m.leadTimeDays," ","day SLA"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2086,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2084,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2083,columnNumber:17},this),v.length===0?e.jsxDEV("div",{className:"pt-3 text-xs text-muted-foreground",children:"No open orders."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2093,columnNumber:19},this):e.jsxDEV("div",{className:"mt-3 space-y-2",children:v.map(g=>e.jsxDEV("div",{className:"grid gap-2 rounded-md border bg-muted/60 p-3 md:grid-cols-[1fr_auto]",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsxDEV(et,{variant:"outline",children:g.id},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2105,columnNumber:29},this),e.jsxDEV(et,{variant:g.status==="received"?"default":g.status==="draft"?"secondary":"outline",children:zv[g.status]},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2106,columnNumber:29},this),e.jsxDEV("span",{className:"text-muted-foreground",children:["ETA ",vb(g.expectedDate)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2117,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2104,columnNumber:27},this),e.jsxDEV("ul",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:g.lines.map(N=>{const w=s.find(A=>A.id===N.itemId);return e.jsxDEV("li",{children:[N.qty," ",N.unit," ��"," ",w?.name??"Unknown"]},N.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2127,columnNumber:33},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2121,columnNumber:27},this),g.notes?e.jsxDEV("p",{className:"mt-2 rounded bg-background/60 p-2 text-xs",children:g.notes},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2135,columnNumber:29},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2103,columnNumber:25},this),e.jsxDEV("div",{className:"flex flex-col justify-center gap-2",children:g.status!=="received"?e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:()=>{gb(g.status)>=za.length-1||(g.status==="in_transit"?a(g.id):n(g.id))},children:g.status==="in_transit"?"Receive":"Advance"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2142,columnNumber:29},this):e.jsxDEV(et,{variant:"secondary",children:"Closed"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2161,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2140,columnNumber:25},this)]},g.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2099,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2097,columnNumber:19},this)]},m.id,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2082,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2078,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1862,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:1854,columnNumber:5},this)}function c1({items:s}){const[t,i]=h.useState(s[0]?.id??""),[n,a]=h.useState("case"),[o,l]=h.useState("kg"),[r,d]=h.useState("1"),c=s.find(b=>b.id===t),f=h.useMemo(()=>{if(!c)return null;const b=Number(r);if(!Number.isFinite(b))return null;const D=Pd(c,b,n),u=Id(c,D,o);return Number.isFinite(u)?u:null},[c,r,n,o]);return Cn.useEffect(()=>{if(c){if(!c.units[n]){const b=Object.keys(c.units)[0];a(b)}if(!c.units[o]){const b=Object.keys(c.units)[0];l(b)}}},[c,n,o]),e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Unit conversion"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2209,columnNumber:9},this),e.jsxDEV(Lt,{children:"Convert supplier pack sizes to production units with density-aware factors per item."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2210,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2208,columnNumber:7},this),e.jsxDEV(Ge,{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2217,columnNumber:11},this),e.jsxDEV(cs,{value:t,onValueChange:b=>{i(b);const D=Object.keys(s.find(u=>u.id===b)?.units??{});a(D[0]??""),l(D[D.length-1]??"")},children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2230,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2229,columnNumber:13},this),e.jsxDEV(os,{children:s.map(b=>e.jsxDEV(yt,{value:b.id,children:b.name},b.id,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2234,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2232,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2218,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2216,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Quantity"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2243,columnNumber:13},this),e.jsxDEV(Xe,{value:r,onChange:b=>d(b.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2244,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2242,columnNumber:11},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"From unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2247,columnNumber:13},this),e.jsxDEV(cs,{value:n,onValueChange:a,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2250,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2249,columnNumber:15},this),e.jsxDEV(os,{children:c?Object.entries(c.units).map(([b,D])=>e.jsxDEV(yt,{value:b,children:D.display},b,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2255,columnNumber:23},this)):null},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2252,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2248,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2246,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2241,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Converted unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2266,columnNumber:13},this),e.jsxDEV(cs,{value:o,onValueChange:l,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2269,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2268,columnNumber:15},this),e.jsxDEV(os,{children:c?Object.entries(c.units).map(([b,D])=>e.jsxDEV(yt,{value:b,children:D.display},b,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2274,columnNumber:23},this)):null},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2271,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2267,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2265,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-col justify-end rounded-md border bg-muted/60 p-3 text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Result"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2283,columnNumber:13},this),e.jsxDEV("span",{className:"text-lg font-semibold",children:f===null?"—":`${Math.round(f*100)/100} ${o}`},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2284,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2282,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2264,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2215,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2207,columnNumber:5},this)}function d1(){const[s,t]=h.useState(pb),[i,n]=h.useState(fb),[a,o]=h.useState(hb),{toast:l}=Ci(),[r,d]=h.useState(!1),[c,f]=h.useState(null),[b,D]=h.useState(null),u=h.useCallback(async()=>{if(!r){d(!0);try{const N=await i1();if(!N.suppliers.length&&!N.items.length&&!N.orders.length)throw new Error("No Purchasing_Receiving records found in Builder.io.");t(A=>N.suppliers.length?N.suppliers:A),n(A=>N.items.length?N.items:A),o(A=>N.orders.length?N.orders:A);const w={suppliers:N.suppliers.length?N.suppliers.length:s.length,items:N.items.length?N.items.length:i.length,orders:N.orders.length?N.orders.length:a.length};D(w),f(Date.now()),l({title:"Purchasing data synced",description:`Suppliers ${w.suppliers}, catalog ${w.items}, orders ${w.orders}.`})}catch(N){const w=N instanceof Error?N.message:"Unable to import Purchasing_Receiving data.";console.error("Builder import failed",N);const A=t1();t(A.suppliers),n(A.items),o(A.orders);const I={suppliers:A.suppliers.length,items:A.items.length,orders:A.orders.length};D(I),f(Date.now()),l({title:"Builder import unavailable",description:`${w} Loaded demo Purchasing_Receiving data instead.`,variant:"destructive"})}finally{d(!1)}}},[r,l,s.length,i.length,a.length]),p=h.useCallback(N=>{t(w=>[...w,{id:Tn("sup"),...N}])},[]),x=h.useCallback((N,w)=>{n(A=>A.map(I=>I.id===N?{...I,onHandBase:Math.round(w*100)/100,lastAuditISO:new Date().toISOString()}:I))},[]),S=h.useCallback((N,w,A)=>{n(I=>I.map(B=>B.id===N?{...B,parLevelBase:Math.round(w*100)/100,safetyStockBase:Math.round(A*100)/100}:B))},[]),m=h.useCallback(N=>{o(w=>w.map(A=>{if(A.id!==N)return A;const I=gb(A.status),B=za[Math.min(I+1,za.length-1)];return{...A,status:B}}))},[]),v=h.useCallback(N=>{o(w=>w.map(A=>A.id===N?{...A,status:"received"}:A)),n(w=>{const A=a.find(B=>B.id===N);return A?w.map(B=>{const W=A.lines.filter(ie=>ie.itemId===B.id);if(W.length===0)return B;const se=W.reduce((ie,R)=>ie+Pd(B,R.qty,R.unit),0);return{...B,onHandBase:Math.round((B.onHandBase+se)*100)/100,lastAuditISO:new Date().toISOString()}}):w})},[a]),g=h.useCallback(N=>{o(w=>[{...N,id:Tn("po"),createdAt:new Date().toISOString(),status:"draft"},...w])},[]);return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(n1,{isLoading:r,onImport:u,lastImportAt:c,metrics:b},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2449,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 xl:grid-cols-[1.2fr_1fr]",children:[e.jsxDEV(a1,{suppliers:s,onCreateSupplier:p},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2456,columnNumber:9},this),e.jsxDEV(r1,{items:i,suppliers:s},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2460,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2455,columnNumber:7},this),e.jsxDEV(o1,{items:i,suppliers:s,onAdjustStock:x,onUpdatePar:S},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2462,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 lg:grid-cols-[1.4fr_0.8fr]",children:[e.jsxDEV(l1,{items:i,suppliers:s,orders:a,onAdvance:m,onReceive:v,onCreate:g},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2469,columnNumber:9},this),e.jsxDEV(c1,{items:i},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2477,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2468,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/InventorySuppliesWorkspace.tsx",lineNumber:2448,columnNumber:5},this)}const Pu={flour:{kcal:364,fat:1,carbs:76,protein:10},sugar:{kcal:387,fat:0,carbs:100,protein:0},confectioners_sugar:{kcal:387,fat:0,carbs:100,protein:0},powdered_sugar:{kcal:387,fat:0,carbs:100,protein:0},cocoa_powder:{kcal:228,fat:13.7,carbs:57.9,protein:19.6},vanilla_extract:{kcal:288,fat:0,carbs:12.7,protein:0},butter:{kcal:717,fat:81,carbs:0,protein:1},egg:{kcal:155,fat:11,carbs:1.1,protein:13},milk:{kcal:42,fat:1,carbs:5,protein:3.4},cream:{kcal:340,fat:36,carbs:3,protein:2},salt:{kcal:0,fat:0,carbs:0,protein:0},olive_oil:{kcal:884,fat:100,carbs:0,protein:0},veg_oil:{kcal:884,fat:100,carbs:0,protein:0},chicken:{kcal:239,fat:14,carbs:0,protein:27},beef:{kcal:250,fat:15,carbs:0,protein:26},rice:{kcal:130,fat:.3,carbs:28,protein:2.7},tomato:{kcal:18,fat:.2,carbs:3.9,protein:.9},onion:{kcal:40,fat:.1,carbs:9.3,protein:1.1},garlic:{kcal:149,fat:.5,carbs:33,protein:6.4},carrot:{kcal:41,fat:.2,carbs:10,protein:.9},potato:{kcal:77,fat:.1,carbs:17,protein:2},cheese:{kcal:402,fat:33,carbs:1.3,protein:25},fish:{kcal:206,fat:12,carbs:0,protein:22},shrimp:{kcal:99,fat:.3,carbs:.2,protein:24},almond:{kcal:579,fat:50,carbs:22,protein:21},water:{kcal:0,fat:0,carbs:0,protein:0},baking_powder:{kcal:0,fat:0,carbs:0,protein:0},baking_soda:{kcal:0,fat:0,carbs:0,protein:0},espresso_powder:{kcal:0,fat:0,carbs:0,protein:0}},Iu={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,lbs:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,litres:1e3,liters:1e3,tsp:4.2,teaspoon:4.2,teaspoons:4.2,"tsp.":4.2,tbsp:14.3,tablespoon:14.3,tablespoons:14.3,"tbsp.":14.3,tbl:14.3,tbls:14.3,cup:240,cups:240,pt:473.176,pint:473.176,pints:473.176,qt:946.353,qts:946.353,quart:946.353,quarts:946.353,gal:3785.41,gallon:3785.41,gallons:3785.41},Au={egg:50,onion:110,garlic:3,tomato:120,carrot:60,potato:210,shrimp:12},qn={flour:120,sugar:200,powdered_sugar:120,confectioners_sugar:120,cocoa_powder:85,butter:227,milk:240,cream:240,olive_oil:218,veg_oil:218},u1={milk:["Milk"],butter:["Milk"],cream:["Milk"],cheese:["Milk"],egg:["Eggs"],almond:["Tree Nuts"],peanut:["Peanuts"],fish:["Fish"],shrimp:["Shellfish"],shrimp_shellfish:["Shellfish"],wheat:["Wheat","Gluten"],flour:["Wheat","Gluten"],soy:["Soy"]},m1=[{id:"demo-brownie",title:"Fudge Brownie",ingredients:["225 g unsalted butter","300 g sugar","4 large eggs","90 g cocoa powder","110 g flour","1 tsp salt","1 tbsp vanilla extract"],instructions:[],createdAt:Date.now()},{id:"demo-quiche",title:"Spinach Quiche",ingredients:["1 pie shell","200 g spinach","200 ml cream","3 eggs","80 g cheese","1 tsp salt","1 tsp pepper"],instructions:[],createdAt:Date.now()}];function p1(s){const t=s.toLowerCase(),i=[[/(all[-\s]?purpose|ap) flour|flour/,"flour"],[/(granulated|caster|powdered|confectioners|icing) sugar|sugar/,"sugar"],[/unsalted butter|butter/,"butter"],[/whole egg|eggs?/,"egg"],[/whole milk|milk/,"milk"],[/heavy cream|double cream|whipping cream|cream/,"cream"],[/olive oil/,"olive_oil"],[/vegetable oil|canola oil|sunflower oil|corn oil/,"veg_oil"],[/cocoa powder|cocoa/,"cocoa_powder"],[/vanilla extract|vanilla/,"vanilla_extract"],[/baking soda/,"baking_soda"],[/baking powder/,"baking_powder"],[/espresso powder/,"espresso_powder"],[/cheddar|mozzarella|parmesan|cheese/,"cheese"],[/shrimp|prawn/,"shrimp"],[/beef/,"beef"],[/chicken/,"chicken"],[/tomato(es)?/,"tomato"],[/onion(s)?/,"onion"],[/garlic/,"garlic"],[/carrot(s)?/,"carrot"],[/potato(es)?/,"potato"],[/salmon|cod|trout|halibut|fish/,"fish"],[/almond(s)?/,"almond"],[/soy sauce|soy/,"soy"],[/wheat flour/,"flour"],[/peanut(s)?/,"peanut"]];for(const[n,a]of i)if(n.test(t))return a;return""}function f1(s){const t={"¼":"1/4","½":"1/2","¾":"3/4","⅐":"1/7","⅑":"1/9","⅒":"1/10","⅓":"1/3","⅔":"2/3","⅕":"1/5","⅖":"2/5","���":"3/5","⅘":"4/5","⅙":"1/6","⅚":"5/6","⅛":"1/8","⅜":"3/8","⅝":"5/8","⅞":"7/8"},n=s.trim().replace(/[¼½¾⅐⅑⅒⅓⅔⅕⅖⅗⅘⅙⅚⅛⅜⅝⅞]/g,a=>t[a]||a).replace(/(\d)(\s*)(\d\/\d)/,"$1 $3").match(/^\s*([0-9]+(?:\.[0-9]+)?(?:\s+[0-9]+\/[0-9]+)?|[0-9]+\/[0-9]+)\s*([a-zA-Z\.\-]+)?\s*(.*)$/);if(n){const a=n[1],o=(n[2]||"").toLowerCase(),l=n[3].trim();let r=0;const d=a.split(" ");if(d.length===2&&/\d+\/\d+/.test(d[1])){const[c,f]=d[1].split("/").map(Number);r=Number(d[0])+(f?c/f:0)}else if(/\d+\/\d+/.test(a)){const[c,f]=a.split("/").map(Number);r=f?c/f:Number(a)}else r=Number(a);return{qty:r,unit:o||"each",item:l}}return{qty:1,unit:"each",item:s.trim()}}function h1(s,t,i){return Iu[i]?t*Iu[i]:(i==="each"||i==="ea")&&s&&Au[s]?t*Au[s]:(i==="cup"||i==="cups")&&s&&qn[s]?t*qn[s]:(i==="tbsp"||i==="tablespoon"||i==="tablespoons"||i==="tbsp.")&&s&&qn[s]?t*(qn[s]/16):(i==="tsp"||i==="teaspoon"||i==="teaspoons"||i==="tsp.")&&s&&qn[s]?t*(qn[s]/48):(i==="stick"||i==="sticks")&&s==="butter"?t*113:(i==="clove"||i==="cloves")&&s==="garlic"?t*3:i==="pinch"||i==="dash"?t*.5:t}function b1(s,t){let i=0,n={kcal:0,fat:0,carbs:0,protein:0};const a=[],o={},l=[],r=[];for(const c of s){if(!c||!c.trim())continue;const f=f1(c),b=p1(f.item),D=h1(b,f.qty,f.unit);if(i+=D,b&&Pu[b]){const u=Pu[b],p=D/100,x={item:b,grams:D,kcal:u.kcal*p,fat:u.fat*p,carbs:u.carbs*p,protein:u.protein*p};a.push(x),n={kcal:n.kcal+x.kcal,fat:n.fat+x.fat,carbs:n.carbs+x.carbs,protein:n.protein+x.protein};const S=u1[b];if(S)for(const m of S)o[m]=!0;l.push(b)}else a.push({item:b||f.item,grams:D,kcal:0,fat:0,carbs:0,protein:0}),r.push(f.item),l.push(b||f.item.toLowerCase())}const d={kcal:n.kcal/t,fat:n.fat/t,carbs:n.carbs/t,protein:n.protein/t,grams:i/t};return{total:{...n,grams:i},perServing:d,breakdown:a,allergens:o,normalized:l,unknownIngredients:Array.from(new Set(r))}}function N1({normalized:s}){const t=h.useMemo(()=>{const i=s.map(n=>n.toLowerCase());return Object.entries(Uv).map(([n,a])=>{const o=a.avoid.some(r=>i.some(d=>d.includes(r.toLowerCase()))),l=a.allow.some(r=>i.some(d=>d.includes(r.toLowerCase())));return{key:n,profile:a,status:o?"not-compliant":"compliant",supporting:l}})},[s]);return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Diet suitability"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:407,columnNumber:9},this),e.jsxDEV(Lt,{children:"Highlights which dietary profiles the recipe can satisfy based on detected ingredients."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:408,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:406,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-3",children:t.map(i=>e.jsxDEV("div",{className:je("rounded-lg border p-3",i.status==="compliant"?"border-emerald-400 bg-emerald-50 text-emerald-900 dark:bg-emerald-900/30":"border-destructive bg-destructive/10 text-destructive"),children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium capitalize",children:i.key},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:425,columnNumber:15},this),e.jsxDEV(et,{variant:i.status==="compliant"?"secondary":"destructive",children:i.status==="compliant"?"Compliant":"Contains restricted items"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:426,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:424,columnNumber:13},this),e.jsxDEV("div",{className:"mt-2 grid gap-1 text-xs text-foreground/80",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Avoid:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:438,columnNumber:17},this)," ",i.profile.avoid.join(", ")]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:437,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Allow:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:442,columnNumber:17},this)," ",i.profile.allow.join(", ")]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:441,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:436,columnNumber:13},this)]},i.key,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:415,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:413,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:405,columnNumber:5},this)}function x1({analysis:s,servings:t}){return e.jsxDEV("div",{className:"rounded-xl border bg-white p-4 font-sans shadow-sm dark:bg-zinc-900",children:[e.jsxDEV("div",{className:"text-2xl font-black",children:"Nutrition Facts"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:462,columnNumber:7},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Servings per recipe ",t]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:463,columnNumber:7},this),e.jsxDEV("div",{className:"my-2 border-t-4 border-black"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:466,columnNumber:7},this),e.jsxDEV("div",{className:"flex justify-between text-xl font-semibold",children:[e.jsxDEV("span",{children:"Calories"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:468,columnNumber:9},this),e.jsxDEV("span",{children:Math.round(s.perServing.kcal)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:469,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:467,columnNumber:7},this),e.jsxDEV("div",{className:"mb-1 border-b border-black"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:471,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-1 text-sm",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"font-semibold",children:"Total Fat"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:474,columnNumber:11},this),e.jsxDEV("span",{children:[Math.round(s.perServing.fat)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:475,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:473,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"font-semibold",children:"Total Carbohydrate"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:478,columnNumber:11},this),e.jsxDEV("span",{children:[Math.round(s.perServing.carbs)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:479,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:477,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"font-semibold",children:"Protein"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:482,columnNumber:11},this),e.jsxDEV("span",{children:[Math.round(s.perServing.protein)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:483,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:481,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:472,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 border-t border-muted"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:486,columnNumber:7},this),e.jsxDEV("div",{className:"mt-2 text-xs text-muted-foreground",children:"*Calculated using internal USDA/Spoonacular references. Values approximate."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:487,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:461,columnNumber:5},this)}function g1({breakdown:s}){return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Ingredient contribution"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:499,columnNumber:9},this),e.jsxDEV(Lt,{children:"Normalized ingredient matches with macro contribution for audit traceability."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:500,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:498,columnNumber:7},this),e.jsxDEV(Ge,{className:"overflow-hidden",children:e.jsxDEV("div",{className:"max-h-[260px] overflow-auto rounded-lg border",children:e.jsxDEV("table",{className:"w-full min-w-[520px] text-left text-xs",children:[e.jsxDEV("thead",{className:"bg-muted/70 text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-2",children:"Ingredient"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:510,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Grams"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:511,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Calories"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:512,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Fat (g)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:513,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Carbs (g)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:514,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Protein (g)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:515,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:509,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:508,columnNumber:13},this),e.jsxDEV("tbody",{children:s.map((t,i)=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-2 font-medium capitalize",children:t.item},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:521,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:Math.round(t.grams)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:522,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:Math.round(t.kcal)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:523,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:t.fat.toFixed(2)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:524,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:t.carbs.toFixed(2)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:525,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:t.protein.toFixed(2)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:526,columnNumber:19},this)]},`${t.item}-${i}`,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:520,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:518,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:507,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:506,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:505,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:497,columnNumber:5},this)}function v1({detected:s,overrides:t,onToggle:i,unknownIngredients:n}){return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Allergen matrix"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:551,columnNumber:9},this),e.jsxDEV(Lt,{children:"Automatically flagged allergens with manual verification tracking for QA audits."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:552,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:550,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2",children:mb.map(a=>{const o=s[a]??!1,l=t[a]??o;return e.jsxDEV("label",{className:je("flex items-center justify-between gap-3 rounded-lg border p-3",o?"border-destructive bg-destructive/10":"border-muted bg-muted/40"),children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:a},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:573,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:o?"Detected in normalized ingredients":"Not detected"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:574,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:572,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(hn,{checked:l,onCheckedChange:r=>i(a,!!r)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:581,columnNumber:19},this),e.jsxDEV("span",{className:"text-xs",children:"Verified"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:587,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:580,columnNumber:17},this)]},a,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:563,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:558,columnNumber:9},this),n.length?e.jsxDEV("div",{className:"rounded-md bg-amber-100 p-3 text-xs text-amber-900 dark:bg-amber-900/30 dark:text-amber-200",children:[e.jsxDEV("div",{className:"font-medium",children:"Manual review suggested"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:595,columnNumber:13},this),e.jsxDEV("div",{children:["Some ingredients could not be normalized:"," ",n.join(", ")]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:596,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:594,columnNumber:11},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:557,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:549,columnNumber:5},this)}function y1(){const{recipes:s}=ln(),t=s.length?s:m1,[i,n]=h.useState(t[0]?.id??""),[a,o]=h.useState(12),[l,r]=h.useState("serving"),[d,c]=h.useState("0"),[f,b]=h.useState(""),[D,u]=h.useState({}),p=t.find(g=>g.id===i)??t[0],x=h.useMemo(()=>{const g=p?.ingredients??[];return b1(g,a||1)},[p,a]),S=x.total.grams,m=Number(d),v=Number.isFinite(m)&&m>0?m:a?S/a:S;return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{children:"Nutrition & allergen analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:643,columnNumber:13},this),e.jsxDEV(Lt,{children:"Generate compliant labels, calculate per-serving macros, and validate allergen disclosures."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:644,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:642,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(cs,{value:i,onValueChange:n,children:[e.jsxDEV(rs,{className:"min-w-[220px]",children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:655,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:654,columnNumber:15},this),e.jsxDEV(os,{children:t.map(g=>e.jsxDEV(yt,{value:g.id,children:g.title},g.id,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:659,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:657,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:650,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/60 px-3 py-2 text-xs",children:[e.jsxDEV("span",{children:"Total weight"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:666,columnNumber:15},this),e.jsxDEV(et,{variant:"secondary",children:[Math.round(S)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:667,columnNumber:15},this),e.jsxDEV("span",{children:["Per ",l]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:668,columnNumber:15},this),e.jsxDEV(et,{variant:"secondary",children:[Math.round(v*10)/10," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:669,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:665,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:649,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:641,columnNumber:9},this),e.jsxDEV(Ge,{className:"grid gap-4 lg:grid-cols-[360px_1fr]",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(x1,{analysis:x,servings:a||1},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:677,columnNumber:13},this),e.jsxDEV("div",{className:"rounded-lg border p-3 text-xs text-muted-foreground",children:[e.jsxDEV("div",{className:"font-medium text-foreground",children:"Implementation notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:679,columnNumber:15},this),e.jsxDEV("ul",{className:"list-disc space-y-1 pl-4 pt-2",children:[e.jsxDEV("li",{children:"USDA/Spoonacular dataset with per-ingredient yields and default loss factors."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:683,columnNumber:17},this),e.jsxDEV("li",{children:"Label template ready for print/web; export uses same data model."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:687,columnNumber:17},this),e.jsxDEV("li",{children:"Macronutrients recalculated automatically when portion size changes."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:691,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:682,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:678,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:676,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:e.jsxDEV(Ki,{defaultValue:"overview",className:"w-full",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-3",children:[e.jsxDEV(bs,{value:"overview",children:"Overview"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:701,columnNumber:17},this),e.jsxDEV(bs,{value:"breakdown",children:"Breakdown"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:702,columnNumber:17},this),e.jsxDEV(bs,{value:"notes",children:"Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:703,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:700,columnNumber:15},this),e.jsxDEV(St,{value:"overview",className:"space-y-3",children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("div",{className:"rounded-lg border p-3",children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Calories per ",l]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:708,columnNumber:21},this),e.jsxDEV("div",{className:"text-2xl font-semibold",children:[Math.round(x.perServing.kcal)," kcal"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:711,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:707,columnNumber:19},this),e.jsxDEV("div",{className:"rounded-lg border p-3",children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Protein"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:716,columnNumber:21},this),e.jsxDEV("div",{className:"text-2xl font-semibold",children:[x.perServing.protein.toFixed(1)," g"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:717,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:715,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:706,columnNumber:17},this),e.jsxDEV(N1,{normalized:x.normalized},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:722,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:705,columnNumber:15},this),e.jsxDEV(St,{value:"breakdown",children:e.jsxDEV(g1,{breakdown:x.breakdown},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:725,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:724,columnNumber:15},this),e.jsxDEV(St,{value:"notes",className:"space-y-3",children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Servings"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:730,columnNumber:21},this),e.jsxDEV(Xe,{type:"number",min:1,value:a,onChange:g=>o(Math.max(1,Number(g.target.value)||1))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:731,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:729,columnNumber:19},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Portion name"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:741,columnNumber:21},this),e.jsxDEV(Xe,{value:l,onChange:g=>r(g.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:742,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:740,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:728,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Portion weight override (g)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:749,columnNumber:19},this),e.jsxDEV(Xe,{value:d,onChange:g=>c(g.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:752,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:748,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"QC notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:758,columnNumber:19},this),e.jsxDEV($s,{rows:4,value:f,onChange:g=>b(g.target.value),placeholder:"Document manual overrides, lab test variances, or allergen controls."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:759,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:757,columnNumber:17},this),e.jsxDEV(ne,{variant:"secondary",onClick:()=>{b(""),c("0"),u({})},children:"Clear manual fields"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:766,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:727,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:699,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:698,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:675,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:640,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 lg:grid-cols-[1.3fr_1fr]",children:[e.jsxDEV(v1,{detected:x.allergens,overrides:D,onToggle:(g,N)=>u(w=>({...w,[g]:N})),unknownIngredients:x.unknownIngredients},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:782,columnNumber:9},this),e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Per-serving cost estimate"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:795,columnNumber:13},this),e.jsxDEV(Lt,{children:"Combines inventory cost data to emit nutrition label pricing guidance."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:796,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:794,columnNumber:11},this),e.jsxDEV(Ge,{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-between rounded-lg border bg-muted/60 p-3",children:[e.jsxDEV("span",{children:"Estimated ingredient cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:803,columnNumber:15},this),e.jsxDEV("span",{className:"font-semibold",children:Bt(x.total.kcal/1e3*4.25,"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:804,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:802,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center justify-between rounded-lg border bg-muted/60 p-3",children:[e.jsxDEV("span",{children:["Cost per ",l]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:809,columnNumber:15},this),e.jsxDEV("span",{className:"font-semibold",children:Bt(x.total.kcal/1e3*4.25/(a||1),"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:810,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:808,columnNumber:13},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Cost heuristics derived from ingredient calories * cost density. Replace with live inventory valuations for production."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:817,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:801,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:793,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:781,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/NutritionAllergensWorkspace.tsx",lineNumber:639,columnNumber:5},this)}const D1=[{id:"haccp-ccp-01",step:"Cook - Pastry Cream",hazard:"Biological (Salmonella)",criticalLimits:"≥ 82°C for 2 min",monitoring:"Probe center of batch before cooling",frequency:"Each batch",responsibleRole:"Pastry Lead",verification:"Executive pastry chef reviews daily",record:"Hot process log"},{id:"haccp-ccp-02",step:"Cool - Blast chiller",hazard:"Biological (Clostridium perfringens)",criticalLimits:"From 60°C to 21°C within 2 hours, ≤ 5°C within 6 hours",monitoring:"Chart recorder + probe verification",frequency:"Each batch",responsibleRole:"Production Supervisor",verification:"QA signs off weekly",record:"Cooling log"},{id:"haccp-ccp-03",step:"Cold Storage",hazard:"Biological (Listeria)",criticalLimits:"≤ 4°C",monitoring:"Digital logger with SMS alert + manual check a.m./p.m.",frequency:"Twice daily",responsibleRole:"AM Sous Chef",verification:"Facilities trending report",record:"Walk-in temperature log"}],E1=[{id:"log-cc-01",location:"Cook Chill Kettle",sample:"Lemon curd",reading:84.5,unit:"°C",takenAt:new Date().toISOString(),takenBy:"Maria",status:"ok"},{id:"log-blast-01",location:"Blast Chiller",sample:"Chocolate mousse",reading:8.2,unit:"°C",takenAt:new Date(Date.now()-2100*1e3).toISOString(),takenBy:"Noah",status:"warning",correctiveAction:"Rotate trays / extend chill 15 min"},{id:"log-walkin-01",location:"Walk-in Cooler",sample:"Ambient",reading:6.4,unit:"°C",takenAt:new Date(Date.now()-7200*1e3).toISOString(),takenBy:"Amelia",status:"critical",correctiveAction:"Moved product to backup cooler, notified facilities"}],w1=[{id:"action-01",description:"Walk-in cooler above 5°C. Facilities ticket #FM-221 raised.",createdAt:new Date(Date.now()-7200*1e3).toISOString(),owner:"QA Team",status:"open",relatedLogId:"log-walkin-01"}],k1=[{id:"task-01",label:"Verify CCP thermometer calibrated",required:!0,completed:!1},{id:"task-02",label:"Review overnight temp alerts",required:!0,completed:!1},{id:"task-03",label:"Confirm sanitation buckets ≥ 200 ppm",required:!0,completed:!1},{id:"task-04",label:"File previous shift production logs",required:!1,completed:!1}],yb={"Cook Chill Kettle":{min:82},"Blast Chiller":{max:5},"Walk-in Cooler":{max:4},Freezer:{max:-15}};function S1(s,t){const i=yb[s];return i?typeof i.min=="number"&&t<i.min?"warning":typeof i.max=="number"&&t>i.max+2?"critical":typeof i.max=="number"&&t>i.max?"warning":typeof i.min=="number"&&t<i.min-5?"critical":"ok":"ok"}function j1({points:s}){return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Critical control points"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:212,columnNumber:9},this),e.jsxDEV(Lt,{children:"Active CCPs with monitoring steps, limits, and verification plans."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:213,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:211,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-3",children:s.map(t=>e.jsxDEV("div",{className:"rounded-lg border bg-muted/60 p-3",children:[e.jsxDEV("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold",children:t.step},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:222,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Hazard: ",t.hazard]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:221,columnNumber:15},this),e.jsxDEV(et,{variant:"secondary",children:t.frequency},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:220,columnNumber:13},this),e.jsxDEV("div",{className:"mt-2 grid gap-2 text-xs text-foreground/80",children:[e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Critical limits:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:231,columnNumber:17},this)," ",t.criticalLimits]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:230,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Monitoring:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:235,columnNumber:17},this)," ",t.monitoring]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:234,columnNumber:15},this),e.jsxDEV("div",{className:"grid gap-1 sm:grid-cols-2",children:[e.jsxDEV("span",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Responsible:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:240,columnNumber:19},this)," ",t.responsibleRole]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:239,columnNumber:17},this),e.jsxDEV("span",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Verification:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:244,columnNumber:19},this)," ",t.verification]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:243,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:238,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-semibold",children:"Record:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:249,columnNumber:17},this)," ",t.record]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:229,columnNumber:13},this)]},t.id,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:219,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:217,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:210,columnNumber:5},this)}function V1({logs:s,onCreate:t}){const[i,n]=h.useState(!1),[a,o]=h.useState("Walk-in Cooler"),[l,r]=h.useState("Ambient"),[d,c]=h.useState("4.0"),[f,b]=h.useState("°C"),[D,u]=h.useState("William Morrison"),[p,x]=h.useState(""),S=h.useMemo(()=>[...s].sort((m,v)=>new Date(v.takenAt).getTime()-new Date(m.takenAt).getTime()),[s]);return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{children:"Temperature monitoring"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:286,columnNumber:11},this),e.jsxDEV(Lt,{children:"Capture cooling/cold-hold logs with automatic limit validation and corrective tracking."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:287,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:285,columnNumber:9},this),e.jsxDEV(ss,{open:i,onOpenChange:n,children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{size:"sm",children:"Log temperature"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:294,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"New temperature log"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:298,columnNumber:15},this),e.jsxDEV(yi,{children:"Enter monitoring details for CCP verification."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:299,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:297,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Location"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:306,columnNumber:19},this),e.jsxDEV(cs,{value:a,onValueChange:o,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:309,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:308,columnNumber:21},this),e.jsxDEV(os,{children:Object.keys(yb).map(m=>e.jsxDEV(yt,{value:m,children:m},m,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:313,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:311,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:305,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Sample / product"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:321,columnNumber:19},this),e.jsxDEV(Xe,{value:l,onChange:m=>r(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:324,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:320,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:304,columnNumber:15},this),e.jsxDEV("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Reading"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:332,columnNumber:19},this),e.jsxDEV(Xe,{value:d,onChange:m=>c(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:333,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:331,columnNumber:17},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:339,columnNumber:19},this),e.jsxDEV(cs,{value:f,onValueChange:m=>b(m),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:345,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:344,columnNumber:21},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"°C",children:"°C"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:348,columnNumber:23},this),e.jsxDEV(yt,{value:"°F",children:"°F"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:349,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:347,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:340,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:338,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:330,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Taken by"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:355,columnNumber:17},this),e.jsxDEV(Xe,{value:D,onChange:m=>u(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:356,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:354,columnNumber:15},this),e.jsxDEV("label",{className:"flex flex-col text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Corrective action (if applicable)"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:362,columnNumber:17},this),e.jsxDEV($s,{rows:3,value:p,onChange:m=>x(m.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:365,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:361,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:303,columnNumber:13},this),e.jsxDEV(Li,{className:"pt-4",children:e.jsxDEV(ne,{onClick:()=>{const m=Number(d);Number.isFinite(m)&&(t({location:a,sample:l,reading:m,unit:f,takenAt:new Date().toISOString(),takenBy:D,correctiveAction:p.trim()?p.trim():void 0}),n(!1),r("Ambient"),c("4.0"),x(""))},children:"Save log"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:373,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:372,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:296,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:292,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:284,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-3",children:[e.jsxDEV("div",{className:"overflow-hidden rounded-lg border",children:e.jsxDEV("table",{className:"w-full min-w-[640px] text-left text-xs",children:[e.jsxDEV("thead",{className:"bg-muted/70 text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-2",children:"Timestamp"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:405,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Location"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:406,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Sample"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:407,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Reading"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:408,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:409,columnNumber:17},this),e.jsxDEV("th",{className:"p-2",children:"Corrective action"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:410,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:404,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:403,columnNumber:13},this),e.jsxDEV("tbody",{children:S.map(m=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-2 text-muted-foreground",children:new Date(m.takenAt).toLocaleString()},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:416,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:m.location},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:419,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:m.sample},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:420,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:[m.reading.toFixed(1)," ",m.unit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:421,columnNumber:19},this),e.jsxDEV("td",{className:"p-2",children:e.jsxDEV(et,{variant:m.status==="ok"?"secondary":m.status==="warning"?"outline":"destructive",children:m.status==="ok"?"Within limit":m.status==="warning"?"Check":"Critical"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:425,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:424,columnNumber:19},this),e.jsxDEV("td",{className:"p-2 text-muted-foreground",children:m.correctiveAction||"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:441,columnNumber:19},this)]},m.id,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:415,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:413,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:402,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:401,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-md bg-muted/60 p-3 text-xs text-muted-foreground",children:"Logs flagged as critical automatically notify QA and create a corrective action task."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:449,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:400,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:283,columnNumber:5},this)}function C1({tasks:s,onToggle:t,signatures:i,onSignOff:n}){const[a,o]=h.useState(""),[l,r]=h.useState(""),d=s.filter(c=>c.required&&!c.completed).length===0;return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Shift compliance checklist"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:477,columnNumber:9},this),e.jsxDEV(Lt,{children:"Ensure HACCP paperwork and sanitation tasks are complete before sign-off."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:478,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:476,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-3",children:[e.jsxDEV("div",{className:"space-y-2",children:s.map(c=>e.jsxDEV("label",{className:"flex items-start gap-3 rounded-lg border bg-muted/40 p-3 text-sm",children:[e.jsxDEV(hn,{className:"mt-1",checked:c.completed,onCheckedChange:f=>t(c.id,!!f)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:490,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:je("font-medium",c.completed?"text-foreground":"text-foreground/80"),children:c.label},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:496,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[c.required?"Required":"Optional",c.completedBy?` · ${c.completedBy}`:""]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:504,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:495,columnNumber:15},this)]},c.id,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:486,columnNumber:13},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:484,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-lg border p-3 text-xs",children:[e.jsxDEV("div",{className:"font-semibold text-foreground",children:"Sign-off"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:513,columnNumber:11},this),l?e.jsxDEV("div",{className:"mt-1 text-destructive",children:l},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:514,columnNumber:20},this):null,e.jsxDEV("div",{className:"mt-2 flex flex-col gap-2 sm:flex-row",children:[e.jsxDEV(Xe,{placeholder:"Name",value:a,onChange:c=>o(c.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:516,columnNumber:13},this),e.jsxDEV(ne,{variant:"secondary",onClick:()=>{if(!a.trim()){r("Enter a name to sign");return}if(!d){r("Complete all required tasks before sign-off");return}n(a.trim()),o(""),r("")},children:"Sign shift"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:521,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:515,columnNumber:11},this),e.jsxDEV("div",{className:"mt-3 space-y-1",children:i.length===0?e.jsxDEV("div",{className:"text-muted-foreground",children:"No sign-offs yet."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:542,columnNumber:15},this):i.map((c,f)=>e.jsxDEV("div",{className:"flex justify-between text-muted-foreground",children:[e.jsxDEV("span",{children:c.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:549,columnNumber:19},this),e.jsxDEV("span",{children:new Date(c.at).toLocaleString()},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:550,columnNumber:19},this)]},`${c.name}-${f}`,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:545,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:540,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:512,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:483,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:475,columnNumber:5},this)}function R1({actions:s,onResolve:t}){const[i,n]=h.useState({}),a=s.filter(l=>l.status==="open"),o=s.filter(l=>l.status==="closed");return e.jsxDEV($e,{className:"border shadow-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{children:"Corrective actions"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:575,columnNumber:9},this),e.jsxDEV(Lt,{children:"Track open items and document resolution for inspections."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:576,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:574,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:e.jsxDEV(Ki,{defaultValue:"open",className:"w-full",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-2",children:[e.jsxDEV(bs,{value:"open",children:["Open (",a.length,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:583,columnNumber:13},this),e.jsxDEV(bs,{value:"closed",children:["Closed (",o.length,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:584,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:582,columnNumber:11},this),e.jsxDEV(St,{value:"open",className:"space-y-3",children:a.length===0?e.jsxDEV("div",{className:"rounded-md bg-emerald-100 p-3 text-xs text-emerald-900 dark:bg-emerald-900/30 dark:text-emerald-100",children:"No open actions. Great job!"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:590,columnNumber:15},this):a.map(l=>e.jsxDEV("div",{className:"rounded-lg border bg-muted/60 p-3 text-sm",children:[e.jsxDEV("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"font-semibold",children:l.description},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:600,columnNumber:21},this),e.jsxDEV(et,{variant:"outline",children:l.owner},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:601,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:599,columnNumber:19},this),e.jsxDEV("div",{className:"mt-1 text-xs text-muted-foreground",children:["Logged ",new Date(l.createdAt).toLocaleString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:603,columnNumber:19},this),e.jsxDEV($s,{rows:3,className:"mt-2",placeholder:"Resolution notes",value:i[l.id]??"",onChange:r=>n(d=>({...d,[l.id]:r.target.value}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:606,columnNumber:19},this),e.jsxDEV(ne,{size:"sm",className:"mt-2",onClick:()=>{const r=i[l.id]?.trim();r&&(t(l.id,r),n(d=>({...d,[l.id]:""})))},children:"Close action"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:618,columnNumber:19},this)]},l.id,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:595,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:588,columnNumber:11},this),e.jsxDEV(St,{value:"closed",className:"space-y-3",children:o.length===0?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"No closed actions yet."},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:636,columnNumber:15},this):o.map(l=>e.jsxDEV("div",{className:"rounded-lg border bg-muted/40 p-3 text-xs",children:[e.jsxDEV("div",{className:"font-medium text-foreground",children:l.description},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:645,columnNumber:19},this),e.jsxDEV("div",{className:"mt-1 text-muted-foreground",children:["Closed ",new Date(l.createdAt).toLocaleString()," ·"," ",l.owner]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:648,columnNumber:19},this),l.resolutionNotes?e.jsxDEV("div",{className:"mt-1 text-foreground/80",children:l.resolutionNotes},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:653,columnNumber:21},this):null]},l.id,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:641,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:634,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:581,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:580,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:573,columnNumber:5},this)}function P1(){const[s,t]=h.useState(E1),[i,n]=h.useState(w1),[a,o]=h.useState(k1),[l,r]=h.useState([]),d=D=>{const u=S1(D.location,D.reading),p=Tn("log"),x={...D,id:p,status:u};t(S=>[x,...S]),(u==="warning"||u==="critical")&&n(S=>[{id:Tn("action"),description:`${D.location} reading ${D.reading}${D.unit} flagged (${u}).`,createdAt:new Date().toISOString(),owner:"QA Team",status:"open",relatedLogId:p},...S])},c=(D,u)=>{n(p=>p.map(x=>x.id===D?{...x,status:"closed",resolutionNotes:u}:x))},f=(D,u)=>{o(p=>p.map(x=>x.id===D?{...x,completed:u,completedBy:u?"QA":void 0,completedAt:u?new Date().toISOString():void 0}:x))},b=D=>{r(u=>[{name:D,at:new Date().toISOString()},...u])};return e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid gap-4 xl:grid-cols-[1.2fr_1fr]",children:[e.jsxDEV(j1,{points:D1},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:733,columnNumber:9},this),e.jsxDEV(C1,{tasks:a,onToggle:f,signatures:l,onSignOff:b},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:734,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:732,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 lg:grid-cols-[1.4fr_0.8fr]",children:[e.jsxDEV(V1,{logs:s,onCreate:d},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:742,columnNumber:9},this),e.jsxDEV(R1,{actions:i,onResolve:c},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:743,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:741,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/HaccpComplianceWorkspace.tsx",lineNumber:731,columnNumber:5},this)}const Mn=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("div",{className:"relative w-full overflow-auto",children:e.jsxDEV("table",{ref:i,className:je("w-full caption-bottom text-sm",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:10,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:9,columnNumber:3},void 0));Mn.displayName="Table";const _n=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("thead",{ref:i,className:je("[&_tr]:border-b",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:23,columnNumber:3},void 0));_n.displayName="TableHeader";const On=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("tbody",{ref:i,className:je("[&_tr:last-child]:border-0",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:31,columnNumber:3},void 0));On.displayName="TableBody";const I1=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("tfoot",{ref:i,className:je("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:43,columnNumber:3},void 0));I1.displayName="TableFooter";const bi=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("tr",{ref:i,className:je("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:58,columnNumber:3},void 0));bi.displayName="TableRow";const Jt=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("th",{ref:i,className:je("h-10 px-3 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:73,columnNumber:3},void 0));Jt.displayName="TableHead";const Ht=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("td",{ref:i,className:je("px-3 py-2 align-middle [&:has([role=checkbox])]:pr-0",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:88,columnNumber:3},void 0));Ht.displayName="TableCell";const A1=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("caption",{ref:i,className:je("mt-3 text-sm text-muted-foreground",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/table.tsx",lineNumber:100,columnNumber:3},void 0));A1.displayName="TableCaption";const Ad=[{id:"plate-001",recipeId:"rec-pan-sear-scallops",recipeName:"Pan-Seared Scallops with Corn Puree",platingDate:Date.now()-2880*60*1e3,methodType:"actual",ingredientCosts:[{ingredientId:"ing-scallops",ingredientName:"Diver scallops U10",quantity:4,unit:"each",unitCost:8.5,totalCost:34,supplierId:"sup-sysco",supplierSku:"SYS-SCAL-1001",costMethod:"actual",costDate:Date.now()-2880*60*1e3},{ingredientId:"ing-corn",ingredientName:"Fresh corn",quantity:.5,unit:"lb",unitCost:2.5,totalCost:1.25,supplierId:"sup-sysco",supplierSku:"SYS-CORN-1045",costMethod:"actual",costDate:Date.now()-2880*60*1e3},{ingredientId:"ing-butter",ingredientName:"European butter",quantity:.75,unit:"oz",unitCost:.45,totalCost:.34,supplierId:"sup-us-foods",supplierSku:"USF-BUTT-2012",costMethod:"actual",costDate:Date.now()-2880*60*1e3},{ingredientId:"ing-microgreens",ingredientName:"Microgreens mix",quantity:.25,unit:"oz",unitCost:12,totalCost:3,supplierId:"sup-gfs",supplierSku:"GFS-MICR-3089",costMethod:"actual",costDate:Date.now()-2880*60*1e3}],laborCost:5.5,overheadCost:2.25,totalCost:46.34,costPerPortion:46.34,portionSize:1,portionUnit:"plate",yieldPercent:96,waste:[{id:"waste-001",plateCostId:"plate-001",ingredientId:"ing-scallops",ingredientName:"Diver scallops U10",wasteCategory:"prep-waste",quantityWasted:.15,unit:"lb",costOfWaste:1.8,percentage:2,reason:"Trim off-muscle",preventionNotes:"Normal for scallop prep",timestamp:Date.now()-2880*60*1e3},{id:"waste-002",plateCostId:"plate-001",ingredientId:"ing-corn",ingredientName:"Fresh corn",wasteCategory:"prep-waste",quantityWasted:.08,unit:"lb",costOfWaste:.2,percentage:13.8,reason:"Husk and silk removal",preventionNotes:"Expected yield loss",timestamp:Date.now()-2880*60*1e3}],notes:"Premium dish, scallops were excellent quality",createdBy:"chef-001",timestamp:Date.now()-2880*60*1e3},{id:"plate-002",recipeId:"rec-herb-roasted-chicken",recipeName:"Herb-Roasted Chicken with Seasonal Vegetables",platingDate:Date.now()-1440*60*1e3,methodType:"standard",ingredientCosts:[{ingredientId:"ing-chicken-breast",ingredientName:"Chicken breast, skin-on",quantity:6,unit:"oz",unitCost:3.2,totalCost:19.2,supplierId:"sup-us-foods",supplierSku:"USF-CHIC-2034",costMethod:"standard",costDate:Date.now()},{ingredientId:"ing-seasonal-vegetables",ingredientName:"Seasonal vegetable mix",quantity:8,unit:"oz",unitCost:1.8,totalCost:14.4,supplierId:"sup-sysco",supplierSku:"SYS-VGMX-1067",costMethod:"standard",costDate:Date.now()},{ingredientId:"ing-herb-butter",ingredientName:"Herb-infused butter",quantity:.5,unit:"oz",unitCost:.75,totalCost:.375,supplierId:"sup-us-foods",supplierSku:"USF-HERB-2089",costMethod:"standard",costDate:Date.now()}],laborCost:3.75,overheadCost:1.5,totalCost:39.225,costPerPortion:39.225,portionSize:1,portionUnit:"plate",yieldPercent:92,waste:[{id:"waste-003",plateCostId:"plate-002",ingredientId:"ing-chicken-breast",ingredientName:"Chicken breast, skin-on",wasteCategory:"cooking-loss",quantityWasted:1.2,unit:"oz",costOfWaste:3.84,percentage:16.7,reason:"Moisture loss during roasting",timestamp:Date.now()-1440*60*1e3}],notes:"Standard recipe costing, consistent results",createdBy:"chef-002",timestamp:Date.now()-1440*60*1e3}],T1=[{id:"hist-001",recipeId:"rec-pan-sear-scallops",recipeName:"Pan-Seared Scallops with Corn Puree",dateRecorded:Date.now()-1440*60*60*1e3,costPerPortion:40.5,totalIngredientCost:38.6,methodology:"actual",dataPoints:12,approvedBy:"exec-chef",notes:"Prior month average"},{id:"hist-002",recipeId:"rec-pan-sear-scallops",recipeName:"Pan-Seared Scallops with Corn Puree",dateRecorded:Date.now()-720*60*60*1e3,costPerPortion:43.2,totalIngredientCost:40.8,methodology:"actual",dataPoints:15,approvedBy:"exec-chef",notes:"Mid-month trending up due to scallop prices"},{id:"hist-003",recipeId:"rec-pan-sear-scallops",recipeName:"Pan-Seared Scallops with Corn Puree",dateRecorded:Date.now(),costPerPortion:46.34,totalIngredientCost:38.59,methodology:"actual",dataPoints:8,approvedBy:"exec-chef",notes:"Current month average, highest cost"},{id:"hist-004",recipeId:"rec-herb-roasted-chicken",recipeName:"Herb-Roasted Chicken with Seasonal Vegetables",dateRecorded:Date.now(),costPerPortion:39.225,totalIngredientCost:34,methodology:"standard",dataPoints:5,approvedBy:"sous-chef",notes:"Stable costing"}];function W1(s){return Ad.find(t=>t.id===s)}function L1(){return[...Ad]}function va(s){return Ad.filter(t=>t.recipeId===s)}function Kr(s){const t=va(s);return t.length===0?0:t.reduce((n,a)=>n+a.costPerPortion,0)/t.length}function M1(s){const t=va(s);return t.length>0?Math.max(...t.map(i=>i.costPerPortion)):0}function _1(s){const t=va(s);return t.length>0?Math.min(...t.map(i=>i.costPerPortion)):0}function Db(s){const t=va(s);if(t.length<2)return 0;const i=Kr(s),a=t.map(o=>Math.pow(o.costPerPortion-i,2)).reduce((o,l)=>o+l,0)/t.length;return Math.sqrt(a)}function Td(s){return T1.filter(t=>t.recipeId===s).sort((t,i)=>i.dateRecorded-t.dateRecorded)}function O1(s){const t=Td(s);return t.length>0?t[0]:void 0}function F1(s){return Td(s).map(t=>({date:t.dateRecorded,cost:t.costPerPortion}))}function B1(s){const t=Td(s);if(t.length<2)return 0;const i=t[t.length-1];return(t[0].costPerPortion-i.costPerPortion)/i.costPerPortion*100}function Eb(s){const t=W1(s);if(!t)return null;const i=t.ingredientCosts.reduce((o,l)=>o+l.totalCost,0),n=t.waste.reduce((o,l)=>o+l.costOfWaste,0),a=i+t.laborCost+t.overheadCost+n;return{id:`dist-${s}`,plateCostId:s,ingredientsCost:i,ingredientsCostPercent:a>0?i/a*100:0,laborCost:t.laborCost,laborCostPercent:a>0?t.laborCost/a*100:0,overheadCost:t.overheadCost,overheadCostPercent:a>0?t.overheadCost/a*100:0,wasteCost:n,wasteCostPercent:a>0?n/a*100:0,totalCost:a}}function U1(s,t,i){const n=va(s),a=O1(s);if(n.length===0)return{id:`mic-${s}`,recipeId:s,recipeName:"Unknown",averagePlateCost:0,minimumPlateCost:0,maximumPlateCost:0,standardDeviation:0,dataSamples:0,samplePeriod:{startDate:0,endDate:0},pricePoint:t,targetMargin:i,actualMargin:0,status:"below-target",recommendations:["No cost data available"]};const o=Kr(s),l=_1(s),r=M1(s),d=Db(s),c=t>0?(t-o)/t*100:0,f=c>=i?"on-target":c<i-5?"below-target":"above-target",b=[];return c<i&&b.push("Consider price increase"),d>o*.15&&b.push("Cost consistency issues detected"),{id:`mic-${s}`,recipeId:s,recipeName:a?.recipeName??"Unknown Recipe",averagePlateCost:o,minimumPlateCost:l,maximumPlateCost:r,standardDeviation:d,dataSamples:n.length,samplePeriod:{startDate:Math.min(...n.map(D=>D.platingDate)),endDate:Math.max(...n.map(D=>D.platingDate))},pricePoint:t,targetMargin:i,actualMargin:c,status:f,recommendations:b}}const Kn=[{id:"prep-waste",label:"Prep Waste",color:"#ef4444"},{id:"cooking-loss",label:"Cooking Loss",color:"#f97316"},{id:"plate-waste",label:"Plate Waste",color:"#eab308"},{id:"disposal",label:"Disposal",color:"#8b5cf6"},{id:"spoilage",label:"Spoilage",color:"#3b82f6"}];function $1(){const{toast:s}=Ci(),[t,i]=h.useState({dateRange:"month"}),[n,a]=h.useState(!1),[o,l]=h.useState({plateCostId:"",ingredientName:"",category:"prep-waste",quantityWasted:0,unit:"oz",costOfWaste:0,reason:"",preventionNotes:""}),r=L1(),d=h.useMemo(()=>{const v=[];return r.forEach(g=>{g.waste.filter(w=>!(t.category&&w.wasteCategory!==t.category||t.recipeName&&!g.recipeName.toLowerCase().includes(t.recipeName.toLowerCase()))).forEach(w=>{v.push({...w,plateCost:g})})}),v},[t]),c=h.useMemo(()=>{const v=new Map;return Kn.forEach(g=>{v.set(g.id,0)}),d.forEach(g=>{const N=v.get(g.wasteCategory)||0;v.set(g.wasteCategory,N+g.costOfWaste)}),Array.from(v.entries()).map(([g,N])=>({category:Kn.find(w=>w.id===g)?.label||g,cost:N}))},[d]),f=h.useMemo(()=>{const v=new Map;return r.forEach(g=>{const N=g.recipeName,w=g.waste.reduce((A,I)=>A+I.costOfWaste,0);if(w>0){const A=v.get(N)||0;v.set(N,A+w)}}),Array.from(v.entries()).map(([g,N])=>({recipe:g,cost:N})).sort((g,N)=>N.cost-g.cost)},[r]),b=h.useMemo(()=>{const v=new Map;return r.forEach(g=>{const N=new Date(g.platingDate).toLocaleDateString(),w=g.waste.reduce((I,B)=>I+B.costOfWaste,0),A=v.get(N)||0;v.set(N,A+w)}),Array.from(v.entries()).map(([g,N])=>({date:g,cost:N})).sort((g,N)=>new Date(g.date).getTime()-new Date(N.date).getTime())},[r]),D=d.reduce((v,g)=>v+g.costOfWaste,0),u=r.reduce((v,g)=>v+g.ingredientCosts.reduce((N,w)=>N+w.totalCost,0),0),p=u>0?D/u*100:0,x=h.useCallback(()=>{if(!o.plateCostId||!o.ingredientName){s({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}s({title:"Waste Record Added",description:`Added ${o.quantityWasted}${o.unit} of waste for ${o.ingredientName}`}),l({plateCostId:"",ingredientName:"",category:"prep-waste",quantityWasted:0,unit:"oz",costOfWaste:0,reason:"",preventionNotes:""}),a(!1)},[o,s]),S=h.useMemo(()=>r.map(g=>Eb(g.id)).filter(Boolean),[r]),m=S.length>0?S.reduce((v,g)=>v+(g?.wasteCostPercent||0),0)/S.length:0;return e.jsxDEV("div",{className:"space-y-6 pb-8",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Waste Tracking & Analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:244,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Monitor and analyze food waste by category, recipe, and time period"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:245,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:243,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Total Waste Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:254,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:253,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:Bt(D)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:259,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[p.toFixed(1),"% of ingredient cost"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:260,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:252,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Waste Records"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:268,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:267,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d.length},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:273,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[r.length," plates tracked"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:274,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:272,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:266,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Avg Waste %"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:281,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[m.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:287,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"per plate cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:288,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:286,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:280,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Top Category"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:294,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:c[0]?.category||"N/A"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:299,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:Bt(c[0]?.cost||0)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:302,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:298,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:292,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:251,columnNumber:7},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-base",children:"Filters"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:312,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:311,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-4",children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Category"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:317,columnNumber:15},this),e.jsxDEV(cs,{value:t.category||"",onValueChange:v=>i(g=>({...g,category:v||void 0})),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"All Categories"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:328,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:327,columnNumber:17},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"",children:"All Categories"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:331,columnNumber:19},this),Kn.map(v=>e.jsxDEV(yt,{value:v.id,children:v.label},v.id,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:333,columnNumber:21},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:330,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:318,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:316,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:342,columnNumber:15},this),e.jsxDEV(Xe,{placeholder:"Filter by recipe name",value:t.recipeName||"",onChange:v=>i(g=>({...g,recipeName:v.target.value||void 0}))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:343,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:341,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Date Range"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:356,columnNumber:15},this),e.jsxDEV(cs,{value:t.dateRange||"all",onValueChange:v=>i(g=>({...g,dateRange:v})),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:367,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:366,columnNumber:17},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"week",children:"Last 7 Days"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:370,columnNumber:19},this),e.jsxDEV(yt,{value:"month",children:"Last 30 Days"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:371,columnNumber:19},this),e.jsxDEV(yt,{value:"all",children:"All Time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:372,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:369,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:357,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:355,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:315,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:314,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:310,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Waste by Category"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:385,columnNumber:13},this),e.jsxDEV(Lt,{children:"Cost distribution"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:386,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:384,columnNumber:11},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(h0,{children:[e.jsxDEV(b0,{data:c,dataKey:"cost",nameKey:"category",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:Kn.map(v=>e.jsxDEV(N0,{fill:v.color},v.id,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:401,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:391,columnNumber:17},this),e.jsxDEV(An,{formatter:v=>Bt(v)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:404,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:390,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:389,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:388,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:383,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Waste Trends"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:413,columnNumber:13},this),e.jsxDEV(Lt,{children:"Daily waste cost over time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:414,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:412,columnNumber:11},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(kd,{data:b,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:419,columnNumber:17},this),e.jsxDEV(ca,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:420,columnNumber:17},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:427,columnNumber:17},this),e.jsxDEV(An,{formatter:v=>Bt(v)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:428,columnNumber:17},this),e.jsxDEV(Sd,{type:"monotone",dataKey:"cost",stroke:"#ef4444",dot:{fill:"#ef4444"}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:429,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:418,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:417,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:416,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:411,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:381,columnNumber:7},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Waste by Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:444,columnNumber:11},this),e.jsxDEV(Lt,{children:"Top recipes with most waste cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:445,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:443,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(jd,{data:f,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:450,columnNumber:15},this),e.jsxDEV(ca,{dataKey:"recipe",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:451,columnNumber:15},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:458,columnNumber:15},this),e.jsxDEV(An,{formatter:v=>Bt(v)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:459,columnNumber:15},this),e.jsxDEV($r,{dataKey:"cost",fill:"#f97316"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:460,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:449,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:448,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:447,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:442,columnNumber:7},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:"Waste Records"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:471,columnNumber:15},this),e.jsxDEV(Lt,{children:"Detailed waste tracking entries"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:472,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:470,columnNumber:13},this),e.jsxDEV(ss,{open:n,onOpenChange:a,children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{size:"sm",className:"gap-1",children:[e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:477,columnNumber:19},this),"Add Record"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:476,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:475,columnNumber:15},this),e.jsxDEV(is,{className:"sm:max-w-md",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"Add Waste Record"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:483,columnNumber:19},this),e.jsxDEV(yi,{children:"Log a new waste entry for tracking and analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:484,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:482,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Plate Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:490,columnNumber:21},this),e.jsxDEV(cs,{value:o.plateCostId,onValueChange:v=>l(g=>({...g,plateCostId:v})),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"Select plate"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:501,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:500,columnNumber:23},this),e.jsxDEV(os,{children:r.map(v=>e.jsxDEV(yt,{value:v.id,children:v.recipeName},v.id,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:505,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:503,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:491,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:489,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Ingredient Name"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:514,columnNumber:21},this),e.jsxDEV(Xe,{value:o.ingredientName,onChange:v=>l(g=>({...g,ingredientName:v.target.value})),placeholder:"e.g., Carrot trim"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:515,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:513,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Category"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:528,columnNumber:21},this),e.jsxDEV(cs,{value:o.category,onValueChange:v=>l(g=>({...g,category:v})),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:539,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:538,columnNumber:23},this),e.jsxDEV(os,{children:Kn.map(v=>e.jsxDEV(yt,{value:v.id,children:v.label},v.id,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:543,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:541,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:529,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:527,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Quantity"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:553,columnNumber:23},this),e.jsxDEV(Xe,{type:"number",value:o.quantityWasted,onChange:v=>l(g=>({...g,quantityWasted:parseFloat(v.target.value)||0})),placeholder:"0"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:554,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:552,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:567,columnNumber:23},this),e.jsxDEV(cs,{value:o.unit,onValueChange:v=>l(g=>({...g,unit:v})),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:578,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:577,columnNumber:25},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"oz",children:"oz"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:581,columnNumber:27},this),e.jsxDEV(yt,{value:"lb",children:"lb"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:582,columnNumber:27},this),e.jsxDEV(yt,{value:"g",children:"g"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:583,columnNumber:27},this),e.jsxDEV(yt,{value:"kg",children:"kg"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:584,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:580,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:568,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:566,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:551,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Cost of Waste"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:591,columnNumber:21},this),e.jsxDEV(Xe,{type:"number",value:o.costOfWaste,onChange:v=>l(g=>({...g,costOfWaste:parseFloat(v.target.value)||0})),placeholder:"$0.00"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:592,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:590,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Reason"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:606,columnNumber:21},this),e.jsxDEV(Xe,{value:o.reason,onChange:v=>l(g=>({...g,reason:v.target.value})),placeholder:"e.g., Normal trim, Overcooking"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:607,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:605,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Prevention Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:620,columnNumber:21},this),e.jsxDEV($s,{value:o.preventionNotes,onChange:v=>l(g=>({...g,preventionNotes:v.target.value})),placeholder:"How can we reduce this waste in the future?"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:621,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:619,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:488,columnNumber:17},this),e.jsxDEV(Li,{children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>a(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:635,columnNumber:19},this),e.jsxDEV(ne,{onClick:x,children:"Add Record"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:638,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:634,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:481,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:474,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:469,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:468,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(Ds,{className:"w-full",children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:"Ingredient"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:649,columnNumber:19},this),e.jsxDEV(Jt,{children:"Category"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:650,columnNumber:19},this),e.jsxDEV(Jt,{children:"Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:651,columnNumber:19},this),e.jsxDEV(Jt,{children:"Quantity"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:652,columnNumber:19},this),e.jsxDEV(Jt,{children:"Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:653,columnNumber:19},this),e.jsxDEV(Jt,{children:"Reason"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:654,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:648,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:647,columnNumber:15},this),e.jsxDEV(On,{children:d.length===0?e.jsxDEV(bi,{children:e.jsxDEV(Ht,{colSpan:6,className:"text-center text-muted-foreground",children:"No waste records found"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:660,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:659,columnNumber:19},this):d.map(v=>e.jsxDEV(bi,{children:[e.jsxDEV(Ht,{className:"font-medium",children:v.ingredientName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:667,columnNumber:23},this),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:"outline",children:Kn.find(g=>g.id===v.wasteCategory)?.label||v.wasteCategory},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:671,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:670,columnNumber:23},this),e.jsxDEV(Ht,{className:"text-sm text-muted-foreground",children:v.plateCost.recipeName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:676,columnNumber:23},this),e.jsxDEV(Ht,{children:[v.quantityWasted,v.unit]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:679,columnNumber:23},this),e.jsxDEV(Ht,{className:"font-medium",children:Bt(v.costOfWaste)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:683,columnNumber:23},this),e.jsxDEV(Ht,{className:"text-sm",children:v.reason},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:686,columnNumber:23},this)]},v.id,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:666,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:657,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:646,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:645,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:644,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:467,columnNumber:7},this),p>8&&e.jsxDEV($e,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-900/30 dark:bg-yellow-950/20",children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(to,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:701,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:"High Waste Alert"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:703,columnNumber:17},this),e.jsxDEV(Lt,{children:["Waste is at ",p.toFixed(1),"% - above target"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:704,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:702,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:700,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:699,columnNumber:11},this),e.jsxDEV(Ge,{className:"space-y-2 text-sm",children:[e.jsxDEV("p",{children:"Consider reviewing:"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:709,columnNumber:13},this),e.jsxDEV("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[e.jsxDEV("li",{children:"Portion control and plate sizing"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:711,columnNumber:15},this),e.jsxDEV("li",{children:"Prep techniques and training"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:712,columnNumber:15},this),e.jsxDEV("li",{children:"Recipe modifications for better yield"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:713,columnNumber:15},this),e.jsxDEV("li",{children:"Ingredient sourcing and quality"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:714,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:710,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:708,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:698,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/WasteTrackingWorkspace.tsx",lineNumber:241,columnNumber:5},this)}const wb=[{id:"cust-001",name:"Sarah Mitchell",type:"vip",email:"sarah.mitchell@email.com",phone:"+1-555-0101",preferredServiceType:"dine-in",dietaryRestrictions:["vegetarian"],allergies:["shellfish"],preferredMenuItems:["rec-pan-sear-scallops","rec-herb-roasted-chicken"],notes:"Monthly regular, prefers table 4 with a view",createdAt:Date.now()-365*24*60*60*1e3,updatedAt:Date.now()},{id:"cust-002",name:"James & Associates",type:"corporate",email:"events@jamesassoc.com",phone:"+1-555-0102",preferredServiceType:"catering",dietaryRestrictions:[],allergies:[],preferredMenuItems:[],notes:"Books private events, typical 50-100 pax",createdAt:Date.now()-4320*60*60*1e3,updatedAt:Date.now()},{id:"cust-003",name:"The Wilson Party",type:"group",email:"wilson.event@email.com",phone:"+1-555-0103",preferredServiceType:"dine-in",dietaryRestrictions:["gluten-free"],allergies:["peanut","tree-nut"],preferredMenuItems:[],notes:"Annual celebration group, typically 12 people",createdAt:Date.now()-2160*60*60*1e3,updatedAt:Date.now()},{id:"cust-004",name:"Michael Chen",type:"individual",email:"m.chen@email.com",phone:"+1-555-0104",preferredServiceType:"takeout",dietaryRestrictions:[],allergies:["dairy"],preferredMenuItems:["rec-grilled-vegetables","rec-fish-special"],notes:"Frequent weekday lunch visitor",createdAt:Date.now()-1440*60*60*1e3,updatedAt:Date.now()}],kb=[{id:"svc-fine-dining",name:"Fine Dining",description:"Upscale tasting menu experience with wine pairings",serviceType:"dine-in",capacity:40,averageCheckSize:185,seatingTime:180,serviceLevel:"premium",allowedPaymentMethods:["card","cash","check"],enabled:!0,createdAt:Date.now()-365*24*60*60*1e3,updatedAt:Date.now()},{id:"svc-casual-dining",name:"Casual Dining",description:"Relaxed atmosphere with full menu service",serviceType:"dine-in",capacity:120,averageCheckSize:45,seatingTime:90,serviceLevel:"standard",allowedPaymentMethods:["card","cash"],enabled:!0,createdAt:Date.now()-365*24*60*60*1e3,updatedAt:Date.now()},{id:"svc-counter-service",name:"Counter Service",description:"Quick service, order at counter",serviceType:"takeout",capacity:50,averageCheckSize:18,seatingTime:20,serviceLevel:"quick",allowedPaymentMethods:["card","cash"],enabled:!0,createdAt:Date.now()-365*24*60*60*1e3,updatedAt:Date.now()},{id:"svc-catering",name:"Private Catering",description:"Off-premise catering and events",serviceType:"catering",capacity:500,averageCheckSize:75,seatingTime:120,serviceLevel:"premium",allowedPaymentMethods:["card","check"],enabled:!0,createdAt:Date.now()-365*24*60*60*1e3,updatedAt:Date.now()}],Wd=[{id:"evt-001",serviceConcptId:"svc-fine-dining",name:"Chef's Tasting Menu - 2024-12-15",description:"Special 7-course tasting menu with wine pairings",eventType:"special",date:Date.now()+10080*60*1e3,duration:180,expectedCovers:40,confirmedCovers:38,customers:["cust-001","cust-003"],status:"confirmed",createdAt:Date.now()-720*60*60*1e3,updatedAt:Date.now()},{id:"evt-002",serviceConcptId:"svc-catering",name:"Corporate Gala - Morrison Inc",description:"Black-tie catering event",eventType:"catering",date:Date.now()+336*60*60*1e3,duration:240,expectedCovers:150,customers:["cust-002"],status:"planned",createdAt:Date.now()-1080*60*60*1e3,updatedAt:Date.now()},{id:"evt-003",serviceConcptId:"svc-casual-dining",name:"Saturday Dinner Service",eventType:"regular",date:Date.now()+1440*60*1e3,duration:300,expectedCovers:90,customers:[],status:"planned",createdAt:Date.now()-2880*60*1e3,updatedAt:Date.now()}],z1=[{id:"comp-rec-001",strategyId:"comp-vip",eventId:"evt-001",customerId:"cust-001",recipeId:"rec-amuse-bouche",costValue:8.5,reason:"VIP guest",timestamp:Date.now()-7200*60*1e3},{id:"comp-rec-002",strategyId:"comp-complaint",eventId:"evt-003",recipeId:"rec-dessert-special",costValue:12,reason:"Long wait time for entree",approvedBy:"staff-001",timestamp:Date.now()-2880*60*1e3}];function G1(){return[...wb]}function Qc(s){return wb.filter(t=>t.type===s)}function Tu(){return Qc("vip")}function H1(s){return kb.find(t=>t.id===s)}function q1(s){return kb.filter(t=>t.serviceType===s)}function K1(s){return Wd.find(t=>t.id===s)}function Y1(s=30){const t=Date.now(),i=t+s*24*60*60*1e3;return Wd.filter(n=>n.date>=t&&n.date<=i&&n.status!=="cancelled").sort((n,a)=>n.date-a.date)}function Q1(s){return Wd.filter(t=>t.customers.includes(s))}function Z1(s){return z1.filter(t=>t.eventId===s)}function X1(s){return Z1(s).reduce((t,i)=>t+i.costValue,0)}function J1(s){const t=K1(s),i=t?H1(t.serviceConcptId):null;if(!t||!i)return{totalCovers:0,projectedRevenue:0,projectedCogs:0,projectedProfit:0,profitMargin:0,compValue:0,netProfit:0};const n=t.confirmedCovers??t.expectedCovers,a=n*i.averageCheckSize,o=X1(s),l=a-o,r=l*.35,d=l-r,c=l>0?d/l*100:0;return{totalCovers:n,projectedRevenue:a,projectedCogs:r,projectedProfit:d,profitMargin:c,compValue:o,netProfit:d}}function ey(s){return Q1(s).sort((t,i)=>i.date-t.date)}function ty(){const{toast:s}=Ci(),[t,i]=h.useState("customers"),[n,a]=h.useState("all"),[o,l]=h.useState(null),[r,d]=h.useState(!1),c=h.useMemo(()=>n==="all"?G1():n==="vip"?Tu():Qc("corporate"),[n]),f=h.useMemo(()=>Y1(90),[]),b=h.useMemo(()=>q1("dine-in"),[]),D=h.useCallback(()=>{s({title:"Customer Added",description:"New customer profile has been created"}),d(!1)},[s]);return e.jsxDEV("div",{className:"space-y-6 pb-8",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Customers & Service Management"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Manage customer profiles, service concepts, and upcoming events"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:104,columnNumber:7},this),e.jsxDEV(Ki,{value:t,onValueChange:u=>i(u),className:"space-y-4",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-4",children:[e.jsxDEV(bs,{value:"customers",children:"Customers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:120,columnNumber:11},this),e.jsxDEV(bs,{value:"services",children:"Services"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:121,columnNumber:11},this),e.jsxDEV(bs,{value:"events",children:"Events"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV(bs,{value:"analysis",children:"Analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:123,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV(St,{value:"customers",className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Customer Profiles"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:130,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Manage and track customer information"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:131,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:129,columnNumber:13},this),e.jsxDEV(ss,{open:r,onOpenChange:d,children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{className:"gap-1",children:[e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:138,columnNumber:19},this),"New Customer"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:137,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV(is,{className:"sm:max-w-md",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"Add New Customer"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:144,columnNumber:19},this),e.jsxDEV(yi,{children:"Create a new customer profile"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:145,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:143,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Name"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:149,columnNumber:21},this),e.jsxDEV(Xe,{placeholder:"Customer name"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:150,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:148,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Type"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:153,columnNumber:21},this),e.jsxDEV(cs,{children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"Select type"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:156,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:155,columnNumber:23},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"individual",children:"Individual"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:159,columnNumber:25},this),e.jsxDEV(yt,{value:"corporate",children:"Corporate"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:160,columnNumber:25},this),e.jsxDEV(yt,{value:"group",children:"Group"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:161,columnNumber:25},this),e.jsxDEV(yt,{value:"vip",children:"VIP"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:162,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:158,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:154,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:152,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Email"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:167,columnNumber:21},this),e.jsxDEV(Xe,{placeholder:"email@example.com",type:"email"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:168,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:166,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Phone"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:171,columnNumber:21},this),e.jsxDEV(Xe,{placeholder:"+1-555-0000"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:172,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:170,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:147,columnNumber:17},this),e.jsxDEV(Li,{children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>d(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV(ne,{onClick:D,children:"Create Customer"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:175,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:135,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:128,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:n==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:["All (",c.length,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:187,columnNumber:13},this),e.jsxDEV(ne,{variant:n==="vip"?"default":"outline",size:"sm",onClick:()=>a("vip"),children:["VIP (",Tu().length,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV(ne,{variant:n==="corporate"?"default":"outline",size:"sm",onClick:()=>a("corporate"),children:["Corporate (",Qc("corporate").length,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:186,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(u=>e.jsxDEV($e,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(u),children:[e.jsxDEV(Ke,{className:"pb-3",children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:u.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:221,columnNumber:23},this),e.jsxDEV(et,{variant:"outline",className:"mt-1",children:u.type},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:222,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:220,columnNumber:21},this),u.type==="vip"&&e.jsxDEV(et,{className:"bg-amber-500",children:"VIP"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:227,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:219,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:218,columnNumber:17},this),e.jsxDEV(Ge,{className:"space-y-2 text-sm",children:[u.email&&e.jsxDEV("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(jg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:234,columnNumber:23},this),e.jsxDEV("a",{href:`mailto:${u.email}`,className:"hover:underline",children:u.email},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:235,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:233,columnNumber:21},this),u.phone&&e.jsxDEV("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(Vg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:242,columnNumber:23},this),e.jsxDEV("a",{href:`tel:${u.phone}`,className:"hover:underline",children:u.phone},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:243,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:241,columnNumber:21},this),u.dietaryRestrictions.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-1 pt-2",children:u.dietaryRestrictions.map(p=>e.jsxDEV(et,{variant:"secondary",className:"text-xs",children:p},p,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:251,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:249,columnNumber:21},this),u.allergies.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:u.allergies.map(p=>e.jsxDEV(et,{variant:"destructive",className:"text-xs",children:p},p,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:260,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:258,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:231,columnNumber:17},this)]},u.id,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:213,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:211,columnNumber:11},this),o&&e.jsxDEV(ss,{open:!!o,onOpenChange:u=>{u||l(null)},children:e.jsxDEV(is,{className:"sm:max-w-lg",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:o.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:285,columnNumber:19},this),e.jsxDEV(yi,{children:"Customer profile details"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:286,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:284,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Type"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:291,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm",children:o.type},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Service Type"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:295,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm",children:o.preferredServiceType},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:298,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:294,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:301,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm",children:o.email||"N/A"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:302,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:300,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:305,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm",children:o.phone||"N/A"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:306,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:304,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:289,columnNumber:19},this),o.notes&&e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:312,columnNumber:23},this),e.jsxDEV("p",{className:"text-sm",children:o.notes},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:313,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:311,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-sm font-medium text-muted-foreground",children:"Event History"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:318,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm",children:[ey(o.id).length," events"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:321,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:317,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:288,columnNumber:17},this),e.jsxDEV(Li,{children:[e.jsxDEV(ne,{variant:"outline",children:"Edit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:327,columnNumber:19},this),e.jsxDEV(ne,{variant:"destructive",size:"sm",className:"gap-1",children:[e.jsxDEV(vi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:329,columnNumber:21},this),"Delete"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:328,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:326,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:283,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:277,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:127,columnNumber:9},this),e.jsxDEV(St,{value:"services",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Service Concepts"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:341,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Define and manage different service types"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:342,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:340,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:b.map(u=>e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:u.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:353,columnNumber:23},this),e.jsxDEV(Lt,{className:"text-xs mt-1",children:u.serviceType},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:354,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:352,columnNumber:21},this),e.jsxDEV(et,{children:[u.capacity," seats"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:358,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:351,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:350,columnNumber:17},this),e.jsxDEV(Ge,{className:"space-y-3",children:[u.description&&e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:u.description},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:363,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Avg Check Size"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:370,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold",children:Bt(u.averageCheckSize)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:371,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:369,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Seating Time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:376,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold",children:[u.seatingTime," min"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:377,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:375,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:368,columnNumber:19},this),e.jsxDEV("div",{children:e.jsxDEV(et,{variant:u.enabled?"default":"outline",className:"text-xs",children:u.enabled?"Active":"Inactive"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:382,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:381,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:361,columnNumber:17},this)]},u.id,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:349,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:347,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:339,columnNumber:9},this),e.jsxDEV(St,{value:"events",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Upcoming Events"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:398,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Service events and reservations"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:399,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:397,columnNumber:11},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-base",children:"Next 90 Days"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:406,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:405,columnNumber:13},this),e.jsxDEV(Ge,{children:e.jsxDEV(Ds,{children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:"Event"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:413,columnNumber:23},this),e.jsxDEV(Jt,{children:"Service"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:414,columnNumber:23},this),e.jsxDEV(Jt,{children:"Date"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:415,columnNumber:23},this),e.jsxDEV(Jt,{children:"Covers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:416,columnNumber:23},this),e.jsxDEV(Jt,{children:"Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:417,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:412,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:411,columnNumber:19},this),e.jsxDEV(On,{children:f.length===0?e.jsxDEV(bi,{children:e.jsxDEV(Ht,{colSpan:5,className:"text-center text-muted-foreground",children:"No upcoming events"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:423,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:422,columnNumber:23},this):f.slice(0,10).map(u=>e.jsxDEV(bi,{children:[e.jsxDEV(Ht,{className:"font-medium",children:u.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:430,columnNumber:27},this),e.jsxDEV(Ht,{className:"text-sm",children:u.eventType},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:431,columnNumber:27},this),e.jsxDEV(Ht,{className:"text-sm",children:new Date(u.date).toLocaleDateString()},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:434,columnNumber:27},this),e.jsxDEV(Ht,{className:"text-sm",children:u.confirmedCovers??u.expectedCovers},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:437,columnNumber:27},this),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:"outline",className:"text-xs",children:u.status},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:441,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:440,columnNumber:27},this)]},u.id,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:429,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:410,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:409,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:408,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:404,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:396,columnNumber:9},this),e.jsxDEV(St,{value:"analysis",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Service Metrics"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:458,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Performance analysis across events"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:459,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:457,columnNumber:11},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.slice(0,3).map(u=>{const p=J1(u.id);return e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-3",children:[e.jsxDEV(Ze,{className:"text-sm",children:u.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:470,columnNumber:21},this),e.jsxDEV(Lt,{className:"text-xs",children:new Date(u.date).toLocaleDateString()},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:471,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:469,columnNumber:19},this),e.jsxDEV(Ge,{className:"space-y-2 text-xs",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Total Covers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:477,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold",children:p.totalCovers},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:478,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:476,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Projected Revenue"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:481,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold",children:Bt(p.projectedRevenue)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:482,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:480,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Projected Profit"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:487,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold text-green-600",children:Bt(p.netProfit)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:488,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:486,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-muted-foreground",children:"Profit Margin"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:493,columnNumber:23},this),e.jsxDEV("p",{className:"font-semibold",children:[p.profitMargin.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:494,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:492,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:475,columnNumber:19},this)]},u.id,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:468,columnNumber:17},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:464,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:456,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:114,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/CustomerServiceWorkspace.tsx",lineNumber:102,columnNumber:5},this)}const Lo=[{id:"rec-pan-sear-scallops",name:"Pan-Seared Scallops"},{id:"rec-herb-roasted-chicken",name:"Herb-Roasted Chicken"},{id:"rec-grilled-vegetables",name:"Grilled Vegetables"}],Mo={"rec-pan-sear-scallops":65,"rec-herb-roasted-chicken":32,"rec-grilled-vegetables":18},_o={"rec-pan-sear-scallops":65,"rec-herb-roasted-chicken":65,"rec-grilled-vegetables":60};function sy(){Ci();const[s,t]=h.useState("all"),[i,n]=h.useState("rec-pan-sear-scallops"),a=h.useMemo(()=>va(i),[i]),o=h.useMemo(()=>Kr(i),[i]);h.useMemo(()=>Db(i),[i]);const l=h.useMemo(()=>F1(i),[i]),r=h.useMemo(()=>B1(i),[i]),d=h.useMemo(()=>{const u=Mo[i]||50,p=_o[i]||65;return U1(i,u,p)},[i]),c=h.useMemo(()=>a.map(u=>Eb(u.id)).filter(Boolean),[a]),f=h.useMemo(()=>Lo.map(u=>{const p=Kr(u.id),x=Mo[u.id]||50,S=x>0?(x-p)/x*100:0,m=_o[u.id]||65,v=S>=m?"on-target":S<m-5?"below-target":"above-target";return{name:u.name,cost:Math.round(p*100)/100,price:x,margin:Math.round(S*100)/100,status:v}}),[]),b=h.useMemo(()=>{if(c.length===0)return{ingredients:0,labor:0,overhead:0,waste:0};const u=c.reduce((x,S)=>({ingredients:x.ingredients+S.ingredientsCostPercent,labor:x.labor+S.laborCostPercent,overhead:x.overhead+S.overheadCostPercent,waste:x.waste+S.wasteCostPercent}),{ingredients:0,labor:0,overhead:0,waste:0}),p=c.length;return{ingredients:Math.round(u.ingredients/p*100)/100,labor:Math.round(u.labor/p*100)/100,overhead:Math.round(u.overhead/p*100)/100,waste:Math.round(u.waste/p*100)/100}},[c]),D=[{name:"Ingredients",value:b.ingredients},{name:"Labor",value:b.labor},{name:"Overhead",value:b.overhead},{name:"Waste",value:b.waste}];return e.jsxDEV("div",{className:"space-y-6 pb-8",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Plate Costing & Analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:190,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Track and analyze recipe costs, margins, and profit performance"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:191,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:189,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Avg Plate Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:Bt(o)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:205,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[a.length," samples"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:204,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:198,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Price Point"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:214,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:213,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:Bt(Mo[i]||50)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:219,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:["Target margin:"," ",_o[i]||65,"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:222,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:218,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:212,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Profit Margin"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:231,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[d.actualMargin.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:236,columnNumber:13},this),e.jsxDEV("p",{className:`text-xs mt-1 ${d.status==="below-target"?"text-red-600":d.status==="on-target"?"text-green-600":"text-blue-600"}`,children:[d.status==="below-target"&&"Below target",d.status==="on-target"&&"On target",d.status==="above-target"&&"Above target"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:239,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:235,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Cost Change"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:255,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:254,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[Math.abs(r).toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:261,columnNumber:15},this),r>0?e.jsxDEV(Cg,{className:"h-5 w-5 text-red-600"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:265,columnNumber:17},this):e.jsxDEV(Rg,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:267,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:260,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"vs. previous period"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:270,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:259,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:253,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:197,columnNumber:7},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-base",children:"Recipe Selection"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:278,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:277,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV("div",{className:"flex gap-4 items-end",children:e.jsxDEV("div",{className:"space-y-2 flex-1",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Select Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:283,columnNumber:15},this),e.jsxDEV(cs,{value:i,onValueChange:n,children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:286,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:285,columnNumber:17},this),e.jsxDEV(os,{children:Lo.map(u=>e.jsxDEV(yt,{value:u.id,children:u.name},u.id,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:290,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:288,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:281,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:276,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Cost Trend"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:306,columnNumber:13},this),e.jsxDEV(Lt,{children:"Historical plate cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:307,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:305,columnNumber:11},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(kd,{data:l,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV(ca,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:313,columnNumber:17},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:320,columnNumber:17},this),e.jsxDEV(An,{formatter:u=>Bt(u)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:321,columnNumber:17},this),e.jsxDEV(Sd,{type:"monotone",dataKey:"cost",stroke:"#3b82f6",dot:{fill:"#3b82f6"}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:322,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:311,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:310,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:309,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:304,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Cost Distribution"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:336,columnNumber:13},this),e.jsxDEV(Lt,{children:"Average breakdown"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:337,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:335,columnNumber:11},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(jd,{data:D,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:342,columnNumber:17},this),e.jsxDEV(ca,{dataKey:"name",tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:343,columnNumber:17},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:344,columnNumber:17},this),e.jsxDEV(An,{formatter:u=>`${u}%`},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:345,columnNumber:17},this),e.jsxDEV($r,{dataKey:"value",fill:"#8b5cf6"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:346,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:341,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:340,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:339,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:334,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:302,columnNumber:7},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Recipe Costing Comparison"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:356,columnNumber:11},this),e.jsxDEV(Lt,{children:"All tracked recipes summary"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:357,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:355,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV(Ds,{children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:"Recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:364,columnNumber:19},this),e.jsxDEV(Jt,{children:"Avg Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:365,columnNumber:19},this),e.jsxDEV(Jt,{children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:366,columnNumber:19},this),e.jsxDEV(Jt,{children:"Margin"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:367,columnNumber:19},this),e.jsxDEV(Jt,{children:"Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:368,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:363,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:362,columnNumber:15},this),e.jsxDEV(On,{children:f.map(u=>e.jsxDEV(bi,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{const p=Lo.find(x=>x.name===u.name)?.id;p&&n(p)},children:[e.jsxDEV(Ht,{className:"font-medium",children:u.name},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:383,columnNumber:21},this),e.jsxDEV(Ht,{children:Bt(u.cost)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:384,columnNumber:21},this),e.jsxDEV(Ht,{children:Bt(u.price)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:385,columnNumber:21},this),e.jsxDEV(Ht,{className:"font-medium",children:[u.margin.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:386,columnNumber:21},this),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:u.status==="below-target"?"destructive":u.status==="on-target"?"default":"secondary",children:[u.status==="below-target"&&"Below Target",u.status==="on-target"&&"On Target",u.status==="above-target"&&"Above Target"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:390,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:389,columnNumber:21},this)]},u.name,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:373,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:371,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:361,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:360,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:359,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:354,columnNumber:7},this),d.recommendations&&d.recommendations.length>0&&e.jsxDEV($e,{className:"border-amber-200 bg-amber-50 dark:border-amber-900/30 dark:bg-amber-950/20",children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV(Lh,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 mt-0.5"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:417,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:"Recommendations"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:419,columnNumber:17},this),e.jsxDEV(Lt,{children:"Actions to optimize profitability"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:420,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:418,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:416,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:415,columnNumber:11},this),e.jsxDEV(Ge,{children:e.jsxDEV("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground",children:d.recommendations.map((u,p)=>e.jsxDEV("li",{children:u},p,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:427,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:425,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:424,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:414,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/PlateCostingWorkspace.tsx",lineNumber:187,columnNumber:5},this)}const iy=[{supplierId:"sup-sysco",apiType:"sysco",baseUrl:"https://api.syscomarketplace.com/v2",enabled:!0,syncFrequency:"daily",lastSync:Date.now()-7200*1e3,nextScheduledSync:Date.now()+1320*60*1e3,connectionStatus:"connected"},{supplierId:"sup-us-foods",apiType:"us-foods",baseUrl:"https://api.usfoods.com/integration",enabled:!0,syncFrequency:"daily",lastSync:Date.now()-14400*1e3,nextScheduledSync:Date.now()+1200*60*1e3,connectionStatus:"connected"},{supplierId:"sup-gfs",apiType:"gfs",baseUrl:"https://api.gfs.com/catalog",enabled:!0,syncFrequency:"weekly",lastSync:Date.now()-720*60*1e3,nextScheduledSync:Date.now()+7200*60*1e3,connectionStatus:"connected"},{supplierId:"sup-pfg",apiType:"pfg",baseUrl:"https://api.performancefoodgroup.com/v1",enabled:!0,syncFrequency:"weekly",lastSync:Date.now()-1440*60*1e3,nextScheduledSync:Date.now()+8640*60*1e3,connectionStatus:"connected"},{supplierId:"sup-kehe",apiType:"generic-rest",baseUrl:"https://api.kehe.com/supplier-portal",enabled:!0,syncFrequency:"weekly",lastSync:Date.now()-2160*60*1e3,nextScheduledSync:Date.now()+5760*60*1e3,connectionStatus:"connected"}],Tr=[{id:"prod-001",supplierId:"sup-sysco",sku:"SYS-PROD-1001",productName:"Heirloom carrots, peeled",description:"Mixed heirloom carrots, pre-peeled, 25lb box",category:"Produce",packSize:25,packUnit:"lb",currentPrice:45,currency:"USD",priceHistory:[{date:Date.now()-720*60*60*1e3,pricePerUnit:44.5,source:"api"},{date:Date.now()-360*60*60*1e3,pricePerUnit:44.75,source:"api"},{date:Date.now(),pricePerUnit:45,source:"api"}],minOrderQuantity:1,minOrderUnit:"box",leadTimeDays:1,availability:"in-stock",lastUpdated:Date.now(),apiSync:!0},{id:"prod-002",supplierId:"sup-sysco",sku:"SYS-GARL-1042",productName:"Fresh garlic cloves, jumbo",description:"Fresh garlic cloves, jumbo size, 10lb box",category:"Produce",packSize:10,packUnit:"lb",currentPrice:28,currency:"USD",priceHistory:[{date:Date.now()-720*60*60*1e3,pricePerUnit:26,source:"api"},{date:Date.now()-360*60*60*1e3,pricePerUnit:27,source:"api"},{date:Date.now(),pricePerUnit:28,source:"api"}],minOrderQuantity:1,minOrderUnit:"box",leadTimeDays:1,availability:"in-stock",lastUpdated:Date.now(),apiSync:!0},{id:"prod-003",supplierId:"sup-us-foods",sku:"USF-BEEF-2001",productName:"Prime beef short rib, boneless",description:"USDA Prime beef short rib, boneless, 40lb case",category:"Proteins",packSize:40,packUnit:"lb",currentPrice:520,currency:"USD",priceHistory:[{date:Date.now()-720*60*60*1e3,pricePerUnit:480,source:"api"},{date:Date.now()-360*60*60*1e3,pricePerUnit:500,source:"api"},{date:Date.now(),pricePerUnit:520,source:"api"}],minOrderQuantity:1,minOrderUnit:"case",leadTimeDays:1,availability:"in-stock",lastUpdated:Date.now(),apiSync:!0},{id:"prod-004",supplierId:"sup-gfs",sku:"GFS-ALMD-3001",productName:"Whole blanched almonds",description:"Whole blanched almonds, 5lb box",category:"Specialty",packSize:5,packUnit:"lb",currentPrice:38.5,currency:"USD",priceHistory:[{date:Date.now()-720*60*60*1e3,pricePerUnit:36,source:"api"},{date:Date.now()-360*60*60*1e3,pricePerUnit:37.25,source:"api"},{date:Date.now(),pricePerUnit:38.5,source:"api"}],minOrderQuantity:2,minOrderUnit:"box",leadTimeDays:2,availability:"in-stock",lastUpdated:Date.now(),apiSync:!0},{id:"prod-005",supplierId:"sup-kehe",sku:"KEHE-COCO-6089",productName:"Organic coconut milk, 12x1L",description:"Organic coconut milk, 12 cartons of 1L each",category:"Specialty",packSize:12,packUnit:"L",currentPrice:58,currency:"USD",priceHistory:[{date:Date.now()-720*60*60*1e3,pricePerUnit:56,source:"api"},{date:Date.now()-360*60*60*1e3,pricePerUnit:57,source:"api"},{date:Date.now(),pricePerUnit:58,source:"api"}],minOrderQuantity:1,minOrderUnit:"case",leadTimeDays:3,availability:"in-stock",lastUpdated:Date.now(),apiSync:!0}];Date.now()-7200*1e3,Tr.filter(s=>s.supplierId==="sup-sysco"),Date.now()-14400*1e3,Tr.filter(s=>s.supplierId==="sup-us-foods"),Date.now()-720*60*1e3,Tr.filter(s=>s.supplierId==="sup-gfs");const Za=[{id:"po-001",orderId:"SYS-12345678",supplierId:"sup-sysco",supplierName:"Sysco Corporation",status:"delivered",lineItems:[{id:"li-001",supplierProductId:"prod-001",sku:"SYS-PROD-1001",productName:"Heirloom carrots, peeled",quantity:2,unit:"box",unitPrice:45,totalPrice:90},{id:"li-002",supplierProductId:"prod-002",sku:"SYS-GARL-1042",productName:"Fresh garlic cloves, jumbo",quantity:1,unit:"box",unitPrice:28,totalPrice:28}],totalAmount:118,estimatedDeliveryDate:Date.now()-7200*60*1e3,actualDeliveryDate:Date.now()-5760*60*1e3,createdAt:Date.now()-10080*60*1e3,submittedAt:Date.now()-8640*60*1e3,createdBy:"chef-001",notes:"Delivered in excellent condition"},{id:"po-002",orderId:"USF-87654321",supplierId:"sup-us-foods",supplierName:"US Foods",status:"confirmed",lineItems:[{id:"li-003",supplierProductId:"prod-003",sku:"USF-BEEF-2001",productName:"Prime beef short rib, boneless",quantity:1,unit:"case",unitPrice:520,totalPrice:520}],totalAmount:520,estimatedDeliveryDate:Date.now()+1440*60*1e3,createdAt:Date.now()-1440*60*1e3,submittedAt:Date.now()-720*60*1e3,createdBy:"chef-001",notes:"Premium beef for special menu"}],Sb=[{supplierId:"sup-sysco",supplierName:"Sysco Corporation",onTimeDeliveryPercent:96.5,qualityScore:4.7,priceCompetitiveness:3.8,responseTime:.5,minOrderReliability:99.2,averageLeadTime:1.2,totalOrdersHistory:247,successfulOrdersPercent:97.2,lastUpdated:Date.now()},{supplierId:"sup-us-foods",supplierName:"US Foods",onTimeDeliveryPercent:94.2,qualityScore:4.6,priceCompetitiveness:3.9,responseTime:.75,minOrderReliability:98.8,averageLeadTime:1.3,totalOrdersHistory:189,successfulOrdersPercent:95.8,lastUpdated:Date.now()},{supplierId:"sup-gfs",supplierName:"Gordon Food Service",onTimeDeliveryPercent:92.8,qualityScore:4.5,priceCompetitiveness:3.6,responseTime:1,minOrderReliability:97.5,averageLeadTime:1.8,totalOrdersHistory:134,successfulOrdersPercent:93.2,lastUpdated:Date.now()}],ny=[{id:"rfq-001",status:"responded",recipients:["sup-sysco","sup-us-foods","sup-gfs"],items:[{ingredientId:"ing-beef-short-rib",ingredientName:"Prime beef short rib, boneless",quantity:2,unit:"case",targetDeliveryDate:Date.now()+4320*60*1e3},{ingredientId:"ing-scallops",ingredientName:"Diver scallops U10",quantity:1,unit:"case",targetDeliveryDate:Date.now()+2880*60*1e3}],createdAt:Date.now()-2880*60*1e3,sentAt:Date.now()-2880*60*1e3,expiresAt:Date.now()+1440*60*1e3,responses:[{id:"rfq-resp-001",rfqId:"rfq-001",supplierId:"sup-sysco",supplierName:"Sysco Corporation",items:[{ingredientId:"ing-beef-short-rib",sku:"SYS-BEEF-2001",price:500,leadTime:1,availability:"in-stock"},{ingredientId:"ing-scallops",sku:"SYS-SCAL-1001",price:95,leadTime:1,availability:"in-stock"}],totalPrice:595,notes:"Premium quality, ready to ship",validUntil:Date.now()+10080*60*1e3,respondedAt:Date.now()-1440*60*1e3},{id:"rfq-resp-002",rfqId:"rfq-001",supplierId:"sup-us-foods",supplierName:"US Foods",items:[{ingredientId:"ing-beef-short-rib",sku:"USF-BEEF-2001",price:520,leadTime:1,availability:"in-stock"},{ingredientId:"ing-scallops",sku:"USF-SCAL-2001",price:98,leadTime:2,availability:"limited"}],totalPrice:618,validUntil:Date.now()+10080*60*1e3,respondedAt:Date.now()-1080*60*1e3}]}];function ay(s){return iy.find(t=>t.supplierId===s)}function Wu(s){return ay(s)?.connectionStatus??"unknown"}function ry(s,t){return Tr.filter(i=>i.supplierId===s&&i.availability===t)}function oy(s){return ry(s,"in-stock")}function ly(s){return Za.filter(t=>t.status===s)}function jb(s){return Za.filter(t=>t.createdAt>=s.startDate&&t.createdAt<=s.endDate).reduce((t,i)=>t+i.totalAmount,0)}function Vb(s){return Za.filter(t=>t.createdAt>=s.startDate&&t.createdAt<=s.endDate).length}function cy(s){const t=Vb(s);return t>0?jb(s)/t:0}function dy(s){return Sb.find(t=>t.supplierId===s)}function uy(){return Sb.slice().sort((s,t)=>t.onTimeDeliveryPercent-s.onTimeDeliveryPercent)}function my(s){return ny.filter(t=>t.status===s)}function py(s,t){const i=Za.filter(r=>r.supplierId===s&&r.createdAt>=t.startDate&&r.createdAt<=t.endDate),n=i.reduce((r,d)=>r+d.totalAmount,0),a=i.length>0?n/i.length:0,o=new Map;i.forEach(r=>{r.lineItems.forEach(d=>{const c=o.get(d.sku)||{sku:d.sku,productName:d.productName,quantity:0,totalSpent:0};o.set(d.sku,{...c,quantity:c.quantity+d.quantity,totalSpent:c.totalSpent+d.totalPrice})})});const l={averagePrice:a,minPrice:Math.min(...i.map(r=>r.totalAmount)),maxPrice:Math.max(...i.map(r=>r.totalAmount))};return{supplierId:s,period:t,totalOrderAmount:n,totalOrderCount:i.length,averageOrderSize:a,topProducts:Array.from(o.values()).sort((r,d)=>d.totalSpent-r.totalSpent),priceVariation:l}}function fy(){const{toast:s}=Ci(),[t,i]=h.useState("overview"),[n,a]=h.useState("sup-sysco"),[o,l]=h.useState(!1),r=uy(),d=my("responded"),c=h.useMemo(()=>({startDate:Date.now()-2160*60*60*1e3,endDate:Date.now()}),[]),f=jb(c),b=Vb(c),D=cy(c),u=h.useMemo(()=>r.slice(0,5).map(g=>({name:g.supplierName.split(" ")[0],reliability:g.onTimeDeliveryPercent,quality:g.qualityScore*20})),[r]),p=h.useMemo(()=>["draft","submitted","confirmed","preparing","shipped","delivered"].map(N=>({name:N.charAt(0).toUpperCase()+N.slice(1),count:ly(N).length})),[]),x=h.useMemo(()=>dy(n),[n]),S=h.useMemo(()=>Za.filter(g=>g.supplierId===n),[n]),m=h.useMemo(()=>py(n,c),[n,c]),v=h.useCallback(()=>{s({title:"Order Created",description:"Purchase order has been created and is ready to submit"}),l(!1)},[s]);return e.jsxDEV("div",{className:"space-y-6 pb-8",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Supplier Management & Procurement"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Manage suppliers, orders, inventory, and performance metrics"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:165,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:161,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Total Order Value"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:174,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:173,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:Bt(f)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:179,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 90 days"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:172,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Active Orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:186,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:185,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:b},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:191,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Total purchases"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:192,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:190,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:184,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Avg Order Size"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:198,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:Bt(D)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:203,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"per order"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:202,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:196,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Pending RFQs"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:212,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:211,columnNumber:11},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d.length},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:217,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"awaiting response"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:216,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:210,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:171,columnNumber:7},this),e.jsxDEV(Ki,{value:t,onValueChange:g=>i(g),className:"space-y-4",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-5",children:[e.jsxDEV(bs,{value:"overview",children:"Overview"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV(bs,{value:"orders",children:"Orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:231,columnNumber:11},this),e.jsxDEV(bs,{value:"inventory",children:"Inventory"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV(bs,{value:"rfq",children:"RFQ"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(bs,{value:"performance",children:"Performance"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV(St,{value:"overview",className:"space-y-4",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Top Suppliers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:243,columnNumber:17},this),e.jsxDEV(Lt,{children:"By reliability score"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:244,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:242,columnNumber:15},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(jd,{data:u,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:249,columnNumber:21},this),e.jsxDEV(ca,{dataKey:"name",tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:250,columnNumber:21},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:251,columnNumber:21},this),e.jsxDEV(An,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:252,columnNumber:21},this),e.jsxDEV(x0,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:253,columnNumber:21},this),e.jsxDEV($r,{dataKey:"reliability",fill:"#3b82f6",name:"Reliability %"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:254,columnNumber:21},this),e.jsxDEV($r,{dataKey:"quality",fill:"#10b981",name:"Quality"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:255,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:248,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:247,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:246,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:241,columnNumber:13},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Order Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:264,columnNumber:17},this),e.jsxDEV(Lt,{children:"All purchase orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:263,columnNumber:15},this),e.jsxDEV(Ge,{children:e.jsxDEV(In,{width:"100%",height:300,children:e.jsxDEV(kd,{data:p,children:[e.jsxDEV(la,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:270,columnNumber:21},this),e.jsxDEV(ca,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:271,columnNumber:21},this),e.jsxDEV(da,{tick:{fontSize:12}},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:278,columnNumber:21},this),e.jsxDEV(An,{},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:279,columnNumber:21},this),e.jsxDEV(Sd,{type:"monotone",dataKey:"count",stroke:"#8b5cf6"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:280,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:269,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:268,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:262,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:239,columnNumber:11},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Suppliers"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:290,columnNumber:15},this),e.jsxDEV(Lt,{children:"Ranked by reliability"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:291,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:289,columnNumber:13},this),e.jsxDEV(Ge,{children:e.jsxDEV(Ds,{children:e.jsxDEV("div",{className:"space-y-2",children:r.slice(0,5).map(g=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 border rounded hover:bg-muted/50 cursor-pointer",onClick:()=>a(g.supplierId),children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-sm",children:g.supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:303,columnNumber:25},this),e.jsxDEV("div",{className:"flex gap-3 mt-1 text-xs text-muted-foreground",children:[e.jsxDEV("span",{children:["Reliability:"," ",g.onTimeDeliveryPercent.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:305,columnNumber:27},this),e.jsxDEV("span",{children:["Quality: ",g.qualityScore.toFixed(1),"/5"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:309,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:304,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:302,columnNumber:23},this),e.jsxDEV(et,{variant:Wu(g.supplierId)==="connected"?"default":"outline",children:Wu(g.supplierId)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:312,columnNumber:23},this)]},g.supplierId,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:297,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:295,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:294,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:288,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:238,columnNumber:9},this),e.jsxDEV(St,{value:"orders",className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Purchase Orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:334,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Manage all orders"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:335,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:333,columnNumber:13},this),e.jsxDEV(ss,{open:o,onOpenChange:l,children:[e.jsxDEV(xa,{asChild:!0,children:e.jsxDEV(ne,{className:"gap-1",children:[e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:340,columnNumber:19},this),"New Order"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:339,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:338,columnNumber:15},this),e.jsxDEV(is,{className:"sm:max-w-md",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:"Create Purchase Order"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:346,columnNumber:19},this),e.jsxDEV(yi,{children:"Create a new purchase order from a supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:347,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:345,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:353,columnNumber:21},this),e.jsxDEV(cs,{children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{placeholder:"Select supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:356,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:355,columnNumber:23},this),e.jsxDEV(os,{children:r.map(g=>e.jsxDEV(yt,{value:g.supplierId,children:g.supplierName},g.supplierId,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:360,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:358,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:354,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:352,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Expected Delivery"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:371,columnNumber:21},this),e.jsxDEV(Xe,{type:"date"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:372,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:370,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:351,columnNumber:17},this),e.jsxDEV(Li,{children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>l(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:376,columnNumber:19},this),e.jsxDEV(ne,{onClick:v,children:"Create Order"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:379,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:375,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:344,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:337,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:332,columnNumber:11},this),e.jsxDEV($e,{children:e.jsxDEV(Ge,{className:"pt-6",children:e.jsxDEV(Ds,{children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:"Order ID"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:392,columnNumber:23},this),e.jsxDEV(Jt,{children:"Supplier"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:393,columnNumber:23},this),e.jsxDEV(Jt,{children:"Amount"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:394,columnNumber:23},this),e.jsxDEV(Jt,{children:"Delivery Date"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:395,columnNumber:23},this),e.jsxDEV(Jt,{children:"Status"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:396,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:391,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV(On,{children:S.map(g=>e.jsxDEV(bi,{children:[e.jsxDEV(Ht,{className:"font-mono text-xs",children:g.orderId||g.id.slice(0,8)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:402,columnNumber:25},this),e.jsxDEV(Ht,{className:"text-sm",children:g.supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:405,columnNumber:25},this),e.jsxDEV(Ht,{className:"font-medium",children:Bt(g.totalAmount)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:408,columnNumber:25},this),e.jsxDEV(Ht,{className:"text-sm",children:new Date(g.estimatedDeliveryDate).toLocaleDateString()},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:411,columnNumber:25},this),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:g.status==="delivered"?"default":g.status==="cancelled"?"destructive":"outline",children:g.status},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:415,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:414,columnNumber:25},this)]},g.id,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:401,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:399,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:389,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:388,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:387,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:331,columnNumber:9},this),e.jsxDEV(St,{value:"inventory",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Product Inventory"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:439,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Available products from ",r[0]?.supplierName]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:440,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:438,columnNumber:11},this),e.jsxDEV($e,{children:e.jsxDEV(Ge,{className:"pt-6",children:e.jsxDEV(Ds,{children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:"Product"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:451,columnNumber:23},this),e.jsxDEV(Jt,{children:"SKU"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:452,columnNumber:23},this),e.jsxDEV(Jt,{children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:453,columnNumber:23},this),e.jsxDEV(Jt,{children:"Lead Time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:454,columnNumber:23},this),e.jsxDEV(Jt,{children:"Availability"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:455,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:450,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:449,columnNumber:19},this),e.jsxDEV(On,{children:oy("sup-sysco").slice(0,10).map(g=>e.jsxDEV(bi,{children:[e.jsxDEV(Ht,{className:"font-medium text-sm",children:g.productName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:463,columnNumber:27},this),e.jsxDEV(Ht,{className:"text-xs font-mono",children:g.sku},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:466,columnNumber:27},this),e.jsxDEV(Ht,{className:"font-medium",children:Bt(g.currentPrice)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:469,columnNumber:27},this),e.jsxDEV(Ht,{className:"text-sm",children:[g.leadTimeDays," days"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:472,columnNumber:27},this),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:"default",className:"text-xs",children:g.availability},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:476,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:475,columnNumber:27},this)]},g.id,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:462,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:458,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:448,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:447,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:446,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:445,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:437,columnNumber:9},this),e.jsxDEV(St,{value:"rfq",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Request for Quote"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:492,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Active RFQs and supplier responses"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:493,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:491,columnNumber:11},this),d.map(g=>e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(Ze,{className:"text-base",children:["RFQ ",g.id.slice(0,8)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:503,columnNumber:21},this),e.jsxDEV(Lt,{className:"text-xs mt-1",children:[g.recipients.length," suppliers invited"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:506,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:502,columnNumber:19},this),e.jsxDEV(et,{children:[g.responses.length," response",g.responses.length!==1?"s":""]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:510,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:501,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:500,columnNumber:15},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium mb-2",children:"Items Requested"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:519,columnNumber:19},this),e.jsxDEV("ul",{className:"text-xs text-muted-foreground space-y-1",children:g.items.slice(0,3).map((N,w)=>e.jsxDEV("li",{children:["• ",N.ingredientName," (",N.quantity," ",N.unit,")"]},w,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:522,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:520,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:518,columnNumber:17},this),g.responses.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium mb-2",children:"Best Quote"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:531,columnNumber:21},this),e.jsxDEV("div",{className:"p-2 bg-green-50 dark:bg-green-950/20 rounded text-xs",children:[e.jsxDEV("p",{className:"font-medium",children:g.responses.reduce((N,w)=>w.totalPrice<N.totalPrice?w:N).supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:533,columnNumber:23},this),e.jsxDEV("p",{className:"text-green-600 dark:text-green-400 font-semibold",children:Bt(Math.min(...g.responses.map(N=>N.totalPrice)))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:540,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:532,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:530,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:517,columnNumber:15},this)]},g.id,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:499,columnNumber:13},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:490,columnNumber:9},this),e.jsxDEV(St,{value:"performance",className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Supplier Performance"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:556,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Metrics for ",x?.supplierName]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:557,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:555,columnNumber:11},this),x&&e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"On-Time Delivery"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:566,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:565,columnNumber:17},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[x.onTimeDeliveryPercent.toFixed(1),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:571,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[x.totalOrdersHistory," orders tracked"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:574,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:570,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:564,columnNumber:15},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Quality Score"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:582,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:581,columnNumber:17},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[x.qualityScore.toFixed(1),"/5"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:587,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:x.qualityScore>=4.5?"Excellent":x.qualityScore>=3.5?"Good":"Fair"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:590,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:586,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:580,columnNumber:15},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"pb-2",children:e.jsxDEV(Ze,{className:"text-sm font-medium text-muted-foreground",children:"Avg Lead Time"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:602,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:601,columnNumber:17},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[x.averageLeadTime.toFixed(1),"d"]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:607,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"days"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:610,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:606,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:600,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:563,columnNumber:13},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base",children:"Cost Analysis"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:619,columnNumber:15},this),e.jsxDEV(Lt,{children:"90-day spending summary"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:620,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:618,columnNumber:13},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Total Spent"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:625,columnNumber:19},this),e.jsxDEV("p",{className:"text-lg font-semibold",children:Bt(m.totalOrderAmount)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:626,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:624,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Order Count"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:631,columnNumber:19},this),e.jsxDEV("p",{className:"text-lg font-semibold",children:m.totalOrderCount},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:632,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:630,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:623,columnNumber:15},this),m.topProducts.length>0&&e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium mb-2",children:"Top Products"},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:640,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-1 text-xs",children:m.topProducts.slice(0,5).map(g=>e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:g.productName},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:644,columnNumber:25},this),e.jsxDEV("span",{className:"font-medium",children:Bt(g.totalSpent)},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:647,columnNumber:25},this)]},g.sku,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:643,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:641,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:639,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:622,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:617,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:554,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:224,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/saas/SupplierManagementWorkspace.tsx",lineNumber:159,columnNumber:5},this)}const Lu="relative rounded-lg border shadow-sm overflow-hidden bg-white dark:bg-slate-900",Yn=s=>({background:s});function Zc({layout:s,color:t,pageFormat:i,variant:n="full"}){if(n==="icon")return e.jsxDEV("div",{className:"relative h-14 w-24 rounded-lg border bg-white dark:bg-slate-950",style:{borderColor:t.primary},children:[e.jsxDEV("div",{className:"absolute inset-1 rounded-md",style:{border:`1px solid ${t.secondary}`,background:t.background}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:27,columnNumber:9},this),e.jsxDEV("div",{className:`absolute ${s.standardLayout.headerStyle==="centered"?"left-1/2 -translate-x-1/2":"left-2"} top-2 h-1 w-14 rounded-full`,style:Yn(t.primary)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:34,columnNumber:9},this),e.jsxDEV("div",{className:"absolute left-2 right-2 bottom-2 top-6 grid grid-cols-3 gap-1",children:[s.standardLayout.includeImages&&e.jsxDEV("div",{className:"rounded-sm border",style:{borderColor:t.secondary,background:t.background}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:40,columnNumber:13},this),e.jsxDEV("div",{className:s.standardLayout.includeImages?"col-span-2":"col-span-3",children:[e.jsxDEV("div",{className:"mb-1 h-1.5 w-3/4 rounded-full",style:Yn(t.accent)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:53,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"h-1 w-full rounded-full",style:Yn(t.secondary)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:58,columnNumber:15},this),e.jsxDEV("div",{className:"h-1 w-5/6 rounded-full",style:Yn(t.secondary)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:62,columnNumber:15},this),e.jsxDEV("div",{className:"h-1 w-2/3 rounded-full",style:Yn(t.secondary)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:57,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:48,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:38,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:23,columnNumber:7},this);if(i==="index-card"){const u=s.indexCardLayout.headerStyle==="minimal",p=s.indexCardLayout.fontSize==="small"?"text-[10px]":"text-[12px]",x=n==="mini"?280:320,S=n==="mini"?"h-44":"h-48";return e.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[0,1].map(m=>e.jsxDEV("div",{className:`${Lu} w-full border-[1.5px] ${S}`,style:{borderColor:t.secondary,background:t.background,maxWidth:x},children:[u?e.jsxDEV("div",{className:"px-3 pt-3",children:[e.jsxDEV("div",{className:"text-[10px] uppercase tracking-wide",style:{color:t.secondary},children:"Signature Card"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:100,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm font-semibold",style:{color:t.primary},children:"Pan-Roasted Salmon"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:106,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2 h-[2px] w-full",style:Yn(t.accent)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:112,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:99,columnNumber:15},this):e.jsxDEV("div",{className:"border-b px-3 py-2 text-center text-white",style:{background:t.primary,borderColor:t.accent},children:[e.jsxDEV("div",{className:"text-[10px] uppercase opacity-80",children:"Signature Card"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:122,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm font-semibold",children:"Pan-Roasted Salmon"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:125,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:118,columnNumber:15},this),e.jsxDEV("div",{className:`p-3 leading-tight ${p}`,style:{color:t.text},children:[s.indexCardLayout.includeImages&&e.jsxDEV("div",{className:"float-right ml-3",children:e.jsxDEV("div",{className:"h-16 w-20 rounded border",style:{borderColor:t.secondary,background:"#fff"}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:134,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:133,columnNumber:17},this),s.indexCardLayout.contentPriority!=="instructions"&&e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"font-semibold",style:{color:t.primary},children:"Ingredients"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("ul",{className:"ml-4 list-disc space-y-0.5",children:[e.jsxDEV("li",{children:"6 oz salmon"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:149,columnNumber:21},this),e.jsxDEV("li",{children:"Lemon butter"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:150,columnNumber:21},this),e.jsxDEV("li",{children:"Sea salt"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:151,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:148,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:141,columnNumber:17},this),s.indexCardLayout.contentPriority!=="ingredients"&&e.jsxDEV("div",{className:"mt-2 space-y-1",children:[e.jsxDEV("div",{className:"font-semibold",style:{color:t.primary},children:"Steps"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:157,columnNumber:19},this),e.jsxDEV("ol",{className:"ml-4 list-decimal space-y-0.5",children:[e.jsxDEV("li",{children:"Season and sear"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:164,columnNumber:21},this),e.jsxDEV("li",{children:"Finish with butter"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:165,columnNumber:21},this),e.jsxDEV("li",{children:"Plate elegantly"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:166,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:163,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:156,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:128,columnNumber:13},this)]},m,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:89,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:87,columnNumber:7},this)}const a=n==="full"?520:420,o=n==="mini"?"px-4 py-3":"px-6 py-4",l=n==="mini"?"p-4":"p-6",r=n==="mini"?"gap-3":"gap-4",d=n==="mini"?"text-lg":"text-xl",c=n==="mini"?"right-4 top-3 h-8 w-8":"right-6 top-4 h-10 w-10",f=n==="mini"?"p-2.5":"p-3",b=n==="mini"?"gap-3":"gap-4",D=n==="mini"?"text-[9px]":"text-[10px]";return e.jsxDEV("div",{className:"flex w-full justify-center",children:e.jsxDEV("div",{className:`${Lu} w-full`,style:{background:t.background,borderColor:t.primary,maxWidth:a,aspectRatio:"26 / 17"},children:[e.jsxDEV("div",{className:"absolute inset-[6px] rounded-md",style:{border:`1px solid ${t.secondary}`}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV("div",{className:"absolute left-4 -top-2 z-10",children:e.jsxDEV("div",{className:`rounded border ${n==="mini"?"px-1.5 py-0.5 text-[9px]":"px-2 py-0.5 text-[10px]"}`,style:{background:t.background,borderColor:t.primary,color:t.primary},children:s.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:204,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:203,columnNumber:9},this),e.jsxDEV("header",{className:`relative border-b ${o} ${s.standardLayout.headerStyle==="centered"?"text-center":""}`,style:{borderColor:t.primary,fontFamily:s.standardLayout.fontFamily},children:[e.jsxDEV("div",{className:`absolute ${c} rounded-sm border`,style:{borderColor:t.secondary,background:"#fff"}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:226,columnNumber:11},this),e.jsxDEV("div",{className:"text-[11px] uppercase tracking-wider",style:{color:t.secondary},children:"The Garden Bistro"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV("div",{className:`font-bold ${d}`,style:{color:t.primary},children:"Roasted Chicken with Herbs"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:236,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:219,columnNumber:9},this),e.jsxDEV("main",{className:`grid h-full grid-cols-12 ${r} ${l}`,style:{fontFamily:s.standardLayout.fontFamily},children:[s.standardLayout.includeImages&&e.jsxDEV("div",{className:"col-span-4 hidden md:block",children:e.jsxDEV("div",{className:"h-24 w-full rounded border",style:{borderColor:t.secondary,background:"#fff"}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:246,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:245,columnNumber:13},this),e.jsxDEV("div",{className:s.standardLayout.includeImages?"col-span-8":"col-span-12",children:[e.jsxDEV("div",{className:`rounded-md border bg-white/70 text-xs dark:bg-slate-900/40 ${f}`,style:{borderColor:t.accent},children:[e.jsxDEV("div",{className:"text-[11px] font-semibold",style:{color:t.primary},children:"Selling Notes"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:261,columnNumber:15},this),e.jsxDEV("p",{className:"mt-1 text-xs",style:{color:t.secondary},children:"Classic, comforting, and aromatic—perfectly golden and juicy."},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:257,columnNumber:13},this),e.jsxDEV("div",{className:`mt-3 grid grid-cols-2 ${b} text-[11px]`,children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold",style:{color:t.primary},children:"Ingredients"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:273,columnNumber:17},this),e.jsxDEV("ul",{className:"ml-4 list-disc space-y-0.5",children:[e.jsxDEV("li",{children:"Whole chicken"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:277,columnNumber:19},this),e.jsxDEV("li",{children:"Fresh thyme"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:278,columnNumber:19},this),e.jsxDEV("li",{children:"Garlic & lemon"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:279,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:276,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:272,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-semibold",style:{color:t.primary},children:"Preparation"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("ol",{className:"ml-4 list-decimal space-y-0.5",children:[e.jsxDEV("li",{children:"Season generously"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:287,columnNumber:19},this),e.jsxDEV("li",{children:"Roast until crisp"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:288,columnNumber:19},this),e.jsxDEV("li",{children:"Rest and carve"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:289,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("div",{className:`mt-4 grid grid-cols-2 ${b} ${D}`,children:[e.jsxDEV("div",{className:`rounded-md border bg-white/70 dark:bg-slate-900/40 ${n==="mini"?"p-2":"p-2.5"}`,style:{borderColor:t.accent},children:[e.jsxDEV("div",{className:"font-semibold",style:{color:t.primary},children:"Beverage Suggestions"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:300,columnNumber:17},this),e.jsxDEV("ul",{className:"ml-4 list-disc space-y-0.5",children:[e.jsxDEV("li",{children:"Chardonnay"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:304,columnNumber:19},this),e.jsxDEV("li",{children:"Pinot Noir"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:305,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:303,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV("div",{className:`rounded-md border bg-white/70 text-right dark:bg-slate-900/40 ${n==="mini"?"p-2":"p-2.5"}`,style:{borderColor:t.accent,color:t.secondary},children:"Dist Date: 06/01/2025"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:308,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:252,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:240,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:190,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesPreview.tsx",lineNumber:189,columnNumber:5},this)}const hy=["Dinner Fork","Salad Fork","Dessert Fork","Dinner Knife","Butter Knife","Steak Knife","Teaspoon","Tablespoon","Soup Spoon","Bouillon Spoon","Espresso Spoon","Chopsticks","Fondue Fork","Serving Spoon","Serving Fork","Tongs"],Yr=[{id:"heritage-brass",name:"Heritage Brass",primary:"#d4a373",secondary:"#8d6b4f",accent:"#f4d7b6",background:"#fdfaf5",text:"#2f261c"},{id:"midnight-platinum",name:"Midnight Platinum",primary:"#7d9fe6",secondary:"#3c4d74",accent:"#b7c6f3",background:"#0f1729",text:"#f8fafc"},{id:"seaside-glass",name:"Seaside Glass",primary:"#2d9cdb",secondary:"#1f6f93",accent:"#b5e2f8",background:"#f2fbff",text:"#123544"},{id:"terra-cotta",name:"Terra Cotta",primary:"#c06014",secondary:"#8b4513",accent:"#f7c59f",background:"#fff8f1",text:"#2b1d12"},{id:"custom",name:"Custom",primary:"#1f2937",secondary:"#4b5563",accent:"#9ca3af",background:"#ffffff",text:"#111827"}],Ld=[{id:"luccca-briefing",name:"LUCCCA Service Sheet",description:"Service briefing modeled on the LUCCCA Word template with structured sections for dish components, serviceware, allergens, and beverage pairings.",standardLayout:{id:"standard-luccca",name:"LUCCCA Service Sheet",description:"Two-column template with dedicated tables for dish components, serviceware, allergens, and beverage pairings.",headerStyle:"left",recipeLayout:"two-column",includeImages:!0,includeNutrition:!0,fontFamily:"'Arial', 'Helvetica', sans-serif",preferredOrientation:"vertical"},indexCardLayout:{headerStyle:"centered",contentPriority:"balanced",includeImages:!0,fontSize:"regular"}},{id:"brasserie-classic",name:"Brasserie Classic",description:"Wide hero header with chef notes, two column detail, and pacing footer cues.",standardLayout:{id:"standard-brasserie",name:"Brasserie Classic",description:"Hero header with chef notes and dual column detail.",headerStyle:"left",recipeLayout:"two-column",includeImages:!0,includeNutrition:!0,fontFamily:"'Playfair Display', 'Times New Roman', serif",preferredOrientation:"vertical"},indexCardLayout:{headerStyle:"centered",contentPriority:"balanced",includeImages:!0,fontSize:"regular"}},{id:"tasting-flight",name:"Tasting Flight",description:"Three course tasting flight with plating rhythm and beverage cues.",standardLayout:{id:"standard-flight",name:"Tasting Flight",description:"Horizontal card style layout for tasting progression.",headerStyle:"split",recipeLayout:"compact",includeImages:!1,includeNutrition:!1,fontFamily:"'Source Sans Pro', 'Helvetica', sans-serif",preferredOrientation:"horizontal"},indexCardLayout:{headerStyle:"minimal",contentPriority:"instructions",includeImages:!1,fontSize:"small"}},{id:"banquet-rally",name:"Banquet Rally",description:"High throughput banquet rally sheets organized by station timeline.",standardLayout:{id:"standard-banquet",name:"Banquet Rally",description:"Station timeline with equipment and staffing cues.",headerStyle:"centered",recipeLayout:"narrative",includeImages:!0,includeNutrition:!1,fontFamily:"'IBM Plex Sans', 'Helvetica', sans-serif",preferredOrientation:"vertical"},indexCardLayout:{headerStyle:"centered",contentPriority:"ingredients",includeImages:!1,fontSize:"regular"}},{id:"mixology-deck",name:"Mixology Deck",description:"Compact beverage cards with glassware, garnish, and selling points.",standardLayout:{id:"standard-mixology",name:"Mixology Deck",description:"Compact beverage sheets with pairing and garnish cues.",headerStyle:"split",recipeLayout:"compact",includeImages:!0,includeNutrition:!1,fontFamily:"'Montserrat', 'Helvetica', sans-serif",preferredOrientation:"horizontal"},indexCardLayout:{headerStyle:"minimal",contentPriority:"balanced",includeImages:!0,fontSize:"small"}}];function Mu(s=Ld[0],t=Yr[0]){const i=new Date().toISOString();return{id:"",title:"",distributionDate:i.slice(0,10),companyName:"",outletName:"",layout:s,colorScheme:t,orientation:"vertical",pageFormat:"standard",cardsPerPage:2,logos:[],selectedRecipes:[],createdAt:i,updatedAt:i}}function by({config:s,onUpdate:t}){const[i,n]=h.useState(!1),[a,o]=h.useState(!1),[l,r]=h.useState(null),d=s.colorScheme.id==="custom",[c,f]=h.useState(()=>d?s.colorScheme:{...Yr.find(v=>v.id==="custom"),primary:"#1f2937",secondary:"#4b5563",accent:"#9ca3af",background:"#ffffff",text:"#111827"}),b=v=>{const g={...s,layout:v};v.standardLayout.preferredOrientation&&v.standardLayout.preferredOrientation!==s.orientation&&(g.orientation=v.standardLayout.preferredOrientation),t(g)},D=v=>{t({...s,colorScheme:v})},u=(v,g)=>{const N={...c,[v]:g};f(N),d&&D({...N,id:"custom",name:N.name||"Custom"})},p=h.useMemo(()=>Ld,[]),x="overflow-hidden rounded-2xl border border-white/70 bg-white/90 shadow-[0_28px_85px_-58px_rgba(15,23,42,0.35)] backdrop-blur-lg transition-shadow dark:border-cyan-500/25 dark:bg-slate-950/70",S="rounded-xl border border-white/60 bg-white/75 p-3.5 shadow-sm backdrop-blur-sm transition dark:border-cyan-500/30 dark:bg-slate-950/50",m=v=>{if(!v?.length)return;const g=Math.max(0,2-s.logos.length);Array.from(v).slice(0,g).forEach(w=>{const A=new FileReader;A.onload=I=>{const B=I.target?.result;t({...s,logos:[...s.logos,B]})},A.readAsDataURL(w)})};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV($e,{className:x,children:[e.jsxDEV(Ke,{className:"space-y-2 border-b border-white/60 px-5 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV(Ua,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:109,columnNumber:13},this)," Layout Preset"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:108,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:107,columnNumber:9},this),e.jsxDEV(Ge,{className:"px-5 pb-5 pt-4",children:e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2 2xl:grid-cols-3",children:p.map(v=>{const g=s.layout.id===v.id;return e.jsxDEV("div",{className:`${S} ${g?"border-primary/70 bg-primary/10 shadow-md":"hover:border-primary/40"}`,role:"button",tabIndex:0,onClick:()=>b(v),onKeyDown:N=>N.key==="Enter"&&b(v),children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-[13px] font-semibold leading-tight",children:v.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:133,columnNumber:23},this),e.jsxDEV("p",{className:"mt-1 text-[11px] leading-snug text-muted-foreground line-clamp-3",children:v.description},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:136,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:132,columnNumber:21},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV(Zc,{layout:v,color:s.colorScheme,pageFormat:s.pageFormat,variant:"icon"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:141,columnNumber:23},this),e.jsxDEV(ne,{variant:"outline",size:"sm",className:"h-8 px-4",onClick:N=>{N.stopPropagation(),r(v),o(!0)},children:"Preview"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:147,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:140,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:131,columnNumber:19},this)},v.id,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:117,columnNumber:17},this)})},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:113,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:112,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:106,columnNumber:7},this),e.jsxDEV($e,{className:x,children:[e.jsxDEV(Ke,{className:"space-y-2 border-b border-white/60 px-5 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV(Ih,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:171,columnNumber:13},this)," Color Scheme"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:170,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:169,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-5 px-5 pb-5 pt-4",children:[e.jsxDEV("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3",children:Yr.map(v=>e.jsxDEV("button",{type:"button",className:`${S} w-full text-left ${s.colorScheme.id===v.id?"border-primary/70 bg-primary/10 shadow-md":"hover:border-primary/40"}`,onClick:()=>D(v),children:[e.jsxDEV("div",{className:"flex gap-1",children:[e.jsxDEV("span",{className:"h-4 w-4 rounded",style:{background:v.primary}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:188,columnNumber:19},this),e.jsxDEV("span",{className:"h-4 w-4 rounded",style:{background:v.secondary}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:192,columnNumber:19},this),e.jsxDEV("span",{className:"h-4 w-4 rounded",style:{background:v.accent}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:196,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:187,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2 text-[13px] font-medium leading-tight",children:v.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:201,columnNumber:17},this)]},v.id,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:177,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:175,columnNumber:11},this),e.jsxDEV("div",{className:`${S} ${d?"border-primary/70 bg-primary/10 shadow-md":""}`,children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[13px]",children:[e.jsxDEV("div",{className:"font-semibold",children:"Custom Palette"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:214,columnNumber:15},this),e.jsxDEV(ne,{variant:d?"default":"outline",size:"sm",onClick:()=>D({...c,id:"custom",name:c.name||"Custom"}),children:d?"Active":"Use Custom"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:213,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[["primary","Primary"],["secondary","Secondary"],["accent","Accent"],["background","Background"],["text","Text"]].map(([v,g])=>e.jsxDEV("div",{className:"space-y-1.5 text-[11px]",children:[e.jsxDEV(Et,{className:"leading-snug text-[11px]",children:g},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:240,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("input",{type:"color",value:c[v],className:"h-8 w-8 rounded border border-white/60 bg-white",onChange:N=>u(v,N.target.value)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:242,columnNumber:21},this),e.jsxDEV(Xe,{value:c[v],onChange:N=>u(v,N.target.value)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:250,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:241,columnNumber:19},this)]},v,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:239,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:229,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:208,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:168,columnNumber:7},this),e.jsxDEV($e,{className:x,children:[e.jsxDEV(Ke,{className:"space-y-2 border-b border-white/60 px-5 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV(Hi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:267,columnNumber:13},this)," Page Format & Orientation"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:266,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:265,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-4 px-5 pb-5 pt-4",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(ne,{variant:s.pageFormat==="standard"?"default":"outline",onClick:()=>t({...s,pageFormat:"standard"}),className:"flex items-center gap-2",children:[e.jsxDEV(Hi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:277,columnNumber:15},this),' Standard (8.5" × 11")']},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:272,columnNumber:13},this),e.jsxDEV(ne,{variant:s.pageFormat==="index-card"?"default":"outline",onClick:()=>t({...s,pageFormat:"index-card"}),className:"flex items-center gap-2",children:[e.jsxDEV(Pg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:286,columnNumber:15},this),' Index Cards (3" × 5")']},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:279,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:271,columnNumber:11},this),s.pageFormat==="standard"?e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:s.orientation==="vertical"?"default":"outline",onClick:()=>t({...s,orientation:"vertical"}),size:"sm",className:"flex items-center gap-2",children:[e.jsxDEV(Ig,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:300,columnNumber:17},this)," Portrait"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:292,columnNumber:15},this),e.jsxDEV(ne,{variant:s.orientation==="horizontal"?"default":"outline",onClick:()=>t({...s,orientation:"horizontal"}),size:"sm",className:"flex items-center gap-2",children:[e.jsxDEV(Ag,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:312,columnNumber:17},this)," Landscape"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:291,columnNumber:13},this):e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:s.cardsPerPage===1?"default":"outline",onClick:()=>t({...s,cardsPerPage:1}),size:"sm",children:"1 Card Per Page"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:317,columnNumber:15},this),e.jsxDEV(ne,{variant:s.cardsPerPage===2?"default":"outline",onClick:()=>t({...s,cardsPerPage:2}),size:"sm",children:"2 Cards Per Page"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:324,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:316,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:270,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:264,columnNumber:7},this),e.jsxDEV($e,{className:x,children:[e.jsxDEV(Ke,{className:"space-y-2 border-b border-white/60 px-5 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV(Tg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:339,columnNumber:13},this)," Company Information"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:338,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:337,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-4 px-5 pb-5 pt-4",children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{htmlFor:"company-name",className:"text-xs",children:"Company Name"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:345,columnNumber:15},this),e.jsxDEV(Xe,{id:"company-name",value:s.companyName,onChange:v=>t({...s,companyName:v.target.value}),placeholder:"Restaurant name"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:348,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:344,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{htmlFor:"outlet-name",className:"text-xs",children:"Outlet Name"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:358,columnNumber:15},this),e.jsxDEV(Xe,{id:"outlet-name",value:s.outletName,onChange:v=>t({...s,outletName:v.target.value}),placeholder:"Location or concept"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:361,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:357,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:343,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{children:"Restaurant Logos (max 2)"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:372,columnNumber:13},this),e.jsxDEV("div",{className:`${S} border-2 border-dashed ${i?"border-primary/60 bg-primary/10":""} text-center`,onDragOver:v=>{v.preventDefault(),n(!0)},onDragLeave:()=>n(!1),onDrop:v=>{v.preventDefault(),n(!1),m(v.dataTransfer.files)},children:s.logos.length<2?e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(Mh,{className:"mx-auto h-8 w-8 text-muted-foreground"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Drag & drop logo files here, or click to browse"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:391,columnNumber:19},this),e.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",id:"server-notes-logo-upload",onChange:v=>m(v.target.files)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:394,columnNumber:19},this),e.jsxDEV(ne,{variant:"outline",onClick:()=>document.getElementById("server-notes-logo-upload")?.click(),children:"Browse files"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:402,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:389,columnNumber:17},this):e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Maximum logos uploaded."},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:414,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:373,columnNumber:13},this),s.logos.length>0&&e.jsxDEV("div",{className:"flex gap-3",children:s.logos.map((v,g)=>e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:v,alt:`Logo ${g+1}`,className:"h-16 w-16 rounded border border-white/60 bg-white object-contain dark:border-cyan-500/30"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:423,columnNumber:21},this),e.jsxDEV(ne,{variant:"destructive",size:"icon",className:"absolute -right-2 -top-2 h-6 w-6",onClick:()=>{const N=[...s.logos];N.splice(g,1),t({...s,logos:N})},children:"×"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:428,columnNumber:21},this)]},g,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:422,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:420,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:371,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:342,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:336,columnNumber:7},this),e.jsxDEV($e,{className:x,children:[e.jsxDEV(Ke,{className:"space-y-2 border-b border-white/60 px-5 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV(_h,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:451,columnNumber:13},this)," Document Information"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:450,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:449,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-4 px-5 pb-5 pt-4",children:[e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{htmlFor:"document-title",className:"text-xs",children:"Document Title"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:456,columnNumber:13},this),e.jsxDEV(Xe,{id:"document-title",value:s.title,onChange:v=>t({...s,title:v.target.value}),placeholder:"Seasonal menu briefing"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:459,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:455,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{htmlFor:"distribution-date",className:"text-xs",children:"Distribution Date"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:469,columnNumber:13},this),e.jsxDEV(Xe,{id:"distribution-date",type:"date",value:s.distributionDate.slice(0,10),onChange:v=>t({...s,distributionDate:v.target.value})},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:472,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:468,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV(Et,{htmlFor:"document-notes",className:"text-xs",children:"Distribution Notes"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:482,columnNumber:13},this),e.jsxDEV($s,{id:"document-notes",placeholder:"Optional notes shared with service team or attachments to include...",value:s.distributionNotes??"",onChange:v=>t({...s,distributionNotes:v.target.value}),rows:3},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:485,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:481,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:454,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:448,columnNumber:7},this),e.jsxDEV(ss,{open:a,onOpenChange:o,children:e.jsxDEV(is,{className:"max-w-3xl",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:l?.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:501,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:500,columnNumber:11},this),l&&e.jsxDEV(Zc,{layout:l,color:s.colorScheme,pageFormat:s.pageFormat},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:504,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:499,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:498,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesConfig.tsx",lineNumber:105,columnNumber:5},this)}const Ny=["menuPrice","menu_price","price","menuItemPrice","menu_item_price","sellingPrice","selling_price"],xy=["menuName","menu_item_name","menuItemName","menu_title","menuTitle"],gy=["menuCategory","menu_category","menuGroup","menu_group","menuSection","menu_section","menuFolder","menu_folder"],Xc=[{key:"appetizer",label:"Appetizer"},{key:"salad",label:"Salad"},{key:"soups",label:"Soups"},{key:"starters",label:"Starters"},{key:"mains",label:"Mains"},{key:"dessert",label:"Dessert"}],vy=s=>{if(typeof s=="number"&&Number.isFinite(s))return s;if(typeof s=="string"){const i=s.replace(/[^0-9.,-]/g,"").replace(/,(?=\d{3}\b)/g,"").replace(/,/g,""),n=Number.parseFloat(i);return Number.isFinite(n)?n:null}return null},yy=s=>s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),Dy=s=>{const t=yy(s.trim());return t?t.includes("appet")?"appetizer":t.includes("salad")?"salad":t.includes("soup")||t.includes("bisque")?"soups":t.includes("starter")||t.includes("snack")||t.includes("tapa")?"starters":t.includes("main")||t.includes("entree")||t.includes("platter")||t.includes("large")||t.includes("vegetable")||t.includes("grill")?"mains":t.includes("dessert")||t.includes("pastry")||t.includes("sweet")?"dessert":null:null},Md=s=>s.extra??void 0,Qr=s=>{const t=Md(s)??{};for(const i of xy){const n=t[i];if(typeof n=="string"&&n.trim())return n.trim()}return s.title},Jc=s=>{const t=Md(s)??{};let i=null;for(const o of Ny)if(i=vy(t[o]),i!==null)break;if(i===null)return null;const n=t.currency||t.currencyCode||t.currency_code,a=typeof n=="string"&&n.trim().length?n.trim().toUpperCase():"USD";return`${Lf(a)}${i.toFixed(2)}`},_u=s=>{const t=Md(s)??{},i=[];for(const n of gy){const a=t[n];typeof a=="string"&&a.trim()&&i.push(a)}s.course&&i.push(s.course),s.tags?.length&&i.push(...s.tags);for(const n of i){const a=Dy(n);if(a)return a}return null},Ey=s=>s?Xc.find(t=>t.key===s)?.label??"":"",wy="Other Items";function ky({availableRecipes:s,selectedRecipes:t,onRecipesChange:i}){const[n,a]=h.useState(null),[o,l]=h.useState(""),r=h.useMemo(()=>new Set(t.map(u=>u.recipe.id)),[t]),d=h.useMemo(()=>{const u=o.trim().toLowerCase();return s.map(p=>{const x=Qr(p),S=Jc(p),m=_u(p);return{recipe:p,menuName:x,menuPrice:S,category:m}}).filter(({recipe:p,menuName:x})=>u?x.toLowerCase().includes(u)||(p.description??"").toLowerCase().includes(u)||p.tags?.some(S=>S.toLowerCase().includes(u))||p.title.toLowerCase().includes(u):!0).sort((p,x)=>p.menuName.localeCompare(x.menuName))},[s,o]),c=h.useMemo(()=>{const u=new Map;for(const x of Xc)u.set(x.key,[]);const p=[];for(const x of d)x.category&&u.has(x.category)?u.get(x.category).push(x):p.push(x);return{buckets:u,orphans:p}},[d]),f=u=>{const p=t.find(x=>x.recipe.id===u.id);i(p?t.filter(x=>x.recipe.id!==u.id):[...t,{recipe:u,order:t.length,wineSelection:"",sellingNotes:"",serviceInstructions:"",silverwareRequired:[]}])},b=(u,p)=>{const x=t.findIndex(g=>g.recipe.id===u);if(x===-1)return;const S=x+p;if(S<0||S>=t.length)return;const m=[...t],[v]=m.splice(x,1);m.splice(S,0,v),i(m.map((g,N)=>({...g,order:N})))},D=(u,p)=>{i(t.map(x=>x.recipe.id===u?{...x,...p}:x))};return e.jsxDEV("div",{className:"space-y-5",children:[t.length>0&&e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"space-y-1 px-3 py-2.5",children:e.jsxDEV(Ze,{className:"flex flex-wrap items-center justify-between gap-2 text-sm",children:[e.jsxDEV("span",{className:"font-medium",children:["Selected Menu Items (",t.length,")"]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:140,columnNumber:15},this),e.jsxDEV(et,{variant:"secondary",className:"text-[11px]",children:"Reorder with arrows"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:139,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:138,columnNumber:11},this),e.jsxDEV(Ge,{className:"space-y-2.5 px-3 pb-3 pt-0",children:t.map((u,p)=>{const x=Qr(u.recipe),S=Jc(u.recipe),m=Ey(_u(u.recipe))||u.recipe.course||"—";return e.jsxDEV("div",{className:"rounded-lg border px-2.5 py-2 text-[12px]",children:e.jsxDEV("div",{className:"flex min-w-0 items-start gap-2.5",children:[e.jsxDEV("div",{className:"flex flex-col gap-1.5",children:[e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-5.5 w-5.5",onClick:()=>b(u.recipe.id,-1),disabled:p===0,"aria-label":"Move up",children:e.jsxDEV(Wg,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:166,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:158,columnNumber:23},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-5.5 w-5.5",onClick:()=>b(u.recipe.id,1),disabled:p===t.length-1,"aria-label":"Move down",children:e.jsxDEV(Lg,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:176,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:168,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:157,columnNumber:21},this),e.jsxDEV("img",{src:u.recipe.imageDataUrls?.[0]||u.recipe.image||"https://cdn.builder.io/api/v1/image/assets%2Fplaceholder",alt:u.recipe.title,className:"h-12 w-12 rounded object-cover"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:179,columnNumber:21},this),e.jsxDEV("div",{className:"min-w-0 flex-1 space-y-1",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV("h4",{className:"truncate text-[12px] font-semibold",children:x},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:191,columnNumber:27},this),e.jsxDEV("p",{className:"text-[11px] text-muted-foreground",children:[m,S?` • ${S}`:""]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:192,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:190,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-1.25 text-[11px]",children:[e.jsxDEV(et,{variant:"outline",className:"text-[10px]",children:["#",p+1]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:198,columnNumber:27},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:()=>a(n===u.recipe.id?null:u.recipe.id),"aria-label":"Toggle details",children:e.jsxDEV(Ya,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:209,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:201,columnNumber:27},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:()=>f(u.recipe),"aria-label":"Remove menu item",children:e.jsxDEV(cn,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:217,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:211,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:197,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:189,columnNumber:23},this),n===u.recipe.id&&e.jsxDEV("div",{className:"mt-2.5 grid gap-2.5 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Et,{htmlFor:`wine-${u.recipe.id}`,className:"flex items-center gap-1.5 text-[11px]",children:[e.jsxDEV(Mg,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:225,columnNumber:31},this)," Wine Pairing & Selection"]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:224,columnNumber:29},this),e.jsxDEV($s,{id:`wine-${u.recipe.id}`,placeholder:"Recommended pairings, glass pours, upsell notes...",value:u.wineSelection||"",onChange:v=>D(u.recipe.id,{wineSelection:v.target.value}),rows:2},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:227,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:223,columnNumber:27},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Et,{htmlFor:`sell-${u.recipe.id}`,className:"text-[11px]",children:"Server Selling Notes"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:240,columnNumber:29},this),e.jsxDEV($s,{id:`sell-${u.recipe.id}`,placeholder:"Talking points, ingredient sourcing, flavor highlights...",value:u.sellingNotes||"",onChange:v=>D(u.recipe.id,{sellingNotes:v.target.value}),rows:2},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:243,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:239,columnNumber:27},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Et,{htmlFor:`service-${u.recipe.id}`,className:"text-[11px]",children:"Service Instructions"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:256,columnNumber:29},this),e.jsxDEV($s,{id:`service-${u.recipe.id}`,placeholder:"Pass timing, finishing garnish, plating calls...",value:u.serviceInstructions||"",onChange:v=>D(u.recipe.id,{serviceInstructions:v.target.value}),rows:2},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:259,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:255,columnNumber:27},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Et,{className:"flex items-center gap-1.5 text-[11px]",children:[e.jsxDEV(_g,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:273,columnNumber:31},this)," Required Silverware"]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:272,columnNumber:29},this),e.jsxDEV("div",{className:"grid max-h-28 grid-cols-2 gap-1.5 overflow-y-auto text-xs",children:hy.map(v=>{const g=u.silverwareRequired?.includes(v)??!1;return e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV(hn,{id:`${u.recipe.id}-${v}`,checked:g,onCheckedChange:N=>{const w=new Set(u.silverwareRequired??[]);N?w.add(v):w.delete(v),D(u.recipe.id,{silverwareRequired:Array.from(w)})}},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:280,columnNumber:37},this),e.jsxDEV(Et,{htmlFor:`${u.recipe.id}-${v}`,className:"text-[11px]",children:v},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:295,columnNumber:37},this)]},v,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:279,columnNumber:35},this)})},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:275,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:271,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:222,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:188,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:156,columnNumber:19},this)},u.recipe.id,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:155,columnNumber:17},this)})},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:146,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:137,columnNumber:9},this),e.jsxDEV($e,{children:[e.jsxDEV(Ke,{className:"space-y-2 px-3 py-2.5",children:e.jsxDEV(Ze,{className:"flex flex-wrap items-center justify-between gap-2 text-sm",children:[e.jsxDEV("span",{className:"font-medium",children:"Menu Library"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:317,columnNumber:13},this),e.jsxDEV(Xe,{placeholder:"Search menu items, tags, notes...",value:o,onChange:u=>l(u.target.value),className:"h-8 w-full min-w-[200px] text-sm md:w-60"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:318,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:315,columnNumber:9},this),e.jsxDEV(Ge,{className:"space-y-4 px-3 pb-3 pt-0",children:[Xc.map(u=>{const p=c.buckets.get(u.key)??[];return p.length?e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:[e.jsxDEV("span",{children:u.label},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:333,columnNumber:19},this),e.jsxDEV("span",{children:p.length},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:334,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:332,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-1.5",children:p.map(({recipe:x,menuName:S,menuPrice:m})=>{const v=r.has(x.id),g=`menu-item-${x.id}`;return e.jsxDEV("div",{role:"button",tabIndex:0,onClick:()=>f(x),onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),f(x))},className:`flex items-center gap-2 rounded-md border px-2.5 py-2 text-left text-[12px] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 focus-visible:ring-offset-1 ${v?"border-primary/70 bg-primary/10":"border-muted bg-background/80 hover:border-foreground/40"}`,children:[e.jsxDEV(hn,{id:g,checked:v,onCheckedChange:()=>f(x),onClick:N=>N.stopPropagation()},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:358,columnNumber:25},this),e.jsxDEV("label",{htmlFor:g,className:"flex w-full items-center gap-2",children:[e.jsxDEV("img",{src:x.imageDataUrls?.[0]||x.image||"https://cdn.builder.io/api/v1/image/assets%2Fplaceholder",alt:x.title,className:"h-10 w-10 flex-shrink-0 rounded object-cover"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:365,columnNumber:27},this),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"truncate font-semibold",children:S},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:376,columnNumber:31},this),m&&e.jsxDEV("span",{className:"text-[11px] font-medium text-primary/80",children:m},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:378,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:375,columnNumber:29},this),e.jsxDEV("p",{className:"truncate text-[11px] text-muted-foreground",children:x.description||"No description provided."},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:383,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:374,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:364,columnNumber:25},this)]},x.id,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:341,columnNumber:23},this)})},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:336,columnNumber:17},this)]},u.key,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:331,columnNumber:15},this):null}),c.orphans.length>0&&e.jsxDEV("div",{className:"space-y-1.5",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[11px] font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:[e.jsxDEV("span",{children:wy},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:399,columnNumber:17},this),e.jsxDEV("span",{children:c.orphans.length},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:400,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:398,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-1.5",children:c.orphans.map(({recipe:u,menuName:p,menuPrice:x})=>{const S=r.has(u.id),m=`menu-item-${u.id}`;return e.jsxDEV("div",{role:"button",tabIndex:0,onClick:()=>f(u),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),f(u))},className:`flex items-center gap-2 rounded-md border px-2.5 py-2 text-left text-[12px] transition focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/60 focus-visible:ring-offset-1 ${S?"border-primary/70 bg-primary/10":"border-muted bg-background/80 hover:border-foreground/40"}`,children:[e.jsxDEV(hn,{id:m,checked:S,onCheckedChange:()=>f(u),onClick:v=>v.stopPropagation()},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:424,columnNumber:23},this),e.jsxDEV("label",{htmlFor:m,className:"flex w-full items-center gap-2",children:[e.jsxDEV("img",{src:u.imageDataUrls?.[0]||u.image||"https://cdn.builder.io/api/v1/image/assets%2Fplaceholder",alt:u.title,className:"h-10 w-10 flex-shrink-0 rounded object-cover"},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:431,columnNumber:25},this),e.jsxDEV("div",{className:"min-w-0 flex-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{className:"truncate font-semibold",children:p},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:442,columnNumber:29},this),x&&e.jsxDEV("span",{className:"text-[11px] font-medium text-primary/80",children:x},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:444,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:441,columnNumber:27},this),e.jsxDEV("p",{className:"truncate text-[11px] text-muted-foreground",children:u.description||"No description provided."},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:449,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:440,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:430,columnNumber:23},this)]},u.id,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:407,columnNumber:21},this)})},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:402,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:397,columnNumber:13},this),d.length===0&&e.jsxDEV("div",{className:"rounded-md border border-dashed py-8 text-center text-sm text-muted-foreground",children:"No menu items match that search. Adjust filters or add new recipes first."},void 0,!1,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:462,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:326,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:314,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/RecipeSelection.tsx",lineNumber:135,columnNumber:5},this)}var Sy=Object.defineProperty,jy=Object.defineProperties,Vy=Object.getOwnPropertyDescriptors,Ou=Object.getOwnPropertySymbols,Cy=Object.prototype.hasOwnProperty,Ry=Object.prototype.propertyIsEnumerable,ed=(s,t,i)=>t in s?Sy(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,Wt=(s,t)=>{for(var i in t||(t={}))Cy.call(t,i)&&ed(s,i,t[i]);if(Ou)for(var i of Ou(t))Ry.call(t,i)&&ed(s,i,t[i]);return s},rn=(s,t)=>jy(s,Vy(t)),Pe=(s,t,i)=>ed(s,typeof t!="symbol"?t+"":t,i),Py=(s,t,i)=>new Promise((n,a)=>{var o=d=>{try{r(i.next(d))}catch(c){a(c)}},l=d=>{try{r(i.throw(d))}catch(c){a(c)}},r=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);r((i=i.apply(s,t)).next())});class Zr{constructor(t){Pe(this,"rootKey"),this.rootKey=t}}const Iy=Object.seal({});class Ie extends Zr{constructor(t){super(t),Pe(this,"root"),this.root=new Array}prepForXml(t){var i;t.stack.push(this);const n=this.root.map(a=>a instanceof Zr?a.prepForXml(t):a).filter(a=>a!==void 0);return t.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((i=n[0])!=null&&i._attr)?n[0]:n:Iy}}addChildElement(t){return this.root.push(t),this}}class dn extends Ie{prepForXml(t){const i=super.prepForXml(t);if(i&&(typeof i[this.rootKey]!="object"||Object.keys(i[this.rootKey]).length))return i}}class rt extends Zr{constructor(t){super("_attr"),Pe(this,"xmlKeys"),this.root=t}prepForXml(t){const i={};return Object.entries(this.root).forEach(([n,a])=>{if(a!==void 0){const o=this.xmlKeys&&this.xmlKeys[n]||n;i[o]=a}}),{_attr:i}}}class un extends Zr{constructor(t){super("_attr"),this.root=t}prepForXml(t){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:a,value:o})=>rn(Wt({},n),{[a]:o}),{})}}}class As extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _d(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Oo={},pr={exports:{}},Fu;function Od(){if(Fu)return pr.exports;Fu=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function(w,A,I){return Function.prototype.apply.call(w,A,I)},i;s&&typeof s.ownKeys=="function"?i=s.ownKeys:Object.getOwnPropertySymbols?i=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:i=function(w){return Object.getOwnPropertyNames(w)};function n(N){console&&console.warn&&console.warn(N)}var a=Number.isNaN||function(w){return w!==w};function o(){o.init.call(this)}pr.exports=o,pr.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function r(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(N){if(typeof N!="number"||N<0||a(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");l=N}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||a(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function d(N){return N._maxListeners===void 0?o.defaultMaxListeners:N._maxListeners}o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(w){for(var A=[],I=1;I<arguments.length;I++)A.push(arguments[I]);var B=w==="error",W=this._events;if(W!==void 0)B=B&&W.error===void 0;else if(!B)return!1;if(B){var se;if(A.length>0&&(se=A[0]),se instanceof Error)throw se;var ie=new Error("Unhandled error."+(se?" ("+se.message+")":""));throw ie.context=se,ie}var R=W[w];if(R===void 0)return!1;if(typeof R=="function")t(R,this,A);else for(var F=R.length,k=p(R,F),I=0;I<F;++I)t(k[I],this,A);return!0};function c(N,w,A,I){var B,W,se;if(r(A),W=N._events,W===void 0?(W=N._events=Object.create(null),N._eventsCount=0):(W.newListener!==void 0&&(N.emit("newListener",w,A.listener?A.listener:A),W=N._events),se=W[w]),se===void 0)se=W[w]=A,++N._eventsCount;else if(typeof se=="function"?se=W[w]=I?[A,se]:[se,A]:I?se.unshift(A):se.push(A),B=d(N),B>0&&se.length>B&&!se.warned){se.warned=!0;var ie=new Error("Possible EventEmitter memory leak detected. "+se.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");ie.name="MaxListenersExceededWarning",ie.emitter=N,ie.type=w,ie.count=se.length,n(ie)}return N}o.prototype.addListener=function(w,A){return c(this,w,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(w,A){return c(this,w,A,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(N,w,A){var I={fired:!1,wrapFn:void 0,target:N,type:w,listener:A},B=f.bind(I);return B.listener=A,I.wrapFn=B,B}o.prototype.once=function(w,A){return r(A),this.on(w,b(this,w,A)),this},o.prototype.prependOnceListener=function(w,A){return r(A),this.prependListener(w,b(this,w,A)),this},o.prototype.removeListener=function(w,A){var I,B,W,se,ie;if(r(A),B=this._events,B===void 0)return this;if(I=B[w],I===void 0)return this;if(I===A||I.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete B[w],B.removeListener&&this.emit("removeListener",w,I.listener||A));else if(typeof I!="function"){for(W=-1,se=I.length-1;se>=0;se--)if(I[se]===A||I[se].listener===A){ie=I[se].listener,W=se;break}if(W<0)return this;W===0?I.shift():x(I,W),I.length===1&&(B[w]=I[0]),B.removeListener!==void 0&&this.emit("removeListener",w,ie||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(w){var A,I,B;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[w]),this;if(arguments.length===0){var W=Object.keys(I),se;for(B=0;B<W.length;++B)se=W[B],se!=="removeListener"&&this.removeAllListeners(se);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=I[w],typeof A=="function")this.removeListener(w,A);else if(A!==void 0)for(B=A.length-1;B>=0;B--)this.removeListener(w,A[B]);return this};function D(N,w,A){var I=N._events;if(I===void 0)return[];var B=I[w];return B===void 0?[]:typeof B=="function"?A?[B.listener||B]:[B]:A?S(B):p(B,B.length)}o.prototype.listeners=function(w){return D(this,w,!0)},o.prototype.rawListeners=function(w){return D(this,w,!1)},o.listenerCount=function(N,w){return typeof N.listenerCount=="function"?N.listenerCount(w):u.call(N,w)},o.prototype.listenerCount=u;function u(N){var w=this._events;if(w!==void 0){var A=w[N];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function p(N,w){for(var A=new Array(w),I=0;I<w;++I)A[I]=N[I];return A}function x(N,w){for(;w+1<N.length;w++)N[w]=N[w+1];N.pop()}function S(N){for(var w=new Array(N.length),A=0;A<w.length;++A)w[A]=N[A].listener||N[A];return w}function m(N,w){return new Promise(function(A,I){function B(se){N.removeListener(w,W),I(se)}function W(){typeof N.removeListener=="function"&&N.removeListener("error",B),A([].slice.call(arguments))}g(N,w,W,{once:!0}),w!=="error"&&v(N,B,{once:!0})})}function v(N,w,A){typeof N.on=="function"&&g(N,"error",w,A)}function g(N,w,A,I){if(typeof N.on=="function")I.once?N.once(w,A):N.on(w,A);else if(typeof N.addEventListener=="function")N.addEventListener(w,function B(W){I.once&&N.removeEventListener(w,B),A(W)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N)}return pr.exports}var fr={exports:{}},Bu;function yn(){return Bu||(Bu=1,typeof Object.create=="function"?fr.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:fr.exports=function(t,i){if(i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}}),fr.exports}function Ay(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cb={exports:{}},Ms=Cb.exports={},Ui,$i;function td(){throw new Error("setTimeout has not been defined")}function sd(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ui=setTimeout:Ui=td}catch{Ui=td}try{typeof clearTimeout=="function"?$i=clearTimeout:$i=sd}catch{$i=sd}})();function Rb(s){if(Ui===setTimeout)return setTimeout(s,0);if((Ui===td||!Ui)&&setTimeout)return Ui=setTimeout,setTimeout(s,0);try{return Ui(s,0)}catch{try{return Ui.call(null,s,0)}catch{return Ui.call(this,s,0)}}}function Ty(s){if($i===clearTimeout)return clearTimeout(s);if(($i===sd||!$i)&&clearTimeout)return $i=clearTimeout,clearTimeout(s);try{return $i(s)}catch{try{return $i.call(null,s)}catch{return $i.call(this,s)}}}var nn=[],aa=!1,Rn,Wr=-1;function Wy(){!aa||!Rn||(aa=!1,Rn.length?nn=Rn.concat(nn):Wr=-1,nn.length&&Pb())}function Pb(){if(!aa){var s=Rb(Wy);aa=!0;for(var t=nn.length;t;){for(Rn=nn,nn=[];++Wr<t;)Rn&&Rn[Wr].run();Wr=-1,t=nn.length}Rn=null,aa=!1,Ty(s)}}Ms.nextTick=function(s){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];nn.push(new Ib(s,t)),nn.length===1&&!aa&&Rb(Pb)};function Ib(s,t){this.fun=s,this.array=t}Ib.prototype.run=function(){this.fun.apply(null,this.array)};Ms.title="browser";Ms.browser=!0;Ms.env={};Ms.argv=[];Ms.version="";Ms.versions={};function mn(){}Ms.on=mn;Ms.addListener=mn;Ms.once=mn;Ms.off=mn;Ms.removeListener=mn;Ms.removeAllListeners=mn;Ms.emit=mn;Ms.prependListener=mn;Ms.prependOnceListener=mn;Ms.listeners=function(s){return[]};Ms.binding=function(s){throw new Error("process.binding is not supported")};Ms.cwd=function(){return"/"};Ms.chdir=function(s){throw new Error("process.chdir is not supported")};Ms.umask=function(){return 0};var Ly=Cb.exports;const Mt=Ay(Ly);var Fo,Uu;function Ab(){return Uu||(Uu=1,Fo=Od().EventEmitter),Fo}var Bo={},ka={},$u;function My(){if($u)return ka;$u=1,ka.byteLength=r,ka.toByteArray=c,ka.fromByteArray=D;for(var s=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)s[a]=n[a],t[n.charCodeAt(a)]=a;t[45]=62,t[95]=63;function l(u){var p=u.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=u.indexOf("=");x===-1&&(x=p);var S=x===p?0:4-x%4;return[x,S]}function r(u){var p=l(u),x=p[0],S=p[1];return(x+S)*3/4-S}function d(u,p,x){return(p+x)*3/4-x}function c(u){var p,x=l(u),S=x[0],m=x[1],v=new i(d(u,S,m)),g=0,N=m>0?S-4:S,w;for(w=0;w<N;w+=4)p=t[u.charCodeAt(w)]<<18|t[u.charCodeAt(w+1)]<<12|t[u.charCodeAt(w+2)]<<6|t[u.charCodeAt(w+3)],v[g++]=p>>16&255,v[g++]=p>>8&255,v[g++]=p&255;return m===2&&(p=t[u.charCodeAt(w)]<<2|t[u.charCodeAt(w+1)]>>4,v[g++]=p&255),m===1&&(p=t[u.charCodeAt(w)]<<10|t[u.charCodeAt(w+1)]<<4|t[u.charCodeAt(w+2)]>>2,v[g++]=p>>8&255,v[g++]=p&255),v}function f(u){return s[u>>18&63]+s[u>>12&63]+s[u>>6&63]+s[u&63]}function b(u,p,x){for(var S,m=[],v=p;v<x;v+=3)S=(u[v]<<16&16711680)+(u[v+1]<<8&65280)+(u[v+2]&255),m.push(f(S));return m.join("")}function D(u){for(var p,x=u.length,S=x%3,m=[],v=16383,g=0,N=x-S;g<N;g+=v)m.push(b(u,g,g+v>N?N:g+v));return S===1?(p=u[x-1],m.push(s[p>>2]+s[p<<4&63]+"==")):S===2&&(p=(u[x-2]<<8)+u[x-1],m.push(s[p>>10]+s[p>>4&63]+s[p<<2&63]+"=")),m.join("")}return ka}var hr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var zu;function _y(){return zu||(zu=1,hr.read=function(s,t,i,n,a){var o,l,r=a*8-n-1,d=(1<<r)-1,c=d>>1,f=-7,b=i?a-1:0,D=i?-1:1,u=s[t+b];for(b+=D,o=u&(1<<-f)-1,u>>=-f,f+=r;f>0;o=o*256+s[t+b],b+=D,f-=8);for(l=o&(1<<-f)-1,o>>=-f,f+=n;f>0;l=l*256+s[t+b],b+=D,f-=8);if(o===0)o=1-c;else{if(o===d)return l?NaN:(u?-1:1)*(1/0);l=l+Math.pow(2,n),o=o-c}return(u?-1:1)*l*Math.pow(2,o-n)},hr.write=function(s,t,i,n,a,o){var l,r,d,c=o*8-a-1,f=(1<<c)-1,b=f>>1,D=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:o-1,p=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,l=f):(l=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+b>=1?t+=D/d:t+=D*Math.pow(2,1-b),t*d>=2&&(l++,d/=2),l+b>=f?(r=0,l=f):l+b>=1?(r=(t*d-1)*Math.pow(2,a),l=l+b):(r=t*Math.pow(2,b-1)*Math.pow(2,a),l=0));a>=8;s[i+u]=r&255,u+=p,r/=256,a-=8);for(l=l<<a|r,c+=a;c>0;s[i+u]=l&255,u+=p,l/=256,c-=8);s[i+u-p]|=x*128}),hr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Gu;function lo(){return Gu||(Gu=1,function(s){var t=My(),i=_y(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=r,s.SlowBuffer=v,s.INSPECT_MAX_BYTES=50;var a=2147483647;s.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=o(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var T=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(T,y),T.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function l(T){if(T>a)throw new RangeError('The value "'+T+'" is invalid for option "size"');var y=new Uint8Array(T);return Object.setPrototypeOf(y,r.prototype),y}function r(T,y,E){if(typeof T=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(T)}return d(T,y,E)}r.poolSize=8192;function d(T,y,E){if(typeof T=="string")return D(T,y);if(ArrayBuffer.isView(T))return p(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(re(T,ArrayBuffer)||T&&re(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(T,SharedArrayBuffer)||T&&re(T.buffer,SharedArrayBuffer)))return x(T,y,E);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=T.valueOf&&T.valueOf();if(j!=null&&j!==T)return r.from(j,y,E);var q=S(T);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return r.from(T[Symbol.toPrimitive]("string"),y,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}r.from=function(T,y,E){return d(T,y,E)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function c(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function f(T,y,E){return c(T),T<=0?l(T):y!==void 0?typeof E=="string"?l(T).fill(y,E):l(T).fill(y):l(T)}r.alloc=function(T,y,E){return f(T,y,E)};function b(T){return c(T),l(T<0?0:m(T)|0)}r.allocUnsafe=function(T){return b(T)},r.allocUnsafeSlow=function(T){return b(T)};function D(T,y){if((typeof y!="string"||y==="")&&(y="utf8"),!r.isEncoding(y))throw new TypeError("Unknown encoding: "+y);var E=g(T,y)|0,j=l(E),q=j.write(T,y);return q!==E&&(j=j.slice(0,q)),j}function u(T){for(var y=T.length<0?0:m(T.length)|0,E=l(y),j=0;j<y;j+=1)E[j]=T[j]&255;return E}function p(T){if(re(T,Uint8Array)){var y=new Uint8Array(T);return x(y.buffer,y.byteOffset,y.byteLength)}return u(T)}function x(T,y,E){if(y<0||T.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<y+(E||0))throw new RangeError('"length" is outside of buffer bounds');var j;return y===void 0&&E===void 0?j=new Uint8Array(T):E===void 0?j=new Uint8Array(T,y):j=new Uint8Array(T,y,E),Object.setPrototypeOf(j,r.prototype),j}function S(T){if(r.isBuffer(T)){var y=m(T.length)|0,E=l(y);return E.length===0||T.copy(E,0,0,y),E}if(T.length!==void 0)return typeof T.length!="number"||V(T.length)?l(0):u(T);if(T.type==="Buffer"&&Array.isArray(T.data))return u(T.data)}function m(T){if(T>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return T|0}function v(T){return+T!=T&&(T=0),r.alloc(+T)}r.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==r.prototype},r.compare=function(y,E){if(re(y,Uint8Array)&&(y=r.from(y,y.offset,y.byteLength)),re(E,Uint8Array)&&(E=r.from(E,E.offset,E.byteLength)),!r.isBuffer(y)||!r.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===E)return 0;for(var j=y.length,q=E.length,te=0,Z=Math.min(j,q);te<Z;++te)if(y[te]!==E[te]){j=y[te],q=E[te];break}return j<q?-1:q<j?1:0},r.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(y,E){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return r.alloc(0);var j;if(E===void 0)for(E=0,j=0;j<y.length;++j)E+=y[j].length;var q=r.allocUnsafe(E),te=0;for(j=0;j<y.length;++j){var Z=y[j];if(re(Z,Uint8Array))te+Z.length>q.length?r.from(Z).copy(q,te):Uint8Array.prototype.set.call(q,Z,te);else if(r.isBuffer(Z))Z.copy(q,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=Z.length}return q};function g(T,y){if(r.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||re(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);var E=T.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&E===0)return 0;for(var q=!1;;)switch(y){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return P(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return U(T).length;default:if(q)return j?-1:P(T).length;y=(""+y).toLowerCase(),q=!0}}r.byteLength=g;function N(T,y,E){var j=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,y>>>=0,E<=y))return"";for(T||(T="utf8");;)switch(T){case"hex":return de(this,y,E);case"utf8":case"utf-8":return k(this,y,E);case"ascii":return O(this,y,E);case"latin1":case"binary":return me(this,y,E);case"base64":return F(this,y,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,y,E);default:if(j)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),j=!0}}r.prototype._isBuffer=!0;function w(T,y,E){var j=T[y];T[y]=T[E],T[E]=j}r.prototype.swap16=function(){var y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<y;E+=2)w(this,E,E+1);return this},r.prototype.swap32=function(){var y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<y;E+=4)w(this,E,E+3),w(this,E+1,E+2);return this},r.prototype.swap64=function(){var y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<y;E+=8)w(this,E,E+7),w(this,E+1,E+6),w(this,E+2,E+5),w(this,E+3,E+4);return this},r.prototype.toString=function(){var y=this.length;return y===0?"":arguments.length===0?k(this,0,y):N.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(y){if(!r.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:r.compare(this,y)===0},r.prototype.inspect=function(){var y="",E=s.INSPECT_MAX_BYTES;return y=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(y+=" ... "),"<Buffer "+y+">"},n&&(r.prototype[n]=r.prototype.inspect),r.prototype.compare=function(y,E,j,q,te){if(re(y,Uint8Array)&&(y=r.from(y,y.offset,y.byteLength)),!r.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(E===void 0&&(E=0),j===void 0&&(j=y?y.length:0),q===void 0&&(q=0),te===void 0&&(te=this.length),E<0||j>y.length||q<0||te>this.length)throw new RangeError("out of range index");if(q>=te&&E>=j)return 0;if(q>=te)return-1;if(E>=j)return 1;if(E>>>=0,j>>>=0,q>>>=0,te>>>=0,this===y)return 0;for(var Z=te-q,ve=j-E,ke=Math.min(Z,ve),De=this.slice(q,te),We=y.slice(E,j),ze=0;ze<ke;++ze)if(De[ze]!==We[ze]){Z=De[ze],ve=We[ze];break}return Z<ve?-1:ve<Z?1:0};function A(T,y,E,j,q){if(T.length===0)return-1;if(typeof E=="string"?(j=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,V(E)&&(E=q?0:T.length-1),E<0&&(E=T.length+E),E>=T.length){if(q)return-1;E=T.length-1}else if(E<0)if(q)E=0;else return-1;if(typeof y=="string"&&(y=r.from(y,j)),r.isBuffer(y))return y.length===0?-1:I(T,y,E,j,q);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(T,y,E):Uint8Array.prototype.lastIndexOf.call(T,y,E):I(T,[y],E,j,q);throw new TypeError("val must be string, number or Buffer")}function I(T,y,E,j,q){var te=1,Z=T.length,ve=y.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(T.length<2||y.length<2)return-1;te=2,Z/=2,ve/=2,E/=2}function ke(_t,Nt){return te===1?_t[Nt]:_t.readUInt16BE(Nt*te)}var De;if(q){var We=-1;for(De=E;De<Z;De++)if(ke(T,De)===ke(y,We===-1?0:De-We)){if(We===-1&&(We=De),De-We+1===ve)return We*te}else We!==-1&&(De-=De-We),We=-1}else for(E+ve>Z&&(E=Z-ve),De=E;De>=0;De--){for(var ze=!0,st=0;st<ve;st++)if(ke(T,De+st)!==ke(y,st)){ze=!1;break}if(ze)return De}return-1}r.prototype.includes=function(y,E,j){return this.indexOf(y,E,j)!==-1},r.prototype.indexOf=function(y,E,j){return A(this,y,E,j,!0)},r.prototype.lastIndexOf=function(y,E,j){return A(this,y,E,j,!1)};function B(T,y,E,j){E=Number(E)||0;var q=T.length-E;j?(j=Number(j),j>q&&(j=q)):j=q;var te=y.length;j>te/2&&(j=te/2);for(var Z=0;Z<j;++Z){var ve=parseInt(y.substr(Z*2,2),16);if(V(ve))return Z;T[E+Z]=ve}return Z}function W(T,y,E,j){return G(P(y,T.length-E),T,E,j)}function se(T,y,E,j){return G(ee(y),T,E,j)}function ie(T,y,E,j){return G(U(y),T,E,j)}function R(T,y,E,j){return G($(y,T.length-E),T,E,j)}r.prototype.write=function(y,E,j,q){if(E===void 0)q="utf8",j=this.length,E=0;else if(j===void 0&&typeof E=="string")q=E,j=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(j)?(j=j>>>0,q===void 0&&(q="utf8")):(q=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var te=this.length-E;if((j===void 0||j>te)&&(j=te),y.length>0&&(j<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var Z=!1;;)switch(q){case"hex":return B(this,y,E,j);case"utf8":case"utf-8":return W(this,y,E,j);case"ascii":case"latin1":case"binary":return se(this,y,E,j);case"base64":return ie(this,y,E,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,y,E,j);default:if(Z)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),Z=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(T,y,E){return y===0&&E===T.length?t.fromByteArray(T):t.fromByteArray(T.slice(y,E))}function k(T,y,E){E=Math.min(T.length,E);for(var j=[],q=y;q<E;){var te=T[q],Z=null,ve=te>239?4:te>223?3:te>191?2:1;if(q+ve<=E){var ke,De,We,ze;switch(ve){case 1:te<128&&(Z=te);break;case 2:ke=T[q+1],(ke&192)===128&&(ze=(te&31)<<6|ke&63,ze>127&&(Z=ze));break;case 3:ke=T[q+1],De=T[q+2],(ke&192)===128&&(De&192)===128&&(ze=(te&15)<<12|(ke&63)<<6|De&63,ze>2047&&(ze<55296||ze>57343)&&(Z=ze));break;case 4:ke=T[q+1],De=T[q+2],We=T[q+3],(ke&192)===128&&(De&192)===128&&(We&192)===128&&(ze=(te&15)<<18|(ke&63)<<12|(De&63)<<6|We&63,ze>65535&&ze<1114112&&(Z=ze))}}Z===null?(Z=65533,ve=1):Z>65535&&(Z-=65536,j.push(Z>>>10&1023|55296),Z=56320|Z&1023),j.push(Z),q+=ve}return J(j)}var Q=4096;function J(T){var y=T.length;if(y<=Q)return String.fromCharCode.apply(String,T);for(var E="",j=0;j<y;)E+=String.fromCharCode.apply(String,T.slice(j,j+=Q));return E}function O(T,y,E){var j="";E=Math.min(T.length,E);for(var q=y;q<E;++q)j+=String.fromCharCode(T[q]&127);return j}function me(T,y,E){var j="";E=Math.min(T.length,E);for(var q=y;q<E;++q)j+=String.fromCharCode(T[q]);return j}function de(T,y,E){var j=T.length;(!y||y<0)&&(y=0),(!E||E<0||E>j)&&(E=j);for(var q="",te=y;te<E;++te)q+=Y[T[te]];return q}function fe(T,y,E){for(var j=T.slice(y,E),q="",te=0;te<j.length-1;te+=2)q+=String.fromCharCode(j[te]+j[te+1]*256);return q}r.prototype.slice=function(y,E){var j=this.length;y=~~y,E=E===void 0?j:~~E,y<0?(y+=j,y<0&&(y=0)):y>j&&(y=j),E<0?(E+=j,E<0&&(E=0)):E>j&&(E=j),E<y&&(E=y);var q=this.subarray(y,E);return Object.setPrototypeOf(q,r.prototype),q};function ae(T,y,E){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+y>E)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(y,E,j){y=y>>>0,E=E>>>0,j||ae(y,E,this.length);for(var q=this[y],te=1,Z=0;++Z<E&&(te*=256);)q+=this[y+Z]*te;return q},r.prototype.readUintBE=r.prototype.readUIntBE=function(y,E,j){y=y>>>0,E=E>>>0,j||ae(y,E,this.length);for(var q=this[y+--E],te=1;E>0&&(te*=256);)q+=this[y+--E]*te;return q},r.prototype.readUint8=r.prototype.readUInt8=function(y,E){return y=y>>>0,E||ae(y,1,this.length),this[y]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(y,E){return y=y>>>0,E||ae(y,2,this.length),this[y]|this[y+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(y,E){return y=y>>>0,E||ae(y,2,this.length),this[y]<<8|this[y+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},r.prototype.readIntLE=function(y,E,j){y=y>>>0,E=E>>>0,j||ae(y,E,this.length);for(var q=this[y],te=1,Z=0;++Z<E&&(te*=256);)q+=this[y+Z]*te;return te*=128,q>=te&&(q-=Math.pow(2,8*E)),q},r.prototype.readIntBE=function(y,E,j){y=y>>>0,E=E>>>0,j||ae(y,E,this.length);for(var q=E,te=1,Z=this[y+--q];q>0&&(te*=256);)Z+=this[y+--q]*te;return te*=128,Z>=te&&(Z-=Math.pow(2,8*E)),Z},r.prototype.readInt8=function(y,E){return y=y>>>0,E||ae(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},r.prototype.readInt16LE=function(y,E){y=y>>>0,E||ae(y,2,this.length);var j=this[y]|this[y+1]<<8;return j&32768?j|4294901760:j},r.prototype.readInt16BE=function(y,E){y=y>>>0,E||ae(y,2,this.length);var j=this[y+1]|this[y]<<8;return j&32768?j|4294901760:j},r.prototype.readInt32LE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},r.prototype.readInt32BE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},r.prototype.readFloatLE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),i.read(this,y,!0,23,4)},r.prototype.readFloatBE=function(y,E){return y=y>>>0,E||ae(y,4,this.length),i.read(this,y,!1,23,4)},r.prototype.readDoubleLE=function(y,E){return y=y>>>0,E||ae(y,8,this.length),i.read(this,y,!0,52,8)},r.prototype.readDoubleBE=function(y,E){return y=y>>>0,E||ae(y,8,this.length),i.read(this,y,!1,52,8)};function L(T,y,E,j,q,te){if(!r.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>q||y<te)throw new RangeError('"value" argument is out of bounds');if(E+j>T.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(y,E,j,q){if(y=+y,E=E>>>0,j=j>>>0,!q){var te=Math.pow(2,8*j)-1;L(this,y,E,j,te,0)}var Z=1,ve=0;for(this[E]=y&255;++ve<j&&(Z*=256);)this[E+ve]=y/Z&255;return E+j},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(y,E,j,q){if(y=+y,E=E>>>0,j=j>>>0,!q){var te=Math.pow(2,8*j)-1;L(this,y,E,j,te,0)}var Z=j-1,ve=1;for(this[E+Z]=y&255;--Z>=0&&(ve*=256);)this[E+Z]=y/ve&255;return E+j},r.prototype.writeUint8=r.prototype.writeUInt8=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,1,255,0),this[E]=y&255,E+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,2,65535,0),this[E]=y&255,this[E+1]=y>>>8,E+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,2,65535,0),this[E]=y>>>8,this[E+1]=y&255,E+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,4,4294967295,0),this[E+3]=y>>>24,this[E+2]=y>>>16,this[E+1]=y>>>8,this[E]=y&255,E+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,4,4294967295,0),this[E]=y>>>24,this[E+1]=y>>>16,this[E+2]=y>>>8,this[E+3]=y&255,E+4},r.prototype.writeIntLE=function(y,E,j,q){if(y=+y,E=E>>>0,!q){var te=Math.pow(2,8*j-1);L(this,y,E,j,te-1,-te)}var Z=0,ve=1,ke=0;for(this[E]=y&255;++Z<j&&(ve*=256);)y<0&&ke===0&&this[E+Z-1]!==0&&(ke=1),this[E+Z]=(y/ve>>0)-ke&255;return E+j},r.prototype.writeIntBE=function(y,E,j,q){if(y=+y,E=E>>>0,!q){var te=Math.pow(2,8*j-1);L(this,y,E,j,te-1,-te)}var Z=j-1,ve=1,ke=0;for(this[E+Z]=y&255;--Z>=0&&(ve*=256);)y<0&&ke===0&&this[E+Z+1]!==0&&(ke=1),this[E+Z]=(y/ve>>0)-ke&255;return E+j},r.prototype.writeInt8=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,1,127,-128),y<0&&(y=255+y+1),this[E]=y&255,E+1},r.prototype.writeInt16LE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,2,32767,-32768),this[E]=y&255,this[E+1]=y>>>8,E+2},r.prototype.writeInt16BE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,2,32767,-32768),this[E]=y>>>8,this[E+1]=y&255,E+2},r.prototype.writeInt32LE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,4,2147483647,-2147483648),this[E]=y&255,this[E+1]=y>>>8,this[E+2]=y>>>16,this[E+3]=y>>>24,E+4},r.prototype.writeInt32BE=function(y,E,j){return y=+y,E=E>>>0,j||L(this,y,E,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[E]=y>>>24,this[E+1]=y>>>16,this[E+2]=y>>>8,this[E+3]=y&255,E+4};function H(T,y,E,j,q,te){if(E+j>T.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function le(T,y,E,j,q){return y=+y,E=E>>>0,q||H(T,y,E,4),i.write(T,y,E,j,23,4),E+4}r.prototype.writeFloatLE=function(y,E,j){return le(this,y,E,!0,j)},r.prototype.writeFloatBE=function(y,E,j){return le(this,y,E,!1,j)};function ue(T,y,E,j,q){return y=+y,E=E>>>0,q||H(T,y,E,8),i.write(T,y,E,j,52,8),E+8}r.prototype.writeDoubleLE=function(y,E,j){return ue(this,y,E,!0,j)},r.prototype.writeDoubleBE=function(y,E,j){return ue(this,y,E,!1,j)},r.prototype.copy=function(y,E,j,q){if(!r.isBuffer(y))throw new TypeError("argument should be a Buffer");if(j||(j=0),!q&&q!==0&&(q=this.length),E>=y.length&&(E=y.length),E||(E=0),q>0&&q<j&&(q=j),q===j||y.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),y.length-E<q-j&&(q=y.length-E+j);var te=q-j;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,j,q):Uint8Array.prototype.set.call(y,this.subarray(j,q),E),te},r.prototype.fill=function(y,E,j,q){if(typeof y=="string"){if(typeof E=="string"?(q=E,E=0,j=this.length):typeof j=="string"&&(q=j,j=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!r.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(y.length===1){var te=y.charCodeAt(0);(q==="utf8"&&te<128||q==="latin1")&&(y=te)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(E<0||this.length<E||this.length<j)throw new RangeError("Out of range index");if(j<=E)return this;E=E>>>0,j=j===void 0?this.length:j>>>0,y||(y=0);var Z;if(typeof y=="number")for(Z=E;Z<j;++Z)this[Z]=y;else{var ve=r.isBuffer(y)?y:r.from(y,q),ke=ve.length;if(ke===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<j-E;++Z)this[Z+E]=ve[Z%ke]}return this};var K=/[^+/0-9A-Za-z-_]/g;function C(T){if(T=T.split("=")[0],T=T.trim().replace(K,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function P(T,y){y=y||1/0;for(var E,j=T.length,q=null,te=[],Z=0;Z<j;++Z){if(E=T.charCodeAt(Z),E>55295&&E<57344){if(!q){if(E>56319){(y-=3)>-1&&te.push(239,191,189);continue}else if(Z+1===j){(y-=3)>-1&&te.push(239,191,189);continue}q=E;continue}if(E<56320){(y-=3)>-1&&te.push(239,191,189),q=E;continue}E=(q-55296<<10|E-56320)+65536}else q&&(y-=3)>-1&&te.push(239,191,189);if(q=null,E<128){if((y-=1)<0)break;te.push(E)}else if(E<2048){if((y-=2)<0)break;te.push(E>>6|192,E&63|128)}else if(E<65536){if((y-=3)<0)break;te.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((y-=4)<0)break;te.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return te}function ee(T){for(var y=[],E=0;E<T.length;++E)y.push(T.charCodeAt(E)&255);return y}function $(T,y){for(var E,j,q,te=[],Z=0;Z<T.length&&!((y-=2)<0);++Z)E=T.charCodeAt(Z),j=E>>8,q=E%256,te.push(q),te.push(j);return te}function U(T){return t.toByteArray(C(T))}function G(T,y,E,j){for(var q=0;q<j&&!(q+E>=y.length||q>=T.length);++q)y[q+E]=T[q];return q}function re(T,y){return T instanceof y||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===y.name}function V(T){return T!==T}var Y=function(){for(var T="0123456789abcdef",y=new Array(256),E=0;E<16;++E)for(var j=E*16,q=0;q<16;++q)y[j+q]=T[E]+T[q];return y}()}(Bo)),Bo}var Uo={},$o={},zo,Hu;function Tb(){return Hu||(Hu=1,zo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;t[i]=a;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(t,i);if(r.value!==a||r.enumerable!==!0)return!1}return!0}),zo}var Go,qu;function Fd(){if(qu)return Go;qu=1;var s=Tb();return Go=function(){return s()&&!!Symbol.toStringTag},Go}var Ho,Ku;function Wb(){return Ku||(Ku=1,Ho=Object),Ho}var qo,Yu;function Oy(){return Yu||(Yu=1,qo=Error),qo}var Ko,Qu;function Fy(){return Qu||(Qu=1,Ko=EvalError),Ko}var Yo,Zu;function By(){return Zu||(Zu=1,Yo=RangeError),Yo}var Qo,Xu;function Uy(){return Xu||(Xu=1,Qo=ReferenceError),Qo}var Zo,Ju;function Lb(){return Ju||(Ju=1,Zo=SyntaxError),Zo}var Xo,em;function Xa(){return em||(em=1,Xo=TypeError),Xo}var Jo,tm;function $y(){return tm||(tm=1,Jo=URIError),Jo}var el,sm;function zy(){return sm||(sm=1,el=Math.abs),el}var tl,im;function Gy(){return im||(im=1,tl=Math.floor),tl}var sl,nm;function Hy(){return nm||(nm=1,sl=Math.max),sl}var il,am;function qy(){return am||(am=1,il=Math.min),il}var nl,rm;function Ky(){return rm||(rm=1,nl=Math.pow),nl}var al,om;function Yy(){return om||(om=1,al=Math.round),al}var rl,lm;function Qy(){return lm||(lm=1,rl=Number.isNaN||function(t){return t!==t}),rl}var ol,cm;function Zy(){if(cm)return ol;cm=1;var s=Qy();return ol=function(i){return s(i)||i===0?i:i<0?-1:1},ol}var ll,dm;function Xy(){return dm||(dm=1,ll=Object.getOwnPropertyDescriptor),ll}var cl,um;function Ja(){if(um)return cl;um=1;var s=Xy();if(s)try{s([],"length")}catch{s=null}return cl=s,cl}var dl,mm;function co(){if(mm)return dl;mm=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return dl=s,dl}var ul,pm;function Jy(){if(pm)return ul;pm=1;var s=typeof Symbol<"u"&&Symbol,t=Tb();return ul=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},ul}var ml,fm;function Mb(){return fm||(fm=1,ml=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ml}var pl,hm;function _b(){if(hm)return pl;hm=1;var s=Wb();return pl=s.getPrototypeOf||null,pl}var fl,bm;function eD(){if(bm)return fl;bm=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,i=Math.max,n="[object Function]",a=function(d,c){for(var f=[],b=0;b<d.length;b+=1)f[b]=d[b];for(var D=0;D<c.length;D+=1)f[D+d.length]=c[D];return f},o=function(d,c){for(var f=[],b=c,D=0;b<d.length;b+=1,D+=1)f[D]=d[b];return f},l=function(r,d){for(var c="",f=0;f<r.length;f+=1)c+=r[f],f+1<r.length&&(c+=d);return c};return fl=function(d){var c=this;if(typeof c!="function"||t.apply(c)!==n)throw new TypeError(s+c);for(var f=o(arguments,1),b,D=function(){if(this instanceof b){var m=c.apply(this,a(f,arguments));return Object(m)===m?m:this}return c.apply(d,a(f,arguments))},u=i(0,c.length-f.length),p=[],x=0;x<u;x++)p[x]="$"+x;if(b=Function("binder","return function ("+l(p,",")+"){ return binder.apply(this,arguments); }")(D),c.prototype){var S=function(){};S.prototype=c.prototype,b.prototype=new S,S.prototype=null}return b},fl}var hl,Nm;function er(){if(Nm)return hl;Nm=1;var s=eD();return hl=Function.prototype.bind||s,hl}var bl,xm;function Bd(){return xm||(xm=1,bl=Function.prototype.call),bl}var Nl,gm;function Ob(){return gm||(gm=1,Nl=Function.prototype.apply),Nl}var xl,vm;function tD(){return vm||(vm=1,xl=typeof Reflect<"u"&&Reflect&&Reflect.apply),xl}var gl,ym;function sD(){if(ym)return gl;ym=1;var s=er(),t=Ob(),i=Bd(),n=tD();return gl=n||s.call(i,t),gl}var vl,Dm;function iD(){if(Dm)return vl;Dm=1;var s=er(),t=Xa(),i=Bd(),n=sD();return vl=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(s,i,o)},vl}var yl,Em;function nD(){if(Em)return yl;Em=1;var s=iD(),t=Ja(),i;try{i=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var n=!!i&&t&&t(Object.prototype,"__proto__"),a=Object,o=a.getPrototypeOf;return yl=n&&typeof n.get=="function"?s([n.get]):typeof o=="function"?function(r){return o(r==null?r:a(r))}:!1,yl}var Dl,wm;function aD(){if(wm)return Dl;wm=1;var s=Mb(),t=_b(),i=nD();return Dl=s?function(a){return s(a)}:t?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return t(a)}:i?function(a){return i(a)}:null,Dl}var El,km;function rD(){if(km)return El;km=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,i=er();return El=i.call(s,t),El}var wl,Sm;function Ud(){if(Sm)return wl;Sm=1;var s,t=Wb(),i=Oy(),n=Fy(),a=By(),o=Uy(),l=Lb(),r=Xa(),d=$y(),c=zy(),f=Gy(),b=Hy(),D=qy(),u=Ky(),p=Yy(),x=Zy(),S=Function,m=function(ee){try{return S('"use strict"; return ('+ee+").constructor;")()}catch{}},v=Ja(),g=co(),N=function(){throw new r},w=v?function(){try{return arguments.callee,N}catch{try{return v(arguments,"callee").get}catch{return N}}}():N,A=Jy()(),I=aD(),B=_b(),W=Mb(),se=Ob(),ie=Bd(),R={},F=typeof Uint8Array>"u"||!I?s:I(Uint8Array),k={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":A&&I?I([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":R,"%AsyncGenerator%":R,"%AsyncGeneratorFunction%":R,"%AsyncIteratorPrototype%":R,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":S,"%GeneratorFunction%":R,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&I?I(I([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!A||!I?s:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":a,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!A||!I?s:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&I?I(""[Symbol.iterator]()):s,"%Symbol%":A?Symbol:s,"%SyntaxError%":l,"%ThrowTypeError%":w,"%TypedArray%":F,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":ie,"%Function.prototype.apply%":se,"%Object.defineProperty%":g,"%Object.getPrototypeOf%":B,"%Math.abs%":c,"%Math.floor%":f,"%Math.max%":b,"%Math.min%":D,"%Math.pow%":u,"%Math.round%":p,"%Math.sign%":x,"%Reflect.getPrototypeOf%":W};if(I)try{null.error}catch(ee){var Q=I(I(ee));k["%Error.prototype%"]=Q}var J=function ee($){var U;if($==="%AsyncFunction%")U=m("async function () {}");else if($==="%GeneratorFunction%")U=m("function* () {}");else if($==="%AsyncGeneratorFunction%")U=m("async function* () {}");else if($==="%AsyncGenerator%"){var G=ee("%AsyncGeneratorFunction%");G&&(U=G.prototype)}else if($==="%AsyncIteratorPrototype%"){var re=ee("%AsyncGenerator%");re&&I&&(U=I(re.prototype))}return k[$]=U,U},O={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},me=er(),de=rD(),fe=me.call(ie,Array.prototype.concat),ae=me.call(se,Array.prototype.splice),L=me.call(ie,String.prototype.replace),H=me.call(ie,String.prototype.slice),le=me.call(ie,RegExp.prototype.exec),ue=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,K=/\\(\\)?/g,C=function($){var U=H($,0,1),G=H($,-1);if(U==="%"&&G!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(G==="%"&&U!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var re=[];return L($,ue,function(V,Y,T,y){re[re.length]=T?L(y,K,"$1"):Y||V}),re},P=function($,U){var G=$,re;if(de(O,G)&&(re=O[G],G="%"+re[0]+"%"),de(k,G)){var V=k[G];if(V===R&&(V=J(G)),typeof V>"u"&&!U)throw new r("intrinsic "+$+" exists, but is not available. Please file an issue!");return{alias:re,name:G,value:V}}throw new l("intrinsic "+$+" does not exist!")};return wl=function($,U){if(typeof $!="string"||$.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof U!="boolean")throw new r('"allowMissing" argument must be a boolean');if(le(/^%?[^%]*%?$/,$)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var G=C($),re=G.length>0?G[0]:"",V=P("%"+re+"%",U),Y=V.name,T=V.value,y=!1,E=V.alias;E&&(re=E[0],ae(G,fe([0,1],E)));for(var j=1,q=!0;j<G.length;j+=1){var te=G[j],Z=H(te,0,1),ve=H(te,-1);if((Z==='"'||Z==="'"||Z==="`"||ve==='"'||ve==="'"||ve==="`")&&Z!==ve)throw new l("property names with quotes must have matching quotes");if((te==="constructor"||!q)&&(y=!0),re+="."+te,Y="%"+re+"%",de(k,Y))T=k[Y];else if(T!=null){if(!(te in T)){if(!U)throw new r("base intrinsic for "+$+" exists, but the property is not available.");return}if(v&&j+1>=G.length){var ke=v(T,te);q=!!ke,q&&"get"in ke&&!("originalValue"in ke.get)?T=ke.get:T=T[te]}else q=de(T,te),T=T[te];q&&!y&&(k[Y]=T)}}return T},wl}var kl={exports:{}},Sl,jm;function oD(){if(jm)return Sl;jm=1;var s=co(),t=Lb(),i=Xa(),n=Ja();return Sl=function(o,l,r){if(!o||typeof o!="object"&&typeof o!="function")throw new i("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var d=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,b=arguments.length>6?arguments[6]:!1,D=!!n&&n(o,l);if(s)s(o,l,{configurable:f===null&&D?D.configurable:!f,enumerable:d===null&&D?D.enumerable:!d,value:r,writable:c===null&&D?D.writable:!c});else if(b||!d&&!c&&!f)o[l]=r;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Sl}var jl,Vm;function lD(){if(Vm)return jl;Vm=1;var s=co(),t=function(){return!!s};return t.hasArrayLengthDefineBug=function(){if(!s)return null;try{return s([],"length",{value:1}).length!==1}catch{return!0}},jl=t,jl}var Vl,Cm;function cD(){if(Cm)return Vl;Cm=1;var s=Ud(),t=oD(),i=lD()(),n=Ja(),a=Xa(),o=s("%Math.floor%");return Vl=function(r,d){if(typeof r!="function")throw new a("`fn` is not a function");if(typeof d!="number"||d<0||d>4294967295||o(d)!==d)throw new a("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,b=!0;if("length"in r&&n){var D=n(r,"length");D&&!D.configurable&&(f=!1),D&&!D.writable&&(b=!1)}return(f||b||!c)&&(i?t(r,"length",d,!0,!0):t(r,"length",d)),r},Vl}var Rm;function Fb(){return Rm||(Rm=1,function(s){var t=er(),i=Ud(),n=cD(),a=Xa(),o=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),r=i("%Reflect.apply%",!0)||t.call(l,o),d=co(),c=i("%Math.max%");s.exports=function(D){if(typeof D!="function")throw new a("a function is required");var u=r(t,l,arguments);return n(u,1+c(0,D.length-(arguments.length-1)),!0)};var f=function(){return r(t,o,arguments)};d?d(s.exports,"apply",{value:f}):s.exports.apply=f}(kl)),kl.exports}var Cl,Pm;function Bb(){if(Pm)return Cl;Pm=1;var s=Ud(),t=Fb(),i=t(s("String.prototype.indexOf"));return Cl=function(a,o){var l=s(a,!!o);return typeof l=="function"&&i(a,".prototype.")>-1?t(l):l},Cl}var Rl,Im;function dD(){if(Im)return Rl;Im=1;var s=Fd()(),t=Bb(),i=t("Object.prototype.toString"),n=function(r){return s&&r&&typeof r=="object"&&Symbol.toStringTag in r?!1:i(r)==="[object Arguments]"},a=function(r){return n(r)?!0:r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&i(r)!=="[object Array]"&&i(r.callee)==="[object Function]"},o=function(){return n(arguments)}();return n.isLegacyArguments=a,Rl=o?n:a,Rl}var Pl,Am;function uD(){if(Am)return Pl;Am=1;var s=Object.prototype.toString,t=Function.prototype.toString,i=/^\s*(?:function)?\*/,n=Fd()(),a=Object.getPrototypeOf,o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},l;return Pl=function(d){if(typeof d!="function")return!1;if(i.test(t.call(d)))return!0;if(!n){var c=s.call(d);return c==="[object GeneratorFunction]"}if(!a)return!1;if(typeof l>"u"){var f=o();l=f?a(f):!1}return a(d)===l},Pl}var Il,Tm;function mD(){if(Tm)return Il;Tm=1;var s=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,i,n;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{i=Object.defineProperty({},"length",{get:function(){throw n}}),n={},t(function(){throw 42},null,i)}catch(v){v!==n&&(t=null)}else t=null;var a=/^\s*class\b/,o=function(g){try{var N=s.call(g);return a.test(N)}catch{return!1}},l=function(g){try{return o(g)?!1:(s.call(g),!0)}catch{return!1}},r=Object.prototype.toString,d="[object Object]",c="[object Function]",f="[object GeneratorFunction]",b="[object HTMLAllCollection]",D="[object HTML document.all class]",u="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,x=!(0 in[,]),S=function(){return!1};if(typeof document=="object"){var m=document.all;r.call(m)===r.call(document.all)&&(S=function(g){if((x||!g)&&(typeof g>"u"||typeof g=="object"))try{var N=r.call(g);return(N===b||N===D||N===u||N===d)&&g("")==null}catch{}return!1})}return Il=t?function(g){if(S(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;try{t(g,null,i)}catch(N){if(N!==n)return!1}return!o(g)&&l(g)}:function(g){if(S(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;if(p)return l(g);if(o(g))return!1;var N=r.call(g);return N!==c&&N!==f&&!/^\[object HTML/.test(N)?!1:l(g)},Il}var Al,Wm;function pD(){if(Wm)return Al;Wm=1;var s=mD(),t=Object.prototype.toString,i=Object.prototype.hasOwnProperty,n=function(d,c,f){for(var b=0,D=d.length;b<D;b++)i.call(d,b)&&(f==null?c(d[b],b,d):c.call(f,d[b],b,d))},a=function(d,c,f){for(var b=0,D=d.length;b<D;b++)f==null?c(d.charAt(b),b,d):c.call(f,d.charAt(b),b,d)},o=function(d,c,f){for(var b in d)i.call(d,b)&&(f==null?c(d[b],b,d):c.call(f,d[b],b,d))},l=function(d,c,f){if(!s(c))throw new TypeError("iterator must be a function");var b;arguments.length>=3&&(b=f),t.call(d)==="[object Array]"?n(d,c,b):typeof d=="string"?a(d,c,b):o(d,c,b)};return Al=l,Al}var Tl,Lm;function fD(){return Lm||(Lm=1,Tl=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Tl}var Wl,Mm;function hD(){if(Mm)return Wl;Mm=1;var s=fD(),t=typeof globalThis>"u"?Gi:globalThis;return Wl=function(){for(var n=[],a=0;a<s.length;a++)typeof t[s[a]]=="function"&&(n[n.length]=s[a]);return n},Wl}var Ll,_m;function Ub(){if(_m)return Ll;_m=1;var s=pD(),t=hD(),i=Fb(),n=Bb(),a=Ja(),o=n("Object.prototype.toString"),l=Fd()(),r=typeof globalThis>"u"?Gi:globalThis,d=t(),c=n("String.prototype.slice"),f=Object.getPrototypeOf,b=n("Array.prototype.indexOf",!0)||function(S,m){for(var v=0;v<S.length;v+=1)if(S[v]===m)return v;return-1},D={__proto__:null};l&&a&&f?s(d,function(x){var S=new r[x];if(Symbol.toStringTag in S){var m=f(S),v=a(m,Symbol.toStringTag);if(!v){var g=f(m);v=a(g,Symbol.toStringTag)}D["$"+x]=i(v.get)}}):s(d,function(x){var S=new r[x],m=S.slice||S.set;m&&(D["$"+x]=i(m))});var u=function(S){var m=!1;return s(D,function(v,g){if(!m)try{"$"+v(S)===g&&(m=c(g,1))}catch{}}),m},p=function(S){var m=!1;return s(D,function(v,g){if(!m)try{v(S),m=c(g,1)}catch{}}),m};return Ll=function(S){if(!S||typeof S!="object")return!1;if(!l){var m=c(o(S),8,-1);return b(d,m)>-1?m:m!=="Object"?!1:p(S)}return a?u(S):null},Ll}var Ml,Om;function bD(){if(Om)return Ml;Om=1;var s=Ub();return Ml=function(i){return!!s(i)},Ml}var Fm;function ND(){return Fm||(Fm=1,function(s){var t=dD(),i=uD(),n=Ub(),a=bD();function o(j){return j.call.bind(j)}var l=typeof BigInt<"u",r=typeof Symbol<"u",d=o(Object.prototype.toString),c=o(Number.prototype.valueOf),f=o(String.prototype.valueOf),b=o(Boolean.prototype.valueOf);if(l)var D=o(BigInt.prototype.valueOf);if(r)var u=o(Symbol.prototype.valueOf);function p(j,q){if(typeof j!="object")return!1;try{return q(j),!0}catch{return!1}}s.isArgumentsObject=t,s.isGeneratorFunction=i,s.isTypedArray=a;function x(j){return typeof Promise<"u"&&j instanceof Promise||j!==null&&typeof j=="object"&&typeof j.then=="function"&&typeof j.catch=="function"}s.isPromise=x;function S(j){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(j):a(j)||H(j)}s.isArrayBufferView=S;function m(j){return n(j)==="Uint8Array"}s.isUint8Array=m;function v(j){return n(j)==="Uint8ClampedArray"}s.isUint8ClampedArray=v;function g(j){return n(j)==="Uint16Array"}s.isUint16Array=g;function N(j){return n(j)==="Uint32Array"}s.isUint32Array=N;function w(j){return n(j)==="Int8Array"}s.isInt8Array=w;function A(j){return n(j)==="Int16Array"}s.isInt16Array=A;function I(j){return n(j)==="Int32Array"}s.isInt32Array=I;function B(j){return n(j)==="Float32Array"}s.isFloat32Array=B;function W(j){return n(j)==="Float64Array"}s.isFloat64Array=W;function se(j){return n(j)==="BigInt64Array"}s.isBigInt64Array=se;function ie(j){return n(j)==="BigUint64Array"}s.isBigUint64Array=ie;function R(j){return d(j)==="[object Map]"}R.working=typeof Map<"u"&&R(new Map);function F(j){return typeof Map>"u"?!1:R.working?R(j):j instanceof Map}s.isMap=F;function k(j){return d(j)==="[object Set]"}k.working=typeof Set<"u"&&k(new Set);function Q(j){return typeof Set>"u"?!1:k.working?k(j):j instanceof Set}s.isSet=Q;function J(j){return d(j)==="[object WeakMap]"}J.working=typeof WeakMap<"u"&&J(new WeakMap);function O(j){return typeof WeakMap>"u"?!1:J.working?J(j):j instanceof WeakMap}s.isWeakMap=O;function me(j){return d(j)==="[object WeakSet]"}me.working=typeof WeakSet<"u"&&me(new WeakSet);function de(j){return me(j)}s.isWeakSet=de;function fe(j){return d(j)==="[object ArrayBuffer]"}fe.working=typeof ArrayBuffer<"u"&&fe(new ArrayBuffer);function ae(j){return typeof ArrayBuffer>"u"?!1:fe.working?fe(j):j instanceof ArrayBuffer}s.isArrayBuffer=ae;function L(j){return d(j)==="[object DataView]"}L.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&L(new DataView(new ArrayBuffer(1),0,1));function H(j){return typeof DataView>"u"?!1:L.working?L(j):j instanceof DataView}s.isDataView=H;var le=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ue(j){return d(j)==="[object SharedArrayBuffer]"}function K(j){return typeof le>"u"?!1:(typeof ue.working>"u"&&(ue.working=ue(new le)),ue.working?ue(j):j instanceof le)}s.isSharedArrayBuffer=K;function C(j){return d(j)==="[object AsyncFunction]"}s.isAsyncFunction=C;function P(j){return d(j)==="[object Map Iterator]"}s.isMapIterator=P;function ee(j){return d(j)==="[object Set Iterator]"}s.isSetIterator=ee;function $(j){return d(j)==="[object Generator]"}s.isGeneratorObject=$;function U(j){return d(j)==="[object WebAssembly.Module]"}s.isWebAssemblyCompiledModule=U;function G(j){return p(j,c)}s.isNumberObject=G;function re(j){return p(j,f)}s.isStringObject=re;function V(j){return p(j,b)}s.isBooleanObject=V;function Y(j){return l&&p(j,D)}s.isBigIntObject=Y;function T(j){return r&&p(j,u)}s.isSymbolObject=T;function y(j){return G(j)||re(j)||V(j)||Y(j)||T(j)}s.isBoxedPrimitive=y;function E(j){return typeof Uint8Array<"u"&&(ae(j)||K(j))}s.isAnyArrayBuffer=E,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(j){Object.defineProperty(s,j,{enumerable:!1,value:function(){throw new Error(j+" is not supported in userland")}})})}($o)),$o}var _l,Bm;function xD(){return Bm||(Bm=1,_l=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),_l}var Um;function $b(){return Um||(Um=1,function(s){var t=Object.getOwnPropertyDescriptors||function(H){for(var le=Object.keys(H),ue={},K=0;K<le.length;K++)ue[le[K]]=Object.getOwnPropertyDescriptor(H,le[K]);return ue},i=/%[sdj%]/g;s.format=function(L){if(!w(L)){for(var H=[],le=0;le<arguments.length;le++)H.push(l(arguments[le]));return H.join(" ")}for(var le=1,ue=arguments,K=ue.length,C=String(L).replace(i,function(ee){if(ee==="%%")return"%";if(le>=K)return ee;switch(ee){case"%s":return String(ue[le++]);case"%d":return Number(ue[le++]);case"%j":try{return JSON.stringify(ue[le++])}catch{return"[Circular]"}default:return ee}}),P=ue[le];le<K;P=ue[++le])v(P)||!W(P)?C+=" "+P:C+=" "+l(P);return C},s.deprecate=function(L,H){if(typeof Mt<"u"&&Mt.noDeprecation===!0)return L;if(typeof Mt>"u")return function(){return s.deprecate(L,H).apply(this,arguments)};var le=!1;function ue(){if(!le){if(Mt.throwDeprecation)throw new Error(H);Mt.traceDeprecation?console.trace(H):console.error(H),le=!0}return L.apply(this,arguments)}return ue};var n={},a=/^$/;if(Mt.env.NODE_DEBUG){var o=Mt.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+o+"$","i")}s.debuglog=function(L){if(L=L.toUpperCase(),!n[L])if(a.test(L)){var H=Mt.pid;n[L]=function(){var le=s.format.apply(s,arguments);console.error("%s %d: %s",L,H,le)}}else n[L]=function(){};return n[L]};function l(L,H){var le={seen:[],stylize:d};return arguments.length>=3&&(le.depth=arguments[2]),arguments.length>=4&&(le.colors=arguments[3]),m(H)?le.showHidden=H:H&&s._extend(le,H),I(le.showHidden)&&(le.showHidden=!1),I(le.depth)&&(le.depth=2),I(le.colors)&&(le.colors=!1),I(le.customInspect)&&(le.customInspect=!0),le.colors&&(le.stylize=r),f(le,L,le.depth)}s.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function r(L,H){var le=l.styles[H];return le?"\x1B["+l.colors[le][0]+"m"+L+"\x1B["+l.colors[le][1]+"m":L}function d(L,H){return L}function c(L){var H={};return L.forEach(function(le,ue){H[le]=!0}),H}function f(L,H,le){if(L.customInspect&&H&&R(H.inspect)&&H.inspect!==s.inspect&&!(H.constructor&&H.constructor.prototype===H)){var ue=H.inspect(le,L);return w(ue)||(ue=f(L,ue,le)),ue}var K=b(L,H);if(K)return K;var C=Object.keys(H),P=c(C);if(L.showHidden&&(C=Object.getOwnPropertyNames(H)),ie(H)&&(C.indexOf("message")>=0||C.indexOf("description")>=0))return D(H);if(C.length===0){if(R(H)){var ee=H.name?": "+H.name:"";return L.stylize("[Function"+ee+"]","special")}if(B(H))return L.stylize(RegExp.prototype.toString.call(H),"regexp");if(se(H))return L.stylize(Date.prototype.toString.call(H),"date");if(ie(H))return D(H)}var $="",U=!1,G=["{","}"];if(S(H)&&(U=!0,G=["[","]"]),R(H)){var re=H.name?": "+H.name:"";$=" [Function"+re+"]"}if(B(H)&&($=" "+RegExp.prototype.toString.call(H)),se(H)&&($=" "+Date.prototype.toUTCString.call(H)),ie(H)&&($=" "+D(H)),C.length===0&&(!U||H.length==0))return G[0]+$+G[1];if(le<0)return B(H)?L.stylize(RegExp.prototype.toString.call(H),"regexp"):L.stylize("[Object]","special");L.seen.push(H);var V;return U?V=u(L,H,le,P,C):V=C.map(function(Y){return p(L,H,le,P,Y,U)}),L.seen.pop(),x(V,$,G)}function b(L,H){if(I(H))return L.stylize("undefined","undefined");if(w(H)){var le="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(le,"string")}if(N(H))return L.stylize(""+H,"number");if(m(H))return L.stylize(""+H,"boolean");if(v(H))return L.stylize("null","null")}function D(L){return"["+Error.prototype.toString.call(L)+"]"}function u(L,H,le,ue,K){for(var C=[],P=0,ee=H.length;P<ee;++P)me(H,String(P))?C.push(p(L,H,le,ue,String(P),!0)):C.push("");return K.forEach(function($){$.match(/^\d+$/)||C.push(p(L,H,le,ue,$,!0))}),C}function p(L,H,le,ue,K,C){var P,ee,$;if($=Object.getOwnPropertyDescriptor(H,K)||{value:H[K]},$.get?$.set?ee=L.stylize("[Getter/Setter]","special"):ee=L.stylize("[Getter]","special"):$.set&&(ee=L.stylize("[Setter]","special")),me(ue,K)||(P="["+K+"]"),ee||(L.seen.indexOf($.value)<0?(v(le)?ee=f(L,$.value,null):ee=f(L,$.value,le-1),ee.indexOf(`
`)>-1&&(C?ee=ee.split(`
`).map(function(U){return"  "+U}).join(`
`).slice(2):ee=`
`+ee.split(`
`).map(function(U){return"   "+U}).join(`
`))):ee=L.stylize("[Circular]","special")),I(P)){if(C&&K.match(/^\d+$/))return ee;P=JSON.stringify(""+K),P.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(P=P.slice(1,-1),P=L.stylize(P,"name")):(P=P.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),P=L.stylize(P,"string"))}return P+": "+ee}function x(L,H,le){var ue=L.reduce(function(K,C){return C.indexOf(`
`)>=0,K+C.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ue>60?le[0]+(H===""?"":H+`
 `)+" "+L.join(`,
  `)+" "+le[1]:le[0]+H+" "+L.join(", ")+" "+le[1]}s.types=ND();function S(L){return Array.isArray(L)}s.isArray=S;function m(L){return typeof L=="boolean"}s.isBoolean=m;function v(L){return L===null}s.isNull=v;function g(L){return L==null}s.isNullOrUndefined=g;function N(L){return typeof L=="number"}s.isNumber=N;function w(L){return typeof L=="string"}s.isString=w;function A(L){return typeof L=="symbol"}s.isSymbol=A;function I(L){return L===void 0}s.isUndefined=I;function B(L){return W(L)&&k(L)==="[object RegExp]"}s.isRegExp=B,s.types.isRegExp=B;function W(L){return typeof L=="object"&&L!==null}s.isObject=W;function se(L){return W(L)&&k(L)==="[object Date]"}s.isDate=se,s.types.isDate=se;function ie(L){return W(L)&&(k(L)==="[object Error]"||L instanceof Error)}s.isError=ie,s.types.isNativeError=ie;function R(L){return typeof L=="function"}s.isFunction=R;function F(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}s.isPrimitive=F,s.isBuffer=xD();function k(L){return Object.prototype.toString.call(L)}function Q(L){return L<10?"0"+L.toString(10):L.toString(10)}var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var L=new Date,H=[Q(L.getHours()),Q(L.getMinutes()),Q(L.getSeconds())].join(":");return[L.getDate(),J[L.getMonth()],H].join(" ")}s.log=function(){console.log("%s - %s",O(),s.format.apply(s,arguments))},s.inherits=yn(),s._extend=function(L,H){if(!H||!W(H))return L;for(var le=Object.keys(H),ue=le.length;ue--;)L[le[ue]]=H[le[ue]];return L};function me(L,H){return Object.prototype.hasOwnProperty.call(L,H)}var de=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(H){if(typeof H!="function")throw new TypeError('The "original" argument must be of type Function');if(de&&H[de]){var le=H[de];if(typeof le!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(le,de,{value:le,enumerable:!1,writable:!1,configurable:!0}),le}function le(){for(var ue,K,C=new Promise(function($,U){ue=$,K=U}),P=[],ee=0;ee<arguments.length;ee++)P.push(arguments[ee]);P.push(function($,U){$?K($):ue(U)});try{H.apply(this,P)}catch($){K($)}return C}return Object.setPrototypeOf(le,Object.getPrototypeOf(H)),de&&Object.defineProperty(le,de,{value:le,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(le,t(H))},s.promisify.custom=de;function fe(L,H){if(!L){var le=new Error("Promise was rejected with a falsy value");le.reason=L,L=le}return H(L)}function ae(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function H(){for(var le=[],ue=0;ue<arguments.length;ue++)le.push(arguments[ue]);var K=le.pop();if(typeof K!="function")throw new TypeError("The last argument must be of type Function");var C=this,P=function(){return K.apply(C,arguments)};L.apply(this,le).then(function(ee){Mt.nextTick(P.bind(null,null,ee))},function(ee){Mt.nextTick(fe.bind(null,ee,P))})}return Object.setPrototypeOf(H,Object.getPrototypeOf(L)),Object.defineProperties(H,t(L)),H}s.callbackify=ae}(Uo)),Uo}var Ol,$m;function gD(){if($m)return Ol;$m=1;function s(D,u){var p=Object.keys(D);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(D);u&&(x=x.filter(function(S){return Object.getOwnPropertyDescriptor(D,S).enumerable})),p.push.apply(p,x)}return p}function t(D){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?s(Object(p),!0).forEach(function(x){i(D,x,p[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(p)):s(Object(p)).forEach(function(x){Object.defineProperty(D,x,Object.getOwnPropertyDescriptor(p,x))})}return D}function i(D,u,p){return u in D?Object.defineProperty(D,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):D[u]=p,D}function n(D,u){if(!(D instanceof u))throw new TypeError("Cannot call a class as a function")}function a(D,u){for(var p=0;p<u.length;p++){var x=u[p];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(D,x.key,x)}}function o(D,u,p){return u&&a(D.prototype,u),D}var l=lo(),r=l.Buffer,d=$b(),c=d.inspect,f=c&&c.custom||"inspect";function b(D,u,p){r.prototype.copy.call(D,u,p)}return Ol=function(){function D(){n(this,D),this.head=null,this.tail=null,this.length=0}return o(D,[{key:"push",value:function(p){var x={data:p,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(p){var x={data:p,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var x=this.head,S=""+x.data;x=x.next;)S+=p+x.data;return S}},{key:"concat",value:function(p){if(this.length===0)return r.alloc(0);for(var x=r.allocUnsafe(p>>>0),S=this.head,m=0;S;)b(S.data,x,m),m+=S.data.length,S=S.next;return x}},{key:"consume",value:function(p,x){var S;return p<this.head.data.length?(S=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?S=this.shift():S=x?this._getString(p):this._getBuffer(p),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var x=this.head,S=1,m=x.data;for(p-=m.length;x=x.next;){var v=x.data,g=p>v.length?v.length:p;if(g===v.length?m+=v:m+=v.slice(0,p),p-=g,p===0){g===v.length?(++S,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=v.slice(g));break}++S}return this.length-=S,m}},{key:"_getBuffer",value:function(p){var x=r.allocUnsafe(p),S=this.head,m=1;for(S.data.copy(x),p-=S.data.length;S=S.next;){var v=S.data,g=p>v.length?v.length:p;if(v.copy(x,x.length-p,0,g),p-=g,p===0){g===v.length?(++m,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=v.slice(g));break}++m}return this.length-=m,x}},{key:f,value:function(p,x){return c(this,t({},x,{depth:0,customInspect:!1}))}}]),D}(),Ol}var Fl,zm;function zb(){if(zm)return Fl;zm=1;function s(l,r){var d=this,c=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return c||f?(r?r(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Mt.nextTick(a,this,l)):Mt.nextTick(a,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(b){!r&&b?d._writableState?d._writableState.errorEmitted?Mt.nextTick(i,d):(d._writableState.errorEmitted=!0,Mt.nextTick(t,d,b)):Mt.nextTick(t,d,b):r?(Mt.nextTick(i,d),r(b)):Mt.nextTick(i,d)}),this)}function t(l,r){a(l,r),i(l)}function i(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(l,r){l.emit("error",r)}function o(l,r){var d=l._readableState,c=l._writableState;d&&d.autoDestroy||c&&c.autoDestroy?l.destroy(r):l.emit("error",r)}return Fl={destroy:s,undestroy:n,errorOrDestroy:o},Fl}var Bl={},Gm;function ya(){if(Gm)return Bl;Gm=1;function s(r,d){r.prototype=Object.create(d.prototype),r.prototype.constructor=r,r.__proto__=d}var t={};function i(r,d,c){c||(c=Error);function f(D,u,p){return typeof d=="string"?d:d(D,u,p)}var b=function(D){s(u,D);function u(p,x,S){return D.call(this,f(p,x,S))||this}return u}(c);b.prototype.name=c.name,b.prototype.code=r,t[r]=b}function n(r,d){if(Array.isArray(r)){var c=r.length;return r=r.map(function(f){return String(f)}),c>2?"one of ".concat(d," ").concat(r.slice(0,c-1).join(", "),", or ")+r[c-1]:c===2?"one of ".concat(d," ").concat(r[0]," or ").concat(r[1]):"of ".concat(d," ").concat(r[0])}else return"of ".concat(d," ").concat(String(r))}function a(r,d,c){return r.substr(0,d.length)===d}function o(r,d,c){return(c===void 0||c>r.length)&&(c=r.length),r.substring(c-d.length,c)===d}function l(r,d,c){return typeof c!="number"&&(c=0),c+d.length>r.length?!1:r.indexOf(d,c)!==-1}return i("ERR_INVALID_OPT_VALUE",function(r,d){return'The value "'+d+'" is invalid for option "'+r+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(r,d,c){var f;typeof d=="string"&&a(d,"not ")?(f="must not be",d=d.replace(/^not /,"")):f="must be";var b;if(o(r," argument"))b="The ".concat(r," ").concat(f," ").concat(n(d,"type"));else{var D=l(r,".")?"property":"argument";b='The "'.concat(r,'" ').concat(D," ").concat(f," ").concat(n(d,"type"))}return b+=". Received type ".concat(typeof c),b},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Bl.codes=t,Bl}var Ul,Hm;function Gb(){if(Hm)return Ul;Hm=1;var s=ya().codes.ERR_INVALID_OPT_VALUE;function t(n,a,o){return n.highWaterMark!=null?n.highWaterMark:a?n[o]:null}function i(n,a,o,l){var r=t(a,l,o);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var d=l?o:"highWaterMark";throw new s(d,r)}return Math.floor(r)}return n.objectMode?16:16*1024}return Ul={getHighWaterMark:i},Ul}var $l,qm;function vD(){if(qm)return $l;qm=1,$l=s;function s(i,n){if(t("noDeprecation"))return i;var a=!1;function o(){if(!a){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),a=!0}return i.apply(this,arguments)}return o}function t(i){try{if(!Gi.localStorage)return!1}catch{return!1}var n=Gi.localStorage[i];return n==null?!1:String(n).toLowerCase()==="true"}return $l}var zl,Km;function Hb(){if(Km)return zl;Km=1,zl=B;function s(K){var C=this;this.next=null,this.entry=null,this.finish=function(){ue(C,K)}}var t;B.WritableState=A;var i={deprecate:vD()},n=Ab(),a=lo().Buffer,o=Gi.Uint8Array||function(){};function l(K){return a.from(K)}function r(K){return a.isBuffer(K)||K instanceof o}var d=zb(),c=Gb(),f=c.getHighWaterMark,b=ya().codes,D=b.ERR_INVALID_ARG_TYPE,u=b.ERR_METHOD_NOT_IMPLEMENTED,p=b.ERR_MULTIPLE_CALLBACK,x=b.ERR_STREAM_CANNOT_PIPE,S=b.ERR_STREAM_DESTROYED,m=b.ERR_STREAM_NULL_VALUES,v=b.ERR_STREAM_WRITE_AFTER_END,g=b.ERR_UNKNOWN_ENCODING,N=d.errorOrDestroy;yn()(B,n);function w(){}function A(K,C,P){t=t||ua(),K=K||{},typeof P!="boolean"&&(P=C instanceof t),this.objectMode=!!K.objectMode,P&&(this.objectMode=this.objectMode||!!K.writableObjectMode),this.highWaterMark=f(this,K,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=K.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){J(C,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}A.prototype.getBuffer=function(){for(var C=this.bufferedRequest,P=[];C;)P.push(C),C=C.next;return P},function(){try{Object.defineProperty(A.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var I;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(C){return I.call(this,C)?!0:this!==B?!1:C&&C._writableState instanceof A}})):I=function(C){return C instanceof this};function B(K){t=t||ua();var C=this instanceof t;if(!C&&!I.call(B,this))return new B(K);this._writableState=new A(K,this,C),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),n.call(this)}B.prototype.pipe=function(){N(this,new x)};function W(K,C){var P=new v;N(K,P),Mt.nextTick(C,P)}function se(K,C,P,ee){var $;return P===null?$=new m:typeof P!="string"&&!C.objectMode&&($=new D("chunk",["string","Buffer"],P)),$?(N(K,$),Mt.nextTick(ee,$),!1):!0}B.prototype.write=function(K,C,P){var ee=this._writableState,$=!1,U=!ee.objectMode&&r(K);return U&&!a.isBuffer(K)&&(K=l(K)),typeof C=="function"&&(P=C,C=null),U?C="buffer":C||(C=ee.defaultEncoding),typeof P!="function"&&(P=w),ee.ending?W(this,P):(U||se(this,ee,K,P))&&(ee.pendingcb++,$=R(this,ee,U,K,C,P)),$},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,!K.writing&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&de(this,K))},B.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new g(C);return this._writableState.defaultEncoding=C,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ie(K,C,P){return!K.objectMode&&K.decodeStrings!==!1&&typeof C=="string"&&(C=a.from(C,P)),C}Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function R(K,C,P,ee,$,U){if(!P){var G=ie(C,ee,$);ee!==G&&(P=!0,$="buffer",ee=G)}var re=C.objectMode?1:ee.length;C.length+=re;var V=C.length<C.highWaterMark;if(V||(C.needDrain=!0),C.writing||C.corked){var Y=C.lastBufferedRequest;C.lastBufferedRequest={chunk:ee,encoding:$,isBuf:P,callback:U,next:null},Y?Y.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else F(K,C,!1,re,ee,$,U);return V}function F(K,C,P,ee,$,U,G){C.writelen=ee,C.writecb=G,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new S("write")):P?K._writev($,C.onwrite):K._write($,U,C.onwrite),C.sync=!1}function k(K,C,P,ee,$){--C.pendingcb,P?(Mt.nextTick($,ee),Mt.nextTick(H,K,C),K._writableState.errorEmitted=!0,N(K,ee)):($(ee),K._writableState.errorEmitted=!0,N(K,ee),H(K,C))}function Q(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}function J(K,C){var P=K._writableState,ee=P.sync,$=P.writecb;if(typeof $!="function")throw new p;if(Q(P),C)k(K,P,ee,C,$);else{var U=fe(P)||K.destroyed;!U&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&de(K,P),ee?Mt.nextTick(O,K,P,U,$):O(K,P,U,$)}}function O(K,C,P,ee){P||me(K,C),C.pendingcb--,ee(),H(K,C)}function me(K,C){C.length===0&&C.needDrain&&(C.needDrain=!1,K.emit("drain"))}function de(K,C){C.bufferProcessing=!0;var P=C.bufferedRequest;if(K._writev&&P&&P.next){var ee=C.bufferedRequestCount,$=new Array(ee),U=C.corkedRequestsFree;U.entry=P;for(var G=0,re=!0;P;)$[G]=P,P.isBuf||(re=!1),P=P.next,G+=1;$.allBuffers=re,F(K,C,!0,C.length,$,"",U.finish),C.pendingcb++,C.lastBufferedRequest=null,U.next?(C.corkedRequestsFree=U.next,U.next=null):C.corkedRequestsFree=new s(C),C.bufferedRequestCount=0}else{for(;P;){var V=P.chunk,Y=P.encoding,T=P.callback,y=C.objectMode?1:V.length;if(F(K,C,!1,y,V,Y,T),P=P.next,C.bufferedRequestCount--,C.writing)break}P===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=P,C.bufferProcessing=!1}B.prototype._write=function(K,C,P){P(new u("_write()"))},B.prototype._writev=null,B.prototype.end=function(K,C,P){var ee=this._writableState;return typeof K=="function"?(P=K,K=null,C=null):typeof C=="function"&&(P=C,C=null),K!=null&&this.write(K,C),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||le(this,ee,P),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function fe(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function ae(K,C){K._final(function(P){C.pendingcb--,P&&N(K,P),C.prefinished=!0,K.emit("prefinish"),H(K,C)})}function L(K,C){!C.prefinished&&!C.finalCalled&&(typeof K._final=="function"&&!C.destroyed?(C.pendingcb++,C.finalCalled=!0,Mt.nextTick(ae,K,C)):(C.prefinished=!0,K.emit("prefinish")))}function H(K,C){var P=fe(C);if(P&&(L(K,C),C.pendingcb===0&&(C.finished=!0,K.emit("finish"),C.autoDestroy))){var ee=K._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&K.destroy()}return P}function le(K,C,P){C.ending=!0,H(K,C),P&&(C.finished?Mt.nextTick(P):K.once("finish",P)),C.ended=!0,K.writable=!1}function ue(K,C,P){var ee=K.entry;for(K.entry=null;ee;){var $=ee.callback;C.pendingcb--,$(P),ee=ee.next}C.corkedRequestsFree.next=K}return Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),B.prototype.destroy=d.destroy,B.prototype._undestroy=d.undestroy,B.prototype._destroy=function(K,C){C(K)},zl}var Gl,Ym;function ua(){if(Ym)return Gl;Ym=1;var s=Object.keys||function(c){var f=[];for(var b in c)f.push(b);return f};Gl=l;var t=qb(),i=Hb();yn()(l,t);for(var n=s(i.prototype),a=0;a<n.length;a++){var o=n[a];l.prototype[o]||(l.prototype[o]=i.prototype[o])}function l(c){if(!(this instanceof l))return new l(c);t.call(this,c),i.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||Mt.nextTick(d,this)}function d(c){c.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),Gl}var Hl={},br={exports:{}},Qm;function yD(){return Qm||(Qm=1,function(s,t){var i=lo(),n=i.Buffer;function a(l,r){for(var d in l)r[d]=l[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?s.exports=i:(a(i,t),t.Buffer=o);function o(l,r,d){return n(l,r,d)}a(n,o),o.from=function(l,r,d){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,r,d)},o.alloc=function(l,r,d){if(typeof l!="number")throw new TypeError("Argument must be a number");var c=n(l);return r!==void 0?typeof d=="string"?c.fill(r,d):c.fill(r):c.fill(0),c},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(l)}}(br,br.exports)),br.exports}var Zm;function id(){if(Zm)return Hl;Zm=1;var s=yD().Buffer,t=s.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(m){if(!m)return"utf8";for(var v;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(v)return;m=(""+m).toLowerCase(),v=!0}}function n(m){var v=i(m);if(typeof v!="string"&&(s.isEncoding===t||!t(m)))throw new Error("Unknown encoding: "+m);return v||m}Hl.StringDecoder=a;function a(m){this.encoding=n(m);var v;switch(this.encoding){case"utf16le":this.text=b,this.end=D,v=4;break;case"utf8":this.fillLast=d,v=4;break;case"base64":this.text=u,this.end=p,v=3;break;default:this.write=x,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(v)}a.prototype.write=function(m){if(m.length===0)return"";var v,g;if(this.lastNeed){if(v=this.fillLast(m),v===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<m.length?v?v+this.text(m,g):this.text(m,g):v||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function o(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function l(m,v,g){var N=v.length-1;if(N<g)return 0;var w=o(v[N]);return w>=0?(w>0&&(m.lastNeed=w-1),w):--N<g||w===-2?0:(w=o(v[N]),w>=0?(w>0&&(m.lastNeed=w-2),w):--N<g||w===-2?0:(w=o(v[N]),w>=0?(w>0&&(w===2?w=0:m.lastNeed=w-3),w):0))}function r(m,v,g){if((v[0]&192)!==128)return m.lastNeed=0,"�";if(m.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return m.lastNeed=1,"�";if(m.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return m.lastNeed=2,"�"}}function d(m){var v=this.lastTotal-this.lastNeed,g=r(this,m);if(g!==void 0)return g;if(this.lastNeed<=m.length)return m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,v,0,m.length),this.lastNeed-=m.length}function c(m,v){var g=l(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=g;var N=m.length-(g-this.lastNeed);return m.copy(this.lastChar,0,N),m.toString("utf8",v,N)}function f(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"�":v}function b(m,v){if((m.length-v)%2===0){var g=m.toString("utf16le",v);if(g){var N=g.charCodeAt(g.length-1);if(N>=55296&&N<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function D(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,g)}return v}function u(m,v){var g=(m.length-v)%3;return g===0?m.toString("base64",v):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-g))}function p(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function x(m){return m.toString(this.encoding)}function S(m){return m&&m.length?this.write(m):""}return Hl}var ql,Xm;function $d(){if(Xm)return ql;Xm=1;var s=ya().codes.ERR_STREAM_PREMATURE_CLOSE;function t(o){var l=!1;return function(){if(!l){l=!0;for(var r=arguments.length,d=new Array(r),c=0;c<r;c++)d[c]=arguments[c];o.apply(this,d)}}}function i(){}function n(o){return o.setHeader&&typeof o.abort=="function"}function a(o,l,r){if(typeof l=="function")return a(o,null,l);l||(l={}),r=t(r||i);var d=l.readable||l.readable!==!1&&o.readable,c=l.writable||l.writable!==!1&&o.writable,f=function(){o.writable||D()},b=o._writableState&&o._writableState.finished,D=function(){c=!1,b=!0,d||r.call(o)},u=o._readableState&&o._readableState.endEmitted,p=function(){d=!1,u=!0,c||r.call(o)},x=function(g){r.call(o,g)},S=function(){var g;if(d&&!u)return(!o._readableState||!o._readableState.ended)&&(g=new s),r.call(o,g);if(c&&!b)return(!o._writableState||!o._writableState.ended)&&(g=new s),r.call(o,g)},m=function(){o.req.on("finish",D)};return n(o)?(o.on("complete",D),o.on("abort",S),o.req?m():o.on("request",m)):c&&!o._writableState&&(o.on("end",f),o.on("close",f)),o.on("end",p),o.on("finish",D),l.error!==!1&&o.on("error",x),o.on("close",S),function(){o.removeListener("complete",D),o.removeListener("abort",S),o.removeListener("request",m),o.req&&o.req.removeListener("finish",D),o.removeListener("end",f),o.removeListener("close",f),o.removeListener("finish",D),o.removeListener("end",p),o.removeListener("error",x),o.removeListener("close",S)}}return ql=a,ql}var Kl,Jm;function DD(){if(Jm)return Kl;Jm=1;var s;function t(m,v,g){return v in m?Object.defineProperty(m,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[v]=g,m}var i=$d(),n=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),d=Symbol("handlePromise"),c=Symbol("stream");function f(m,v){return{value:m,done:v}}function b(m){var v=m[n];if(v!==null){var g=m[c].read();g!==null&&(m[r]=null,m[n]=null,m[a]=null,v(f(g,!1)))}}function D(m){Mt.nextTick(b,m)}function u(m,v){return function(g,N){m.then(function(){if(v[l]){g(f(void 0,!0));return}v[d](g,N)},N)}}var p=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((s={get stream(){return this[c]},next:function(){var v=this,g=this[o];if(g!==null)return Promise.reject(g);if(this[l])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise(function(I,B){Mt.nextTick(function(){v[o]?B(v[o]):I(f(void 0,!0))})});var N=this[r],w;if(N)w=new Promise(u(N,this));else{var A=this[c].read();if(A!==null)return Promise.resolve(f(A,!1));w=new Promise(this[d])}return this[r]=w,w}},t(s,Symbol.asyncIterator,function(){return this}),t(s,"return",function(){var v=this;return new Promise(function(g,N){v[c].destroy(null,function(w){if(w){N(w);return}g(f(void 0,!0))})})}),s),p),S=function(v){var g,N=Object.create(x,(g={},t(g,c,{value:v,writable:!0}),t(g,n,{value:null,writable:!0}),t(g,a,{value:null,writable:!0}),t(g,o,{value:null,writable:!0}),t(g,l,{value:v._readableState.endEmitted,writable:!0}),t(g,d,{value:function(A,I){var B=N[c].read();B?(N[r]=null,N[n]=null,N[a]=null,A(f(B,!1))):(N[n]=A,N[a]=I)},writable:!0}),g));return N[r]=null,i(v,function(w){if(w&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"){var A=N[a];A!==null&&(N[r]=null,N[n]=null,N[a]=null,A(w)),N[o]=w;return}var I=N[n];I!==null&&(N[r]=null,N[n]=null,N[a]=null,I(f(void 0,!0))),N[l]=!0}),v.on("readable",D.bind(null,N)),N};return Kl=S,Kl}var Yl,ep;function ED(){return ep||(ep=1,Yl=function(){throw new Error("Readable.from is not available in the browser")}),Yl}var Ql,tp;function qb(){if(tp)return Ql;tp=1,Ql=W;var s;W.ReadableState=B,Od().EventEmitter;var t=function(G,re){return G.listeners(re).length},i=Ab(),n=lo().Buffer,a=Gi.Uint8Array||function(){};function o(U){return n.from(U)}function l(U){return n.isBuffer(U)||U instanceof a}var r=$b(),d;r&&r.debuglog?d=r.debuglog("stream"):d=function(){};var c=gD(),f=zb(),b=Gb(),D=b.getHighWaterMark,u=ya().codes,p=u.ERR_INVALID_ARG_TYPE,x=u.ERR_STREAM_PUSH_AFTER_EOF,S=u.ERR_METHOD_NOT_IMPLEMENTED,m=u.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,g,N;yn()(W,i);var w=f.errorOrDestroy,A=["error","close","destroy","pause","resume"];function I(U,G,re){if(typeof U.prependListener=="function")return U.prependListener(G,re);!U._events||!U._events[G]?U.on(G,re):Array.isArray(U._events[G])?U._events[G].unshift(re):U._events[G]=[re,U._events[G]]}function B(U,G,re){s=s||ua(),U=U||{},typeof re!="boolean"&&(re=G instanceof s),this.objectMode=!!U.objectMode,re&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=D(this,U,"readableHighWaterMark",re),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(v||(v=id().StringDecoder),this.decoder=new v(U.encoding),this.encoding=U.encoding)}function W(U){if(s=s||ua(),!(this instanceof W))return new W(U);var G=this instanceof s;this._readableState=new B(U,this,G),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),i.call(this)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),W.prototype.destroy=f.destroy,W.prototype._undestroy=f.undestroy,W.prototype._destroy=function(U,G){G(U)},W.prototype.push=function(U,G){var re=this._readableState,V;return re.objectMode?V=!0:typeof U=="string"&&(G=G||re.defaultEncoding,G!==re.encoding&&(U=n.from(U,G),G=""),V=!0),se(this,U,G,!1,V)},W.prototype.unshift=function(U){return se(this,U,null,!0,!1)};function se(U,G,re,V,Y){d("readableAddChunk",G);var T=U._readableState;if(G===null)T.reading=!1,J(U,T);else{var y;if(Y||(y=R(T,G)),y)w(U,y);else if(T.objectMode||G&&G.length>0)if(typeof G!="string"&&!T.objectMode&&Object.getPrototypeOf(G)!==n.prototype&&(G=o(G)),V)T.endEmitted?w(U,new m):ie(U,T,G,!0);else if(T.ended)w(U,new x);else{if(T.destroyed)return!1;T.reading=!1,T.decoder&&!re?(G=T.decoder.write(G),T.objectMode||G.length!==0?ie(U,T,G,!1):de(U,T)):ie(U,T,G,!1)}else V||(T.reading=!1,de(U,T))}return!T.ended&&(T.length<T.highWaterMark||T.length===0)}function ie(U,G,re,V){G.flowing&&G.length===0&&!G.sync?(G.awaitDrain=0,U.emit("data",re)):(G.length+=G.objectMode?1:re.length,V?G.buffer.unshift(re):G.buffer.push(re),G.needReadable&&O(U)),de(U,G)}function R(U,G){var re;return!l(G)&&typeof G!="string"&&G!==void 0&&!U.objectMode&&(re=new p("chunk",["string","Buffer","Uint8Array"],G)),re}W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(U){v||(v=id().StringDecoder);var G=new v(U);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,V="";re!==null;)V+=G.write(re.data),re=re.next;return this._readableState.buffer.clear(),V!==""&&this._readableState.buffer.push(V),this._readableState.length=V.length,this};var F=1073741824;function k(U){return U>=F?U=F:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function Q(U,G){return U<=0||G.length===0&&G.ended?0:G.objectMode?1:U!==U?G.flowing&&G.length?G.buffer.head.data.length:G.length:(U>G.highWaterMark&&(G.highWaterMark=k(U)),U<=G.length?U:G.ended?G.length:(G.needReadable=!0,0))}W.prototype.read=function(U){d("read",U),U=parseInt(U,10);var G=this._readableState,re=U;if(U!==0&&(G.emittedReadable=!1),U===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return d("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?P(this):O(this),null;if(U=Q(U,G),U===0&&G.ended)return G.length===0&&P(this),null;var V=G.needReadable;d("need readable",V),(G.length===0||G.length-U<G.highWaterMark)&&(V=!0,d("length less than watermark",V)),G.ended||G.reading?(V=!1,d("reading or ended",V)):V&&(d("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(U=Q(re,G)));var Y;return U>0?Y=C(U,G):Y=null,Y===null?(G.needReadable=G.length<=G.highWaterMark,U=0):(G.length-=U,G.awaitDrain=0),G.length===0&&(G.ended||(G.needReadable=!0),re!==U&&G.ended&&P(this)),Y!==null&&this.emit("data",Y),Y};function J(U,G){if(d("onEofChunk"),!G.ended){if(G.decoder){var re=G.decoder.end();re&&re.length&&(G.buffer.push(re),G.length+=G.objectMode?1:re.length)}G.ended=!0,G.sync?O(U):(G.needReadable=!1,G.emittedReadable||(G.emittedReadable=!0,me(U)))}}function O(U){var G=U._readableState;d("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(d("emitReadable",G.flowing),G.emittedReadable=!0,Mt.nextTick(me,U))}function me(U){var G=U._readableState;d("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&(G.length||G.ended)&&(U.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,K(U)}function de(U,G){G.readingMore||(G.readingMore=!0,Mt.nextTick(fe,U,G))}function fe(U,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){var re=G.length;if(d("maybeReadMore read 0"),U.read(0),re===G.length)break}G.readingMore=!1}W.prototype._read=function(U){w(this,new S("_read()"))},W.prototype.pipe=function(U,G){var re=this,V=this._readableState;switch(V.pipesCount){case 0:V.pipes=U;break;case 1:V.pipes=[V.pipes,U];break;default:V.pipes.push(U);break}V.pipesCount+=1,d("pipe count=%d opts=%j",V.pipesCount,G);var Y=(!G||G.end!==!1)&&U!==Mt.stdout&&U!==Mt.stderr,T=Y?E:We;V.endEmitted?Mt.nextTick(T):re.once("end",T),U.on("unpipe",y);function y(ze,st){d("onunpipe"),ze===re&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,te())}function E(){d("onend"),U.end()}var j=ae(re);U.on("drain",j);var q=!1;function te(){d("cleanup"),U.removeListener("close",ke),U.removeListener("finish",De),U.removeListener("drain",j),U.removeListener("error",ve),U.removeListener("unpipe",y),re.removeListener("end",E),re.removeListener("end",We),re.removeListener("data",Z),q=!0,V.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&j()}re.on("data",Z);function Z(ze){d("ondata");var st=U.write(ze);d("dest.write",st),st===!1&&((V.pipesCount===1&&V.pipes===U||V.pipesCount>1&&$(V.pipes,U)!==-1)&&!q&&(d("false write response, pause",V.awaitDrain),V.awaitDrain++),re.pause())}function ve(ze){d("onerror",ze),We(),U.removeListener("error",ve),t(U,"error")===0&&w(U,ze)}I(U,"error",ve);function ke(){U.removeListener("finish",De),We()}U.once("close",ke);function De(){d("onfinish"),U.removeListener("close",ke),We()}U.once("finish",De);function We(){d("unpipe"),re.unpipe(U)}return U.emit("pipe",re),V.flowing||(d("pipe resume"),re.resume()),U};function ae(U){return function(){var re=U._readableState;d("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,re.awaitDrain===0&&t(U,"data")&&(re.flowing=!0,K(U))}}W.prototype.unpipe=function(U){var G=this._readableState,re={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return U&&U!==G.pipes?this:(U||(U=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,U&&U.emit("unpipe",this,re),this);if(!U){var V=G.pipes,Y=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var T=0;T<Y;T++)V[T].emit("unpipe",this,{hasUnpiped:!1});return this}var y=$(G.pipes,U);return y===-1?this:(G.pipes.splice(y,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),U.emit("unpipe",this,re),this)},W.prototype.on=function(U,G){var re=i.prototype.on.call(this,U,G),V=this._readableState;return U==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):U==="readable"&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,d("on readable",V.length,V.reading),V.length?O(this):V.reading||Mt.nextTick(H,this)),re},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(U,G){var re=i.prototype.removeListener.call(this,U,G);return U==="readable"&&Mt.nextTick(L,this),re},W.prototype.removeAllListeners=function(U){var G=i.prototype.removeAllListeners.apply(this,arguments);return(U==="readable"||U===void 0)&&Mt.nextTick(L,this),G};function L(U){var G=U._readableState;G.readableListening=U.listenerCount("readable")>0,G.resumeScheduled&&!G.paused?G.flowing=!0:U.listenerCount("data")>0&&U.resume()}function H(U){d("readable nexttick read 0"),U.read(0)}W.prototype.resume=function(){var U=this._readableState;return U.flowing||(d("resume"),U.flowing=!U.readableListening,le(this,U)),U.paused=!1,this};function le(U,G){G.resumeScheduled||(G.resumeScheduled=!0,Mt.nextTick(ue,U,G))}function ue(U,G){d("resume",G.reading),G.reading||U.read(0),G.resumeScheduled=!1,U.emit("resume"),K(U),G.flowing&&!G.reading&&U.read(0)}W.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function K(U){var G=U._readableState;for(d("flow",G.flowing);G.flowing&&U.read()!==null;);}W.prototype.wrap=function(U){var G=this,re=this._readableState,V=!1;U.on("end",function(){if(d("wrapped end"),re.decoder&&!re.ended){var y=re.decoder.end();y&&y.length&&G.push(y)}G.push(null)}),U.on("data",function(y){if(d("wrapped data"),re.decoder&&(y=re.decoder.write(y)),!(re.objectMode&&y==null)&&!(!re.objectMode&&(!y||!y.length))){var E=G.push(y);E||(V=!0,U.pause())}});for(var Y in U)this[Y]===void 0&&typeof U[Y]=="function"&&(this[Y]=function(E){return function(){return U[E].apply(U,arguments)}}(Y));for(var T=0;T<A.length;T++)U.on(A[T],this.emit.bind(this,A[T]));return this._read=function(y){d("wrapped _read",y),V&&(V=!1,U.resume())},this},typeof Symbol=="function"&&(W.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=DD()),g(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),W._fromList=C,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function C(U,G){if(G.length===0)return null;var re;return G.objectMode?re=G.buffer.shift():!U||U>=G.length?(G.decoder?re=G.buffer.join(""):G.buffer.length===1?re=G.buffer.first():re=G.buffer.concat(G.length),G.buffer.clear()):re=G.buffer.consume(U,G.decoder),re}function P(U){var G=U._readableState;d("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,Mt.nextTick(ee,G,U))}function ee(U,G){if(d("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&U.length===0&&(U.endEmitted=!0,G.readable=!1,G.emit("end"),U.autoDestroy)){var re=G._writableState;(!re||re.autoDestroy&&re.finished)&&G.destroy()}}typeof Symbol=="function"&&(W.from=function(U,G){return N===void 0&&(N=ED()),N(W,U,G)});function $(U,G){for(var re=0,V=U.length;re<V;re++)if(U[re]===G)return re;return-1}return Ql}var Zl,sp;function Kb(){if(sp)return Zl;sp=1,Zl=r;var s=ya().codes,t=s.ERR_METHOD_NOT_IMPLEMENTED,i=s.ERR_MULTIPLE_CALLBACK,n=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=s.ERR_TRANSFORM_WITH_LENGTH_0,o=ua();yn()(r,o);function l(f,b){var D=this._transformState;D.transforming=!1;var u=D.writecb;if(u===null)return this.emit("error",new i);D.writechunk=null,D.writecb=null,b!=null&&this.push(b),u(f);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function r(f){if(!(this instanceof r))return new r(f);o.call(this,f),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",d)}function d(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(b,D){c(f,b,D)}):c(this,null,null)}r.prototype.push=function(f,b){return this._transformState.needTransform=!1,o.prototype.push.call(this,f,b)},r.prototype._transform=function(f,b,D){D(new t("_transform()"))},r.prototype._write=function(f,b,D){var u=this._transformState;if(u.writecb=D,u.writechunk=f,u.writeencoding=b,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},r.prototype._read=function(f){var b=this._transformState;b.writechunk!==null&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0},r.prototype._destroy=function(f,b){o.prototype._destroy.call(this,f,function(D){b(D)})};function c(f,b,D){if(b)return f.emit("error",b);if(D!=null&&f.push(D),f._writableState.length)throw new a;if(f._transformState.transforming)throw new n;return f.push(null)}return Zl}var Xl,ip;function wD(){if(ip)return Xl;ip=1,Xl=t;var s=Kb();yn()(t,s);function t(i){if(!(this instanceof t))return new t(i);s.call(this,i)}return t.prototype._transform=function(i,n,a){a(null,i)},Xl}var Jl,np;function kD(){if(np)return Jl;np=1;var s;function t(D){var u=!1;return function(){u||(u=!0,D.apply(void 0,arguments))}}var i=ya().codes,n=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(D){if(D)throw D}function l(D){return D.setHeader&&typeof D.abort=="function"}function r(D,u,p,x){x=t(x);var S=!1;D.on("close",function(){S=!0}),s===void 0&&(s=$d()),s(D,{readable:u,writable:p},function(v){if(v)return x(v);S=!0,x()});var m=!1;return function(v){if(!S&&!m){if(m=!0,l(D))return D.abort();if(typeof D.destroy=="function")return D.destroy();x(v||new a("pipe"))}}}function d(D){D()}function c(D,u){return D.pipe(u)}function f(D){return!D.length||typeof D[D.length-1]!="function"?o:D.pop()}function b(){for(var D=arguments.length,u=new Array(D),p=0;p<D;p++)u[p]=arguments[p];var x=f(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new n("streams");var S,m=u.map(function(v,g){var N=g<u.length-1,w=g>0;return r(v,N,w,function(A){S||(S=A),A&&m.forEach(d),!N&&(m.forEach(d),x(S))})});return u.reduce(c)}return Jl=b,Jl}var ec,ap;function zd(){if(ap)return ec;ap=1,ec=i;var s=Od().EventEmitter,t=yn();t(i,s),i.Readable=qb(),i.Writable=Hb(),i.Duplex=ua(),i.Transform=Kb(),i.PassThrough=wD(),i.finished=$d(),i.pipeline=kD(),i.Stream=i;function i(){s.call(this)}return i.prototype.pipe=function(n,a){var o=this;function l(u){n.writable&&n.write(u)===!1&&o.pause&&o.pause()}o.on("data",l);function r(){o.readable&&o.resume&&o.resume()}n.on("drain",r),!n._isStdio&&(!a||a.end!==!1)&&(o.on("end",c),o.on("close",f));var d=!1;function c(){d||(d=!0,n.end())}function f(){d||(d=!0,typeof n.destroy=="function"&&n.destroy())}function b(u){if(D(),s.listenerCount(this,"error")===0)throw u}o.on("error",b),n.on("error",b);function D(){o.removeListener("data",l),n.removeListener("drain",r),o.removeListener("end",c),o.removeListener("close",f),o.removeListener("error",b),n.removeListener("error",b),o.removeListener("end",D),o.removeListener("close",D),n.removeListener("close",D)}return o.on("end",D),o.on("close",D),n.on("close",D),n.emit("pipe",o),n},ec}var rp;function SD(){return rp||(rp=1,function(s){(function(t){t.parser=function(C,P){return new n(C,P)},t.SAXParser=n,t.SAXStream=f,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(C,P){if(!(this instanceof n))return new n(C,P);var ee=this;o(ee),ee.q=ee.c="",ee.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ee.opt=P||{},ee.opt.lowercase=ee.opt.lowercase||ee.opt.lowercasetags,ee.looseCase=ee.opt.lowercase?"toLowerCase":"toUpperCase",ee.tags=[],ee.closed=ee.closedRoot=ee.sawRoot=!1,ee.tag=ee.error=null,ee.strict=!!C,ee.noscript=!!(C||ee.opt.noscript),ee.state=W.BEGIN,ee.strictEntities=ee.opt.strictEntities,ee.ENTITIES=ee.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ee.attribList=[],ee.opt.xmlns&&(ee.ns=Object.create(x)),ee.trackPosition=ee.opt.position!==!1,ee.trackPosition&&(ee.position=ee.line=ee.column=0),ie(ee,"onready")}Object.create||(Object.create=function(C){function P(){}P.prototype=C;var ee=new P;return ee}),Object.keys||(Object.keys=function(C){var P=[];for(var ee in C)C.hasOwnProperty(ee)&&P.push(ee);return P});function a(C){for(var P=Math.max(t.MAX_BUFFER_LENGTH,10),ee=0,$=0,U=i.length;$<U;$++){var G=C[i[$]].length;if(G>P)switch(i[$]){case"textNode":F(C);break;case"cdata":R(C,"oncdata",C.cdata),C.cdata="";break;case"script":R(C,"onscript",C.script),C.script="";break;default:Q(C,"Max buffer length exceeded: "+i[$])}ee=Math.max(ee,G)}var re=t.MAX_BUFFER_LENGTH-ee;C.bufferCheckPosition=re+C.position}function o(C){for(var P=0,ee=i.length;P<ee;P++)C[i[P]]=""}function l(C){F(C),C.cdata!==""&&(R(C,"oncdata",C.cdata),C.cdata=""),C.script!==""&&(R(C,"onscript",C.script),C.script="")}n.prototype={end:function(){J(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){l(this)}};var r;try{r=zd().Stream}catch{r=function(){}}var d=t.EVENTS.filter(function(C){return C!=="error"&&C!=="end"});function c(C,P){return new f(C,P)}function f(C,P){if(!(this instanceof f))return new f(C,P);r.apply(this),this._parser=new n(C,P),this.writable=!0,this.readable=!0;var ee=this;this._parser.onend=function(){ee.emit("end")},this._parser.onerror=function($){ee.emit("error",$),ee._parser.error=null},this._decoder=null,d.forEach(function($){Object.defineProperty(ee,"on"+$,{get:function(){return ee._parser["on"+$]},set:function(U){if(!U)return ee.removeAllListeners($),ee._parser["on"+$]=U,U;ee.on($,U)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(r.prototype,{constructor:{value:f}}),f.prototype.write=function(C){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(C)){if(!this._decoder){var P=id().StringDecoder;this._decoder=new P("utf8")}C=this._decoder.write(C)}return this._parser.write(C.toString()),this.emit("data",C),!0},f.prototype.end=function(C){return C&&C.length&&this.write(C),this._parser.end(),!0},f.prototype.on=function(C,P){var ee=this;return!ee._parser["on"+C]&&d.indexOf(C)!==-1&&(ee._parser["on"+C]=function(){var $=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,C),ee.emit.apply(ee,$)}),r.prototype.on.call(ee,C,P)};var b="[CDATA[",D="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",x={xml:u,xmlns:p},S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N(C){return C===" "||C===`
`||C==="\r"||C==="	"}function w(C){return C==='"'||C==="'"}function A(C){return C===">"||N(C)}function I(C,P){return C.test(P)}function B(C,P){return!I(C,P)}var W=0;t.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(C){var P=t.ENTITIES[C],ee=typeof P=="number"?String.fromCharCode(P):P;t.ENTITIES[C]=ee});for(var se in t.STATE)t.STATE[t.STATE[se]]=se;W=t.STATE;function ie(C,P,ee){C[P]&&C[P](ee)}function R(C,P,ee){C.textNode&&F(C),ie(C,P,ee)}function F(C){C.textNode=k(C.opt,C.textNode),C.textNode&&ie(C,"ontext",C.textNode),C.textNode=""}function k(C,P){return C.trim&&(P=P.trim()),C.normalize&&(P=P.replace(/\s+/g," ")),P}function Q(C,P){return F(C),C.trackPosition&&(P+=`
Line: `+C.line+`
Column: `+C.column+`
Char: `+C.c),P=new Error(P),C.error=P,ie(C,"onerror",P),C}function J(C){return C.sawRoot&&!C.closedRoot&&O(C,"Unclosed root tag"),C.state!==W.BEGIN&&C.state!==W.BEGIN_WHITESPACE&&C.state!==W.TEXT&&Q(C,"Unexpected end"),F(C),C.c="",C.closed=!0,ie(C,"onend"),n.call(C,C.strict,C.opt),C}function O(C,P){if(typeof C!="object"||!(C instanceof n))throw new Error("bad call to strictFail");C.strict&&Q(C,P)}function me(C){C.strict||(C.tagName=C.tagName[C.looseCase]());var P=C.tags[C.tags.length-1]||C,ee=C.tag={name:C.tagName,attributes:{}};C.opt.xmlns&&(ee.ns=P.ns),C.attribList.length=0,R(C,"onopentagstart",ee)}function de(C,P){var ee=C.indexOf(":"),$=ee<0?["",C]:C.split(":"),U=$[0],G=$[1];return P&&C==="xmlns"&&(U="xmlns",G=""),{prefix:U,local:G}}function fe(C){if(C.strict||(C.attribName=C.attribName[C.looseCase]()),C.attribList.indexOf(C.attribName)!==-1||C.tag.attributes.hasOwnProperty(C.attribName)){C.attribName=C.attribValue="";return}if(C.opt.xmlns){var P=de(C.attribName,!0),ee=P.prefix,$=P.local;if(ee==="xmlns")if($==="xml"&&C.attribValue!==u)O(C,"xml: prefix must be bound to "+u+`
Actual: `+C.attribValue);else if($==="xmlns"&&C.attribValue!==p)O(C,"xmlns: prefix must be bound to "+p+`
Actual: `+C.attribValue);else{var U=C.tag,G=C.tags[C.tags.length-1]||C;U.ns===G.ns&&(U.ns=Object.create(G.ns)),U.ns[$]=C.attribValue}C.attribList.push([C.attribName,C.attribValue])}else C.tag.attributes[C.attribName]=C.attribValue,R(C,"onattribute",{name:C.attribName,value:C.attribValue});C.attribName=C.attribValue=""}function ae(C,P){if(C.opt.xmlns){var ee=C.tag,$=de(C.tagName);ee.prefix=$.prefix,ee.local=$.local,ee.uri=ee.ns[$.prefix]||"",ee.prefix&&!ee.uri&&(O(C,"Unbound namespace prefix: "+JSON.stringify(C.tagName)),ee.uri=$.prefix);var U=C.tags[C.tags.length-1]||C;ee.ns&&U.ns!==ee.ns&&Object.keys(ee.ns).forEach(function(Z){R(C,"onopennamespace",{prefix:Z,uri:ee.ns[Z]})});for(var G=0,re=C.attribList.length;G<re;G++){var V=C.attribList[G],Y=V[0],T=V[1],y=de(Y,!0),E=y.prefix,j=y.local,q=E===""?"":ee.ns[E]||"",te={name:Y,value:T,prefix:E,local:j,uri:q};E&&E!=="xmlns"&&!q&&(O(C,"Unbound namespace prefix: "+JSON.stringify(E)),te.uri=E),C.tag.attributes[Y]=te,R(C,"onattribute",te)}C.attribList.length=0}C.tag.isSelfClosing=!!P,C.sawRoot=!0,C.tags.push(C.tag),R(C,"onopentag",C.tag),P||(!C.noscript&&C.tagName.toLowerCase()==="script"?C.state=W.SCRIPT:C.state=W.TEXT,C.tag=null,C.tagName=""),C.attribName=C.attribValue="",C.attribList.length=0}function L(C){if(!C.tagName){O(C,"Weird empty close tag."),C.textNode+="</>",C.state=W.TEXT;return}if(C.script){if(C.tagName!=="script"){C.script+="</"+C.tagName+">",C.tagName="",C.state=W.SCRIPT;return}R(C,"onscript",C.script),C.script=""}var P=C.tags.length,ee=C.tagName;C.strict||(ee=ee[C.looseCase]());for(var $=ee;P--;){var U=C.tags[P];if(U.name!==$)O(C,"Unexpected close tag");else break}if(P<0){O(C,"Unmatched closing tag: "+C.tagName),C.textNode+="</"+C.tagName+">",C.state=W.TEXT;return}C.tagName=ee;for(var G=C.tags.length;G-- >P;){var re=C.tag=C.tags.pop();C.tagName=C.tag.name,R(C,"onclosetag",C.tagName);var V={};for(var Y in re.ns)V[Y]=re.ns[Y];var T=C.tags[C.tags.length-1]||C;C.opt.xmlns&&re.ns!==T.ns&&Object.keys(re.ns).forEach(function(y){var E=re.ns[y];R(C,"onclosenamespace",{prefix:y,uri:E})})}P===0&&(C.closedRoot=!0),C.tagName=C.attribValue=C.attribName="",C.attribList.length=0,C.state=W.TEXT}function H(C){var P=C.entity,ee=P.toLowerCase(),$,U="";return C.ENTITIES[P]?C.ENTITIES[P]:C.ENTITIES[ee]?C.ENTITIES[ee]:(P=ee,P.charAt(0)==="#"&&(P.charAt(1)==="x"?(P=P.slice(2),$=parseInt(P,16),U=$.toString(16)):(P=P.slice(1),$=parseInt(P,10),U=$.toString(10))),P=P.replace(/^0+/,""),isNaN($)||U.toLowerCase()!==P?(O(C,"Invalid character entity"),"&"+C.entity+";"):String.fromCodePoint($))}function le(C,P){P==="<"?(C.state=W.OPEN_WAKA,C.startTagPosition=C.position):N(P)||(O(C,"Non-whitespace before first tag."),C.textNode=P,C.state=W.TEXT)}function ue(C,P){var ee="";return P<C.length&&(ee=C.charAt(P)),ee}function K(C){var P=this;if(this.error)throw this.error;if(P.closed)return Q(P,"Cannot write after close. Assign an onready handler.");if(C===null)return J(P);typeof C=="object"&&(C=C.toString());for(var ee=0,$="";$=ue(C,ee++),P.c=$,!!$;)switch(P.trackPosition&&(P.position++,$===`
`?(P.line++,P.column=0):P.column++),P.state){case W.BEGIN:if(P.state=W.BEGIN_WHITESPACE,$==="\uFEFF")continue;le(P,$);continue;case W.BEGIN_WHITESPACE:le(P,$);continue;case W.TEXT:if(P.sawRoot&&!P.closedRoot){for(var U=ee-1;$&&$!=="<"&&$!=="&";)$=ue(C,ee++),$&&P.trackPosition&&(P.position++,$===`
`?(P.line++,P.column=0):P.column++);P.textNode+=C.substring(U,ee-1)}$==="<"&&!(P.sawRoot&&P.closedRoot&&!P.strict)?(P.state=W.OPEN_WAKA,P.startTagPosition=P.position):(!N($)&&(!P.sawRoot||P.closedRoot)&&O(P,"Text data outside of root node."),$==="&"?P.state=W.TEXT_ENTITY:P.textNode+=$);continue;case W.SCRIPT:$==="<"?P.state=W.SCRIPT_ENDING:P.script+=$;continue;case W.SCRIPT_ENDING:$==="/"?P.state=W.CLOSE_TAG:(P.script+="<"+$,P.state=W.SCRIPT);continue;case W.OPEN_WAKA:if($==="!")P.state=W.SGML_DECL,P.sgmlDecl="";else if(!N($))if(I(S,$))P.state=W.OPEN_TAG,P.tagName=$;else if($==="/")P.state=W.CLOSE_TAG,P.tagName="";else if($==="?")P.state=W.PROC_INST,P.procInstName=P.procInstBody="";else{if(O(P,"Unencoded <"),P.startTagPosition+1<P.position){var G=P.position-P.startTagPosition;$=new Array(G).join(" ")+$}P.textNode+="<"+$,P.state=W.TEXT}continue;case W.SGML_DECL:(P.sgmlDecl+$).toUpperCase()===b?(R(P,"onopencdata"),P.state=W.CDATA,P.sgmlDecl="",P.cdata=""):P.sgmlDecl+$==="--"?(P.state=W.COMMENT,P.comment="",P.sgmlDecl=""):(P.sgmlDecl+$).toUpperCase()===D?(P.state=W.DOCTYPE,(P.doctype||P.sawRoot)&&O(P,"Inappropriately located doctype declaration"),P.doctype="",P.sgmlDecl=""):$===">"?(R(P,"onsgmldeclaration",P.sgmlDecl),P.sgmlDecl="",P.state=W.TEXT):(w($)&&(P.state=W.SGML_DECL_QUOTED),P.sgmlDecl+=$);continue;case W.SGML_DECL_QUOTED:$===P.q&&(P.state=W.SGML_DECL,P.q=""),P.sgmlDecl+=$;continue;case W.DOCTYPE:$===">"?(P.state=W.TEXT,R(P,"ondoctype",P.doctype),P.doctype=!0):(P.doctype+=$,$==="["?P.state=W.DOCTYPE_DTD:w($)&&(P.state=W.DOCTYPE_QUOTED,P.q=$));continue;case W.DOCTYPE_QUOTED:P.doctype+=$,$===P.q&&(P.q="",P.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:P.doctype+=$,$==="]"?P.state=W.DOCTYPE:w($)&&(P.state=W.DOCTYPE_DTD_QUOTED,P.q=$);continue;case W.DOCTYPE_DTD_QUOTED:P.doctype+=$,$===P.q&&(P.state=W.DOCTYPE_DTD,P.q="");continue;case W.COMMENT:$==="-"?P.state=W.COMMENT_ENDING:P.comment+=$;continue;case W.COMMENT_ENDING:$==="-"?(P.state=W.COMMENT_ENDED,P.comment=k(P.opt,P.comment),P.comment&&R(P,"oncomment",P.comment),P.comment=""):(P.comment+="-"+$,P.state=W.COMMENT);continue;case W.COMMENT_ENDED:$!==">"?(O(P,"Malformed comment"),P.comment+="--"+$,P.state=W.COMMENT):P.state=W.TEXT;continue;case W.CDATA:$==="]"?P.state=W.CDATA_ENDING:P.cdata+=$;continue;case W.CDATA_ENDING:$==="]"?P.state=W.CDATA_ENDING_2:(P.cdata+="]"+$,P.state=W.CDATA);continue;case W.CDATA_ENDING_2:$===">"?(P.cdata&&R(P,"oncdata",P.cdata),R(P,"onclosecdata"),P.cdata="",P.state=W.TEXT):$==="]"?P.cdata+="]":(P.cdata+="]]"+$,P.state=W.CDATA);continue;case W.PROC_INST:$==="?"?P.state=W.PROC_INST_ENDING:N($)?P.state=W.PROC_INST_BODY:P.procInstName+=$;continue;case W.PROC_INST_BODY:if(!P.procInstBody&&N($))continue;$==="?"?P.state=W.PROC_INST_ENDING:P.procInstBody+=$;continue;case W.PROC_INST_ENDING:$===">"?(R(P,"onprocessinginstruction",{name:P.procInstName,body:P.procInstBody}),P.procInstName=P.procInstBody="",P.state=W.TEXT):(P.procInstBody+="?"+$,P.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:I(m,$)?P.tagName+=$:(me(P),$===">"?ae(P):$==="/"?P.state=W.OPEN_TAG_SLASH:(N($)||O(P,"Invalid character in tag name"),P.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:$===">"?(ae(P,!0),L(P)):(O(P,"Forward-slash in opening tag not followed by >"),P.state=W.ATTRIB);continue;case W.ATTRIB:if(N($))continue;$===">"?ae(P):$==="/"?P.state=W.OPEN_TAG_SLASH:I(S,$)?(P.attribName=$,P.attribValue="",P.state=W.ATTRIB_NAME):O(P,"Invalid attribute name");continue;case W.ATTRIB_NAME:$==="="?P.state=W.ATTRIB_VALUE:$===">"?(O(P,"Attribute without value"),P.attribValue=P.attribName,fe(P),ae(P)):N($)?P.state=W.ATTRIB_NAME_SAW_WHITE:I(m,$)?P.attribName+=$:O(P,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if($==="=")P.state=W.ATTRIB_VALUE;else{if(N($))continue;O(P,"Attribute without value"),P.tag.attributes[P.attribName]="",P.attribValue="",R(P,"onattribute",{name:P.attribName,value:""}),P.attribName="",$===">"?ae(P):I(S,$)?(P.attribName=$,P.state=W.ATTRIB_NAME):(O(P,"Invalid attribute name"),P.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(N($))continue;w($)?(P.q=$,P.state=W.ATTRIB_VALUE_QUOTED):(O(P,"Unquoted attribute value"),P.state=W.ATTRIB_VALUE_UNQUOTED,P.attribValue=$);continue;case W.ATTRIB_VALUE_QUOTED:if($!==P.q){$==="&"?P.state=W.ATTRIB_VALUE_ENTITY_Q:P.attribValue+=$;continue}fe(P),P.q="",P.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:N($)?P.state=W.ATTRIB:$===">"?ae(P):$==="/"?P.state=W.OPEN_TAG_SLASH:I(S,$)?(O(P,"No whitespace between attributes"),P.attribName=$,P.attribValue="",P.state=W.ATTRIB_NAME):O(P,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(!A($)){$==="&"?P.state=W.ATTRIB_VALUE_ENTITY_U:P.attribValue+=$;continue}fe(P),$===">"?ae(P):P.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(P.tagName)$===">"?L(P):I(m,$)?P.tagName+=$:P.script?(P.script+="</"+P.tagName,P.tagName="",P.state=W.SCRIPT):(N($)||O(P,"Invalid tagname in closing tag"),P.state=W.CLOSE_TAG_SAW_WHITE);else{if(N($))continue;B(S,$)?P.script?(P.script+="</"+$,P.state=W.SCRIPT):O(P,"Invalid tagname in closing tag."):P.tagName=$}continue;case W.CLOSE_TAG_SAW_WHITE:if(N($))continue;$===">"?L(P):O(P,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var re,V;switch(P.state){case W.TEXT_ENTITY:re=W.TEXT,V="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:re=W.ATTRIB_VALUE_QUOTED,V="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:re=W.ATTRIB_VALUE_UNQUOTED,V="attribValue";break}$===";"?(P[V]+=H(P),P.entity="",P.state=re):I(P.entity.length?g:v,$)?P.entity+=$:(O(P,"Invalid character in entity name"),P[V]+="&"+P.entity+$,P.entity="",P.state=re);continue;default:throw new Error(P,"Unknown state: "+P.state)}return P.position>=P.bufferCheckPosition&&a(P),P}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var C=String.fromCharCode,P=Math.floor,ee=function(){var $=16384,U=[],G,re,V=-1,Y=arguments.length;if(!Y)return"";for(var T="";++V<Y;){var y=Number(arguments[V]);if(!isFinite(y)||y<0||y>1114111||P(y)!==y)throw RangeError("Invalid code point: "+y);y<=65535?U.push(y):(y-=65536,G=(y>>10)+55296,re=y%1024+56320,U.push(G,re)),(V+1===Y||U.length>$)&&(T+=C.apply(null,U),U.length=0)}return T};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ee,configurable:!0,writable:!0}):String.fromCodePoint=ee}()})(s)}(Oo)),Oo}var tc,op;function Gd(){return op||(op=1,tc={isArray:function(s){return Array.isArray?Array.isArray(s):Object.prototype.toString.call(s)==="[object Array]"}}),tc}var sc,lp;function Hd(){if(lp)return sc;lp=1;var s=Gd().isArray;return sc={copyOptions:function(t){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},ensureFlagExists:function(t,i){(!(t in i)||typeof i[t]!="boolean")&&(i[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!s(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,i){(!(t+"Key"in i)||typeof i[t+"Key"]!="string")&&(i[t+"Key"]=i.compact?"_"+t:t)},checkFnExists:function(t,i){return t+"Fn"in i}},sc}var ic,cp;function Yb(){if(cp)return ic;cp=1;var s=SD(),t=Hd(),i=Gd().isArray,n,a;function o(m){return n=t.copyOptions(m),t.ensureFlagExists("ignoreDeclaration",n),t.ensureFlagExists("ignoreInstruction",n),t.ensureFlagExists("ignoreAttributes",n),t.ensureFlagExists("ignoreText",n),t.ensureFlagExists("ignoreComment",n),t.ensureFlagExists("ignoreCdata",n),t.ensureFlagExists("ignoreDoctype",n),t.ensureFlagExists("compact",n),t.ensureFlagExists("alwaysChildren",n),t.ensureFlagExists("addParent",n),t.ensureFlagExists("trim",n),t.ensureFlagExists("nativeType",n),t.ensureFlagExists("nativeTypeAttributes",n),t.ensureFlagExists("sanitize",n),t.ensureFlagExists("instructionHasAttributes",n),t.ensureFlagExists("captureSpacesBetweenElements",n),t.ensureAlwaysArrayExists(n),t.ensureKeyExists("declaration",n),t.ensureKeyExists("instruction",n),t.ensureKeyExists("attributes",n),t.ensureKeyExists("text",n),t.ensureKeyExists("comment",n),t.ensureKeyExists("cdata",n),t.ensureKeyExists("doctype",n),t.ensureKeyExists("type",n),t.ensureKeyExists("name",n),t.ensureKeyExists("elements",n),t.ensureKeyExists("parent",n),t.checkFnExists("doctype",n),t.checkFnExists("instruction",n),t.checkFnExists("cdata",n),t.checkFnExists("comment",n),t.checkFnExists("text",n),t.checkFnExists("instructionName",n),t.checkFnExists("elementName",n),t.checkFnExists("attributeName",n),t.checkFnExists("attributeValue",n),t.checkFnExists("attributes",n),n}function l(m){var v=Number(m);if(!isNaN(v))return v;var g=m.toLowerCase();return g==="true"?!0:g==="false"?!1:m}function r(m,v){var g;if(n.compact){if(!a[n[m+"Key"]]&&(i(n.alwaysArray)?n.alwaysArray.indexOf(n[m+"Key"])!==-1:n.alwaysArray)&&(a[n[m+"Key"]]=[]),a[n[m+"Key"]]&&!i(a[n[m+"Key"]])&&(a[n[m+"Key"]]=[a[n[m+"Key"]]]),m+"Fn"in n&&typeof v=="string"&&(v=n[m+"Fn"](v,a)),m==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(g in v)if(v.hasOwnProperty(g))if("instructionFn"in n)v[g]=n.instructionFn(v[g],g,a);else{var N=v[g];delete v[g],v[n.instructionNameFn(g,N,a)]=N}}i(a[n[m+"Key"]])?a[n[m+"Key"]].push(v):a[n[m+"Key"]]=v}else{a[n.elementsKey]||(a[n.elementsKey]=[]);var w={};if(w[n.typeKey]=m,m==="instruction"){for(g in v)if(v.hasOwnProperty(g))break;w[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(g,v,a):g,n.instructionHasAttributes?(w[n.attributesKey]=v[g][n.attributesKey],"instructionFn"in n&&(w[n.attributesKey]=n.instructionFn(w[n.attributesKey],g,a))):("instructionFn"in n&&(v[g]=n.instructionFn(v[g],g,a)),w[n.instructionKey]=v[g])}else m+"Fn"in n&&(v=n[m+"Fn"](v,a)),w[n[m+"Key"]]=v;n.addParent&&(w[n.parentKey]=a),a[n.elementsKey].push(w)}}function d(m){if("attributesFn"in n&&m&&(m=n.attributesFn(m,a)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&m){var v;for(v in m)if(m.hasOwnProperty(v)&&(n.trim&&(m[v]=m[v].trim()),n.nativeTypeAttributes&&(m[v]=l(m[v])),"attributeValueFn"in n&&(m[v]=n.attributeValueFn(m[v],v,a)),"attributeNameFn"in n)){var g=m[v];delete m[v],m[n.attributeNameFn(v,m[v],a)]=g}}return m}function c(m){var v={};if(m.body&&(m.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var g=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,N;(N=g.exec(m.body))!==null;)v[N[1]]=N[2]||N[3]||N[4];v=d(v)}if(m.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;a[n.declarationKey]={},Object.keys(v).length&&(a[n.declarationKey][n.attributesKey]=v),n.addParent&&(a[n.declarationKey][n.parentKey]=a)}else{if(n.ignoreInstruction)return;n.trim&&(m.body=m.body.trim());var w={};n.instructionHasAttributes&&Object.keys(v).length?(w[m.name]={},w[m.name][n.attributesKey]=v):w[m.name]=m.body,r("instruction",w)}}function f(m,v){var g;if(typeof m=="object"&&(v=m.attributes,m=m.name),v=d(v),"elementNameFn"in n&&(m=n.elementNameFn(m,a)),n.compact){if(g={},!n.ignoreAttributes&&v&&Object.keys(v).length){g[n.attributesKey]={};var N;for(N in v)v.hasOwnProperty(N)&&(g[n.attributesKey][N]=v[N])}!(m in a)&&(i(n.alwaysArray)?n.alwaysArray.indexOf(m)!==-1:n.alwaysArray)&&(a[m]=[]),a[m]&&!i(a[m])&&(a[m]=[a[m]]),i(a[m])?a[m].push(g):a[m]=g}else a[n.elementsKey]||(a[n.elementsKey]=[]),g={},g[n.typeKey]="element",g[n.nameKey]=m,!n.ignoreAttributes&&v&&Object.keys(v).length&&(g[n.attributesKey]=v),n.alwaysChildren&&(g[n.elementsKey]=[]),a[n.elementsKey].push(g);g[n.parentKey]=a,a=g}function b(m){n.ignoreText||!m.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(m=m.trim()),n.nativeType&&(m=l(m)),n.sanitize&&(m=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),r("text",m))}function D(m){n.ignoreComment||(n.trim&&(m=m.trim()),r("comment",m))}function u(m){var v=a[n.parentKey];n.addParent||delete a[n.parentKey],a=v}function p(m){n.ignoreCdata||(n.trim&&(m=m.trim()),r("cdata",m))}function x(m){n.ignoreDoctype||(m=m.replace(/^ /,""),n.trim&&(m=m.trim()),r("doctype",m))}function S(m){m.note=m}return ic=function(m,v){var g=s.parser(!0,{}),N={};if(a=N,n=o(v),g.opt={strictEntities:!0},g.onopentag=f,g.ontext=b,g.oncomment=D,g.onclosetag=u,g.onerror=S,g.oncdata=p,g.ondoctype=x,g.onprocessinginstruction=c,g.write(m).close(),N[n.elementsKey]){var w=N[n.elementsKey];delete N[n.elementsKey],N[n.elementsKey]=w,delete N.text}return N},ic}var nc,dp;function jD(){if(dp)return nc;dp=1;var s=Hd(),t=Yb();function i(n){var a=s.copyOptions(n);return s.ensureSpacesExists(a),a}return nc=function(n,a){var o,l,r,d;return o=i(a),l=t(n,o),d="compact"in o&&o.compact?"_parent":"parent","addParent"in o&&o.addParent?r=JSON.stringify(l,function(c,f){return c===d?"_":f},o.spaces):r=JSON.stringify(l,null,o.spaces),r.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},nc}var ac,up;function Qb(){if(up)return ac;up=1;var s=Hd(),t=Gd().isArray,i,n;function a(g){var N=s.copyOptions(g);return s.ensureFlagExists("ignoreDeclaration",N),s.ensureFlagExists("ignoreInstruction",N),s.ensureFlagExists("ignoreAttributes",N),s.ensureFlagExists("ignoreText",N),s.ensureFlagExists("ignoreComment",N),s.ensureFlagExists("ignoreCdata",N),s.ensureFlagExists("ignoreDoctype",N),s.ensureFlagExists("compact",N),s.ensureFlagExists("indentText",N),s.ensureFlagExists("indentCdata",N),s.ensureFlagExists("indentAttributes",N),s.ensureFlagExists("indentInstruction",N),s.ensureFlagExists("fullTagEmptyElement",N),s.ensureFlagExists("noQuotesForNativeAttributes",N),s.ensureSpacesExists(N),typeof N.spaces=="number"&&(N.spaces=Array(N.spaces+1).join(" ")),s.ensureKeyExists("declaration",N),s.ensureKeyExists("instruction",N),s.ensureKeyExists("attributes",N),s.ensureKeyExists("text",N),s.ensureKeyExists("comment",N),s.ensureKeyExists("cdata",N),s.ensureKeyExists("doctype",N),s.ensureKeyExists("type",N),s.ensureKeyExists("name",N),s.ensureKeyExists("elements",N),s.checkFnExists("doctype",N),s.checkFnExists("instruction",N),s.checkFnExists("cdata",N),s.checkFnExists("comment",N),s.checkFnExists("text",N),s.checkFnExists("instructionName",N),s.checkFnExists("elementName",N),s.checkFnExists("attributeName",N),s.checkFnExists("attributeValue",N),s.checkFnExists("attributes",N),s.checkFnExists("fullTagEmptyElement",N),N}function o(g,N,w){return(!w&&g.spaces?`
`:"")+Array(N+1).join(g.spaces)}function l(g,N,w){if(N.ignoreAttributes)return"";"attributesFn"in N&&(g=N.attributesFn(g,n,i));var A,I,B,W,se=[];for(A in g)g.hasOwnProperty(A)&&g[A]!==null&&g[A]!==void 0&&(W=N.noQuotesForNativeAttributes&&typeof g[A]!="string"?"":'"',I=""+g[A],I=I.replace(/"/g,"&quot;"),B="attributeNameFn"in N?N.attributeNameFn(A,I,n,i):A,se.push(N.spaces&&N.indentAttributes?o(N,w+1,!1):" "),se.push(B+"="+W+("attributeValueFn"in N?N.attributeValueFn(I,A,n,i):I)+W));return g&&Object.keys(g).length&&N.spaces&&N.indentAttributes&&se.push(o(N,w,!1)),se.join("")}function r(g,N,w){return i=g,n="xml",N.ignoreDeclaration?"":"<?xml"+l(g[N.attributesKey],N,w)+"?>"}function d(g,N,w){if(N.ignoreInstruction)return"";var A;for(A in g)if(g.hasOwnProperty(A))break;var I="instructionNameFn"in N?N.instructionNameFn(A,g[A],n,i):A;if(typeof g[A]=="object")return i=g,n=I,"<?"+I+l(g[A][N.attributesKey],N,w)+"?>";var B=g[A]?g[A]:"";return"instructionFn"in N&&(B=N.instructionFn(B,A,n,i)),"<?"+I+(B?" "+B:"")+"?>"}function c(g,N){return N.ignoreComment?"":"<!--"+("commentFn"in N?N.commentFn(g,n,i):g)+"-->"}function f(g,N){return N.ignoreCdata?"":"<![CDATA["+("cdataFn"in N?N.cdataFn(g,n,i):g.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function b(g,N){return N.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in N?N.doctypeFn(g,n,i):g)+">"}function D(g,N){return N.ignoreText?"":(g=""+g,g=g.replace(/&amp;/g,"&"),g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in N?N.textFn(g,n,i):g)}function u(g,N){var w;if(g.elements&&g.elements.length)for(w=0;w<g.elements.length;++w)switch(g.elements[w][N.typeKey]){case"text":if(N.indentText)return!0;break;case"cdata":if(N.indentCdata)return!0;break;case"instruction":if(N.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function p(g,N,w){i=g,n=g.name;var A=[],I="elementNameFn"in N?N.elementNameFn(g.name,g):g.name;A.push("<"+I),g[N.attributesKey]&&A.push(l(g[N.attributesKey],N,w));var B=g[N.elementsKey]&&g[N.elementsKey].length||g[N.attributesKey]&&g[N.attributesKey]["xml:space"]==="preserve";return B||("fullTagEmptyElementFn"in N?B=N.fullTagEmptyElementFn(g.name,g):B=N.fullTagEmptyElement),B?(A.push(">"),g[N.elementsKey]&&g[N.elementsKey].length&&(A.push(x(g[N.elementsKey],N,w+1)),i=g,n=g.name),A.push(N.spaces&&u(g,N)?`
`+Array(w+1).join(N.spaces):""),A.push("</"+I+">")):A.push("/>"),A.join("")}function x(g,N,w,A){return g.reduce(function(I,B){var W=o(N,w,A&&!I);switch(B.type){case"element":return I+W+p(B,N,w);case"comment":return I+W+c(B[N.commentKey],N);case"doctype":return I+W+b(B[N.doctypeKey],N);case"cdata":return I+(N.indentCdata?W:"")+f(B[N.cdataKey],N);case"text":return I+(N.indentText?W:"")+D(B[N.textKey],N);case"instruction":var se={};return se[B[N.nameKey]]=B[N.attributesKey]?B:B[N.instructionKey],I+(N.indentInstruction?W:"")+d(se,N,w)}},"")}function S(g,N,w){var A;for(A in g)if(g.hasOwnProperty(A))switch(A){case N.parentKey:case N.attributesKey:break;case N.textKey:if(N.indentText||w)return!0;break;case N.cdataKey:if(N.indentCdata||w)return!0;break;case N.instructionKey:if(N.indentInstruction||w)return!0;break;case N.doctypeKey:case N.commentKey:return!0;default:return!0}return!1}function m(g,N,w,A,I){i=g,n=N;var B="elementNameFn"in w?w.elementNameFn(N,g):N;if(typeof g>"u"||g===null||g==="")return"fullTagEmptyElementFn"in w&&w.fullTagEmptyElementFn(N,g)||w.fullTagEmptyElement?"<"+B+"></"+B+">":"<"+B+"/>";var W=[];if(N){if(W.push("<"+B),typeof g!="object")return W.push(">"+D(g,w)+"</"+B+">"),W.join("");g[w.attributesKey]&&W.push(l(g[w.attributesKey],w,A));var se=S(g,w,!0)||g[w.attributesKey]&&g[w.attributesKey]["xml:space"]==="preserve";if(se||("fullTagEmptyElementFn"in w?se=w.fullTagEmptyElementFn(N,g):se=w.fullTagEmptyElement),se)W.push(">");else return W.push("/>"),W.join("")}return W.push(v(g,w,A+1,!1)),i=g,n=N,N&&W.push((I?o(w,A,!1):"")+"</"+B+">"),W.join("")}function v(g,N,w,A){var I,B,W,se=[];for(B in g)if(g.hasOwnProperty(B))for(W=t(g[B])?g[B]:[g[B]],I=0;I<W.length;++I){switch(B){case N.declarationKey:se.push(r(W[I],N,w));break;case N.instructionKey:se.push((N.indentInstruction?o(N,w,A):"")+d(W[I],N,w));break;case N.attributesKey:case N.parentKey:break;case N.textKey:se.push((N.indentText?o(N,w,A):"")+D(W[I],N));break;case N.cdataKey:se.push((N.indentCdata?o(N,w,A):"")+f(W[I],N));break;case N.doctypeKey:se.push(o(N,w,A)+b(W[I],N));break;case N.commentKey:se.push(o(N,w,A)+c(W[I],N));break;default:se.push(o(N,w,A)+m(W[I],B,N,w,S(W[I],N)))}A=A&&!se.length}return se.join("")}return ac=function(g,N){N=a(N);var w=[];return i=g,n="_root_",N.compact?w.push(v(g,N,0,!0)):(g[N.declarationKey]&&w.push(r(g[N.declarationKey],N,0)),g[N.elementsKey]&&g[N.elementsKey].length&&w.push(x(g[N.elementsKey],N,0,!w.length))),w.join("")},ac}var rc,mp;function VD(){if(mp)return rc;mp=1;var s=Qb();return rc=function(t,i){t instanceof Buffer&&(t=t.toString());var n=null;if(typeof t=="string")try{n=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else n=t;return s(n,i)},rc}var oc,pp;function CD(){if(pp)return oc;pp=1;var s=Yb(),t=jD(),i=Qb(),n=VD();return oc={xml2js:s,xml2json:t,js2xml:i,json2xml:n},oc}var Zb=CD();const qd=s=>{switch(s.type){case void 0:case"element":const t=new PD(s.name,s.attributes),i=s.elements||[];for(const n of i){const a=qd(n);a!==void 0&&t.push(a)}return t;case"text":return s.text;default:return}};class RD extends rt{}class PD extends Ie{static fromXmlString(t){const i=Zb.xml2js(t,{compact:!1});return qd(i)}constructor(t,i){super(t),i&&this.root.push(new RD(i))}push(t){this.root.push(t)}}class ID extends Ie{constructor(t){super(""),this._attr=t}prepForXml(t){return{_attr:this._attr}}}class Xb extends Ie{constructor(t,i){super(t),i&&(this.root=i.root)}}const oi=s=>{if(isNaN(s))throw new Error(`Invalid value '${s}' specified. Must be an integer.`);return Math.floor(s)},uo=s=>{const t=oi(s);if(t<0)throw new Error(`Invalid value '${s}' specified. Must be a positive integer.`);return t},Jb=(s,t)=>{const i=t*2;if(s.length!==i||isNaN(+`0x${s}`))throw new Error(`Invalid hex value '${s}'. Expected ${i} digit hex value`);return s},fp=s=>Jb(s,1),Kd=s=>{const t=s.slice(-2),i=s.substring(0,s.length-2);return`${Number(i)}${t}`},eN=s=>{const t=Kd(s);if(parseFloat(t)<0)throw new Error(`Invalid value '${t}' specified. Expected a positive number.`);return t},ma=s=>{if(s==="auto")return s;const t=s.charAt(0)==="#"?s.substring(1):s;return Jb(t,3)},an=s=>typeof s=="string"?Kd(s):oi(s),AD=s=>typeof s=="string"?eN(s):uo(s),ei=s=>typeof s=="string"?eN(s):uo(s),TD=s=>{const t=s.substring(0,s.length-1);return`${Number(t)}%`},tN=s=>typeof s=="number"?oi(s):s.slice(-1)==="%"?TD(s):Kd(s),WD=uo,LD=uo,MD=s=>s.toISOString();class Oe extends Ie{constructor(t,i=!0){super(t),i!==!0&&this.root.push(new As({val:i}))}}class lc extends Ie{constructor(t,i){super(t),this.root.push(new As({val:AD(i)}))}}class Wn extends Ie{constructor(t,i){super(t),this.root.push(new As({val:i}))}}const Sa=(s,t)=>new Ns({name:s,attributes:{value:{key:"w:val",value:t}}});class Ta extends Ie{constructor(t,i){super(t),this.root.push(new As({val:i}))}}class _D extends Ie{constructor(t,i){super(t),this.root.push(new As({val:i}))}}class kn extends Ie{constructor(t,i){super(t),this.root.push(i)}}class Ns extends Ie{constructor({name:t,attributes:i,children:n}){super(t),i&&this.root.push(new un(i)),n&&this.root.push(...n)}}const ps={START:"start",CENTER:"center",LEFT:"left",RIGHT:"right"};class OD extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class sN extends Ie{constructor(t){super("w:jc"),this.root.push(new OD({val:t}))}}class vs extends Ie{constructor(t,{color:i,size:n,space:a,style:o}){super(t),this.root.push(new FD({style:o,color:i===void 0?void 0:ma(i),size:n===void 0?void 0:WD(n),space:a===void 0?void 0:LD(a)}))}}class FD extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const hi={SINGLE:"single",NONE:"none"};class BD extends dn{constructor(t){super("w:pBdr"),t.top&&this.root.push(new vs("w:top",t.top)),t.bottom&&this.root.push(new vs("w:bottom",t.bottom)),t.left&&this.root.push(new vs("w:left",t.left)),t.right&&this.root.push(new vs("w:right",t.right))}}class UD extends Ie{constructor(){super("w:pBdr");const t=new vs("w:bottom",{color:"auto",space:1,style:hi.SINGLE,size:6});this.root.push(t)}}class $D extends Ie{constructor({start:t,end:i,left:n,right:a,hanging:o,firstLine:l}){super("w:ind"),this.root.push(new un({start:{key:"w:start",value:t===void 0?void 0:an(t)},end:{key:"w:end",value:i===void 0?void 0:an(i)},left:{key:"w:left",value:n===void 0?void 0:an(n)},right:{key:"w:right",value:a===void 0?void 0:an(a)},hanging:{key:"w:hanging",value:o===void 0?void 0:ei(o)},firstLine:{key:"w:firstLine",value:l===void 0?void 0:ei(l)}}))}}let zD=class extends Ie{constructor(){super("w:br")}};const Yd={BEGIN:"begin",END:"end",SEPARATE:"separate"};class Qd extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Nr extends Ie{constructor(t){super("w:fldChar"),this.root.push(new Qd({type:Yd.BEGIN,dirty:t}))}}class xr extends Ie{constructor(t){super("w:fldChar"),this.root.push(new Qd({type:Yd.SEPARATE,dirty:t}))}}class gr extends Ie{constructor(t){super("w:fldChar"),this.root.push(new Qd({type:Yd.END,dirty:t}))}}const pa={DEFAULT:"default",PRESERVE:"preserve"};class fa extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{space:"xml:space"})}}class GD extends Ie{constructor(){super("w:instrText"),this.root.push(new fa({space:pa.PRESERVE})),this.root.push("PAGE")}}class HD extends Ie{constructor(){super("w:instrText"),this.root.push(new fa({space:pa.PRESERVE})),this.root.push("NUMPAGES")}}class qD extends Ie{constructor(){super("w:instrText"),this.root.push(new fa({space:pa.PRESERVE})),this.root.push("SECTIONPAGES")}}class KD extends Ie{constructor(){super("w:instrText"),this.root.push(new fa({space:pa.PRESERVE})),this.root.push("SECTION")}}class YD extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class mo extends Ie{constructor({fill:t,color:i,type:n}){super("w:shd"),this.root.push(new YD({fill:t===void 0?void 0:ma(t),color:i===void 0?void 0:ma(i),type:n}))}}class QD extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const ZD={DOT:"dot"};class XD extends Ie{constructor(t){super("w:em"),this.root.push(new As({val:t}))}}class JD extends XD{constructor(t=ZD.DOT){super(t)}}class eE extends Ie{constructor(t){super("w:spacing"),this.root.push(new As({val:an(t)}))}}class tE extends Ie{constructor(t){super("w:color"),this.root.push(new As({val:ma(t)}))}}class sE extends Ie{constructor(t){super("w:highlight"),this.root.push(new As({val:t}))}}class iE extends Ie{constructor(t){super("w:highlightCs"),this.root.push(new As({val:t}))}}const nE=s=>new Ns({name:"w:lang",attributes:{value:{key:"w:val",value:s.value},eastAsia:{key:"w:eastAsia",value:s.eastAsia},bidirectional:{key:"w:bidi",value:s.bidirectional}}});class hp extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class cc extends Ie{constructor(t,i){if(super("w:rFonts"),typeof t=="string"){const n=t;this.root.push(new hp({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:i}))}else{const n=t;this.root.push(new hp(n))}}}let iN=class extends Ie{constructor(t){super("w:vertAlign"),this.root.push(new As({val:t}))}};class aE extends iN{constructor(){super("superscript")}}class rE extends iN{constructor(){super("subscript")}}const nN={SINGLE:"single"};class oE extends Ie{constructor(t=nN.SINGLE,i){super("w:u"),this.root.push(new As({val:t,color:i===void 0?void 0:ma(i)}))}}class Un extends dn{constructor(t){var i,n;if(super("w:rPr"),!t)return;t.style&&this.push(new Wn("w:rStyle",t.style)),t.font&&(typeof t.font=="string"?this.push(new cc(t.font)):"name"in t.font?this.push(new cc(t.font.name,t.font.hint)):this.push(new cc(t.font))),t.bold!==void 0&&this.push(new Oe("w:b",t.bold)),(t.boldComplexScript===void 0&&t.bold!==void 0||t.boldComplexScript)&&this.push(new Oe("w:bCs",(i=t.boldComplexScript)!=null?i:t.bold)),t.italics!==void 0&&this.push(new Oe("w:i",t.italics)),(t.italicsComplexScript===void 0&&t.italics!==void 0||t.italicsComplexScript)&&this.push(new Oe("w:iCs",(n=t.italicsComplexScript)!=null?n:t.italics)),t.smallCaps!==void 0?this.push(new Oe("w:smallCaps",t.smallCaps)):t.allCaps!==void 0&&this.push(new Oe("w:caps",t.allCaps)),t.strike!==void 0&&this.push(new Oe("w:strike",t.strike)),t.doubleStrike!==void 0&&this.push(new Oe("w:dstrike",t.doubleStrike)),t.emboss!==void 0&&this.push(new Oe("w:emboss",t.emboss)),t.imprint!==void 0&&this.push(new Oe("w:imprint",t.imprint)),t.noProof!==void 0&&this.push(new Oe("w:noProof",t.noProof)),t.snapToGrid!==void 0&&this.push(new Oe("w:snapToGrid",t.snapToGrid)),t.vanish&&this.push(new Oe("w:vanish",t.vanish)),t.color&&this.push(new tE(t.color)),t.characterSpacing&&this.push(new eE(t.characterSpacing)),t.scale!==void 0&&this.push(new Ta("w:w",t.scale)),t.kern&&this.push(new lc("w:kern",t.kern)),t.position&&this.push(new Wn("w:position",t.position)),t.size!==void 0&&this.push(new lc("w:sz",t.size));const a=t.sizeComplexScript===void 0||t.sizeComplexScript===!0?t.size:t.sizeComplexScript;a&&this.push(new lc("w:szCs",a)),t.highlight&&this.push(new sE(t.highlight));const o=t.highlightComplexScript===void 0||t.highlightComplexScript===!0?t.highlight:t.highlightComplexScript;o&&this.push(new iE(o)),t.underline&&this.push(new oE(t.underline.type,t.underline.color)),t.effect&&this.push(new Wn("w:effect",t.effect)),t.border&&this.push(new vs("w:bdr",t.border)),t.shading&&this.push(new mo(t.shading)),t.subScript&&this.push(new rE),t.superScript&&this.push(new aE),t.rightToLeft!==void 0&&this.push(new Oe("w:rtl",t.rightToLeft)),t.emphasisMark&&this.push(new JD(t.emphasisMark.type)),t.language&&this.push(nE(t.language)),t.specVanish&&this.push(new Oe("w:specVanish",t.vanish)),t.math&&this.push(new Oe("w:oMath",t.math)),t.revision&&this.push(new lE(t.revision))}push(t){this.root.push(t)}}class lE extends Ie{constructor(t){super("w:rPrChange"),this.root.push(new QD({id:t.id,author:t.author,date:t.date})),this.addChildElement(new Un(t))}}class bp extends Ie{constructor(t){var i;super("w:t"),typeof t=="string"?(this.root.push(new fa({space:pa.PRESERVE})),this.root.push(t)):(this.root.push(new fa({space:(i=t.space)!=null?i:pa.DEFAULT})),this.root.push(t.text))}}const vr={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class tr extends Ie{constructor(t){if(super("w:r"),Pe(this,"properties"),this.properties=new Un(t),this.root.push(this.properties),t.break)for(let i=0;i<t.break;i++)this.root.push(new zD);if(t.children)for(const i of t.children){if(typeof i=="string"){switch(i){case vr.CURRENT:this.root.push(new Nr),this.root.push(new GD),this.root.push(new xr),this.root.push(new gr);break;case vr.TOTAL_PAGES:this.root.push(new Nr),this.root.push(new HD),this.root.push(new xr),this.root.push(new gr);break;case vr.TOTAL_PAGES_IN_SECTION:this.root.push(new Nr),this.root.push(new qD),this.root.push(new xr),this.root.push(new gr);break;case vr.CURRENT_SECTION:this.root.push(new Nr),this.root.push(new KD),this.root.push(new xr),this.root.push(new gr);break;default:this.root.push(new bp(i));break}continue}this.root.push(i)}else t.text!==void 0&&this.root.push(new bp(t.text))}}class Ut extends tr{constructor(t){super(typeof t=="string"?{text:t}:t)}}var dc={},gs={},uc,Np;function sr(){if(Np)return uc;Np=1,uc=s;function s(t,i){if(!t)throw new Error(i||"Assertion failed")}return s.equal=function(i,n,a){if(i!=n)throw new Error(a||"Assertion failed: "+i+" != "+n)},uc}var xp;function Qi(){if(xp)return gs;xp=1;var s=sr(),t=yn();gs.inherits=t;function i(R,F){return(R.charCodeAt(F)&64512)!==55296||F<0||F+1>=R.length?!1:(R.charCodeAt(F+1)&64512)===56320}function n(R,F){if(Array.isArray(R))return R.slice();if(!R)return[];var k=[];if(typeof R=="string")if(F){if(F==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),J=0;J<R.length;J+=2)k.push(parseInt(R[J]+R[J+1],16))}else for(var Q=0,J=0;J<R.length;J++){var O=R.charCodeAt(J);O<128?k[Q++]=O:O<2048?(k[Q++]=O>>6|192,k[Q++]=O&63|128):i(R,J)?(O=65536+((O&1023)<<10)+(R.charCodeAt(++J)&1023),k[Q++]=O>>18|240,k[Q++]=O>>12&63|128,k[Q++]=O>>6&63|128,k[Q++]=O&63|128):(k[Q++]=O>>12|224,k[Q++]=O>>6&63|128,k[Q++]=O&63|128)}else for(J=0;J<R.length;J++)k[J]=R[J]|0;return k}gs.toArray=n;function a(R){for(var F="",k=0;k<R.length;k++)F+=r(R[k].toString(16));return F}gs.toHex=a;function o(R){var F=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return F>>>0}gs.htonl=o;function l(R,F){for(var k="",Q=0;Q<R.length;Q++){var J=R[Q];F==="little"&&(J=o(J)),k+=d(J.toString(16))}return k}gs.toHex32=l;function r(R){return R.length===1?"0"+R:R}gs.zero2=r;function d(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}gs.zero8=d;function c(R,F,k,Q){var J=k-F;s(J%4===0);for(var O=new Array(J/4),me=0,de=F;me<O.length;me++,de+=4){var fe;Q==="big"?fe=R[de]<<24|R[de+1]<<16|R[de+2]<<8|R[de+3]:fe=R[de+3]<<24|R[de+2]<<16|R[de+1]<<8|R[de],O[me]=fe>>>0}return O}gs.join32=c;function f(R,F){for(var k=new Array(R.length*4),Q=0,J=0;Q<R.length;Q++,J+=4){var O=R[Q];F==="big"?(k[J]=O>>>24,k[J+1]=O>>>16&255,k[J+2]=O>>>8&255,k[J+3]=O&255):(k[J+3]=O>>>24,k[J+2]=O>>>16&255,k[J+1]=O>>>8&255,k[J]=O&255)}return k}gs.split32=f;function b(R,F){return R>>>F|R<<32-F}gs.rotr32=b;function D(R,F){return R<<F|R>>>32-F}gs.rotl32=D;function u(R,F){return R+F>>>0}gs.sum32=u;function p(R,F,k){return R+F+k>>>0}gs.sum32_3=p;function x(R,F,k,Q){return R+F+k+Q>>>0}gs.sum32_4=x;function S(R,F,k,Q,J){return R+F+k+Q+J>>>0}gs.sum32_5=S;function m(R,F,k,Q){var J=R[F],O=R[F+1],me=Q+O>>>0,de=(me<Q?1:0)+k+J;R[F]=de>>>0,R[F+1]=me}gs.sum64=m;function v(R,F,k,Q){var J=F+Q>>>0,O=(J<F?1:0)+R+k;return O>>>0}gs.sum64_hi=v;function g(R,F,k,Q){var J=F+Q;return J>>>0}gs.sum64_lo=g;function N(R,F,k,Q,J,O,me,de){var fe=0,ae=F;ae=ae+Q>>>0,fe+=ae<F?1:0,ae=ae+O>>>0,fe+=ae<O?1:0,ae=ae+de>>>0,fe+=ae<de?1:0;var L=R+k+J+me+fe;return L>>>0}gs.sum64_4_hi=N;function w(R,F,k,Q,J,O,me,de){var fe=F+Q+O+de;return fe>>>0}gs.sum64_4_lo=w;function A(R,F,k,Q,J,O,me,de,fe,ae){var L=0,H=F;H=H+Q>>>0,L+=H<F?1:0,H=H+O>>>0,L+=H<O?1:0,H=H+de>>>0,L+=H<de?1:0,H=H+ae>>>0,L+=H<ae?1:0;var le=R+k+J+me+fe+L;return le>>>0}gs.sum64_5_hi=A;function I(R,F,k,Q,J,O,me,de,fe,ae){var L=F+Q+O+de+ae;return L>>>0}gs.sum64_5_lo=I;function B(R,F,k){var Q=F<<32-k|R>>>k;return Q>>>0}gs.rotr64_hi=B;function W(R,F,k){var Q=R<<32-k|F>>>k;return Q>>>0}gs.rotr64_lo=W;function se(R,F,k){return R>>>k}gs.shr64_hi=se;function ie(R,F,k){var Q=R<<32-k|F>>>k;return Q>>>0}return gs.shr64_lo=ie,gs}var mc={},gp;function ir(){if(gp)return mc;gp=1;var s=Qi(),t=sr();function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return mc.BlockHash=i,i.prototype.update=function(a,o){if(a=s.toArray(a,o),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var l=a.length%this._delta8;this.pending=a.slice(a.length-l,a.length),this.pending.length===0&&(this.pending=null),a=s.join32(a,0,a.length-l,this.endian);for(var r=0;r<a.length;r+=this._delta32)this._update(a,r,r+this._delta32)}return this},i.prototype.digest=function(a){return this.update(this._pad()),t(this.pending===null),this._digest(a)},i.prototype._pad=function(){var a=this.pendingTotal,o=this._delta8,l=o-(a+this.padLength)%o,r=new Array(l+this.padLength);r[0]=128;for(var d=1;d<l;d++)r[d]=0;if(a<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)r[d++]=0;r[d++]=0,r[d++]=0,r[d++]=0,r[d++]=0,r[d++]=a>>>24&255,r[d++]=a>>>16&255,r[d++]=a>>>8&255,r[d++]=a&255}else for(r[d++]=a&255,r[d++]=a>>>8&255,r[d++]=a>>>16&255,r[d++]=a>>>24&255,r[d++]=0,r[d++]=0,r[d++]=0,r[d++]=0,c=8;c<this.padLength;c++)r[d++]=0;return r},mc}var Sn={},_i={},vp;function aN(){if(vp)return _i;vp=1;var s=Qi(),t=s.rotr32;function i(f,b,D,u){if(f===0)return n(b,D,u);if(f===1||f===3)return o(b,D,u);if(f===2)return a(b,D,u)}_i.ft_1=i;function n(f,b,D){return f&b^~f&D}_i.ch32=n;function a(f,b,D){return f&b^f&D^b&D}_i.maj32=a;function o(f,b,D){return f^b^D}_i.p32=o;function l(f){return t(f,2)^t(f,13)^t(f,22)}_i.s0_256=l;function r(f){return t(f,6)^t(f,11)^t(f,25)}_i.s1_256=r;function d(f){return t(f,7)^t(f,18)^f>>>3}_i.g0_256=d;function c(f){return t(f,17)^t(f,19)^f>>>10}return _i.g1_256=c,_i}var pc,yp;function cE(){if(yp)return pc;yp=1;var s=Qi(),t=ir(),i=aN(),n=s.rotl32,a=s.sum32,o=s.sum32_5,l=i.ft_1,r=t.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;r.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return s.inherits(c,r),pc=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(b,D){for(var u=this.W,p=0;p<16;p++)u[p]=b[D+p];for(;p<u.length;p++)u[p]=n(u[p-3]^u[p-8]^u[p-14]^u[p-16],1);var x=this.h[0],S=this.h[1],m=this.h[2],v=this.h[3],g=this.h[4];for(p=0;p<u.length;p++){var N=~~(p/20),w=o(n(x,5),l(N,S,m,v),g,u[p],d[N]);g=v,v=m,m=n(S,30),S=x,x=w}this.h[0]=a(this.h[0],x),this.h[1]=a(this.h[1],S),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],g)},c.prototype._digest=function(b){return b==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},pc}var fc,Dp;function rN(){if(Dp)return fc;Dp=1;var s=Qi(),t=ir(),i=aN(),n=sr(),a=s.sum32,o=s.sum32_4,l=s.sum32_5,r=i.ch32,d=i.maj32,c=i.s0_256,f=i.s1_256,b=i.g0_256,D=i.g1_256,u=t.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function x(){if(!(this instanceof x))return new x;u.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return s.inherits(x,u),fc=x,x.blockSize=512,x.outSize=256,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(m,v){for(var g=this.W,N=0;N<16;N++)g[N]=m[v+N];for(;N<g.length;N++)g[N]=o(D(g[N-2]),g[N-7],b(g[N-15]),g[N-16]);var w=this.h[0],A=this.h[1],I=this.h[2],B=this.h[3],W=this.h[4],se=this.h[5],ie=this.h[6],R=this.h[7];for(n(this.k.length===g.length),N=0;N<g.length;N++){var F=l(R,f(W),r(W,se,ie),this.k[N],g[N]),k=a(c(w),d(w,A,I));R=ie,ie=se,se=W,W=a(B,F),B=I,I=A,A=w,w=a(F,k)}this.h[0]=a(this.h[0],w),this.h[1]=a(this.h[1],A),this.h[2]=a(this.h[2],I),this.h[3]=a(this.h[3],B),this.h[4]=a(this.h[4],W),this.h[5]=a(this.h[5],se),this.h[6]=a(this.h[6],ie),this.h[7]=a(this.h[7],R)},x.prototype._digest=function(m){return m==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},fc}var hc,Ep;function dE(){if(Ep)return hc;Ep=1;var s=Qi(),t=rN();function i(){if(!(this instanceof i))return new i;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return s.inherits(i,t),hc=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(a){return a==="hex"?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")},hc}var bc,wp;function oN(){if(wp)return bc;wp=1;var s=Qi(),t=ir(),i=sr(),n=s.rotr64_hi,a=s.rotr64_lo,o=s.shr64_hi,l=s.shr64_lo,r=s.sum64,d=s.sum64_hi,c=s.sum64_lo,f=s.sum64_4_hi,b=s.sum64_4_lo,D=s.sum64_5_hi,u=s.sum64_5_lo,p=t.BlockHash,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function S(){if(!(this instanceof S))return new S;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=x,this.W=new Array(160)}s.inherits(S,p),bc=S,S.blockSize=1024,S.outSize=512,S.hmacStrength=192,S.padLength=128,S.prototype._prepareBlock=function(k,Q){for(var J=this.W,O=0;O<32;O++)J[O]=k[Q+O];for(;O<J.length;O+=2){var me=ie(J[O-4],J[O-3]),de=R(J[O-4],J[O-3]),fe=J[O-14],ae=J[O-13],L=W(J[O-30],J[O-29]),H=se(J[O-30],J[O-29]),le=J[O-32],ue=J[O-31];J[O]=f(me,de,fe,ae,L,H,le,ue),J[O+1]=b(me,de,fe,ae,L,H,le,ue)}},S.prototype._update=function(k,Q){this._prepareBlock(k,Q);var J=this.W,O=this.h[0],me=this.h[1],de=this.h[2],fe=this.h[3],ae=this.h[4],L=this.h[5],H=this.h[6],le=this.h[7],ue=this.h[8],K=this.h[9],C=this.h[10],P=this.h[11],ee=this.h[12],$=this.h[13],U=this.h[14],G=this.h[15];i(this.k.length===J.length);for(var re=0;re<J.length;re+=2){var V=U,Y=G,T=I(ue,K),y=B(ue,K),E=m(ue,K,C,P,ee),j=v(ue,K,C,P,ee,$),q=this.k[re],te=this.k[re+1],Z=J[re],ve=J[re+1],ke=D(V,Y,T,y,E,j,q,te,Z,ve),De=u(V,Y,T,y,E,j,q,te,Z,ve);V=w(O,me),Y=A(O,me),T=g(O,me,de,fe,ae),y=N(O,me,de,fe,ae,L);var We=d(V,Y,T,y),ze=c(V,Y,T,y);U=ee,G=$,ee=C,$=P,C=ue,P=K,ue=d(H,le,ke,De),K=c(le,le,ke,De),H=ae,le=L,ae=de,L=fe,de=O,fe=me,O=d(ke,De,We,ze),me=c(ke,De,We,ze)}r(this.h,0,O,me),r(this.h,2,de,fe),r(this.h,4,ae,L),r(this.h,6,H,le),r(this.h,8,ue,K),r(this.h,10,C,P),r(this.h,12,ee,$),r(this.h,14,U,G)},S.prototype._digest=function(k){return k==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")};function m(F,k,Q,J,O){var me=F&Q^~F&O;return me<0&&(me+=4294967296),me}function v(F,k,Q,J,O,me){var de=k&J^~k&me;return de<0&&(de+=4294967296),de}function g(F,k,Q,J,O){var me=F&Q^F&O^Q&O;return me<0&&(me+=4294967296),me}function N(F,k,Q,J,O,me){var de=k&J^k&me^J&me;return de<0&&(de+=4294967296),de}function w(F,k){var Q=n(F,k,28),J=n(k,F,2),O=n(k,F,7),me=Q^J^O;return me<0&&(me+=4294967296),me}function A(F,k){var Q=a(F,k,28),J=a(k,F,2),O=a(k,F,7),me=Q^J^O;return me<0&&(me+=4294967296),me}function I(F,k){var Q=n(F,k,14),J=n(F,k,18),O=n(k,F,9),me=Q^J^O;return me<0&&(me+=4294967296),me}function B(F,k){var Q=a(F,k,14),J=a(F,k,18),O=a(k,F,9),me=Q^J^O;return me<0&&(me+=4294967296),me}function W(F,k){var Q=n(F,k,1),J=n(F,k,8),O=o(F,k,7),me=Q^J^O;return me<0&&(me+=4294967296),me}function se(F,k){var Q=a(F,k,1),J=a(F,k,8),O=l(F,k,7),me=Q^J^O;return me<0&&(me+=4294967296),me}function ie(F,k){var Q=n(F,k,19),J=n(k,F,29),O=o(F,k,6),me=Q^J^O;return me<0&&(me+=4294967296),me}function R(F,k){var Q=a(F,k,19),J=a(k,F,29),O=l(F,k,6),me=Q^J^O;return me<0&&(me+=4294967296),me}return bc}var Nc,kp;function uE(){if(kp)return Nc;kp=1;var s=Qi(),t=oN();function i(){if(!(this instanceof i))return new i;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return s.inherits(i,t),Nc=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(a){return a==="hex"?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")},Nc}var Sp;function mE(){return Sp||(Sp=1,Sn.sha1=cE(),Sn.sha224=dE(),Sn.sha256=rN(),Sn.sha384=uE(),Sn.sha512=oN()),Sn}var xc={},jp;function pE(){if(jp)return xc;jp=1;var s=Qi(),t=ir(),i=s.rotl32,n=s.sum32,a=s.sum32_3,o=s.sum32_4,l=t.BlockHash;function r(){if(!(this instanceof r))return new r;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}s.inherits(r,l),xc.ripemd160=r,r.blockSize=512,r.outSize=160,r.hmacStrength=192,r.padLength=64,r.prototype._update=function(S,m){for(var v=this.h[0],g=this.h[1],N=this.h[2],w=this.h[3],A=this.h[4],I=v,B=g,W=N,se=w,ie=A,R=0;R<80;R++){var F=n(i(o(v,d(R,g,N,w),S[b[R]+m],c(R)),u[R]),A);v=A,A=w,w=i(N,10),N=g,g=F,F=n(i(o(I,d(79-R,B,W,se),S[D[R]+m],f(R)),p[R]),ie),I=ie,ie=se,se=i(W,10),W=B,B=F}F=a(this.h[1],N,se),this.h[1]=a(this.h[2],w,ie),this.h[2]=a(this.h[3],A,I),this.h[3]=a(this.h[4],v,B),this.h[4]=a(this.h[0],g,W),this.h[0]=F},r.prototype._digest=function(S){return S==="hex"?s.toHex32(this.h,"little"):s.split32(this.h,"little")};function d(x,S,m,v){return x<=15?S^m^v:x<=31?S&m|~S&v:x<=47?(S|~m)^v:x<=63?S&v|m&~v:S^(m|~v)}function c(x){return x<=15?0:x<=31?1518500249:x<=47?1859775393:x<=63?2400959708:2840853838}function f(x){return x<=15?1352829926:x<=31?1548603684:x<=47?1836072691:x<=63?2053994217:0}var b=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],D=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return xc}var gc,Vp;function fE(){if(Vp)return gc;Vp=1;var s=Qi(),t=sr();function i(n,a,o){if(!(this instanceof i))return new i(n,a,o);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(a,o))}return gc=i,i.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),t(a.length<=this.blockSize);for(var o=a.length;o<this.blockSize;o++)a.push(0);for(o=0;o<a.length;o++)a[o]^=54;for(this.inner=new this.Hash().update(a),o=0;o<a.length;o++)a[o]^=106;this.outer=new this.Hash().update(a)},i.prototype.update=function(a,o){return this.inner.update(a,o),this},i.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)},gc}var Cp;function hE(){return Cp||(Cp=1,function(s){var t=s;t.utils=Qi(),t.common=ir(),t.sha=mE(),t.ripemd=pE(),t.hmac=fE(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(dc)),dc}var bE=hE();const NE=_d(bE);let xE="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",gE=(s,t=21)=>(i=t)=>{let n="",a=i|0;for(;a--;)n+=s[Math.random()*s.length|0];return n},vE=(s=21)=>{let t="",i=s|0;for(;i--;)t+=xE[Math.random()*64|0];return t};const Pt=s=>Math.floor(s*72*20),po=(s=0)=>{let t=s;return()=>++t},yE=()=>po(),DE=()=>po(1),EE=()=>po(),wE=()=>po(),kE=()=>vE().toLowerCase(),Rp=s=>NE.sha1().update(s instanceof ArrayBuffer?new Uint8Array(s):s).digest("hex"),ja=s=>gE("1234567890abcdef",s)(),SE=()=>`${ja(8)}-${ja(4)}-${ja(4)}-${ja(4)}-${ja(12)}`,jE={PAGE:"page"},VE={PAGE:"page"},CE=()=>new Ns({name:"wp:simplePos",attributes:{x:{key:"x",value:0},y:{key:"y",value:0}}}),lN=s=>new Ns({name:"wp:align",children:[s]}),cN=s=>new Ns({name:"wp:posOffset",children:[s.toString()]}),RE=({relative:s,align:t,offset:i})=>new Ns({name:"wp:positionH",attributes:{relativeFrom:{key:"relativeFrom",value:s??jE.PAGE}},children:[(()=>{if(t)return lN(t);if(i!==void 0)return cN(i);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]}),PE=({relative:s,align:t,offset:i})=>new Ns({name:"wp:positionV",attributes:{relativeFrom:{key:"relativeFrom",value:s??VE.PAGE}},children:[(()=>{if(t)return lN(t);if(i!==void 0)return cN(i);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]});class IE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{uri:"uri"})}}const AE=s=>new Ns({name:"asvg:svgBlip",attributes:{asvg:{key:"xmlns:asvg",value:"http://schemas.microsoft.com/office/drawing/2016/SVG/main"},embed:{key:"r:embed",value:`rId{${s.fileName}}`}}}),TE=s=>new Ns({name:"a:ext",attributes:{uri:{key:"uri",value:"{96DAC541-7B7A-43D3-8B79-37D633B846F1}"}},children:[AE(s)]}),WE=s=>new Ns({name:"a:extLst",children:[TE(s)]}),LE=s=>new Ns({name:"a:blip",attributes:{embed:{key:"r:embed",value:`rId{${s.type==="svg"?s.fallback.fileName:s.fileName}}`},cstate:{key:"cstate",value:"none"}},children:s.type==="svg"?[WE(s)]:[]});class ME extends Ie{constructor(){super("a:srcRect")}}class _E extends Ie{constructor(){super("a:fillRect")}}class OE extends Ie{constructor(){super("a:stretch"),this.root.push(new _E)}}class FE extends Ie{constructor(t){super("pic:blipFill"),this.root.push(LE(t)),this.root.push(new ME),this.root.push(new OE)}}class BE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"})}}class UE extends Ie{constructor(){super("a:picLocks"),this.root.push(new BE({noChangeAspect:1,noChangeArrowheads:1}))}}class $E extends Ie{constructor(){super("pic:cNvPicPr"),this.root.push(new UE)}}const dN=(s,t)=>new Ns({name:"a:hlinkClick",attributes:rn(Wt({},t?{xmlns:{key:"xmlns:a",value:"http://schemas.openxmlformats.org/drawingml/2006/main"}}:{}),{id:{key:"r:id",value:`rId${s}`}})});class zE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"id",name:"name",descr:"descr"})}}class GE extends Ie{constructor(){super("pic:cNvPr"),this.root.push(new zE({id:0,name:"",descr:""}))}prepForXml(t){for(let i=t.stack.length-1;i>=0;i--){const n=t.stack[i];if(n instanceof Zd){this.root.push(dN(n.linkId,!1));break}}return super.prepForXml(t)}}class HE extends Ie{constructor(){super("pic:nvPicPr"),this.root.push(new GE),this.root.push(new $E)}}class qE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns:pic"})}}class KE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{cx:"cx",cy:"cy"})}}class YE extends Ie{constructor(t,i){super("a:ext"),Pe(this,"attributes"),this.attributes=new KE({cx:t,cy:i}),this.root.push(this.attributes)}}class QE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{x:"x",y:"y"})}}class ZE extends Ie{constructor(){super("a:off"),this.root.push(new QE({x:0,y:0}))}}class XE extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"})}}class JE extends Ie{constructor(t){var i,n;super("a:xfrm"),Pe(this,"extents"),this.root.push(new XE({flipVertical:(i=t.flip)==null?void 0:i.vertical,flipHorizontal:(n=t.flip)==null?void 0:n.horizontal,rotation:t.rotation})),this.extents=new YE(t.emus.x,t.emus.y),this.root.push(new ZE),this.root.push(this.extents)}}const uN=()=>new Ns({name:"a:noFill"}),e2=s=>new Ns({name:"a:srgbClr",attributes:{value:{key:"val",value:s.value}}}),t2=s=>new Ns({name:"a:schemeClr",attributes:{value:{key:"val",value:s.value}}}),Pp=s=>new Ns({name:"a:solidFill",children:[s.type==="rgb"?e2(s):t2(s)]}),s2=s=>new Ns({name:"a:ln",attributes:{width:{key:"w",value:s.width},cap:{key:"cap",value:s.cap},compoundLine:{key:"cmpd",value:s.compoundLine},align:{key:"algn",value:s.align}},children:[s.type==="noFill"?uN():s.solidFillType==="rgb"?Pp({type:"rgb",value:s.value}):Pp({type:"scheme",value:s.value})]});class i2 extends Ie{constructor(){super("a:avLst")}}class n2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{prst:"prst"})}}class a2 extends Ie{constructor(){super("a:prstGeom"),this.root.push(new n2({prst:"rect"})),this.root.push(new i2)}}class r2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{bwMode:"bwMode"})}}class o2 extends Ie{constructor({outline:t,transform:i}){super("pic:spPr"),Pe(this,"form"),this.root.push(new r2({bwMode:"auto"})),this.form=new JE(i),this.root.push(this.form),this.root.push(new a2),t&&(this.root.push(uN()),this.root.push(s2(t)))}}class l2 extends Ie{constructor({mediaData:t,transform:i,outline:n}){super("pic:pic"),this.root.push(new qE({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new HE),this.root.push(new FE(t)),this.root.push(new o2({transform:i,outline:n}))}}class c2 extends Ie{constructor({mediaData:t,transform:i,outline:n}){super("a:graphicData"),Pe(this,"pic"),this.root.push(new IE({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new l2({mediaData:t,transform:i,outline:n}),this.root.push(this.pic)}}class d2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{a:"xmlns:a"})}}class mN extends Ie{constructor({mediaData:t,transform:i,outline:n}){super("a:graphic"),Pe(this,"data"),this.root.push(new d2({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new c2({mediaData:t,transform:i,outline:n}),this.root.push(this.data)}}const yr={NONE:0,SQUARE:1,TIGHT:2,TOP_AND_BOTTOM:3},u2={BOTH_SIDES:"bothSides"};class Ip extends Ie{constructor(){super("wp:wrapNone")}}class m2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"})}}class p2 extends Ie{constructor(t,i={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new m2({wrapText:t.side||u2.BOTH_SIDES,distT:i.top,distB:i.bottom,distL:i.left,distR:i.right}))}}class f2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class h2 extends Ie{constructor(t={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new f2({distT:t.top,distB:t.bottom}))}}class b2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{distT:"distT",distB:"distB"})}}class N2 extends Ie{constructor(t={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new b2({distT:t.top,distB:t.bottom}))}}class pN extends Ie{constructor({name:t,description:i,title:n}={name:"",description:"",title:""}){super("wp:docPr"),Pe(this,"docPropertiesUniqueNumericId",EE());const a={id:{key:"id",value:this.docPropertiesUniqueNumericId()},name:{key:"name",value:t}};i!=null&&(a.description={key:"descr",value:i}),n!=null&&(a.title={key:"title",value:n}),this.root.push(new un(a))}prepForXml(t){for(let i=t.stack.length-1;i>=0;i--){const n=t.stack[i];if(n instanceof Zd){this.root.push(dN(n.linkId,!0));break}}return super.prepForXml(t)}}const fN=({top:s,right:t,bottom:i,left:n})=>new Ns({name:"wp:effectExtent",attributes:{top:{key:"t",value:s},right:{key:"r",value:t},bottom:{key:"b",value:i},left:{key:"l",value:n}}}),hN=({x:s,y:t})=>new Ns({name:"wp:extent",attributes:{x:{key:"cx",value:s},y:{key:"cy",value:t}}});class x2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"})}}class g2 extends Ie{constructor(){super("a:graphicFrameLocks"),this.root.push(new x2({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}const bN=()=>new Ns({name:"wp:cNvGraphicFramePr",children:[new g2]});class v2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"})}}class y2 extends Ie{constructor({mediaData:t,transform:i,drawingOptions:n}){super("wp:anchor");const a=Wt({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},n.floating);if(this.root.push(new v2({distT:a.margins&&a.margins.top||0,distB:a.margins&&a.margins.bottom||0,distL:a.margins&&a.margins.left||0,distR:a.margins&&a.margins.right||0,simplePos:"0",allowOverlap:a.allowOverlap===!0?"1":"0",behindDoc:a.behindDocument===!0?"1":"0",locked:a.lockAnchor===!0?"1":"0",layoutInCell:a.layoutInCell===!0?"1":"0",relativeHeight:a.zIndex?a.zIndex:i.emus.y})),this.root.push(CE()),this.root.push(RE(a.horizontalPosition)),this.root.push(PE(a.verticalPosition)),this.root.push(hN({x:i.emus.x,y:i.emus.y})),this.root.push(fN({top:0,right:0,bottom:0,left:0})),n.floating!==void 0&&n.floating.wrap!==void 0)switch(n.floating.wrap.type){case yr.SQUARE:this.root.push(new p2(n.floating.wrap,n.floating.margins));break;case yr.TIGHT:this.root.push(new h2(n.floating.margins));break;case yr.TOP_AND_BOTTOM:this.root.push(new N2(n.floating.margins));break;case yr.NONE:default:this.root.push(new Ip)}else this.root.push(new Ip);this.root.push(new pN(n.docProperties)),this.root.push(bN()),this.root.push(new mN({mediaData:t,transform:i,outline:n.outline}))}}const D2=({mediaData:s,transform:t,docProperties:i,outline:n})=>{var a,o,l,r;return new Ns({name:"wp:inline",attributes:{distanceTop:{key:"distT",value:0},distanceBottom:{key:"distB",value:0},distanceLeft:{key:"distL",value:0},distanceRight:{key:"distR",value:0}},children:[hN({x:t.emus.x,y:t.emus.y}),fN(n?{top:((a=n.width)!=null?a:9525)*2,right:((o=n.width)!=null?o:9525)*2,bottom:((l=n.width)!=null?l:9525)*2,left:((r=n.width)!=null?r:9525)*2}:{top:0,right:0,bottom:0,left:0}),new pN(i),bN(),new mN({mediaData:s,transform:t,outline:n})]})};class E2 extends Ie{constructor(t,i={}){super("w:drawing"),i.floating?this.root.push(new y2({mediaData:t,transform:t.transformation,drawingOptions:i})):this.root.push(D2({mediaData:t,transform:t.transformation,docProperties:i.docProperties,outline:i.outline}))}}const w2=s=>{if(typeof atob=="function"){const t=";base64,",i=s.indexOf(t),n=i===-1?0:i+t.length;return new Uint8Array(atob(s.substring(n)).split("").map(a=>a.charCodeAt(0)))}else{const t=require("buffer");return new t.Buffer(s,"base64")}},k2=s=>typeof s=="string"?w2(s):s,vc=(s,t)=>({data:k2(s.data),fileName:t,transformation:{pixels:{x:Math.round(s.transformation.width),y:Math.round(s.transformation.height)},emus:{x:Math.round(s.transformation.width*9525),y:Math.round(s.transformation.height*9525)},flip:s.transformation.flip,rotation:s.transformation.rotation?s.transformation.rotation*6e4:void 0}});class S2 extends tr{constructor(t){super({}),Pe(this,"imageData");const n=`${Rp(t.data)}.${t.type}`;this.imageData=t.type==="svg"?rn(Wt({type:t.type},vc(t,n)),{fallback:Wt({type:t.fallback.type},vc(rn(Wt({},t.fallback),{transformation:t.transformation}),`${Rp(t.fallback.data)}.${t.fallback.type}`))}):Wt({type:t.type},vc(t,n));const a=new E2(this.imageData,{floating:t.floating,docProperties:t.altText,outline:t.outline});this.root.push(a)}prepForXml(t){return t.file.Media.addImage(this.imageData.fileName,this.imageData),this.imageData.type==="svg"&&t.file.Media.addImage(this.imageData.fallback.fileName,this.imageData.fallback),super.prepForXml(t)}}class j2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns"})}}class V2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const C2={EXTERNAL:"External"};class R2 extends Ie{constructor(t,i,n,a){super("Relationship"),this.root.push(new V2({id:t,type:i,target:n,targetMode:a}))}}class $n extends Ie{constructor(){super("Relationships"),this.root.push(new j2({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(t,i,n,a){const o=new R2(`rId${t}`,i,n,a);return this.root.push(o),o}get RelationshipCount(){return this.root.length-1}}class P2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class I2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class A2 extends Ie{constructor({id:t,initials:i,author:n,date:a=new Date,children:o}){super("w:comment"),this.root.push(new P2({id:t,initials:i,author:n,date:a.toISOString()}));for(const l of o)this.root.push(l)}}class T2 extends Ie{constructor({children:t}){super("w:comments"),Pe(this,"relationships"),this.root.push(new I2({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const i of t)this.root.push(new A2(i));this.relationships=new $n}get Relationships(){return this.relationships}}class W2 extends Ie{constructor(){super("w:pageBreakBefore")}}const nd={AUTO:"auto"};class L2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class M2 extends Ie{constructor(t){super("w:spacing"),this.root.push(new L2(t))}}const ki={HEADING_1:"Heading1",HEADING_3:"Heading3"};let Dr=class extends Ie{constructor(t){super("w:pStyle"),this.root.push(new As({val:t}))}};class _2 extends Ie{constructor(t){super("w:tabs");for(const i of t)this.root.push(new F2(i))}}const Ap={LEFT:"left",RIGHT:"right"};class O2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class F2 extends Ie{constructor({type:t,position:i,leader:n}){super("w:tab"),this.root.push(new O2({val:t,pos:i,leader:n}))}}class yc extends Ie{constructor(t,i){super("w:numPr"),this.root.push(new B2(i)),this.root.push(new U2(t))}}class B2 extends Ie{constructor(t){if(super("w:ilvl"),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new As({val:t}))}}class U2 extends Ie{constructor(t){super("w:numId"),this.root.push(new As({val:typeof t=="string"?`{${t}}`:t}))}}class NN extends Ie{constructor(){super(...arguments),Pe(this,"fileChild",Symbol())}}class $2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Zd extends Ie{constructor(t,i,n){super("w:hyperlink"),Pe(this,"linkId"),this.linkId=i;const a={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},o=new $2(a);this.root.push(o),t.forEach(l=>{this.root.push(l)})}}class z2 extends Ie{constructor(t){super("w:externalHyperlink"),this.options=t}}class G2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class H2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{id:"w:id"})}}class q2{constructor(t){Pe(this,"bookmarkUniqueNumericId",wE()),Pe(this,"start"),Pe(this,"children"),Pe(this,"end");const i=this.bookmarkUniqueNumericId();this.start=new K2(t.id,i),this.children=t.children,this.end=new Y2(i)}}class K2 extends Ie{constructor(t,i){super("w:bookmarkStart");const n=new G2({name:t,id:i});this.root.push(n)}}class Y2 extends Ie{constructor(t){super("w:bookmarkEnd");const i=new H2({id:t});this.root.push(i)}}class Q2 extends Ie{constructor(t){super("w:outlineLvl"),this.level=t,this.root.push(new As({val:t}))}}const Z2={TOP:"top",CENTER:"center",BOTTOM:"bottom"};rn(Wt({},Z2),{BOTH:"both"});class X2 extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{verticalAlign:"w:val"})}}class xN extends Ie{constructor(t){super("w:vAlign"),this.root.push(new X2({verticalAlign:t}))}}class J2 extends Ie{constructor({space:t,count:i,separate:n,equalWidth:a,children:o}){super("w:cols"),this.root.push(new un({space:{key:"w:space",value:t===void 0?void 0:ei(t)},count:{key:"w:num",value:i===void 0?void 0:oi(i)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:a}})),!a&&o&&o.forEach(l=>this.addChildElement(l))}}const ew=({type:s,linePitch:t,charSpace:i})=>new Ns({name:"w:docGrid",attributes:{type:{key:"w:type",value:s},linePitch:{key:"w:linePitch",value:oi(t)},charSpace:{key:"w:charSpace",value:i?oi(i):void 0}}}),ra={DEFAULT:"default",FIRST:"first",EVEN:"even"};class tw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const Tp={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Dc extends Ie{constructor(t,i){super(t),this.root.push(new tw({type:i.type||ra.DEFAULT,id:`rId${i.id}`}))}}const sw=({countBy:s,start:t,restart:i,distance:n})=>new Ns({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:s===void 0?void 0:oi(s)},start:{key:"w:start",value:t===void 0?void 0:oi(t)},restart:{key:"w:restart",value:i},distance:{key:"w:distance",value:n===void 0?void 0:ei(n)}}});class Wp extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class iw extends dn{constructor(t){if(super("w:pgBorders"),!t)return this;t.pageBorders?this.root.push(new Wp({display:t.pageBorders.display,offsetFrom:t.pageBorders.offsetFrom,zOrder:t.pageBorders.zOrder})):this.root.push(new Wp({})),t.pageBorderTop&&this.root.push(new vs("w:top",t.pageBorderTop)),t.pageBorderLeft&&this.root.push(new vs("w:left",t.pageBorderLeft)),t.pageBorderBottom&&this.root.push(new vs("w:bottom",t.pageBorderBottom)),t.pageBorderRight&&this.root.push(new vs("w:right",t.pageBorderRight))}}class nw extends Ie{constructor(t,i,n,a,o,l,r){super("w:pgMar"),this.root.push(new un({top:{key:"w:top",value:an(t)},right:{key:"w:right",value:ei(i)},bottom:{key:"w:bottom",value:an(n)},left:{key:"w:left",value:ei(a)},header:{key:"w:header",value:ei(o)},footer:{key:"w:footer",value:ei(l)},gutter:{key:"w:gutter",value:ei(r)}}))}}class aw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class rw extends Ie{constructor({start:t,formatType:i,separator:n}){super("w:pgNumType"),this.root.push(new aw({start:t===void 0?void 0:oi(t),formatType:i,separator:n}))}}const bn={PORTRAIT:"portrait",LANDSCAPE:"landscape"},ow=({width:s,height:t,orientation:i,code:n})=>{const a=ei(s),o=ei(t);return new Ns({name:"w:pgSz",attributes:{width:{key:"w:w",value:i===bn.LANDSCAPE?o:a},height:{key:"w:h",value:i===bn.LANDSCAPE?a:o},orientation:{key:"w:orient",value:i},code:{key:"w:code",value:n}}})};class lw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class cw extends Ie{constructor(t){super("w:textDirection"),this.root.push(new lw({val:t}))}}class dw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class uw extends Ie{constructor(t){super("w:type"),this.root.push(new dw({val:t}))}}const jn={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Ec={WIDTH:11906,HEIGHT:16838,ORIENTATION:bn.PORTRAIT};class mw extends Ie{constructor({page:{size:{width:t=Ec.WIDTH,height:i=Ec.HEIGHT,orientation:n=Ec.ORIENTATION}={},margin:{top:a=jn.TOP,right:o=jn.RIGHT,bottom:l=jn.BOTTOM,left:r=jn.LEFT,header:d=jn.HEADER,footer:c=jn.FOOTER,gutter:f=jn.GUTTER}={},pageNumbers:b={},borders:D,textDirection:u}={},grid:{linePitch:p=360,charSpace:x,type:S}={},headerWrapperGroup:m={},footerWrapperGroup:v={},lineNumbers:g,titlePage:N,verticalAlign:w,column:A,type:I}={}){super("w:sectPr"),this.addHeaderFooterGroup(Tp.HEADER,m),this.addHeaderFooterGroup(Tp.FOOTER,v),I&&this.root.push(new uw(I)),this.root.push(ow({width:t,height:i,orientation:n})),this.root.push(new nw(a,o,l,r,d,c,f)),D&&this.root.push(new iw(D)),g&&this.root.push(sw(g)),this.root.push(new rw(b)),A&&this.root.push(new J2(A)),w&&this.root.push(new xN(w)),N!==void 0&&this.root.push(new Oe("w:titlePg",N)),u&&this.root.push(new cw(u)),this.root.push(ew({linePitch:p,charSpace:x,type:S}))}addHeaderFooterGroup(t,i){i.default&&this.root.push(new Dc(t,{type:ra.DEFAULT,id:i.default.View.ReferenceId})),i.first&&this.root.push(new Dc(t,{type:ra.FIRST,id:i.first.View.ReferenceId})),i.even&&this.root.push(new Dc(t,{type:ra.EVEN,id:i.even.View.ReferenceId}))}}class pw extends Ie{constructor(){super("w:body"),Pe(this,"sections",[])}addSection(t){const i=this.sections.pop();this.root.push(this.createSectionParagraph(i)),this.sections.push(new mw(t))}prepForXml(t){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(t)}push(t){this.root.push(t)}createSectionParagraph(t){const i=new Tt({}),n=new ha({});return n.push(t),i.addChildElement(n),i}}const Lp={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class fo extends rt{constructor(t,i){super(Wt({Ignorable:i},Object.fromEntries(t.map(n=>[n,Lp[n]])))),Pe(this,"xmlKeys",Wt({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(Lp).map(n=>[n,`xmlns:${n}`]))))}}class fw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class hw extends Ie{constructor(t){super("w:background"),this.root.push(new fw({color:t.color===void 0?void 0:ma(t.color),themeColor:t.themeColor,themeShade:t.themeShade===void 0?void 0:fp(t.themeShade),themeTint:t.themeTint===void 0?void 0:fp(t.themeTint)}))}}class bw extends Ie{constructor(t){super("w:document"),Pe(this,"body"),this.root.push(new fo(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new pw,t.background&&this.root.push(new hw(t.background)),this.root.push(this.body)}add(t){return this.body.push(t),this}get Body(){return this.body}}class gN{constructor(t){Pe(this,"document"),Pe(this,"relationships"),this.document=new bw(t),this.relationships=new $n}get View(){return this.document}get Relationships(){return this.relationships}}class Nw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class xw extends Ie{constructor(){super("w:wordWrap"),this.root.push(new Nw({val:0}))}}const gw=s=>{var t,i;return new Ns({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:s.anchorLock},dropCap:{key:"w:dropCap",value:s.dropCap},width:{key:"w:w",value:s.width},height:{key:"w:h",value:s.height},x:{key:"w:x",value:s.position?s.position.x:void 0},y:{key:"w:y",value:s.position?s.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:s.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:s.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(t=s.space)==null?void 0:t.horizontal},spaceVertical:{key:"w:vSpace",value:(i=s.space)==null?void 0:i.vertical},rule:{key:"w:hRule",value:s.rule},alignmentX:{key:"w:xAlign",value:s.alignment?s.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:s.alignment?s.alignment.y:void 0},lines:{key:"w:lines",value:s.lines},wrap:{key:"w:wrap",value:s.wrap}}})};class ha extends dn{constructor(t){var i,n;if(super("w:pPr"),Pe(this,"numberingReferences",[]),!t)return this;t.heading&&this.push(new Dr(t.heading)),t.bullet&&this.push(new Dr("ListParagraph")),t.numbering&&!t.style&&!t.heading&&(t.numbering.custom||this.push(new Dr("ListParagraph"))),t.style&&this.push(new Dr(t.style)),t.keepNext!==void 0&&this.push(new Oe("w:keepNext",t.keepNext)),t.keepLines!==void 0&&this.push(new Oe("w:keepLines",t.keepLines)),t.pageBreakBefore&&this.push(new W2),t.frame&&this.push(gw(t.frame)),t.widowControl!==void 0&&this.push(new Oe("w:widowControl",t.widowControl)),t.bullet&&this.push(new yc(1,t.bullet.level)),t.numbering?(this.numberingReferences.push({reference:t.numbering.reference,instance:(i=t.numbering.instance)!=null?i:0}),this.push(new yc(`${t.numbering.reference}-${(n=t.numbering.instance)!=null?n:0}`,t.numbering.level))):t.numbering===!1&&this.push(new yc(0,0)),t.border&&this.push(new BD(t.border)),t.thematicBreak&&this.push(new UD),t.shading&&this.push(new mo(t.shading)),t.wordWrap&&this.push(new xw),t.overflowPunctuation&&this.push(new Oe("w:overflowPunct",t.overflowPunctuation));const a=[...t.rightTabStop!==void 0?[{type:Ap.RIGHT,position:t.rightTabStop}]:[],...t.tabStops?t.tabStops:[],...t.leftTabStop!==void 0?[{type:Ap.LEFT,position:t.leftTabStop}]:[]];a.length>0&&this.push(new _2(a)),t.bidirectional!==void 0&&this.push(new Oe("w:bidi",t.bidirectional)),t.spacing&&this.push(new M2(t.spacing)),t.indent&&this.push(new $D(t.indent)),t.contextualSpacing!==void 0&&this.push(new Oe("w:contextualSpacing",t.contextualSpacing)),t.alignment&&this.push(new sN(t.alignment)),t.outlineLevel!==void 0&&this.push(new Q2(t.outlineLevel)),t.suppressLineNumbers!==void 0&&this.push(new Oe("w:suppressLineNumbers",t.suppressLineNumbers)),t.autoSpaceEastAsianText!==void 0&&this.push(new Oe("w:autoSpaceDN",t.autoSpaceEastAsianText)),t.run&&this.push(new Un(t.run))}push(t){this.root.push(t)}prepForXml(t){if(t.viewWrapper instanceof gN)for(const i of this.numberingReferences)t.file.Numbering.createConcreteNumberingInstance(i.reference,i.instance);return super.prepForXml(t)}}class Tt extends NN{constructor(t){if(super("w:p"),Pe(this,"properties"),typeof t=="string")return this.properties=new ha({}),this.root.push(this.properties),this.root.push(new Ut(t)),this;if(this.properties=new ha(t),this.root.push(this.properties),t.text&&this.root.push(new Ut(t.text)),t.children)for(const i of t.children){if(i instanceof q2){this.root.push(i.start);for(const n of i.children)this.root.push(n);this.root.push(i.end);continue}this.root.push(i)}}prepForXml(t){for(const i of this.root)if(i instanceof z2){const n=this.root.indexOf(i),a=new Zd(i.options.children,kE());t.viewWrapper.Relationships.createRelationship(a.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",i.options.link,C2.EXTERNAL),this.root[n]=a}return super.prepForXml(t)}addRunToFront(t){return this.root.splice(1,0,t),this}}class vw extends Ie{constructor(t){super("w:tblGrid");for(const i of t)this.root.push(new yw(i))}}class yw extends Ie{constructor(t){super("w:gridCol"),t!==void 0&&this.root.push(new un({width:{key:"w:w",value:ei(t)}}))}}const vN={TABLE:"w:tblCellMar",TABLE_CELL:"w:tcMar"};class yN extends dn{constructor(t,{marginUnitType:i=Ai.DXA,top:n,left:a,bottom:o,right:l}){super(t),n!==void 0&&this.root.push(new Pn("w:top",{type:i,size:n})),a!==void 0&&this.root.push(new Pn("w:left",{type:i,size:a})),o!==void 0&&this.root.push(new Pn("w:bottom",{type:i,size:o})),l!==void 0&&this.root.push(new Pn("w:right",{type:i,size:l}))}}const Ai={AUTO:"auto",DXA:"dxa",PERCENTAGE:"pct"};class Pn extends Ie{constructor(t,{type:i=Ai.AUTO,size:n}){super(t);let a=n;i===Ai.PERCENTAGE&&typeof n=="number"&&(a=`${n}%`),this.root.push(new un({type:{key:"w:type",value:i},size:{key:"w:w",value:tN(a)}}))}}class Dw extends dn{constructor(t){super("w:tcBorders"),t.top&&this.root.push(new vs("w:top",t.top)),t.start&&this.root.push(new vs("w:start",t.start)),t.left&&this.root.push(new vs("w:left",t.left)),t.bottom&&this.root.push(new vs("w:bottom",t.bottom)),t.end&&this.root.push(new vs("w:end",t.end)),t.right&&this.root.push(new vs("w:right",t.right))}}class Ew extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class ww extends Ie{constructor(t){super("w:gridSpan"),this.root.push(new Ew({val:oi(t)}))}}const DN={CONTINUE:"continue",RESTART:"restart"};class kw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class Mp extends Ie{constructor(t){super("w:vMerge"),this.root.push(new kw({val:t}))}}class Sw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class jw extends Ie{constructor(t){super("w:textDirection"),this.root.push(new Sw({val:t}))}}class Vw extends dn{constructor(t){super("w:tcPr"),t.width&&this.root.push(new Pn("w:tcW",t.width)),t.columnSpan&&this.root.push(new ww(t.columnSpan)),t.verticalMerge?this.root.push(new Mp(t.verticalMerge)):t.rowSpan&&t.rowSpan>1&&this.root.push(new Mp(DN.RESTART)),t.borders&&this.root.push(new Dw(t.borders)),t.shading&&this.root.push(new mo(t.shading)),t.margins&&this.root.push(new yN(vN.TABLE_CELL,t.margins)),t.textDirection&&this.root.push(new jw(t.textDirection)),t.verticalAlign&&this.root.push(new xN(t.verticalAlign))}}class Ls extends Ie{constructor(t){super("w:tc"),this.options=t,this.root.push(new Vw(t));for(const i of t.children)this.root.push(i)}prepForXml(t){return this.root[this.root.length-1]instanceof Tt||this.root.push(new Tt({})),super.prepForXml(t)}}const Qn={style:hi.NONE,size:0,color:"auto"},Zn={style:hi.SINGLE,size:4,color:"auto"};class EN extends Ie{constructor(t){super("w:tblBorders"),t.top?this.root.push(new vs("w:top",t.top)):this.root.push(new vs("w:top",Zn)),t.left?this.root.push(new vs("w:left",t.left)):this.root.push(new vs("w:left",Zn)),t.bottom?this.root.push(new vs("w:bottom",t.bottom)):this.root.push(new vs("w:bottom",Zn)),t.right?this.root.push(new vs("w:right",t.right)):this.root.push(new vs("w:right",Zn)),t.insideHorizontal?this.root.push(new vs("w:insideH",t.insideHorizontal)):this.root.push(new vs("w:insideH",Zn)),t.insideVertical?this.root.push(new vs("w:insideV",t.insideVertical)):this.root.push(new vs("w:insideV",Zn))}}Pe(EN,"NONE",{top:Qn,bottom:Qn,left:Qn,right:Qn,insideHorizontal:Qn,insideVertical:Qn});class Cw extends Ie{constructor({horizontalAnchor:t,verticalAnchor:i,absoluteHorizontalPosition:n,relativeHorizontalPosition:a,absoluteVerticalPosition:o,relativeVerticalPosition:l,bottomFromText:r,topFromText:d,leftFromText:c,rightFromText:f,overlap:b}){super("w:tblpPr"),this.root.push(new un({leftFromText:{key:"w:leftFromText",value:c===void 0?void 0:ei(c)},rightFromText:{key:"w:rightFromText",value:f===void 0?void 0:ei(f)},topFromText:{key:"w:topFromText",value:d===void 0?void 0:ei(d)},bottomFromText:{key:"w:bottomFromText",value:r===void 0?void 0:ei(r)},absoluteHorizontalPosition:{key:"w:tblpX",value:n===void 0?void 0:an(n)},absoluteVerticalPosition:{key:"w:tblpY",value:o===void 0?void 0:an(o)},horizontalAnchor:{key:"w:horzAnchor",value:t===void 0?void 0:t},relativeHorizontalPosition:{key:"w:tblpXSpec",value:a},relativeVerticalPosition:{key:"w:tblpYSpec",value:l},verticalAnchor:{key:"w:vertAnchor",value:i}})),b&&this.root.push(new _D("w:tblOverlap",b))}}class Rw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"w:type"})}}class Pw extends Ie{constructor(t){super("w:tblLayout"),this.root.push(new Rw({type:t}))}}const Iw={DXA:"dxa"};class wN extends Ie{constructor({type:t=Iw.DXA,value:i}){super("w:tblCellSpacing"),this.root.push(new un({type:{key:"w:type",value:t},value:{key:"w:w",value:tN(i)}}))}}class Aw extends dn{constructor(t){super("w:tblPr"),t.style&&this.root.push(new Wn("w:tblStyle",t.style)),t.float&&this.root.push(new Cw(t.float)),t.visuallyRightToLeft!==void 0&&this.root.push(new Oe("w:bidiVisual",t.visuallyRightToLeft)),t.width&&this.root.push(new Pn("w:tblW",t.width)),t.alignment&&this.root.push(new sN(t.alignment)),t.indent&&this.root.push(new Pn("w:tblInd",t.indent)),t.borders&&this.root.push(new EN(t.borders)),t.shading&&this.root.push(new mo(t.shading)),t.layout&&this.root.push(new Pw(t.layout)),t.cellMargin&&this.root.push(new yN(vN.TABLE,t.cellMargin)),t.cellSpacing&&this.root.push(new wN(t.cellSpacing))}}class ba extends NN{constructor({rows:t,width:i,columnWidths:n=Array(Math.max(...t.map(u=>u.CellCount))).fill(100),margins:a,indent:o,float:l,layout:r,style:d,borders:c,alignment:f,visuallyRightToLeft:b,cellSpacing:D}){super("w:tbl"),this.root.push(new Aw({borders:c??{},width:i??{size:100},indent:o,float:l,layout:r,style:d,alignment:f,cellMargin:a,visuallyRightToLeft:b,cellSpacing:D})),this.root.push(new vw(n));for(const u of t)this.root.push(u);t.forEach((u,p)=>{if(p===t.length-1)return;let x=0;u.cells.forEach(S=>{if(S.options.rowSpan&&S.options.rowSpan>1){const m=new Ls({rowSpan:S.options.rowSpan-1,columnSpan:S.options.columnSpan,borders:S.options.borders,children:[],verticalMerge:DN.CONTINUE});t[p+1].addCellToColumnIndex(m,x)}x+=S.options.columnSpan||1})})}}const Tw={EXACT:"exact"};class Ww extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}}class Lw extends Ie{constructor(t,i){super("w:trHeight"),this.root.push(new Ww({value:ei(t),rule:i}))}}class Mw extends dn{constructor(t){super("w:trPr"),t.cantSplit!==void 0&&this.root.push(new Oe("w:cantSplit",t.cantSplit)),t.tableHeader!==void 0&&this.root.push(new Oe("w:tblHeader",t.tableHeader)),t.height&&this.root.push(new Lw(t.height.value,t.height.rule)),t.cellSpacing&&this.root.push(new wN(t.cellSpacing))}}class on extends Ie{constructor(t){super("w:tr"),this.options=t,this.root.push(new Mw(t));for(const i of t.children)this.root.push(i)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(t=>t instanceof Ls)}addCellToIndex(t,i){this.root.splice(i+1,0,t)}addCellToColumnIndex(t,i){const n=this.columnIndexToRootIndex(i,!0);this.addCellToIndex(t,n-1)}rootIndexToColumnIndex(t){if(t<1||t>=this.root.length)throw new Error(`cell 'rootIndex' should between 1 to ${this.root.length-1}`);let i=0;for(let n=1;n<t;n++){const a=this.root[n];i+=a.options.columnSpan||1}return i}columnIndexToRootIndex(t,i=!1){if(t<0)throw new Error("cell 'columnIndex' should not less than zero");let n=0,a=1;for(;n<=t;){if(a>=this.root.length){if(i)return this.root.length;throw new Error(`cell 'columnIndex' should not great than ${n-1}`)}const o=this.root[a];a+=1,n+=o&&o.options.columnSpan||1}return a-1}}class _w extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class Ow extends Ie{constructor(){super("Properties"),this.root.push(new _w({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class Fw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns"})}}class Bw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Ji extends Ie{constructor(t,i){super("Default"),this.root.push(new Bw({contentType:t,extension:i}))}}class Uw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class Pi extends Ie{constructor(t,i){super("Override"),this.root.push(new Uw({contentType:t,partName:i}))}}class $w extends Ie{constructor(){super("Types"),this.root.push(new Fw({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Ji("image/png","png")),this.root.push(new Ji("image/jpeg","jpeg")),this.root.push(new Ji("image/jpeg","jpg")),this.root.push(new Ji("image/bmp","bmp")),this.root.push(new Ji("image/gif","gif")),this.root.push(new Ji("image/svg+xml","svg")),this.root.push(new Ji("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Ji("application/xml","xml")),this.root.push(new Ji("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Pi("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(t){this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${t}.xml`))}addHeader(t){this.root.push(new Pi("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${t}.xml`))}}class zw extends Ie{constructor(t){super("cp:coreProperties"),this.root.push(new fo(["cp","dc","dcterms","dcmitype","xsi"])),t.title&&this.root.push(new kn("dc:title",t.title)),t.subject&&this.root.push(new kn("dc:subject",t.subject)),t.creator&&this.root.push(new kn("dc:creator",t.creator)),t.keywords&&this.root.push(new kn("cp:keywords",t.keywords)),t.description&&this.root.push(new kn("dc:description",t.description)),t.lastModifiedBy&&this.root.push(new kn("cp:lastModifiedBy",t.lastModifiedBy)),t.revision&&this.root.push(new kn("cp:revision",String(t.revision))),this.root.push(new _p("dcterms:created")),this.root.push(new _p("dcterms:modified"))}}class Gw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"xsi:type"})}}class _p extends Ie{constructor(t){super(t),this.root.push(new Gw({type:"dcterms:W3CDTF"})),this.root.push(MD(new Date))}}class Hw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class qw extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class Kw extends Ie{constructor(t,i){super("property"),this.root.push(new qw({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t.toString(),name:i.name})),this.root.push(new Yw(i.value))}}class Yw extends Ie{constructor(t){super("vt:lpwstr"),this.root.push(t)}}class Qw extends Ie{constructor(t){super("Properties"),Pe(this,"nextId"),Pe(this,"properties",[]),this.root.push(new Hw({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const i of t)this.addCustomProperty(i)}prepForXml(t){return this.properties.forEach(i=>this.root.push(i)),super.prepForXml(t)}addCustomProperty(t){this.properties.push(new Kw(this.nextId++,t))}}const Er=({id:s,fontKey:t,subsetted:i},n)=>new Ns({name:n,attributes:Wt({id:{key:"r:id",value:s}},t?{fontKey:{key:"w:fontKey",value:`{${t}}`}}:{}),children:[...i?[new Oe("w:subsetted",i)]:[]]}),Zw=({name:s,altName:t,panose1:i,charset:n,family:a,notTrueType:o,pitch:l,sig:r,embedRegular:d,embedBold:c,embedItalic:f,embedBoldItalic:b})=>new Ns({name:"w:font",attributes:{name:{key:"w:name",value:s}},children:[...t?[Sa("w:altName",t)]:[],...i?[Sa("w:panose1",i)]:[],...n?[Sa("w:charset",n)]:[],Sa("w:family",a),...o?[new Oe("w:notTrueType",o)]:[],Sa("w:pitch",l),...r?[new Ns({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:r.usb0},usb1:{key:"w:usb1",value:r.usb1},usb2:{key:"w:usb2",value:r.usb2},usb3:{key:"w:usb3",value:r.usb3},csb0:{key:"w:csb0",value:r.csb0},csb1:{key:"w:csb1",value:r.csb1}}})]:[],...d?[Er(d,"w:embedRegular")]:[],...c?[Er(c,"w:embedBold")]:[],...f?[Er(f,"w:embedItalic")]:[],...b?[Er(b,"w:embedBoldItalic")]:[]]}),Xw=({name:s,index:t,fontKey:i,characterSet:n})=>Zw({name:s,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:i,id:`rId${t}`}}),Jw=s=>new Ns({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:s.map((t,i)=>Xw({name:t.name,index:i+1,fontKey:t.fontKey}))});class ek{constructor(t){Pe(this,"fontTable"),Pe(this,"relationships"),Pe(this,"fontOptionsWithKey",[]),this.options=t,this.fontOptionsWithKey=t.map(i=>rn(Wt({},i),{fontKey:SE()})),this.fontTable=Jw(this.fontOptionsWithKey),this.relationships=new $n;for(let i=0;i<t.length;i++)this.relationships.createRelationship(i+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${t[i].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class tk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let sk=class extends Xb{constructor(t,i){super("w:ftr",i),Pe(this,"refId"),this.refId=t,i||this.root.push(new tk({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class ik{constructor(t,i,n){Pe(this,"footer"),Pe(this,"relationships"),this.media=t,this.footer=new sk(i,n),this.relationships=new $n}add(t){this.footer.add(t)}addChildElement(t){this.footer.addChildElement(t)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class nk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class ak extends Ie{constructor(){super("w:footnoteRef")}}class rk extends tr{constructor(){super({style:"FootnoteReference"}),this.root.push(new ak)}}const Op={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class wc extends Ie{constructor(t){super("w:footnote"),this.root.push(new nk({type:t.type,id:t.id}));for(let i=0;i<t.children.length;i++){const n=t.children[i];i===0&&n.addRunToFront(new rk),this.root.push(n)}}}class ok extends Ie{constructor(){super("w:continuationSeparator")}}class lk extends tr{constructor(){super({}),this.root.push(new ok)}}class ck extends Ie{constructor(){super("w:separator")}}class dk extends tr{constructor(){super({}),this.root.push(new ck)}}class uk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class mk extends Ie{constructor(){super("w:footnotes"),this.root.push(new uk({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new wc({id:-1,type:Op.SEPERATOR,children:[new Tt({spacing:{after:0,line:240,lineRule:nd.AUTO},children:[new dk]})]});this.root.push(t);const i=new wc({id:0,type:Op.CONTINUATION_SEPERATOR,children:[new Tt({spacing:{after:0,line:240,lineRule:nd.AUTO},children:[new lk]})]});this.root.push(i)}createFootNote(t,i){const n=new wc({id:t,children:i});this.root.push(n)}}class pk{constructor(){Pe(this,"footnotess"),Pe(this,"relationships"),this.footnotess=new mk,this.relationships=new $n}get View(){return this.footnotess}get Relationships(){return this.relationships}}class fk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let hk=class extends Xb{constructor(t,i){super("w:hdr",i),Pe(this,"refId"),this.refId=t,i||this.root.push(new fk({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class bk{constructor(t,i,n){Pe(this,"header"),Pe(this,"relationships"),this.media=t,this.header=new hk(i,n),this.relationships=new $n}add(t){return this.header.add(t),this}addChildElement(t){this.header.addChildElement(t)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class Nk{constructor(){Pe(this,"map"),this.map=new Map}addImage(t,i){this.map.set(t,i)}get Array(){return Array.from(this.map.values())}}const en={BULLET:"bullet"};class xk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class gk extends Ie{constructor(t){super("w:numFmt"),this.root.push(new As({val:t}))}}class vk extends Ie{constructor(t){super("w:lvlText"),this.root.push(new As({val:t}))}}class yk extends Ie{constructor(t){super("w:lvlJc"),this.root.push(new As({val:t}))}}class Dk extends Ie{constructor(t){super("w:suff"),this.root.push(new As({val:t}))}}class Ek extends Ie{constructor(){super("w:isLgl")}}class wk extends Ie{constructor({level:t,format:i,text:n,alignment:a=ps.START,start:o=1,style:l,suffix:r,isLegalNumberingStyle:d}){if(super("w:lvl"),Pe(this,"paragraphProperties"),Pe(this,"runProperties"),this.root.push(new Ta("w:start",oi(o))),i&&this.root.push(new gk(i)),r&&this.root.push(new Dk(r)),d&&this.root.push(new Ek),n&&this.root.push(new vk(n)),this.root.push(new yk(a)),this.paragraphProperties=new ha(l&&l.paragraph),this.runProperties=new Un(l&&l.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new xk({ilvl:oi(t),tentative:1}))}}class kk extends wk{}class Sk extends Ie{constructor(t){super("w:multiLevelType"),this.root.push(new As({val:t}))}}class jk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class Fp extends Ie{constructor(t,i){super("w:abstractNum"),Pe(this,"id"),this.root.push(new jk({abstractNumId:oi(t),restartNumberingAfterBreak:0})),this.root.push(new Sk("hybridMultilevel")),this.id=t;for(const n of i)this.root.push(new kk(n))}}class Vk extends Ie{constructor(t){super("w:abstractNumId"),this.root.push(new As({val:t}))}}class Ck extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{numId:"w:numId"})}}class Bp extends Ie{constructor(t){if(super("w:num"),Pe(this,"numId"),Pe(this,"reference"),Pe(this,"instance"),this.numId=t.numId,this.reference=t.reference,this.instance=t.instance,this.root.push(new Ck({numId:oi(t.numId)})),this.root.push(new Vk(oi(t.abstractNumId))),t.overrideLevels&&t.overrideLevels.length)for(const i of t.overrideLevels)this.root.push(new Pk(i.num,i.start))}}class Rk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{ilvl:"w:ilvl"})}}class Pk extends Ie{constructor(t,i){super("w:lvlOverride"),this.root.push(new Rk({ilvl:t})),i!==void 0&&this.root.push(new Ak(i))}}class Ik extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class Ak extends Ie{constructor(t){super("w:startOverride"),this.root.push(new Ik({val:t}))}}class Tk extends Ie{constructor(t){super("w:numbering"),Pe(this,"abstractNumberingMap",new Map),Pe(this,"concreteNumberingMap",new Map),Pe(this,"referenceConfigMap",new Map),Pe(this,"abstractNumUniqueNumericId",yE()),Pe(this,"concreteNumUniqueNumericId",DE()),this.root.push(new fo(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const i=new Fp(this.abstractNumUniqueNumericId(),[{level:0,format:en.BULLET,text:"●",alignment:ps.LEFT,style:{paragraph:{indent:{left:Pt(.5),hanging:Pt(.25)}}}},{level:1,format:en.BULLET,text:"○",alignment:ps.LEFT,style:{paragraph:{indent:{left:Pt(1),hanging:Pt(.25)}}}},{level:2,format:en.BULLET,text:"■",alignment:ps.LEFT,style:{paragraph:{indent:{left:2160,hanging:Pt(.25)}}}},{level:3,format:en.BULLET,text:"●",alignment:ps.LEFT,style:{paragraph:{indent:{left:2880,hanging:Pt(.25)}}}},{level:4,format:en.BULLET,text:"○",alignment:ps.LEFT,style:{paragraph:{indent:{left:3600,hanging:Pt(.25)}}}},{level:5,format:en.BULLET,text:"■",alignment:ps.LEFT,style:{paragraph:{indent:{left:4320,hanging:Pt(.25)}}}},{level:6,format:en.BULLET,text:"●",alignment:ps.LEFT,style:{paragraph:{indent:{left:5040,hanging:Pt(.25)}}}},{level:7,format:en.BULLET,text:"●",alignment:ps.LEFT,style:{paragraph:{indent:{left:5760,hanging:Pt(.25)}}}},{level:8,format:en.BULLET,text:"●",alignment:ps.LEFT,style:{paragraph:{indent:{left:6480,hanging:Pt(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new Bp({numId:1,abstractNumId:i.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",i);for(const n of t.config)this.abstractNumberingMap.set(n.reference,new Fp(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(t){for(const i of this.abstractNumberingMap.values())this.root.push(i);for(const i of this.concreteNumberingMap.values())this.root.push(i);return super.prepForXml(t)}createConcreteNumberingInstance(t,i){const n=this.abstractNumberingMap.get(t);if(!n)return;const a=`${t}-${i}`;if(this.concreteNumberingMap.has(a))return;const o=this.referenceConfigMap.get(t),l=o&&o[0].start,r={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:t,instance:i,overrideLevels:[l&&Number.isInteger(l)?{num:0,start:l}:{num:0,start:1}]};this.concreteNumberingMap.set(a,new Bp(r))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class Wk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class Lk extends Ie{constructor(t){super("w:compatSetting"),this.root.push(new Wk({version:t,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class Mk extends Ie{constructor(t){super("w:compat"),t.version&&this.root.push(new Lk(t.version)),t.useSingleBorderforContiguousCells&&this.root.push(new Oe("w:useSingleBorderforContiguousCells",t.useSingleBorderforContiguousCells)),t.wordPerfectJustification&&this.root.push(new Oe("w:wpJustification",t.wordPerfectJustification)),t.noTabStopForHangingIndent&&this.root.push(new Oe("w:noTabHangInd",t.noTabStopForHangingIndent)),t.noLeading&&this.root.push(new Oe("w:noLeading",t.noLeading)),t.spaceForUnderline&&this.root.push(new Oe("w:spaceForUL",t.spaceForUnderline)),t.noColumnBalance&&this.root.push(new Oe("w:noColumnBalance",t.noColumnBalance)),t.balanceSingleByteDoubleByteWidth&&this.root.push(new Oe("w:balanceSingleByteDoubleByteWidth",t.balanceSingleByteDoubleByteWidth)),t.noExtraLineSpacing&&this.root.push(new Oe("w:noExtraLineSpacing",t.noExtraLineSpacing)),t.doNotLeaveBackslashAlone&&this.root.push(new Oe("w:doNotLeaveBackslashAlone",t.doNotLeaveBackslashAlone)),t.underlineTrailingSpaces&&this.root.push(new Oe("w:ulTrailSpace",t.underlineTrailingSpaces)),t.doNotExpandShiftReturn&&this.root.push(new Oe("w:doNotExpandShiftReturn",t.doNotExpandShiftReturn)),t.spacingInWholePoints&&this.root.push(new Oe("w:spacingInWholePoints",t.spacingInWholePoints)),t.lineWrapLikeWord6&&this.root.push(new Oe("w:lineWrapLikeWord6",t.lineWrapLikeWord6)),t.printBodyTextBeforeHeader&&this.root.push(new Oe("w:printBodyTextBeforeHeader",t.printBodyTextBeforeHeader)),t.printColorsBlack&&this.root.push(new Oe("w:printColBlack",t.printColorsBlack)),t.spaceWidth&&this.root.push(new Oe("w:wpSpaceWidth",t.spaceWidth)),t.showBreaksInFrames&&this.root.push(new Oe("w:showBreaksInFrames",t.showBreaksInFrames)),t.subFontBySize&&this.root.push(new Oe("w:subFontBySize",t.subFontBySize)),t.suppressBottomSpacing&&this.root.push(new Oe("w:suppressBottomSpacing",t.suppressBottomSpacing)),t.suppressTopSpacing&&this.root.push(new Oe("w:suppressTopSpacing",t.suppressTopSpacing)),t.suppressSpacingAtTopOfPage&&this.root.push(new Oe("w:suppressSpacingAtTopOfPage",t.suppressSpacingAtTopOfPage)),t.suppressTopSpacingWP&&this.root.push(new Oe("w:suppressTopSpacingWP",t.suppressTopSpacingWP)),t.suppressSpBfAfterPgBrk&&this.root.push(new Oe("w:suppressSpBfAfterPgBrk",t.suppressSpBfAfterPgBrk)),t.swapBordersFacingPages&&this.root.push(new Oe("w:swapBordersFacingPages",t.swapBordersFacingPages)),t.convertMailMergeEsc&&this.root.push(new Oe("w:convMailMergeEsc",t.convertMailMergeEsc)),t.truncateFontHeightsLikeWP6&&this.root.push(new Oe("w:truncateFontHeightsLikeWP6",t.truncateFontHeightsLikeWP6)),t.macWordSmallCaps&&this.root.push(new Oe("w:mwSmallCaps",t.macWordSmallCaps)),t.usePrinterMetrics&&this.root.push(new Oe("w:usePrinterMetrics",t.usePrinterMetrics)),t.doNotSuppressParagraphBorders&&this.root.push(new Oe("w:doNotSuppressParagraphBorders",t.doNotSuppressParagraphBorders)),t.wrapTrailSpaces&&this.root.push(new Oe("w:wrapTrailSpaces",t.wrapTrailSpaces)),t.footnoteLayoutLikeWW8&&this.root.push(new Oe("w:footnoteLayoutLikeWW8",t.footnoteLayoutLikeWW8)),t.shapeLayoutLikeWW8&&this.root.push(new Oe("w:shapeLayoutLikeWW8",t.shapeLayoutLikeWW8)),t.alignTablesRowByRow&&this.root.push(new Oe("w:alignTablesRowByRow",t.alignTablesRowByRow)),t.forgetLastTabAlignment&&this.root.push(new Oe("w:forgetLastTabAlignment",t.forgetLastTabAlignment)),t.adjustLineHeightInTable&&this.root.push(new Oe("w:adjustLineHeightInTable",t.adjustLineHeightInTable)),t.autoSpaceLikeWord95&&this.root.push(new Oe("w:autoSpaceLikeWord95",t.autoSpaceLikeWord95)),t.noSpaceRaiseLower&&this.root.push(new Oe("w:noSpaceRaiseLower",t.noSpaceRaiseLower)),t.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Oe("w:doNotUseHTMLParagraphAutoSpacing",t.doNotUseHTMLParagraphAutoSpacing)),t.layoutRawTableWidth&&this.root.push(new Oe("w:layoutRawTableWidth",t.layoutRawTableWidth)),t.layoutTableRowsApart&&this.root.push(new Oe("w:layoutTableRowsApart",t.layoutTableRowsApart)),t.useWord97LineBreakRules&&this.root.push(new Oe("w:useWord97LineBreakRules",t.useWord97LineBreakRules)),t.doNotBreakWrappedTables&&this.root.push(new Oe("w:doNotBreakWrappedTables",t.doNotBreakWrappedTables)),t.doNotSnapToGridInCell&&this.root.push(new Oe("w:doNotSnapToGridInCell",t.doNotSnapToGridInCell)),t.selectFieldWithFirstOrLastCharacter&&this.root.push(new Oe("w:selectFldWithFirstOrLastChar",t.selectFieldWithFirstOrLastCharacter)),t.applyBreakingRules&&this.root.push(new Oe("w:applyBreakingRules",t.applyBreakingRules)),t.doNotWrapTextWithPunctuation&&this.root.push(new Oe("w:doNotWrapTextWithPunct",t.doNotWrapTextWithPunctuation)),t.doNotUseEastAsianBreakRules&&this.root.push(new Oe("w:doNotUseEastAsianBreakRules",t.doNotUseEastAsianBreakRules)),t.useWord2002TableStyleRules&&this.root.push(new Oe("w:useWord2002TableStyleRules",t.useWord2002TableStyleRules)),t.growAutofit&&this.root.push(new Oe("w:growAutofit",t.growAutofit)),t.useFELayout&&this.root.push(new Oe("w:useFELayout",t.useFELayout)),t.useNormalStyleForList&&this.root.push(new Oe("w:useNormalStyleForList",t.useNormalStyleForList)),t.doNotUseIndentAsNumberingTabStop&&this.root.push(new Oe("w:doNotUseIndentAsNumberingTabStop",t.doNotUseIndentAsNumberingTabStop)),t.useAlternateEastAsianLineBreakRules&&this.root.push(new Oe("w:useAltKinsokuLineBreakRules",t.useAlternateEastAsianLineBreakRules)),t.allowSpaceOfSameStyleInTable&&this.root.push(new Oe("w:allowSpaceOfSameStyleInTable",t.allowSpaceOfSameStyleInTable)),t.doNotSuppressIndentation&&this.root.push(new Oe("w:doNotSuppressIndentation",t.doNotSuppressIndentation)),t.doNotAutofitConstrainedTables&&this.root.push(new Oe("w:doNotAutofitConstrainedTables",t.doNotAutofitConstrainedTables)),t.autofitToFirstFixedWidthCell&&this.root.push(new Oe("w:autofitToFirstFixedWidthCell",t.autofitToFirstFixedWidthCell)),t.underlineTabInNumberingList&&this.root.push(new Oe("w:underlineTabInNumList",t.underlineTabInNumberingList)),t.displayHangulFixedWidth&&this.root.push(new Oe("w:displayHangulFixedWidth",t.displayHangulFixedWidth)),t.splitPgBreakAndParaMark&&this.root.push(new Oe("w:splitPgBreakAndParaMark",t.splitPgBreakAndParaMark)),t.doNotVerticallyAlignCellWithSp&&this.root.push(new Oe("w:doNotVertAlignCellWithSp",t.doNotVerticallyAlignCellWithSp)),t.doNotBreakConstrainedForcedTable&&this.root.push(new Oe("w:doNotBreakConstrainedForcedTable",t.doNotBreakConstrainedForcedTable)),t.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Oe("w:doNotVertAlignInTxbx",t.ignoreVerticalAlignmentInTextboxes)),t.useAnsiKerningPairs&&this.root.push(new Oe("w:useAnsiKerningPairs",t.useAnsiKerningPairs)),t.cachedColumnBalance&&this.root.push(new Oe("w:cachedColBalance",t.cachedColumnBalance))}}class _k extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Ok extends Ie{constructor(t){var i,n,a,o,l,r,d,c;super("w:settings"),this.root.push(new _k({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Oe("w:displayBackgroundShape",!0)),t.trackRevisions!==void 0&&this.root.push(new Oe("w:trackRevisions",t.trackRevisions)),t.evenAndOddHeaders!==void 0&&this.root.push(new Oe("w:evenAndOddHeaders",t.evenAndOddHeaders)),t.updateFields!==void 0&&this.root.push(new Oe("w:updateFields",t.updateFields)),t.defaultTabStop!==void 0&&this.root.push(new Ta("w:defaultTabStop",t.defaultTabStop)),((i=t.hyphenation)==null?void 0:i.autoHyphenation)!==void 0&&this.root.push(new Oe("w:autoHyphenation",t.hyphenation.autoHyphenation)),((n=t.hyphenation)==null?void 0:n.hyphenationZone)!==void 0&&this.root.push(new Ta("w:hyphenationZone",t.hyphenation.hyphenationZone)),((a=t.hyphenation)==null?void 0:a.consecutiveHyphenLimit)!==void 0&&this.root.push(new Ta("w:consecutiveHyphenLimit",t.hyphenation.consecutiveHyphenLimit)),((o=t.hyphenation)==null?void 0:o.doNotHyphenateCaps)!==void 0&&this.root.push(new Oe("w:doNotHyphenateCaps",t.hyphenation.doNotHyphenateCaps)),this.root.push(new Mk(rn(Wt({},(l=t.compatibility)!=null?l:{}),{version:(c=(d=(r=t.compatibility)==null?void 0:r.version)!=null?d:t.compatibilityModeVersion)!=null?c:15})))}}class kN extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{val:"w:val"})}}class Fk extends Ie{constructor(t){super("w:name"),this.root.push(new kN({val:t}))}}class Bk extends Ie{constructor(t){super("w:uiPriority"),this.root.push(new kN({val:oi(t)}))}}class Uk extends rt{constructor(){super(...arguments),Pe(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class SN extends Ie{constructor(t,i){super("w:style"),this.root.push(new Uk(t)),i.name&&this.root.push(new Fk(i.name)),i.basedOn&&this.root.push(new Wn("w:basedOn",i.basedOn)),i.next&&this.root.push(new Wn("w:next",i.next)),i.link&&this.root.push(new Wn("w:link",i.link)),i.uiPriority!==void 0&&this.root.push(new Bk(i.uiPriority)),i.semiHidden!==void 0&&this.root.push(new Oe("w:semiHidden",i.semiHidden)),i.unhideWhenUsed!==void 0&&this.root.push(new Oe("w:unhideWhenUsed",i.unhideWhenUsed)),i.quickFormat!==void 0&&this.root.push(new Oe("w:qFormat",i.quickFormat))}}class ho extends SN{constructor(t){super({type:"paragraph",styleId:t.id},t),Pe(this,"paragraphProperties"),Pe(this,"runProperties"),this.paragraphProperties=new ha(t.paragraph),this.runProperties=new Un(t.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class bo extends SN{constructor(t){super({type:"character",styleId:t.id},Wt({uiPriority:99,unhideWhenUsed:!0},t)),Pe(this,"runProperties"),this.runProperties=new Un(t.run),this.root.push(this.runProperties)}}class Dn extends ho{constructor(t){super(Wt({basedOn:"Normal",next:"Normal",quickFormat:!0},t))}}class $k extends Dn{constructor(t){super(Wt({id:"Title",name:"Title"},t))}}class zk extends Dn{constructor(t){super(Wt({id:"Heading1",name:"Heading 1"},t))}}class Gk extends Dn{constructor(t){super(Wt({id:"Heading2",name:"Heading 2"},t))}}class Hk extends Dn{constructor(t){super(Wt({id:"Heading3",name:"Heading 3"},t))}}class qk extends Dn{constructor(t){super(Wt({id:"Heading4",name:"Heading 4"},t))}}class Kk extends Dn{constructor(t){super(Wt({id:"Heading5",name:"Heading 5"},t))}}class Yk extends Dn{constructor(t){super(Wt({id:"Heading6",name:"Heading 6"},t))}}class Qk extends Dn{constructor(t){super(Wt({id:"Strong",name:"Strong"},t))}}class Zk extends ho{constructor(t){super(Wt({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},t))}}class Xk extends ho{constructor(t){super(Wt({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:nd.AUTO}},run:{size:20}},t))}}class Jk extends bo{constructor(t){super(Wt({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},t))}}class eS extends bo{constructor(t){super(Wt({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},t))}}class tS extends bo{constructor(t){super(Wt({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:nN.SINGLE}}},t))}}class ad extends Ie{constructor(t){if(super("w:styles"),t.initialStyles&&this.root.push(t.initialStyles),t.importedStyles)for(const i of t.importedStyles)this.root.push(i);if(t.paragraphStyles)for(const i of t.paragraphStyles)this.root.push(new ho(i));if(t.characterStyles)for(const i of t.characterStyles)this.root.push(new bo(i))}}class sS extends Ie{constructor(t){super("w:pPrDefault"),this.root.push(new ha(t))}}class iS extends Ie{constructor(t){super("w:rPrDefault"),this.root.push(new Un(t))}}class nS extends Ie{constructor(t){super("w:docDefaults"),Pe(this,"runPropertiesDefaults"),Pe(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new iS(t.run),this.paragraphPropertiesDefaults=new sS(t.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class aS{newInstance(t){const i=Zb.xml2js(t,{compact:!1});let n;for(const l of i.elements||[])l.name==="w:styles"&&(n=l);if(n===void 0)throw new Error("can not find styles element");const a=n.elements||[];return new ad({initialStyles:new ID(n.attributes),importedStyles:a.map(l=>qd(l))})}}class Up{newInstance(t={}){var i;return{initialStyles:new fo(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new nS((i=t.document)!=null?i:{}),new $k(Wt({run:{size:56}},t.title)),new zk(Wt({run:{color:"2E74B5",size:32}},t.heading1)),new Gk(Wt({run:{color:"2E74B5",size:26}},t.heading2)),new Hk(Wt({run:{color:"1F4D78",size:24}},t.heading3)),new qk(Wt({run:{color:"2E74B5",italics:!0}},t.heading4)),new Kk(Wt({run:{color:"2E74B5"}},t.heading5)),new Yk(Wt({run:{color:"1F4D78"}},t.heading6)),new Qk(Wt({run:{bold:!0}},t.strong)),new Zk(t.listParagraph||{}),new tS(t.hyperlink||{}),new Jk(t.footnoteReference||{}),new Xk(t.footnoteText||{}),new eS(t.footnoteTextChar||{})]}}}let jN=class{constructor(t){Pe(this,"currentRelationshipId",1),Pe(this,"documentWrapper"),Pe(this,"headers",[]),Pe(this,"footers",[]),Pe(this,"coreProperties"),Pe(this,"numbering"),Pe(this,"media"),Pe(this,"fileRelationships"),Pe(this,"footnotesWrapper"),Pe(this,"settings"),Pe(this,"contentTypes"),Pe(this,"customProperties"),Pe(this,"appProperties"),Pe(this,"styles"),Pe(this,"comments"),Pe(this,"fontWrapper");var i,n,a,o,l,r,d,c,f,b,D,u;if(this.coreProperties=new zw(rn(Wt({},t),{creator:(i=t.creator)!=null?i:"Un-named",revision:(n=t.revision)!=null?n:1,lastModifiedBy:(a=t.lastModifiedBy)!=null?a:"Un-named"})),this.numbering=new Tk(t.numbering?t.numbering:{config:[]}),this.comments=new T2((o=t.comments)!=null?o:{children:[]}),this.fileRelationships=new $n,this.customProperties=new Qw((l=t.customProperties)!=null?l:[]),this.appProperties=new Ow,this.footnotesWrapper=new pk,this.contentTypes=new $w,this.documentWrapper=new gN({background:t.background}),this.settings=new Ok({compatibilityModeVersion:t.compatabilityModeVersion,compatibility:t.compatibility,evenAndOddHeaders:!!t.evenAndOddHeaderAndFooters,trackRevisions:(r=t.features)==null?void 0:r.trackRevisions,updateFields:(d=t.features)==null?void 0:d.updateFields,defaultTabStop:t.defaultTabStop,hyphenation:{autoHyphenation:(c=t.hyphenation)==null?void 0:c.autoHyphenation,hyphenationZone:(f=t.hyphenation)==null?void 0:f.hyphenationZone,consecutiveHyphenLimit:(b=t.hyphenation)==null?void 0:b.consecutiveHyphenLimit,doNotHyphenateCaps:(D=t.hyphenation)==null?void 0:D.doNotHyphenateCaps}}),this.media=new Nk,t.externalStyles!==void 0){const p=new aS;this.styles=p.newInstance(t.externalStyles)}else if(t.styles){const x=new Up().newInstance(t.styles.default);this.styles=new ad(Wt(Wt({},x),t.styles))}else{const p=new Up;this.styles=new ad(p.newInstance())}this.addDefaultRelationships();for(const p of t.sections)this.addSection(p);if(t.footnotes)for(const p in t.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(p),t.footnotes[p].children);this.fontWrapper=new ek((u=t.fonts)!=null?u:[])}addSection({headers:t={},footers:i={},children:n,properties:a}){this.documentWrapper.View.Body.addSection(rn(Wt({},a),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:i.default?this.createFooter(i.default):void 0,first:i.first?this.createFooter(i.first):void 0,even:i.even?this.createFooter(i.even):void 0}}));for(const o of n)this.documentWrapper.View.add(o)}createHeader(t){const i=new bk(this.media,this.currentRelationshipId++);for(const n of t.options.children)i.add(n);return this.addHeaderToDocument(i),i}createFooter(t){const i=new ik(this.media,this.currentRelationshipId++);for(const n of t.options.children)i.add(n);return this.addFooterToDocument(i),i}addHeaderToDocument(t,i=ra.DEFAULT){this.headers.push({header:t,type:i}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(t,i=ra.DEFAULT){this.footers.push({footer:t,type:i}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(t=>t.header)}get Footers(){return this.footers.map(t=>t.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var rS=zd();function wr(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kc={exports:{}},$p;function oS(){return $p||($p=1,function(s,t){(function(i){s.exports=i()})(function(){return function i(n,a,o){function l(c,f){if(!a[c]){if(!n[c]){var b=typeof wr=="function"&&wr;if(!f&&b)return b(c,!0);if(r)return r(c,!0);var D=new Error("Cannot find module '"+c+"'");throw D.code="MODULE_NOT_FOUND",D}var u=a[c]={exports:{}};n[c][0].call(u.exports,function(p){var x=n[c][1][p];return l(x||p)},u,u.exports,i,n,a,o)}return a[c].exports}for(var r=typeof wr=="function"&&wr,d=0;d<o.length;d++)l(o[d]);return l}({1:[function(i,n,a){var o=i("./utils"),l=i("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var c,f,b,D,u,p,x,S=[],m=0,v=d.length,g=v,N=o.getTypeOf(d)!=="string";m<d.length;)g=v-m,b=N?(c=d[m++],f=m<v?d[m++]:0,m<v?d[m++]:0):(c=d.charCodeAt(m++),f=m<v?d.charCodeAt(m++):0,m<v?d.charCodeAt(m++):0),D=c>>2,u=(3&c)<<4|f>>4,p=1<g?(15&f)<<2|b>>6:64,x=2<g?63&b:64,S.push(r.charAt(D)+r.charAt(u)+r.charAt(p)+r.charAt(x));return S.join("")},a.decode=function(d){var c,f,b,D,u,p,x=0,S=0,m="data:";if(d.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var v,g=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===r.charAt(64)&&g--,d.charAt(d.length-2)===r.charAt(64)&&g--,g%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=l.uint8array?new Uint8Array(0|g):new Array(0|g);x<d.length;)c=r.indexOf(d.charAt(x++))<<2|(D=r.indexOf(d.charAt(x++)))>>4,f=(15&D)<<4|(u=r.indexOf(d.charAt(x++)))>>2,b=(3&u)<<6|(p=r.indexOf(d.charAt(x++))),v[S++]=c,u!==64&&(v[S++]=f),p!==64&&(v[S++]=b);return v}},{"./support":30,"./utils":32}],2:[function(i,n,a){var o=i("./external"),l=i("./stream/DataWorker"),r=i("./stream/Crc32Probe"),d=i("./stream/DataLengthProbe");function c(f,b,D,u,p){this.compressedSize=f,this.uncompressedSize=b,this.crc32=D,this.compression=u,this.compressedContent=p}c.prototype={getContentWorker:function(){var f=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),b=this;return f.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,b,D){return f.pipe(new r).pipe(new d("uncompressedSize")).pipe(b.compressWorker(D)).pipe(new d("compressedSize")).withStreamInfo("compression",b)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,n,a){var o=i("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},a.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,n,a){var o=i("./utils"),l=function(){for(var r,d=[],c=0;c<256;c++){r=c;for(var f=0;f<8;f++)r=1&r?3988292384^r>>>1:r>>>1;d[c]=r}return d}();n.exports=function(r,d){return r!==void 0&&r.length?o.getTypeOf(r)!=="string"?function(c,f,b,D){var u=l,p=D+b;c^=-1;for(var x=D;x<p;x++)c=c>>>8^u[255&(c^f[x])];return-1^c}(0|d,r,r.length,0):function(c,f,b,D){var u=l,p=D+b;c^=-1;for(var x=D;x<p;x++)c=c>>>8^u[255&(c^f.charCodeAt(x))];return-1^c}(0|d,r,r.length,0):0}},{"./utils":32}],5:[function(i,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(i,n,a){var o=null;o=typeof Promise<"u"?Promise:i("lie"),n.exports={Promise:o}},{lie:37}],7:[function(i,n,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=i("pako"),r=i("./utils"),d=i("./stream/GenericWorker"),c=o?"uint8array":"array";function f(b,D){d.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=D,this.meta={}}a.magic="\b\0",r.inherits(f,d),f.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(c,b.data),!1)},f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(D){b.push({data:D,meta:b.meta})}},a.compressWorker=function(b){return new f("Deflate",b)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,n,a){function o(u,p){var x,S="";for(x=0;x<p;x++)S+=String.fromCharCode(255&u),u>>>=8;return S}function l(u,p,x,S,m,v){var g,N,w=u.file,A=u.compression,I=v!==c.utf8encode,B=r.transformTo("string",v(w.name)),W=r.transformTo("string",c.utf8encode(w.name)),se=w.comment,ie=r.transformTo("string",v(se)),R=r.transformTo("string",c.utf8encode(se)),F=W.length!==w.name.length,k=R.length!==se.length,Q="",J="",O="",me=w.dir,de=w.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};p&&!x||(fe.crc32=u.crc32,fe.compressedSize=u.compressedSize,fe.uncompressedSize=u.uncompressedSize);var ae=0;p&&(ae|=8),I||!F&&!k||(ae|=2048);var L=0,H=0;me&&(L|=16),m==="UNIX"?(H=798,L|=function(ue,K){var C=ue;return ue||(C=K?16893:33204),(65535&C)<<16}(w.unixPermissions,me)):(H=20,L|=function(ue){return 63&(ue||0)}(w.dosPermissions)),g=de.getUTCHours(),g<<=6,g|=de.getUTCMinutes(),g<<=5,g|=de.getUTCSeconds()/2,N=de.getUTCFullYear()-1980,N<<=4,N|=de.getUTCMonth()+1,N<<=5,N|=de.getUTCDate(),F&&(J=o(1,1)+o(f(B),4)+W,Q+="up"+o(J.length,2)+J),k&&(O=o(1,1)+o(f(ie),4)+R,Q+="uc"+o(O.length,2)+O);var le="";return le+=`
\0`,le+=o(ae,2),le+=A.magic,le+=o(g,2),le+=o(N,2),le+=o(fe.crc32,4),le+=o(fe.compressedSize,4),le+=o(fe.uncompressedSize,4),le+=o(B.length,2),le+=o(Q.length,2),{fileRecord:b.LOCAL_FILE_HEADER+le+B+Q,dirRecord:b.CENTRAL_FILE_HEADER+o(H,2)+le+o(ie.length,2)+"\0\0\0\0"+o(L,4)+o(S,4)+B+Q+ie}}var r=i("../utils"),d=i("../stream/GenericWorker"),c=i("../utf8"),f=i("../crc32"),b=i("../signature");function D(u,p,x,S){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=x,this.encodeFileName=S,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(D,d),D.prototype.push=function(u){var p=u.meta.percent||0,x=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,d.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:x?(p+100*(x-S-1))/x:100}}))},D.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var p=this.streamFiles&&!u.file.dir;if(p){var x=l(u,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},D.prototype.closedSource=function(u){this.accumulate=!1;var p=this.streamFiles&&!u.file.dir,x=l(u,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),p)this.push({data:function(S){return b.DATA_DESCRIPTOR+o(S.crc32,4)+o(S.compressedSize,4)+o(S.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},D.prototype.flush=function(){for(var u=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var x=this.bytesWritten-u,S=function(m,v,g,N,w){var A=r.transformTo("string",w(N));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(m,2)+o(m,2)+o(v,4)+o(g,4)+o(A.length,2)+A}(this.dirRecords.length,x,u,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},D.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},D.prototype.registerPrevious=function(u){this._sources.push(u);var p=this;return u.on("data",function(x){p.processChunk(x)}),u.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),u.on("error",function(x){p.error(x)}),this},D.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},D.prototype.error=function(u){var p=this._sources;if(!d.prototype.error.call(this,u))return!1;for(var x=0;x<p.length;x++)try{p[x].error(u)}catch{}return!0},D.prototype.lock=function(){d.prototype.lock.call(this);for(var u=this._sources,p=0;p<u.length;p++)u[p].lock()},n.exports=D},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,n,a){var o=i("../compressions"),l=i("./ZipFileWorker");a.generateWorker=function(r,d,c){var f=new l(d.streamFiles,c,d.platform,d.encodeFileName),b=0;try{r.forEach(function(D,u){b++;var p=function(v,g){var N=v||g,w=o[N];if(!w)throw new Error(N+" is not a valid compression method !");return w}(u.options.compression,d.compression),x=u.options.compressionOptions||d.compressionOptions||{},S=u.dir,m=u.date;u._compressWorker(p,x).withStreamInfo("file",{name:D,dir:S,date:m,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(f)}),f.entriesCount=b}catch(D){f.error(D)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,n,a){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var r in this)typeof this[r]!="function"&&(l[r]=this[r]);return l}}(o.prototype=i("./object")).loadAsync=i("./load"),o.support=i("./support"),o.defaults=i("./defaults"),o.version="3.10.1",o.loadAsync=function(l,r){return new o().loadAsync(l,r)},o.external=i("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,n,a){var o=i("./utils"),l=i("./external"),r=i("./utf8"),d=i("./zipEntries"),c=i("./stream/Crc32Probe"),f=i("./nodejsUtils");function b(D){return new l.Promise(function(u,p){var x=D.decompressed.getContentWorker().pipe(new c);x.on("error",function(S){p(S)}).on("end",function(){x.streamInfo.crc32!==D.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}n.exports=function(D,u){var p=this;return u=o.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),f.isNode&&f.isStream(D)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",D,!0,u.optimizedBinaryString,u.base64).then(function(x){var S=new d(u);return S.load(x),S}).then(function(x){var S=[l.Promise.resolve(x)],m=x.files;if(u.checkCRC32)for(var v=0;v<m.length;v++)S.push(b(m[v]));return l.Promise.all(S)}).then(function(x){for(var S=x.shift(),m=S.files,v=0;v<m.length;v++){var g=m[v],N=g.fileNameStr,w=o.resolve(g.fileNameStr);p.file(w,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:u.createFolders}),g.dir||(p.file(w).unsafeOriginalName=N)}return S.zipComment.length&&(p.comment=S.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,n,a){var o=i("../utils"),l=i("../stream/GenericWorker");function r(d,c){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(c)}o.inherits(r,l),r.prototype._bindStream=function(d){var c=this;(this._stream=d).pause(),d.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},r.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,n,a){var o=i("readable-stream").Readable;function l(r,d,c){o.call(this,d),this._helper=r;var f=this;r.on("data",function(b,D){f.push(b)||f._helper.pause(),c&&c(D)}).on("error",function(b){f.emit("error",b)}).on("end",function(){f.push(null)})}i("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(i,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(i,n,a){function o(w,A,I){var B,W=r.getTypeOf(A),se=r.extend(I||{},f);se.date=se.date||new Date,se.compression!==null&&(se.compression=se.compression.toUpperCase()),typeof se.unixPermissions=="string"&&(se.unixPermissions=parseInt(se.unixPermissions,8)),se.unixPermissions&&16384&se.unixPermissions&&(se.dir=!0),se.dosPermissions&&16&se.dosPermissions&&(se.dir=!0),se.dir&&(w=m(w)),se.createFolders&&(B=S(w))&&v.call(this,B,!0);var ie=W==="string"&&se.binary===!1&&se.base64===!1;I&&I.binary!==void 0||(se.binary=!ie),(A instanceof b&&A.uncompressedSize===0||se.dir||!A||A.length===0)&&(se.base64=!1,se.binary=!0,A="",se.compression="STORE",W="string");var R=null;R=A instanceof b||A instanceof d?A:p.isNode&&p.isStream(A)?new x(w,A):r.prepareContent(w,A,se.binary,se.optimizedBinaryString,se.base64);var F=new D(w,R,se);this.files[w]=F}var l=i("./utf8"),r=i("./utils"),d=i("./stream/GenericWorker"),c=i("./stream/StreamHelper"),f=i("./defaults"),b=i("./compressedObject"),D=i("./zipObject"),u=i("./generate"),p=i("./nodejsUtils"),x=i("./nodejs/NodejsStreamInputAdapter"),S=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var A=w.lastIndexOf("/");return 0<A?w.substring(0,A):""},m=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},v=function(w,A){return A=A!==void 0?A:f.createFolders,w=m(w),this.files[w]||o.call(this,w,null,{dir:!0,createFolders:A}),this.files[w]};function g(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var A,I,B;for(A in this.files)B=this.files[A],(I=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&w(I,B)},filter:function(w){var A=[];return this.forEach(function(I,B){w(I,B)&&A.push(B)}),A},file:function(w,A,I){if(arguments.length!==1)return w=this.root+w,o.call(this,w,A,I),this;if(g(w)){var B=w;return this.filter(function(se,ie){return!ie.dir&&B.test(se)})}var W=this.files[this.root+w];return W&&!W.dir?W:null},folder:function(w){if(!w)return this;if(g(w))return this.filter(function(W,se){return se.dir&&w.test(W)});var A=this.root+w,I=v.call(this,A),B=this.clone();return B.root=I.name,B},remove:function(w){w=this.root+w;var A=this.files[w];if(A||(w.slice(-1)!=="/"&&(w+="/"),A=this.files[w]),A&&!A.dir)delete this.files[w];else for(var I=this.filter(function(W,se){return se.name.slice(0,w.length)===w}),B=0;B<I.length;B++)delete this.files[I[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var A,I={};try{if((I=r.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");r.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var B=I.comment||this.comment||"";A=u.generateWorker(this,I,B)}catch(W){(A=new d("error")).error(W)}return new c(A,I.type||"string",I.mimeType)},generateAsync:function(w,A){return this.generateInternalStream(w).accumulate(A)},generateNodeStream:function(w,A){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(A)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,n,a){n.exports=i("stream")},{stream:void 0}],17:[function(i,n,a){var o=i("./DataReader");function l(r){o.call(this,r);for(var d=0;d<this.data.length;d++)r[d]=255&r[d]}i("../utils").inherits(l,o),l.prototype.byteAt=function(r){return this.data[this.zero+r]},l.prototype.lastIndexOfSignature=function(r){for(var d=r.charCodeAt(0),c=r.charCodeAt(1),f=r.charCodeAt(2),b=r.charCodeAt(3),D=this.length-4;0<=D;--D)if(this.data[D]===d&&this.data[D+1]===c&&this.data[D+2]===f&&this.data[D+3]===b)return D-this.zero;return-1},l.prototype.readAndCheckSignature=function(r){var d=r.charCodeAt(0),c=r.charCodeAt(1),f=r.charCodeAt(2),b=r.charCodeAt(3),D=this.readData(4);return d===D[0]&&c===D[1]&&f===D[2]&&b===D[3]},l.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,d},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(i,n,a){var o=i("../utils");function l(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var d,c=0;for(this.checkOffset(r),d=this.index+r-1;d>=this.index;d--)c=(c<<8)+this.byteAt(d);return this.index+=r,c},readString:function(r){return o.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},n.exports=l},{"../utils":32}],19:[function(i,n,a){var o=i("./Uint8ArrayReader");function l(r){o.call(this,r)}i("../utils").inherits(l,o),l.prototype.readData=function(r){this.checkOffset(r);var d=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,d},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,n,a){var o=i("./DataReader");function l(r){o.call(this,r)}i("../utils").inherits(l,o),l.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},l.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},l.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},l.prototype.readData=function(r){this.checkOffset(r);var d=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,d},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(i,n,a){var o=i("./ArrayReader");function l(r){o.call(this,r)}i("../utils").inherits(l,o),l.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,d},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(i,n,a){var o=i("../utils"),l=i("../support"),r=i("./ArrayReader"),d=i("./StringReader"),c=i("./NodeBufferReader"),f=i("./Uint8ArrayReader");n.exports=function(b){var D=o.getTypeOf(b);return o.checkSupport(D),D!=="string"||l.uint8array?D==="nodebuffer"?new c(b):l.uint8array?new f(o.transformTo("uint8array",b)):new r(o.transformTo("array",b)):new d(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,n,a){var o=i("./GenericWorker"),l=i("../utils");function r(d){o.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(r,o),r.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},n.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(i,n,a){var o=i("./GenericWorker"),l=i("../crc32");function r(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(r,o),r.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,n,a){var o=i("../utils"),l=i("./GenericWorker");function r(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(r,l),r.prototype.processChunk=function(d){if(d){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+d.data.length}l.prototype.processChunk.call(this,d)},n.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(i,n,a){var o=i("../utils"),l=i("./GenericWorker");function r(d){l.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=o.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}o.inherits(r,l),r.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,c);break;case"uint8array":d=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":d=this.data.slice(this.index,c)}return this.index=c,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(i,n,a){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,r){return this._listeners[l].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,r){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,r)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var r=this;return l.on("data",function(d){r.processChunk(d)}),l.on("end",function(){r.end()}),l.on("error",function(d){r.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,r){return this.extraStreamInfo[l]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=o},{}],29:[function(i,n,a){var o=i("../utils"),l=i("./ConvertWorker"),r=i("./GenericWorker"),d=i("../base64"),c=i("../support"),f=i("../external"),b=null;if(c.nodestream)try{b=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function D(p,x){return new f.Promise(function(S,m){var v=[],g=p._internalType,N=p._outputType,w=p._mimeType;p.on("data",function(A,I){v.push(A),x&&x(I)}).on("error",function(A){v=[],m(A)}).on("end",function(){try{var A=function(I,B,W){switch(I){case"blob":return o.newBlob(o.transformTo("arraybuffer",B),W);case"base64":return d.encode(B);default:return o.transformTo(I,B)}}(N,function(I,B){var W,se=0,ie=null,R=0;for(W=0;W<B.length;W++)R+=B[W].length;switch(I){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(ie=new Uint8Array(R),W=0;W<B.length;W++)ie.set(B[W],se),se+=B[W].length;return ie;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+I+"'")}}(g,v),w);S(A)}catch(I){m(I)}v=[]}).resume()})}function u(p,x,S){var m=x;switch(x){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=x,this._mimeType=S,o.checkSupport(m),this._worker=p.pipe(new l(m)),p.lock()}catch(v){this._worker=new r("error"),this._worker.error(v)}}u.prototype={accumulate:function(p){return D(this,p)},on:function(p,x){var S=this;return p==="data"?this._worker.on(p,function(m){x.call(S,m.data,m.meta)}):this._worker.on(p,function(){o.delay(x,arguments,S)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var o=new ArrayBuffer(0);try{a.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),a.blob=l.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!i("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(i,n,a){for(var o=i("./utils"),l=i("./support"),r=i("./nodejsUtils"),d=i("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function b(){d.call(this,"utf-8 decode"),this.leftOver=null}function D(){d.call(this,"utf-8 encode")}a.utf8encode=function(u){return l.nodebuffer?r.newBufferFrom(u,"utf-8"):function(p){var x,S,m,v,g,N=p.length,w=0;for(v=0;v<N;v++)(64512&(S=p.charCodeAt(v)))==55296&&v+1<N&&(64512&(m=p.charCodeAt(v+1)))==56320&&(S=65536+(S-55296<<10)+(m-56320),v++),w+=S<128?1:S<2048?2:S<65536?3:4;for(x=l.uint8array?new Uint8Array(w):new Array(w),v=g=0;g<w;v++)(64512&(S=p.charCodeAt(v)))==55296&&v+1<N&&(64512&(m=p.charCodeAt(v+1)))==56320&&(S=65536+(S-55296<<10)+(m-56320),v++),S<128?x[g++]=S:(S<2048?x[g++]=192|S>>>6:(S<65536?x[g++]=224|S>>>12:(x[g++]=240|S>>>18,x[g++]=128|S>>>12&63),x[g++]=128|S>>>6&63),x[g++]=128|63&S);return x}(u)},a.utf8decode=function(u){return l.nodebuffer?o.transformTo("nodebuffer",u).toString("utf-8"):function(p){var x,S,m,v,g=p.length,N=new Array(2*g);for(x=S=0;x<g;)if((m=p[x++])<128)N[S++]=m;else if(4<(v=c[m]))N[S++]=65533,x+=v-1;else{for(m&=v===2?31:v===3?15:7;1<v&&x<g;)m=m<<6|63&p[x++],v--;1<v?N[S++]=65533:m<65536?N[S++]=m:(m-=65536,N[S++]=55296|m>>10&1023,N[S++]=56320|1023&m)}return N.length!==S&&(N.subarray?N=N.subarray(0,S):N.length=S),o.applyFromCharCode(N)}(u=o.transformTo(l.uint8array?"uint8array":"array",u))},o.inherits(b,d),b.prototype.processChunk=function(u){var p=o.transformTo(l.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var x=p;(p=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),p.set(x,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var S=function(v,g){var N;for((g=g||v.length)>v.length&&(g=v.length),N=g-1;0<=N&&(192&v[N])==128;)N--;return N<0||N===0?g:N+c[v[N]]>g?N:g}(p),m=p;S!==p.length&&(l.uint8array?(m=p.subarray(0,S),this.leftOver=p.subarray(S,p.length)):(m=p.slice(0,S),this.leftOver=p.slice(S,p.length))),this.push({data:a.utf8decode(m),meta:u.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=b,o.inherits(D,d),D.prototype.processChunk=function(u){this.push({data:a.utf8encode(u.data),meta:u.meta})},a.Utf8EncodeWorker=D},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,n,a){var o=i("./support"),l=i("./base64"),r=i("./nodejsUtils"),d=i("./external");function c(x){return x}function f(x,S){for(var m=0;m<x.length;++m)S[m]=255&x.charCodeAt(m);return S}i("setimmediate"),a.newBlob=function(x,S){a.checkSupport("blob");try{return new Blob([x],{type:S})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(x),m.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(x,S,m){var v=[],g=0,N=x.length;if(N<=m)return String.fromCharCode.apply(null,x);for(;g<N;)S==="array"||S==="nodebuffer"?v.push(String.fromCharCode.apply(null,x.slice(g,Math.min(g+m,N)))):v.push(String.fromCharCode.apply(null,x.subarray(g,Math.min(g+m,N)))),g+=m;return v.join("")},stringifyByChar:function(x){for(var S="",m=0;m<x.length;m++)S+=String.fromCharCode(x[m]);return S},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function D(x){var S=65536,m=a.getTypeOf(x),v=!0;if(m==="uint8array"?v=b.applyCanBeUsed.uint8array:m==="nodebuffer"&&(v=b.applyCanBeUsed.nodebuffer),v)for(;1<S;)try{return b.stringifyByChunk(x,m,S)}catch{S=Math.floor(S/2)}return b.stringifyByChar(x)}function u(x,S){for(var m=0;m<x.length;m++)S[m]=x[m];return S}a.applyFromCharCode=D;var p={};p.string={string:c,array:function(x){return f(x,new Array(x.length))},arraybuffer:function(x){return p.string.uint8array(x).buffer},uint8array:function(x){return f(x,new Uint8Array(x.length))},nodebuffer:function(x){return f(x,r.allocBuffer(x.length))}},p.array={string:D,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return r.newBufferFrom(x)}},p.arraybuffer={string:function(x){return D(new Uint8Array(x))},array:function(x){return u(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return r.newBufferFrom(new Uint8Array(x))}},p.uint8array={string:D,array:function(x){return u(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return r.newBufferFrom(x)}},p.nodebuffer={string:D,array:function(x){return u(x,new Array(x.length))},arraybuffer:function(x){return p.nodebuffer.uint8array(x).buffer},uint8array:function(x){return u(x,new Uint8Array(x.length))},nodebuffer:c},a.transformTo=function(x,S){if(S=S||"",!x)return S;a.checkSupport(x);var m=a.getTypeOf(S);return p[m][x](S)},a.resolve=function(x){for(var S=x.split("/"),m=[],v=0;v<S.length;v++){var g=S[v];g==="."||g===""&&v!==0&&v!==S.length-1||(g===".."?m.pop():m.push(g))}return m.join("/")},a.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":o.nodebuffer&&r.isBuffer(x)?"nodebuffer":o.uint8array&&x instanceof Uint8Array?"uint8array":o.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(x){if(!o[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(x){var S,m,v="";for(m=0;m<(x||"").length;m++)v+="\\x"+((S=x.charCodeAt(m))<16?"0":"")+S.toString(16).toUpperCase();return v},a.delay=function(x,S,m){setImmediate(function(){x.apply(m||null,S||[])})},a.inherits=function(x,S){function m(){}m.prototype=S.prototype,x.prototype=new m},a.extend=function(){var x,S,m={};for(x=0;x<arguments.length;x++)for(S in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],S)&&m[S]===void 0&&(m[S]=arguments[x][S]);return m},a.prepareContent=function(x,S,m,v,g){return d.Promise.resolve(S).then(function(N){return o.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new d.Promise(function(w,A){var I=new FileReader;I.onload=function(B){w(B.target.result)},I.onerror=function(B){A(B.target.error)},I.readAsArrayBuffer(N)}):N}).then(function(N){var w=a.getTypeOf(N);return w?(w==="arraybuffer"?N=a.transformTo("uint8array",N):w==="string"&&(g?N=l.decode(N):m&&v!==!0&&(N=function(A){return f(A,o.uint8array?new Uint8Array(A.length):new Array(A.length))}(N))),N):d.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,n,a){var o=i("./reader/readerFor"),l=i("./utils"),r=i("./signature"),d=i("./zipEntry"),c=i("./support");function f(b){this.files=[],this.loadOptions=b}f.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var D=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(D)+", expected "+l.pretty(b)+")")}},isSignature:function(b,D){var u=this.reader.index;this.reader.setIndex(b);var p=this.reader.readString(4)===D;return this.reader.setIndex(u),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),D=c.uint8array?"uint8array":"array",u=l.transformTo(D,b);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,D,u,p=this.zip64EndOfCentralSize-44;0<p;)b=this.reader.readInt(2),D=this.reader.readInt(4),u=this.reader.readData(D),this.zip64ExtensibleData[b]={id:b,length:D,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,D;for(b=0;b<this.files.length;b++)D=this.files[b],this.reader.setIndex(D.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),D.readLocalPart(this.reader),D.handleUTF8(),D.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(b=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var D=b;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var p=D-u;if(0<p)this.isSignature(D,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(b){this.reader=o(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,n,a){var o=i("./reader/readerFor"),l=i("./utils"),r=i("./compressedObject"),d=i("./crc32"),c=i("./utf8"),f=i("./compressions"),b=i("./support");function D(u,p){this.options=u,this.loadOptions=p}D.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var p,x;if(u.skip(22),this.fileNameLength=u.readInt(2),x=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(S){for(var m in f)if(Object.prototype.hasOwnProperty.call(f,m)&&f[m].magic===S)return f[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,p,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var p=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(p),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var p,x,S,m=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<m;)p=u.readInt(2),x=u.readInt(2),S=u.readData(x),this.extraFields[p]={id:p,length:x,value:S};u.setIndex(m)},handleUTF8:function(){var u=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var x=l.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var m=l.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var p=o(u.value);return p.readInt(1)!==1||d(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var p=o(u.value);return p.readInt(1)!==1||d(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(u.length-5))}return null}},n.exports=D},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,n,a){function o(p,x,S){this.name=p,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=x,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var l=i("./stream/StreamHelper"),r=i("./stream/DataWorker"),d=i("./utf8"),c=i("./compressedObject"),f=i("./stream/GenericWorker");o.prototype={internalStream:function(p){var x=null,S="string";try{if(!p)throw new Error("No output type specified.");var m=(S=p.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),x=this._decompressWorker();var v=!this._dataBinary;v&&!m&&(x=x.pipe(new d.Utf8EncodeWorker)),!v&&m&&(x=x.pipe(new d.Utf8DecodeWorker))}catch(g){(x=new f("error")).error(g)}return new l(x,S,"")},async:function(p,x){return this.internalStream(p).accumulate(x)},nodeStream:function(p,x){return this.internalStream(p||"nodebuffer").toNodejsStream(x)},_compressWorker:function(p,x){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new d.Utf8EncodeWorker)),c.createWorkerFrom(S,p,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new r(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],D=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<b.length;u++)o.prototype[b[u]]=D;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,n,a){(function(o){var l,r,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var c=0,f=new d(p),b=o.document.createTextNode("");f.observe(b,{characterData:!0}),l=function(){b.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var x=o.document.createElement("script");x.onreadystatechange=function(){p(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},o.document.documentElement.appendChild(x)}:function(){setTimeout(p,0)};else{var D=new o.MessageChannel;D.port1.onmessage=p,l=function(){D.port2.postMessage(0)}}var u=[];function p(){var x,S;r=!0;for(var m=u.length;m;){for(S=u,u=[],x=-1;++x<m;)S[x]();m=u.length}r=!1}n.exports=function(x){u.push(x)!==1||r||l()}}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(i,n,a){var o=i("immediate");function l(){}var r={},d=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function b(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,m!==l&&x(this,m)}function D(m,v,g){this.promise=m,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}function u(m,v,g){o(function(){var N;try{N=v(g)}catch(w){return r.reject(m,w)}N===m?r.reject(m,new TypeError("Cannot resolve promise with itself")):r.resolve(m,N)})}function p(m){var v=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof v=="function")return function(){v.apply(m,arguments)}}function x(m,v){var g=!1;function N(I){g||(g=!0,r.reject(m,I))}function w(I){g||(g=!0,r.resolve(m,I))}var A=S(function(){v(w,N)});A.status==="error"&&N(A.value)}function S(m,v){var g={};try{g.value=m(v),g.status="success"}catch(N){g.status="error",g.value=N}return g}(n.exports=b).prototype.finally=function(m){if(typeof m!="function")return this;var v=this.constructor;return this.then(function(g){return v.resolve(m()).then(function(){return g})},function(g){return v.resolve(m()).then(function(){throw g})})},b.prototype.catch=function(m){return this.then(null,m)},b.prototype.then=function(m,v){if(typeof m!="function"&&this.state===c||typeof v!="function"&&this.state===d)return this;var g=new this.constructor(l);return this.state!==f?u(g,this.state===c?m:v,this.outcome):this.queue.push(new D(g,m,v)),g},D.prototype.callFulfilled=function(m){r.resolve(this.promise,m)},D.prototype.otherCallFulfilled=function(m){u(this.promise,this.onFulfilled,m)},D.prototype.callRejected=function(m){r.reject(this.promise,m)},D.prototype.otherCallRejected=function(m){u(this.promise,this.onRejected,m)},r.resolve=function(m,v){var g=S(p,v);if(g.status==="error")return r.reject(m,g.value);var N=g.value;if(N)x(m,N);else{m.state=c,m.outcome=v;for(var w=-1,A=m.queue.length;++w<A;)m.queue[w].callFulfilled(v)}return m},r.reject=function(m,v){m.state=d,m.outcome=v;for(var g=-1,N=m.queue.length;++g<N;)m.queue[g].callRejected(v);return m},b.resolve=function(m){return m instanceof this?m:r.resolve(new this(l),m)},b.reject=function(m){var v=new this(l);return r.reject(v,m)},b.all=function(m){var v=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=m.length,N=!1;if(!g)return this.resolve([]);for(var w=new Array(g),A=0,I=-1,B=new this(l);++I<g;)W(m[I],I);return B;function W(se,ie){v.resolve(se).then(function(R){w[ie]=R,++A!==g||N||(N=!0,r.resolve(B,w))},function(R){N||(N=!0,r.reject(B,R))})}},b.race=function(m){var v=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=m.length,N=!1;if(!g)return this.resolve([]);for(var w=-1,A=new this(l);++w<g;)I=m[w],v.resolve(I).then(function(B){N||(N=!0,r.resolve(A,B))},function(B){N||(N=!0,r.reject(A,B))});var I;return A}},{immediate:36}],38:[function(i,n,a){var o={};(0,i("./lib/utils/common").assign)(o,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,n,a){var o=i("./zlib/deflate"),l=i("./utils/common"),r=i("./utils/strings"),d=i("./zlib/messages"),c=i("./zlib/zstream"),f=Object.prototype.toString,b=0,D=-1,u=0,p=8;function x(m){if(!(this instanceof x))return new x(m);this.options=l.assign({level:D,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},m||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=o.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(g!==b)throw new Error(d[g]);if(v.header&&o.deflateSetHeader(this.strm,v.header),v.dictionary){var N;if(N=typeof v.dictionary=="string"?r.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(g=o.deflateSetDictionary(this.strm,N))!==b)throw new Error(d[g]);this._dict_set=!0}}function S(m,v){var g=new x(v);if(g.push(m,!0),g.err)throw g.msg||d[g.err];return g.result}x.prototype.push=function(m,v){var g,N,w=this.strm,A=this.options.chunkSize;if(this.ended)return!1;N=v===~~v?v:v===!0?4:0,typeof m=="string"?w.input=r.string2buf(m):f.call(m)==="[object ArrayBuffer]"?w.input=new Uint8Array(m):w.input=m,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new l.Buf8(A),w.next_out=0,w.avail_out=A),(g=o.deflate(w,N))!==1&&g!==b)return this.onEnd(g),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(l.shrinkBuf(w.output,w.next_out))):this.onData(l.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&g!==1);return N===4?(g=o.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===b):N!==2||(this.onEnd(b),!(w.avail_out=0))},x.prototype.onData=function(m){this.chunks.push(m)},x.prototype.onEnd=function(m){m===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},a.Deflate=x,a.deflate=S,a.deflateRaw=function(m,v){return(v=v||{}).raw=!0,S(m,v)},a.gzip=function(m,v){return(v=v||{}).gzip=!0,S(m,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,n,a){var o=i("./zlib/inflate"),l=i("./utils/common"),r=i("./utils/strings"),d=i("./zlib/constants"),c=i("./zlib/messages"),f=i("./zlib/zstream"),b=i("./zlib/gzheader"),D=Object.prototype.toString;function u(x){if(!(this instanceof u))return new u(x);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},x||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||x&&x.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var m=o.inflateInit2(this.strm,S.windowBits);if(m!==d.Z_OK)throw new Error(c[m]);this.header=new b,o.inflateGetHeader(this.strm,this.header)}function p(x,S){var m=new u(S);if(m.push(x,!0),m.err)throw m.msg||c[m.err];return m.result}u.prototype.push=function(x,S){var m,v,g,N,w,A,I=this.strm,B=this.options.chunkSize,W=this.options.dictionary,se=!1;if(this.ended)return!1;v=S===~~S?S:S===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof x=="string"?I.input=r.binstring2buf(x):D.call(x)==="[object ArrayBuffer]"?I.input=new Uint8Array(x):I.input=x,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new l.Buf8(B),I.next_out=0,I.avail_out=B),(m=o.inflate(I,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&W&&(A=typeof W=="string"?r.string2buf(W):D.call(W)==="[object ArrayBuffer]"?new Uint8Array(W):W,m=o.inflateSetDictionary(this.strm,A)),m===d.Z_BUF_ERROR&&se===!0&&(m=d.Z_OK,se=!1),m!==d.Z_STREAM_END&&m!==d.Z_OK)return this.onEnd(m),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&m!==d.Z_STREAM_END&&(I.avail_in!==0||v!==d.Z_FINISH&&v!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(g=r.utf8border(I.output,I.next_out),N=I.next_out-g,w=r.buf2string(I.output,g),I.next_out=N,I.avail_out=B-N,N&&l.arraySet(I.output,I.output,g,N,0),this.onData(w)):this.onData(l.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(se=!0)}while((0<I.avail_in||I.avail_out===0)&&m!==d.Z_STREAM_END);return m===d.Z_STREAM_END&&(v=d.Z_FINISH),v===d.Z_FINISH?(m=o.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===d.Z_OK):v!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(I.avail_out=0))},u.prototype.onData=function(x){this.chunks.push(x)},u.prototype.onEnd=function(x){x===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Inflate=u,a.inflate=p,a.inflateRaw=function(x,S){return(S=S||{}).raw=!0,p(x,S)},a.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,n,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var b in f)f.hasOwnProperty(b)&&(d[b]=f[b])}}return d},a.shrinkBuf=function(d,c){return d.length===c?d:d.subarray?d.subarray(0,c):(d.length=c,d)};var l={arraySet:function(d,c,f,b,D){if(c.subarray&&d.subarray)d.set(c.subarray(f,f+b),D);else for(var u=0;u<b;u++)d[D+u]=c[f+u]},flattenChunks:function(d){var c,f,b,D,u,p;for(c=b=0,f=d.length;c<f;c++)b+=d[c].length;for(p=new Uint8Array(b),c=D=0,f=d.length;c<f;c++)u=d[c],p.set(u,D),D+=u.length;return p}},r={arraySet:function(d,c,f,b,D){for(var u=0;u<b;u++)d[D+u]=c[f+u]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,l)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(o)},{}],42:[function(i,n,a){var o=i("./common"),l=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var d=new o.Buf8(256),c=0;c<256;c++)d[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(b,D){if(D<65537&&(b.subarray&&r||!b.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(b,D));for(var u="",p=0;p<D;p++)u+=String.fromCharCode(b[p]);return u}d[254]=d[254]=1,a.string2buf=function(b){var D,u,p,x,S,m=b.length,v=0;for(x=0;x<m;x++)(64512&(u=b.charCodeAt(x)))==55296&&x+1<m&&(64512&(p=b.charCodeAt(x+1)))==56320&&(u=65536+(u-55296<<10)+(p-56320),x++),v+=u<128?1:u<2048?2:u<65536?3:4;for(D=new o.Buf8(v),x=S=0;S<v;x++)(64512&(u=b.charCodeAt(x)))==55296&&x+1<m&&(64512&(p=b.charCodeAt(x+1)))==56320&&(u=65536+(u-55296<<10)+(p-56320),x++),u<128?D[S++]=u:(u<2048?D[S++]=192|u>>>6:(u<65536?D[S++]=224|u>>>12:(D[S++]=240|u>>>18,D[S++]=128|u>>>12&63),D[S++]=128|u>>>6&63),D[S++]=128|63&u);return D},a.buf2binstring=function(b){return f(b,b.length)},a.binstring2buf=function(b){for(var D=new o.Buf8(b.length),u=0,p=D.length;u<p;u++)D[u]=b.charCodeAt(u);return D},a.buf2string=function(b,D){var u,p,x,S,m=D||b.length,v=new Array(2*m);for(u=p=0;u<m;)if((x=b[u++])<128)v[p++]=x;else if(4<(S=d[x]))v[p++]=65533,u+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&u<m;)x=x<<6|63&b[u++],S--;1<S?v[p++]=65533:x<65536?v[p++]=x:(x-=65536,v[p++]=55296|x>>10&1023,v[p++]=56320|1023&x)}return f(v,p)},a.utf8border=function(b,D){var u;for((D=D||b.length)>b.length&&(D=b.length),u=D-1;0<=u&&(192&b[u])==128;)u--;return u<0||u===0?D:u+d[b[u]]>D?u:D}},{"./common":41}],43:[function(i,n,a){n.exports=function(o,l,r,d){for(var c=65535&o|0,f=o>>>16&65535|0,b=0;r!==0;){for(r-=b=2e3<r?2e3:r;f=f+(c=c+l[d++]|0)|0,--b;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(i,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,n,a){var o=function(){for(var l,r=[],d=0;d<256;d++){l=d;for(var c=0;c<8;c++)l=1&l?3988292384^l>>>1:l>>>1;r[d]=l}return r}();n.exports=function(l,r,d,c){var f=o,b=c+d;l^=-1;for(var D=c;D<b;D++)l=l>>>8^f[255&(l^r[D])];return-1^l}},{}],46:[function(i,n,a){var o,l=i("../utils/common"),r=i("./trees"),d=i("./adler32"),c=i("./crc32"),f=i("./messages"),b=0,D=4,u=0,p=-2,x=-1,S=4,m=2,v=8,g=9,N=286,w=30,A=19,I=2*N+1,B=15,W=3,se=258,ie=se+W+1,R=42,F=113,k=1,Q=2,J=3,O=4;function me(V,Y){return V.msg=f[Y],Y}function de(V){return(V<<1)-(4<V?9:0)}function fe(V){for(var Y=V.length;0<=--Y;)V[Y]=0}function ae(V){var Y=V.state,T=Y.pending;T>V.avail_out&&(T=V.avail_out),T!==0&&(l.arraySet(V.output,Y.pending_buf,Y.pending_out,T,V.next_out),V.next_out+=T,Y.pending_out+=T,V.total_out+=T,V.avail_out-=T,Y.pending-=T,Y.pending===0&&(Y.pending_out=0))}function L(V,Y){r._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,Y),V.block_start=V.strstart,ae(V.strm)}function H(V,Y){V.pending_buf[V.pending++]=Y}function le(V,Y){V.pending_buf[V.pending++]=Y>>>8&255,V.pending_buf[V.pending++]=255&Y}function ue(V,Y){var T,y,E=V.max_chain_length,j=V.strstart,q=V.prev_length,te=V.nice_match,Z=V.strstart>V.w_size-ie?V.strstart-(V.w_size-ie):0,ve=V.window,ke=V.w_mask,De=V.prev,We=V.strstart+se,ze=ve[j+q-1],st=ve[j+q];V.prev_length>=V.good_match&&(E>>=2),te>V.lookahead&&(te=V.lookahead);do if(ve[(T=Y)+q]===st&&ve[T+q-1]===ze&&ve[T]===ve[j]&&ve[++T]===ve[j+1]){j+=2,T++;do;while(ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&ve[++j]===ve[++T]&&j<We);if(y=se-(We-j),j=We-se,q<y){if(V.match_start=Y,te<=(q=y))break;ze=ve[j+q-1],st=ve[j+q]}}while((Y=De[Y&ke])>Z&&--E!=0);return q<=V.lookahead?q:V.lookahead}function K(V){var Y,T,y,E,j,q,te,Z,ve,ke,De=V.w_size;do{if(E=V.window_size-V.lookahead-V.strstart,V.strstart>=De+(De-ie)){for(l.arraySet(V.window,V.window,De,De,0),V.match_start-=De,V.strstart-=De,V.block_start-=De,Y=T=V.hash_size;y=V.head[--Y],V.head[Y]=De<=y?y-De:0,--T;);for(Y=T=De;y=V.prev[--Y],V.prev[Y]=De<=y?y-De:0,--T;);E+=De}if(V.strm.avail_in===0)break;if(q=V.strm,te=V.window,Z=V.strstart+V.lookahead,ve=E,ke=void 0,ke=q.avail_in,ve<ke&&(ke=ve),T=ke===0?0:(q.avail_in-=ke,l.arraySet(te,q.input,q.next_in,ke,Z),q.state.wrap===1?q.adler=d(q.adler,te,ke,Z):q.state.wrap===2&&(q.adler=c(q.adler,te,ke,Z)),q.next_in+=ke,q.total_in+=ke,ke),V.lookahead+=T,V.lookahead+V.insert>=W)for(j=V.strstart-V.insert,V.ins_h=V.window[j],V.ins_h=(V.ins_h<<V.hash_shift^V.window[j+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[j+W-1])&V.hash_mask,V.prev[j&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=j,j++,V.insert--,!(V.lookahead+V.insert<W)););}while(V.lookahead<ie&&V.strm.avail_in!==0)}function C(V,Y){for(var T,y;;){if(V.lookahead<ie){if(K(V),V.lookahead<ie&&Y===b)return k;if(V.lookahead===0)break}if(T=0,V.lookahead>=W&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+W-1])&V.hash_mask,T=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),T!==0&&V.strstart-T<=V.w_size-ie&&(V.match_length=ue(V,T)),V.match_length>=W)if(y=r._tr_tally(V,V.strstart-V.match_start,V.match_length-W),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=W){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+W-1])&V.hash_mask,T=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else y=r._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(y&&(L(V,!1),V.strm.avail_out===0))return k}return V.insert=V.strstart<W-1?V.strstart:W-1,Y===D?(L(V,!0),V.strm.avail_out===0?J:O):V.last_lit&&(L(V,!1),V.strm.avail_out===0)?k:Q}function P(V,Y){for(var T,y,E;;){if(V.lookahead<ie){if(K(V),V.lookahead<ie&&Y===b)return k;if(V.lookahead===0)break}if(T=0,V.lookahead>=W&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+W-1])&V.hash_mask,T=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=W-1,T!==0&&V.prev_length<V.max_lazy_match&&V.strstart-T<=V.w_size-ie&&(V.match_length=ue(V,T),V.match_length<=5&&(V.strategy===1||V.match_length===W&&4096<V.strstart-V.match_start)&&(V.match_length=W-1)),V.prev_length>=W&&V.match_length<=V.prev_length){for(E=V.strstart+V.lookahead-W,y=r._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-W),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=E&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+W-1])&V.hash_mask,T=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=W-1,V.strstart++,y&&(L(V,!1),V.strm.avail_out===0))return k}else if(V.match_available){if((y=r._tr_tally(V,0,V.window[V.strstart-1]))&&L(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return k}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(y=r._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<W-1?V.strstart:W-1,Y===D?(L(V,!0),V.strm.avail_out===0?J:O):V.last_lit&&(L(V,!1),V.strm.avail_out===0)?k:Q}function ee(V,Y,T,y,E){this.good_length=V,this.max_lazy=Y,this.nice_length=T,this.max_chain=y,this.func=E}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*I),this.dyn_dtree=new l.Buf16(2*(2*w+1)),this.bl_tree=new l.Buf16(2*(2*A+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(B+1),this.heap=new l.Buf16(2*N+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*N+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(V){var Y;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=m,(Y=V.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?R:F,V.adler=Y.wrap===2?0:1,Y.last_flush=b,r._tr_init(Y),u):me(V,p)}function G(V){var Y=U(V);return Y===u&&function(T){T.window_size=2*T.w_size,fe(T.head),T.max_lazy_match=o[T.level].max_lazy,T.good_match=o[T.level].good_length,T.nice_match=o[T.level].nice_length,T.max_chain_length=o[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=W-1,T.match_available=0,T.ins_h=0}(V.state),Y}function re(V,Y,T,y,E,j){if(!V)return p;var q=1;if(Y===x&&(Y=6),y<0?(q=0,y=-y):15<y&&(q=2,y-=16),E<1||g<E||T!==v||y<8||15<y||Y<0||9<Y||j<0||S<j)return me(V,p);y===8&&(y=9);var te=new $;return(V.state=te).strm=V,te.wrap=q,te.gzhead=null,te.w_bits=y,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=E+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+W-1)/W),te.window=new l.Buf8(2*te.w_size),te.head=new l.Buf16(te.hash_size),te.prev=new l.Buf16(te.w_size),te.lit_bufsize=1<<E+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new l.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=Y,te.strategy=j,te.method=T,G(V)}o=[new ee(0,0,0,0,function(V,Y){var T=65535;for(T>V.pending_buf_size-5&&(T=V.pending_buf_size-5);;){if(V.lookahead<=1){if(K(V),V.lookahead===0&&Y===b)return k;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var y=V.block_start+T;if((V.strstart===0||V.strstart>=y)&&(V.lookahead=V.strstart-y,V.strstart=y,L(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-ie&&(L(V,!1),V.strm.avail_out===0))return k}return V.insert=0,Y===D?(L(V,!0),V.strm.avail_out===0?J:O):(V.strstart>V.block_start&&(L(V,!1),V.strm.avail_out),k)}),new ee(4,4,8,4,C),new ee(4,5,16,8,C),new ee(4,6,32,32,C),new ee(4,4,16,16,P),new ee(8,16,32,32,P),new ee(8,16,128,128,P),new ee(8,32,128,256,P),new ee(32,128,258,1024,P),new ee(32,258,258,4096,P)],a.deflateInit=function(V,Y){return re(V,Y,v,15,8,0)},a.deflateInit2=re,a.deflateReset=G,a.deflateResetKeep=U,a.deflateSetHeader=function(V,Y){return V&&V.state?V.state.wrap!==2?p:(V.state.gzhead=Y,u):p},a.deflate=function(V,Y){var T,y,E,j;if(!V||!V.state||5<Y||Y<0)return V?me(V,p):p;if(y=V.state,!V.output||!V.input&&V.avail_in!==0||y.status===666&&Y!==D)return me(V,V.avail_out===0?-5:p);if(y.strm=V,T=y.last_flush,y.last_flush=Y,y.status===R)if(y.wrap===2)V.adler=0,H(y,31),H(y,139),H(y,8),y.gzhead?(H(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),H(y,255&y.gzhead.time),H(y,y.gzhead.time>>8&255),H(y,y.gzhead.time>>16&255),H(y,y.gzhead.time>>24&255),H(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),H(y,255&y.gzhead.os),y.gzhead.extra&&y.gzhead.extra.length&&(H(y,255&y.gzhead.extra.length),H(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(V.adler=c(V.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=69):(H(y,0),H(y,0),H(y,0),H(y,0),H(y,0),H(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),H(y,3),y.status=F);else{var q=v+(y.w_bits-8<<4)<<8;q|=(2<=y.strategy||y.level<2?0:y.level<6?1:y.level===6?2:3)<<6,y.strstart!==0&&(q|=32),q+=31-q%31,y.status=F,le(y,q),y.strstart!==0&&(le(y,V.adler>>>16),le(y,65535&V.adler)),V.adler=1}if(y.status===69)if(y.gzhead.extra){for(E=y.pending;y.gzindex<(65535&y.gzhead.extra.length)&&(y.pending!==y.pending_buf_size||(y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),ae(V),E=y.pending,y.pending!==y.pending_buf_size));)H(y,255&y.gzhead.extra[y.gzindex]),y.gzindex++;y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=73)}else y.status=73;if(y.status===73)if(y.gzhead.name){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),ae(V),E=y.pending,y.pending===y.pending_buf_size)){j=1;break}j=y.gzindex<y.gzhead.name.length?255&y.gzhead.name.charCodeAt(y.gzindex++):0,H(y,j)}while(j!==0);y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),j===0&&(y.gzindex=0,y.status=91)}else y.status=91;if(y.status===91)if(y.gzhead.comment){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),ae(V),E=y.pending,y.pending===y.pending_buf_size)){j=1;break}j=y.gzindex<y.gzhead.comment.length?255&y.gzhead.comment.charCodeAt(y.gzindex++):0,H(y,j)}while(j!==0);y.gzhead.hcrc&&y.pending>E&&(V.adler=c(V.adler,y.pending_buf,y.pending-E,E)),j===0&&(y.status=103)}else y.status=103;if(y.status===103&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&ae(V),y.pending+2<=y.pending_buf_size&&(H(y,255&V.adler),H(y,V.adler>>8&255),V.adler=0,y.status=F)):y.status=F),y.pending!==0){if(ae(V),V.avail_out===0)return y.last_flush=-1,u}else if(V.avail_in===0&&de(Y)<=de(T)&&Y!==D)return me(V,-5);if(y.status===666&&V.avail_in!==0)return me(V,-5);if(V.avail_in!==0||y.lookahead!==0||Y!==b&&y.status!==666){var te=y.strategy===2?function(Z,ve){for(var ke;;){if(Z.lookahead===0&&(K(Z),Z.lookahead===0)){if(ve===b)return k;break}if(Z.match_length=0,ke=r._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++,ke&&(L(Z,!1),Z.strm.avail_out===0))return k}return Z.insert=0,ve===D?(L(Z,!0),Z.strm.avail_out===0?J:O):Z.last_lit&&(L(Z,!1),Z.strm.avail_out===0)?k:Q}(y,Y):y.strategy===3?function(Z,ve){for(var ke,De,We,ze,st=Z.window;;){if(Z.lookahead<=se){if(K(Z),Z.lookahead<=se&&ve===b)return k;if(Z.lookahead===0)break}if(Z.match_length=0,Z.lookahead>=W&&0<Z.strstart&&(De=st[We=Z.strstart-1])===st[++We]&&De===st[++We]&&De===st[++We]){ze=Z.strstart+se;do;while(De===st[++We]&&De===st[++We]&&De===st[++We]&&De===st[++We]&&De===st[++We]&&De===st[++We]&&De===st[++We]&&De===st[++We]&&We<ze);Z.match_length=se-(ze-We),Z.match_length>Z.lookahead&&(Z.match_length=Z.lookahead)}if(Z.match_length>=W?(ke=r._tr_tally(Z,1,Z.match_length-W),Z.lookahead-=Z.match_length,Z.strstart+=Z.match_length,Z.match_length=0):(ke=r._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++),ke&&(L(Z,!1),Z.strm.avail_out===0))return k}return Z.insert=0,ve===D?(L(Z,!0),Z.strm.avail_out===0?J:O):Z.last_lit&&(L(Z,!1),Z.strm.avail_out===0)?k:Q}(y,Y):o[y.level].func(y,Y);if(te!==J&&te!==O||(y.status=666),te===k||te===J)return V.avail_out===0&&(y.last_flush=-1),u;if(te===Q&&(Y===1?r._tr_align(y):Y!==5&&(r._tr_stored_block(y,0,0,!1),Y===3&&(fe(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),ae(V),V.avail_out===0))return y.last_flush=-1,u}return Y!==D?u:y.wrap<=0?1:(y.wrap===2?(H(y,255&V.adler),H(y,V.adler>>8&255),H(y,V.adler>>16&255),H(y,V.adler>>24&255),H(y,255&V.total_in),H(y,V.total_in>>8&255),H(y,V.total_in>>16&255),H(y,V.total_in>>24&255)):(le(y,V.adler>>>16),le(y,65535&V.adler)),ae(V),0<y.wrap&&(y.wrap=-y.wrap),y.pending!==0?u:1)},a.deflateEnd=function(V){var Y;return V&&V.state?(Y=V.state.status)!==R&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==F&&Y!==666?me(V,p):(V.state=null,Y===F?me(V,-3):u):p},a.deflateSetDictionary=function(V,Y){var T,y,E,j,q,te,Z,ve,ke=Y.length;if(!V||!V.state||(j=(T=V.state).wrap)===2||j===1&&T.status!==R||T.lookahead)return p;for(j===1&&(V.adler=d(V.adler,Y,ke,0)),T.wrap=0,ke>=T.w_size&&(j===0&&(fe(T.head),T.strstart=0,T.block_start=0,T.insert=0),ve=new l.Buf8(T.w_size),l.arraySet(ve,Y,ke-T.w_size,T.w_size,0),Y=ve,ke=T.w_size),q=V.avail_in,te=V.next_in,Z=V.input,V.avail_in=ke,V.next_in=0,V.input=Y,K(T);T.lookahead>=W;){for(y=T.strstart,E=T.lookahead-(W-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[y+W-1])&T.hash_mask,T.prev[y&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=y,y++,--E;);T.strstart=y,T.lookahead=W-1,K(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=W-1,T.match_available=0,V.next_in=te,V.input=Z,V.avail_in=q,T.wrap=j,u},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,n,a){n.exports=function(o,l){var r,d,c,f,b,D,u,p,x,S,m,v,g,N,w,A,I,B,W,se,ie,R,F,k,Q;r=o.state,d=o.next_in,k=o.input,c=d+(o.avail_in-5),f=o.next_out,Q=o.output,b=f-(l-o.avail_out),D=f+(o.avail_out-257),u=r.dmax,p=r.wsize,x=r.whave,S=r.wnext,m=r.window,v=r.hold,g=r.bits,N=r.lencode,w=r.distcode,A=(1<<r.lenbits)-1,I=(1<<r.distbits)-1;e:do{g<15&&(v+=k[d++]<<g,g+=8,v+=k[d++]<<g,g+=8),B=N[v&A];t:for(;;){if(v>>>=W=B>>>24,g-=W,(W=B>>>16&255)===0)Q[f++]=65535&B;else{if(!(16&W)){if((64&W)==0){B=N[(65535&B)+(v&(1<<W)-1)];continue t}if(32&W){r.mode=12;break e}o.msg="invalid literal/length code",r.mode=30;break e}se=65535&B,(W&=15)&&(g<W&&(v+=k[d++]<<g,g+=8),se+=v&(1<<W)-1,v>>>=W,g-=W),g<15&&(v+=k[d++]<<g,g+=8,v+=k[d++]<<g,g+=8),B=w[v&I];s:for(;;){if(v>>>=W=B>>>24,g-=W,!(16&(W=B>>>16&255))){if((64&W)==0){B=w[(65535&B)+(v&(1<<W)-1)];continue s}o.msg="invalid distance code",r.mode=30;break e}if(ie=65535&B,g<(W&=15)&&(v+=k[d++]<<g,(g+=8)<W&&(v+=k[d++]<<g,g+=8)),u<(ie+=v&(1<<W)-1)){o.msg="invalid distance too far back",r.mode=30;break e}if(v>>>=W,g-=W,(W=f-b)<ie){if(x<(W=ie-W)&&r.sane){o.msg="invalid distance too far back",r.mode=30;break e}if(F=m,(R=0)===S){if(R+=p-W,W<se){for(se-=W;Q[f++]=m[R++],--W;);R=f-ie,F=Q}}else if(S<W){if(R+=p+S-W,(W-=S)<se){for(se-=W;Q[f++]=m[R++],--W;);if(R=0,S<se){for(se-=W=S;Q[f++]=m[R++],--W;);R=f-ie,F=Q}}}else if(R+=S-W,W<se){for(se-=W;Q[f++]=m[R++],--W;);R=f-ie,F=Q}for(;2<se;)Q[f++]=F[R++],Q[f++]=F[R++],Q[f++]=F[R++],se-=3;se&&(Q[f++]=F[R++],1<se&&(Q[f++]=F[R++]))}else{for(R=f-ie;Q[f++]=Q[R++],Q[f++]=Q[R++],Q[f++]=Q[R++],2<(se-=3););se&&(Q[f++]=Q[R++],1<se&&(Q[f++]=Q[R++]))}break}}break}}while(d<c&&f<D);d-=se=g>>3,v&=(1<<(g-=se<<3))-1,o.next_in=d,o.next_out=f,o.avail_in=d<c?c-d+5:5-(d-c),o.avail_out=f<D?D-f+257:257-(f-D),r.hold=v,r.bits=g}},{}],49:[function(i,n,a){var o=i("../utils/common"),l=i("./adler32"),r=i("./crc32"),d=i("./inffast"),c=i("./inftrees"),f=1,b=2,D=0,u=-2,p=1,x=852,S=592;function m(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(R){var F;return R&&R.state?(F=R.state,R.total_in=R.total_out=F.total=0,R.msg="",F.wrap&&(R.adler=1&F.wrap),F.mode=p,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new o.Buf32(x),F.distcode=F.distdyn=new o.Buf32(S),F.sane=1,F.back=-1,D):u}function N(R){var F;return R&&R.state?((F=R.state).wsize=0,F.whave=0,F.wnext=0,g(R)):u}function w(R,F){var k,Q;return R&&R.state?(Q=R.state,F<0?(k=0,F=-F):(k=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?u:(Q.window!==null&&Q.wbits!==F&&(Q.window=null),Q.wrap=k,Q.wbits=F,N(R))):u}function A(R,F){var k,Q;return R?(Q=new v,(R.state=Q).window=null,(k=w(R,F))!==D&&(R.state=null),k):u}var I,B,W=!0;function se(R){if(W){var F;for(I=new o.Buf32(512),B=new o.Buf32(32),F=0;F<144;)R.lens[F++]=8;for(;F<256;)R.lens[F++]=9;for(;F<280;)R.lens[F++]=7;for(;F<288;)R.lens[F++]=8;for(c(f,R.lens,0,288,I,0,R.work,{bits:9}),F=0;F<32;)R.lens[F++]=5;c(b,R.lens,0,32,B,0,R.work,{bits:5}),W=!1}R.lencode=I,R.lenbits=9,R.distcode=B,R.distbits=5}function ie(R,F,k,Q){var J,O=R.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new o.Buf8(O.wsize)),Q>=O.wsize?(o.arraySet(O.window,F,k-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(Q<(J=O.wsize-O.wnext)&&(J=Q),o.arraySet(O.window,F,k-Q,J,O.wnext),(Q-=J)?(o.arraySet(O.window,F,k-Q,Q,0),O.wnext=Q,O.whave=O.wsize):(O.wnext+=J,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=J))),0}a.inflateReset=N,a.inflateReset2=w,a.inflateResetKeep=g,a.inflateInit=function(R){return A(R,15)},a.inflateInit2=A,a.inflate=function(R,F){var k,Q,J,O,me,de,fe,ae,L,H,le,ue,K,C,P,ee,$,U,G,re,V,Y,T,y,E=0,j=new o.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return u;(k=R.state).mode===12&&(k.mode=13),me=R.next_out,J=R.output,fe=R.avail_out,O=R.next_in,Q=R.input,de=R.avail_in,ae=k.hold,L=k.bits,H=de,le=fe,Y=D;e:for(;;)switch(k.mode){case p:if(k.wrap===0){k.mode=13;break}for(;L<16;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(2&k.wrap&&ae===35615){j[k.check=0]=255&ae,j[1]=ae>>>8&255,k.check=r(k.check,j,2,0),L=ae=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&ae)<<8)+(ae>>8))%31){R.msg="incorrect header check",k.mode=30;break}if((15&ae)!=8){R.msg="unknown compression method",k.mode=30;break}if(L-=4,V=8+(15&(ae>>>=4)),k.wbits===0)k.wbits=V;else if(V>k.wbits){R.msg="invalid window size",k.mode=30;break}k.dmax=1<<V,R.adler=k.check=1,k.mode=512&ae?10:12,L=ae=0;break;case 2:for(;L<16;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(k.flags=ae,(255&k.flags)!=8){R.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){R.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=ae>>8&1),512&k.flags&&(j[0]=255&ae,j[1]=ae>>>8&255,k.check=r(k.check,j,2,0)),L=ae=0,k.mode=3;case 3:for(;L<32;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.head&&(k.head.time=ae),512&k.flags&&(j[0]=255&ae,j[1]=ae>>>8&255,j[2]=ae>>>16&255,j[3]=ae>>>24&255,k.check=r(k.check,j,4,0)),L=ae=0,k.mode=4;case 4:for(;L<16;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.head&&(k.head.xflags=255&ae,k.head.os=ae>>8),512&k.flags&&(j[0]=255&ae,j[1]=ae>>>8&255,k.check=r(k.check,j,2,0)),L=ae=0,k.mode=5;case 5:if(1024&k.flags){for(;L<16;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.length=ae,k.head&&(k.head.extra_len=ae),512&k.flags&&(j[0]=255&ae,j[1]=ae>>>8&255,k.check=r(k.check,j,2,0)),L=ae=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(de<(ue=k.length)&&(ue=de),ue&&(k.head&&(V=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),o.arraySet(k.head.extra,Q,O,ue,V)),512&k.flags&&(k.check=r(k.check,Q,ue,O)),de-=ue,O+=ue,k.length-=ue),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(de===0)break e;for(ue=0;V=Q[O+ue++],k.head&&V&&k.length<65536&&(k.head.name+=String.fromCharCode(V)),V&&ue<de;);if(512&k.flags&&(k.check=r(k.check,Q,ue,O)),de-=ue,O+=ue,V)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(de===0)break e;for(ue=0;V=Q[O+ue++],k.head&&V&&k.length<65536&&(k.head.comment+=String.fromCharCode(V)),V&&ue<de;);if(512&k.flags&&(k.check=r(k.check,Q,ue,O)),de-=ue,O+=ue,V)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;L<16;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(ae!==(65535&k.check)){R.msg="header crc mismatch",k.mode=30;break}L=ae=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),R.adler=k.check=0,k.mode=12;break;case 10:for(;L<32;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}R.adler=k.check=m(ae),L=ae=0,k.mode=11;case 11:if(k.havedict===0)return R.next_out=me,R.avail_out=fe,R.next_in=O,R.avail_in=de,k.hold=ae,k.bits=L,2;R.adler=k.check=1,k.mode=12;case 12:if(F===5||F===6)break e;case 13:if(k.last){ae>>>=7&L,L-=7&L,k.mode=27;break}for(;L<3;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}switch(k.last=1&ae,L-=1,3&(ae>>>=1)){case 0:k.mode=14;break;case 1:if(se(k),k.mode=20,F!==6)break;ae>>>=2,L-=2;break e;case 2:k.mode=17;break;case 3:R.msg="invalid block type",k.mode=30}ae>>>=2,L-=2;break;case 14:for(ae>>>=7&L,L-=7&L;L<32;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if((65535&ae)!=(ae>>>16^65535)){R.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&ae,L=ae=0,k.mode=15,F===6)break e;case 15:k.mode=16;case 16:if(ue=k.length){if(de<ue&&(ue=de),fe<ue&&(ue=fe),ue===0)break e;o.arraySet(J,Q,O,ue,me),de-=ue,O+=ue,fe-=ue,me+=ue,k.length-=ue;break}k.mode=12;break;case 17:for(;L<14;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(k.nlen=257+(31&ae),ae>>>=5,L-=5,k.ndist=1+(31&ae),ae>>>=5,L-=5,k.ncode=4+(15&ae),ae>>>=4,L-=4,286<k.nlen||30<k.ndist){R.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;L<3;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.lens[q[k.have++]]=7&ae,ae>>>=3,L-=3}for(;k.have<19;)k.lens[q[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,T={bits:k.lenbits},Y=c(0,k.lens,0,19,k.lencode,0,k.work,T),k.lenbits=T.bits,Y){R.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;ee=(E=k.lencode[ae&(1<<k.lenbits)-1])>>>16&255,$=65535&E,!((P=E>>>24)<=L);){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if($<16)ae>>>=P,L-=P,k.lens[k.have++]=$;else{if($===16){for(y=P+2;L<y;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(ae>>>=P,L-=P,k.have===0){R.msg="invalid bit length repeat",k.mode=30;break}V=k.lens[k.have-1],ue=3+(3&ae),ae>>>=2,L-=2}else if($===17){for(y=P+3;L<y;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}L-=P,V=0,ue=3+(7&(ae>>>=P)),ae>>>=3,L-=3}else{for(y=P+7;L<y;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}L-=P,V=0,ue=11+(127&(ae>>>=P)),ae>>>=7,L-=7}if(k.have+ue>k.nlen+k.ndist){R.msg="invalid bit length repeat",k.mode=30;break}for(;ue--;)k.lens[k.have++]=V}}if(k.mode===30)break;if(k.lens[256]===0){R.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,T={bits:k.lenbits},Y=c(f,k.lens,0,k.nlen,k.lencode,0,k.work,T),k.lenbits=T.bits,Y){R.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,T={bits:k.distbits},Y=c(b,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,T),k.distbits=T.bits,Y){R.msg="invalid distances set",k.mode=30;break}if(k.mode=20,F===6)break e;case 20:k.mode=21;case 21:if(6<=de&&258<=fe){R.next_out=me,R.avail_out=fe,R.next_in=O,R.avail_in=de,k.hold=ae,k.bits=L,d(R,le),me=R.next_out,J=R.output,fe=R.avail_out,O=R.next_in,Q=R.input,de=R.avail_in,ae=k.hold,L=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;ee=(E=k.lencode[ae&(1<<k.lenbits)-1])>>>16&255,$=65535&E,!((P=E>>>24)<=L);){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(ee&&(240&ee)==0){for(U=P,G=ee,re=$;ee=(E=k.lencode[re+((ae&(1<<U+G)-1)>>U)])>>>16&255,$=65535&E,!(U+(P=E>>>24)<=L);){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}ae>>>=U,L-=U,k.back+=U}if(ae>>>=P,L-=P,k.back+=P,k.length=$,ee===0){k.mode=26;break}if(32&ee){k.back=-1,k.mode=12;break}if(64&ee){R.msg="invalid literal/length code",k.mode=30;break}k.extra=15&ee,k.mode=22;case 22:if(k.extra){for(y=k.extra;L<y;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.length+=ae&(1<<k.extra)-1,ae>>>=k.extra,L-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;ee=(E=k.distcode[ae&(1<<k.distbits)-1])>>>16&255,$=65535&E,!((P=E>>>24)<=L);){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if((240&ee)==0){for(U=P,G=ee,re=$;ee=(E=k.distcode[re+((ae&(1<<U+G)-1)>>U)])>>>16&255,$=65535&E,!(U+(P=E>>>24)<=L);){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}ae>>>=U,L-=U,k.back+=U}if(ae>>>=P,L-=P,k.back+=P,64&ee){R.msg="invalid distance code",k.mode=30;break}k.offset=$,k.extra=15&ee,k.mode=24;case 24:if(k.extra){for(y=k.extra;L<y;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}k.offset+=ae&(1<<k.extra)-1,ae>>>=k.extra,L-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){R.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(fe===0)break e;if(ue=le-fe,k.offset>ue){if((ue=k.offset-ue)>k.whave&&k.sane){R.msg="invalid distance too far back",k.mode=30;break}K=ue>k.wnext?(ue-=k.wnext,k.wsize-ue):k.wnext-ue,ue>k.length&&(ue=k.length),C=k.window}else C=J,K=me-k.offset,ue=k.length;for(fe<ue&&(ue=fe),fe-=ue,k.length-=ue;J[me++]=C[K++],--ue;);k.length===0&&(k.mode=21);break;case 26:if(fe===0)break e;J[me++]=k.length,fe--,k.mode=21;break;case 27:if(k.wrap){for(;L<32;){if(de===0)break e;de--,ae|=Q[O++]<<L,L+=8}if(le-=fe,R.total_out+=le,k.total+=le,le&&(R.adler=k.check=k.flags?r(k.check,J,le,me-le):l(k.check,J,le,me-le)),le=fe,(k.flags?ae:m(ae))!==k.check){R.msg="incorrect data check",k.mode=30;break}L=ae=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;L<32;){if(de===0)break e;de--,ae+=Q[O++]<<L,L+=8}if(ae!==(4294967295&k.total)){R.msg="incorrect length check",k.mode=30;break}L=ae=0}k.mode=29;case 29:Y=1;break e;case 30:Y=-3;break e;case 31:return-4;case 32:default:return u}return R.next_out=me,R.avail_out=fe,R.next_in=O,R.avail_in=de,k.hold=ae,k.bits=L,(k.wsize||le!==R.avail_out&&k.mode<30&&(k.mode<27||F!==4))&&ie(R,R.output,R.next_out,le-R.avail_out)?(k.mode=31,-4):(H-=R.avail_in,le-=R.avail_out,R.total_in+=H,R.total_out+=le,k.total+=le,k.wrap&&le&&(R.adler=k.check=k.flags?r(k.check,J,le,R.next_out-le):l(k.check,J,le,R.next_out-le)),R.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(H==0&&le===0||F===4)&&Y===D&&(Y=-5),Y)},a.inflateEnd=function(R){if(!R||!R.state)return u;var F=R.state;return F.window&&(F.window=null),R.state=null,D},a.inflateGetHeader=function(R,F){var k;return R&&R.state?(2&(k=R.state).wrap)==0?u:((k.head=F).done=!1,D):u},a.inflateSetDictionary=function(R,F){var k,Q=F.length;return R&&R.state?(k=R.state).wrap!==0&&k.mode!==11?u:k.mode===11&&l(1,F,Q,0)!==k.check?-3:ie(R,F,Q,Q)?(k.mode=31,-4):(k.havedict=1,D):u},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,n,a){var o=i("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,b,D,u,p,x,S,m){var v,g,N,w,A,I,B,W,se,ie=m.bits,R=0,F=0,k=0,Q=0,J=0,O=0,me=0,de=0,fe=0,ae=0,L=null,H=0,le=new o.Buf16(16),ue=new o.Buf16(16),K=null,C=0;for(R=0;R<=15;R++)le[R]=0;for(F=0;F<u;F++)le[b[D+F]]++;for(J=ie,Q=15;1<=Q&&le[Q]===0;Q--);if(Q<J&&(J=Q),Q===0)return p[x++]=20971520,p[x++]=20971520,m.bits=1,0;for(k=1;k<Q&&le[k]===0;k++);for(J<k&&(J=k),R=de=1;R<=15;R++)if(de<<=1,(de-=le[R])<0)return-1;if(0<de&&(f===0||Q!==1))return-1;for(ue[1]=0,R=1;R<15;R++)ue[R+1]=ue[R]+le[R];for(F=0;F<u;F++)b[D+F]!==0&&(S[ue[b[D+F]]++]=F);if(I=f===0?(L=K=S,19):f===1?(L=l,H-=257,K=r,C-=257,256):(L=d,K=c,-1),R=k,A=x,me=F=ae=0,N=-1,w=(fe=1<<(O=J))-1,f===1&&852<fe||f===2&&592<fe)return 1;for(;;){for(B=R-me,se=S[F]<I?(W=0,S[F]):S[F]>I?(W=K[C+S[F]],L[H+S[F]]):(W=96,0),v=1<<R-me,k=g=1<<O;p[A+(ae>>me)+(g-=v)]=B<<24|W<<16|se|0,g!==0;);for(v=1<<R-1;ae&v;)v>>=1;if(v!==0?(ae&=v-1,ae+=v):ae=0,F++,--le[R]==0){if(R===Q)break;R=b[D+S[F]]}if(J<R&&(ae&w)!==N){for(me===0&&(me=J),A+=k,de=1<<(O=R-me);O+me<Q&&!((de-=le[O+me])<=0);)O++,de<<=1;if(fe+=1<<O,f===1&&852<fe||f===2&&592<fe)return 1;p[N=ae&w]=J<<24|O<<16|A-x|0}}return ae!==0&&(p[A+ae]=R-me<<24|64<<16|0),m.bits=J,0}},{"../utils/common":41}],51:[function(i,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,n,a){var o=i("../utils/common"),l=0,r=1;function d(E){for(var j=E.length;0<=--j;)E[j]=0}var c=0,f=29,b=256,D=b+1+f,u=30,p=19,x=2*D+1,S=15,m=16,v=7,g=256,N=16,w=17,A=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=new Array(2*(D+2));d(ie);var R=new Array(2*u);d(R);var F=new Array(512);d(F);var k=new Array(256);d(k);var Q=new Array(f);d(Q);var J,O,me,de=new Array(u);function fe(E,j,q,te,Z){this.static_tree=E,this.extra_bits=j,this.extra_base=q,this.elems=te,this.max_length=Z,this.has_stree=E&&E.length}function ae(E,j){this.dyn_tree=E,this.max_code=0,this.stat_desc=j}function L(E){return E<256?F[E]:F[256+(E>>>7)]}function H(E,j){E.pending_buf[E.pending++]=255&j,E.pending_buf[E.pending++]=j>>>8&255}function le(E,j,q){E.bi_valid>m-q?(E.bi_buf|=j<<E.bi_valid&65535,H(E,E.bi_buf),E.bi_buf=j>>m-E.bi_valid,E.bi_valid+=q-m):(E.bi_buf|=j<<E.bi_valid&65535,E.bi_valid+=q)}function ue(E,j,q){le(E,q[2*j],q[2*j+1])}function K(E,j){for(var q=0;q|=1&E,E>>>=1,q<<=1,0<--j;);return q>>>1}function C(E,j,q){var te,Z,ve=new Array(S+1),ke=0;for(te=1;te<=S;te++)ve[te]=ke=ke+q[te-1]<<1;for(Z=0;Z<=j;Z++){var De=E[2*Z+1];De!==0&&(E[2*Z]=K(ve[De]++,De))}}function P(E){var j;for(j=0;j<D;j++)E.dyn_ltree[2*j]=0;for(j=0;j<u;j++)E.dyn_dtree[2*j]=0;for(j=0;j<p;j++)E.bl_tree[2*j]=0;E.dyn_ltree[2*g]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function ee(E){8<E.bi_valid?H(E,E.bi_buf):0<E.bi_valid&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function $(E,j,q,te){var Z=2*j,ve=2*q;return E[Z]<E[ve]||E[Z]===E[ve]&&te[j]<=te[q]}function U(E,j,q){for(var te=E.heap[q],Z=q<<1;Z<=E.heap_len&&(Z<E.heap_len&&$(j,E.heap[Z+1],E.heap[Z],E.depth)&&Z++,!$(j,te,E.heap[Z],E.depth));)E.heap[q]=E.heap[Z],q=Z,Z<<=1;E.heap[q]=te}function G(E,j,q){var te,Z,ve,ke,De=0;if(E.last_lit!==0)for(;te=E.pending_buf[E.d_buf+2*De]<<8|E.pending_buf[E.d_buf+2*De+1],Z=E.pending_buf[E.l_buf+De],De++,te===0?ue(E,Z,j):(ue(E,(ve=k[Z])+b+1,j),(ke=I[ve])!==0&&le(E,Z-=Q[ve],ke),ue(E,ve=L(--te),q),(ke=B[ve])!==0&&le(E,te-=de[ve],ke)),De<E.last_lit;);ue(E,g,j)}function re(E,j){var q,te,Z,ve=j.dyn_tree,ke=j.stat_desc.static_tree,De=j.stat_desc.has_stree,We=j.stat_desc.elems,ze=-1;for(E.heap_len=0,E.heap_max=x,q=0;q<We;q++)ve[2*q]!==0?(E.heap[++E.heap_len]=ze=q,E.depth[q]=0):ve[2*q+1]=0;for(;E.heap_len<2;)ve[2*(Z=E.heap[++E.heap_len]=ze<2?++ze:0)]=1,E.depth[Z]=0,E.opt_len--,De&&(E.static_len-=ke[2*Z+1]);for(j.max_code=ze,q=E.heap_len>>1;1<=q;q--)U(E,ve,q);for(Z=We;q=E.heap[1],E.heap[1]=E.heap[E.heap_len--],U(E,ve,1),te=E.heap[1],E.heap[--E.heap_max]=q,E.heap[--E.heap_max]=te,ve[2*Z]=ve[2*q]+ve[2*te],E.depth[Z]=(E.depth[q]>=E.depth[te]?E.depth[q]:E.depth[te])+1,ve[2*q+1]=ve[2*te+1]=Z,E.heap[1]=Z++,U(E,ve,1),2<=E.heap_len;);E.heap[--E.heap_max]=E.heap[1],function(st,_t){var Nt,ye,pt,ct,Ot,Es,qt=_t.dyn_tree,ws=_t.max_code,Kt=_t.stat_desc.static_tree,fs=_t.stat_desc.has_stree,Cs=_t.stat_desc.extra_bits,xs=_t.stat_desc.extra_base,It=_t.stat_desc.max_length,ls=0;for(ct=0;ct<=S;ct++)st.bl_count[ct]=0;for(qt[2*st.heap[st.heap_max]+1]=0,Nt=st.heap_max+1;Nt<x;Nt++)It<(ct=qt[2*qt[2*(ye=st.heap[Nt])+1]+1]+1)&&(ct=It,ls++),qt[2*ye+1]=ct,ws<ye||(st.bl_count[ct]++,Ot=0,xs<=ye&&(Ot=Cs[ye-xs]),Es=qt[2*ye],st.opt_len+=Es*(ct+Ot),fs&&(st.static_len+=Es*(Kt[2*ye+1]+Ot)));if(ls!==0){do{for(ct=It-1;st.bl_count[ct]===0;)ct--;st.bl_count[ct]--,st.bl_count[ct+1]+=2,st.bl_count[It]--,ls-=2}while(0<ls);for(ct=It;ct!==0;ct--)for(ye=st.bl_count[ct];ye!==0;)ws<(pt=st.heap[--Nt])||(qt[2*pt+1]!==ct&&(st.opt_len+=(ct-qt[2*pt+1])*qt[2*pt],qt[2*pt+1]=ct),ye--)}}(E,j),C(ve,ze,E.bl_count)}function V(E,j,q){var te,Z,ve=-1,ke=j[1],De=0,We=7,ze=4;for(ke===0&&(We=138,ze=3),j[2*(q+1)+1]=65535,te=0;te<=q;te++)Z=ke,ke=j[2*(te+1)+1],++De<We&&Z===ke||(De<ze?E.bl_tree[2*Z]+=De:Z!==0?(Z!==ve&&E.bl_tree[2*Z]++,E.bl_tree[2*N]++):De<=10?E.bl_tree[2*w]++:E.bl_tree[2*A]++,ve=Z,ze=(De=0)===ke?(We=138,3):Z===ke?(We=6,3):(We=7,4))}function Y(E,j,q){var te,Z,ve=-1,ke=j[1],De=0,We=7,ze=4;for(ke===0&&(We=138,ze=3),te=0;te<=q;te++)if(Z=ke,ke=j[2*(te+1)+1],!(++De<We&&Z===ke)){if(De<ze)for(;ue(E,Z,E.bl_tree),--De!=0;);else Z!==0?(Z!==ve&&(ue(E,Z,E.bl_tree),De--),ue(E,N,E.bl_tree),le(E,De-3,2)):De<=10?(ue(E,w,E.bl_tree),le(E,De-3,3)):(ue(E,A,E.bl_tree),le(E,De-11,7));ve=Z,ze=(De=0)===ke?(We=138,3):Z===ke?(We=6,3):(We=7,4)}}d(de);var T=!1;function y(E,j,q,te){le(E,(c<<1)+(te?1:0),3),function(Z,ve,ke,De){ee(Z),H(Z,ke),H(Z,~ke),o.arraySet(Z.pending_buf,Z.window,ve,ke,Z.pending),Z.pending+=ke}(E,j,q)}a._tr_init=function(E){T||(function(){var j,q,te,Z,ve,ke=new Array(S+1);for(Z=te=0;Z<f-1;Z++)for(Q[Z]=te,j=0;j<1<<I[Z];j++)k[te++]=Z;for(k[te-1]=Z,Z=ve=0;Z<16;Z++)for(de[Z]=ve,j=0;j<1<<B[Z];j++)F[ve++]=Z;for(ve>>=7;Z<u;Z++)for(de[Z]=ve<<7,j=0;j<1<<B[Z]-7;j++)F[256+ve++]=Z;for(q=0;q<=S;q++)ke[q]=0;for(j=0;j<=143;)ie[2*j+1]=8,j++,ke[8]++;for(;j<=255;)ie[2*j+1]=9,j++,ke[9]++;for(;j<=279;)ie[2*j+1]=7,j++,ke[7]++;for(;j<=287;)ie[2*j+1]=8,j++,ke[8]++;for(C(ie,D+1,ke),j=0;j<u;j++)R[2*j+1]=5,R[2*j]=K(j,5);J=new fe(ie,I,b+1,D,S),O=new fe(R,B,0,u,S),me=new fe(new Array(0),W,0,p,v)}(),T=!0),E.l_desc=new ae(E.dyn_ltree,J),E.d_desc=new ae(E.dyn_dtree,O),E.bl_desc=new ae(E.bl_tree,me),E.bi_buf=0,E.bi_valid=0,P(E)},a._tr_stored_block=y,a._tr_flush_block=function(E,j,q,te){var Z,ve,ke=0;0<E.level?(E.strm.data_type===2&&(E.strm.data_type=function(De){var We,ze=4093624447;for(We=0;We<=31;We++,ze>>>=1)if(1&ze&&De.dyn_ltree[2*We]!==0)return l;if(De.dyn_ltree[18]!==0||De.dyn_ltree[20]!==0||De.dyn_ltree[26]!==0)return r;for(We=32;We<b;We++)if(De.dyn_ltree[2*We]!==0)return r;return l}(E)),re(E,E.l_desc),re(E,E.d_desc),ke=function(De){var We;for(V(De,De.dyn_ltree,De.l_desc.max_code),V(De,De.dyn_dtree,De.d_desc.max_code),re(De,De.bl_desc),We=p-1;3<=We&&De.bl_tree[2*se[We]+1]===0;We--);return De.opt_len+=3*(We+1)+5+5+4,We}(E),Z=E.opt_len+3+7>>>3,(ve=E.static_len+3+7>>>3)<=Z&&(Z=ve)):Z=ve=q+5,q+4<=Z&&j!==-1?y(E,j,q,te):E.strategy===4||ve===Z?(le(E,2+(te?1:0),3),G(E,ie,R)):(le(E,4+(te?1:0),3),function(De,We,ze,st){var _t;for(le(De,We-257,5),le(De,ze-1,5),le(De,st-4,4),_t=0;_t<st;_t++)le(De,De.bl_tree[2*se[_t]+1],3);Y(De,De.dyn_ltree,We-1),Y(De,De.dyn_dtree,ze-1)}(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ke+1),G(E,E.dyn_ltree,E.dyn_dtree)),P(E),te&&ee(E)},a._tr_tally=function(E,j,q){return E.pending_buf[E.d_buf+2*E.last_lit]=j>>>8&255,E.pending_buf[E.d_buf+2*E.last_lit+1]=255&j,E.pending_buf[E.l_buf+E.last_lit]=255&q,E.last_lit++,j===0?E.dyn_ltree[2*q]++:(E.matches++,j--,E.dyn_ltree[2*(k[q]+b+1)]++,E.dyn_dtree[2*L(j)]++),E.last_lit===E.lit_bufsize-1},a._tr_align=function(E){le(E,2,3),ue(E,g,ie),function(j){j.bi_valid===16?(H(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(E)}},{"../utils/common":41}],53:[function(i,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,n,a){(function(o){(function(l,r){if(!l.setImmediate){var d,c,f,b,D=1,u={},p=!1,x=l.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(l);S=S&&S.setTimeout?S:l,d={}.toString.call(l.process)==="[object process]"?function(N){Mt.nextTick(function(){v(N)})}:function(){if(l.postMessage&&!l.importScripts){var N=!0,w=l.onmessage;return l.onmessage=function(){N=!1},l.postMessage("","*"),l.onmessage=w,N}}()?(b="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",g,!1):l.attachEvent("onmessage",g),function(N){l.postMessage(b+N,"*")}):l.MessageChannel?((f=new MessageChannel).port1.onmessage=function(N){v(N.data)},function(N){f.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(N){var w=x.createElement("script");w.onreadystatechange=function(){v(N),w.onreadystatechange=null,c.removeChild(w),w=null},c.appendChild(w)}):function(N){setTimeout(v,0,N)},S.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var w=new Array(arguments.length-1),A=0;A<w.length;A++)w[A]=arguments[A+1];var I={callback:N,args:w};return u[D]=I,d(D),D++},S.clearImmediate=m}function m(N){delete u[N]}function v(N){if(p)setTimeout(v,0,N);else{var w=u[N];if(w){p=!0;try{(function(A){var I=A.callback,B=A.args;switch(B.length){case 0:I();break;case 1:I(B[0]);break;case 2:I(B[0],B[1]);break;case 3:I(B[0],B[1],B[2]);break;default:I.apply(r,B)}})(w)}finally{m(N),p=!1}}}}function g(N){N.source===l&&typeof N.data=="string"&&N.data.indexOf(b)===0&&v(+N.data.slice(b.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(kc)),kc.exports}var lS=oS();const cS=_d(lS);var Va={exports:{}},Sc,zp;function dS(){if(zp)return Sc;zp=1;var s={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function t(i){return i&&i.replace?i.replace(/([&"<>'])/g,function(n,a){return s[a]}):i}return Sc=t,Sc}var Gp;function uS(){if(Gp)return Va.exports;Gp=1;var s=dS(),t=zd().Stream,i="    ";function n(c,f){typeof f!="object"&&(f={indent:f});var b=f.stream?new t:null,D="",u=!1,p=f.indent?f.indent===!0?i:f.indent:"",x=!0;function S(w){x?Mt.nextTick(w):w()}function m(w,A){if(A!==void 0&&(D+=A),w&&!u&&(b=b||new t,u=!0),w&&u){var I=D;S(function(){b.emit("data",I)}),D=""}}function v(w,A){r(m,l(w,p,p?1:0),A)}function g(){if(b){var w=D;S(function(){b.emit("data",w),b.emit("end"),b.readable=!1,b.emit("close")})}}function N(w){var A=w.encoding||"UTF-8",I={version:"1.0",encoding:A};w.standalone&&(I.standalone=w.standalone),v({"?xml":{_attr:I}}),D=D.replace("/>","?>")}return S(function(){x=!1}),f.declaration&&N(f.declaration),c&&c.forEach?c.forEach(function(w,A){var I;A+1===c.length&&(I=g),v(w,I)}):v(c,g),b?(b.readable=!0,b):D}function a(){var c=Array.prototype.slice.call(arguments),f={_elem:l(c)};return f.push=function(b){if(!this.append)throw new Error("not assigned to a parent!");var D=this,u=this._elem.indent;r(this.append,l(b,u,this._elem.icount+(u?1:0)),function(){D.append(!0)})},f.close=function(b){b!==void 0&&this.push(b),this.end&&this.end()},f}function o(c,f){return new Array(f||0).join(c||"")}function l(c,f,b){b=b||0;var D=o(f,b),u,p=c,x=!1;if(typeof c=="object"){var S=Object.keys(c);if(u=S[0],p=c[u],p&&p._elem)return p._elem.name=u,p._elem.icount=b,p._elem.indent=f,p._elem.indents=D,p._elem.interrupt=p,p._elem}var m=[],v=[],g;function N(w){var A=Object.keys(w);A.forEach(function(I){m.push(d(I,w[I]))})}switch(typeof p){case"object":if(p===null)break;p._attr&&N(p._attr),p._cdata&&v.push(("<![CDATA["+p._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),p.forEach&&(g=!1,v.push(""),p.forEach(function(w){if(typeof w=="object"){var A=Object.keys(w)[0];A=="_attr"?N(w._attr):v.push(l(w,f,b+1))}else v.pop(),g=!0,v.push(s(w))}),g||v.push(""));break;default:v.push(s(p))}return{name:u,interrupt:x,attributes:m,content:v,icount:b,indents:D,indent:f}}function r(c,f,b){if(typeof f!="object")return c(!1,f);var D=f.interrupt?1:f.content.length;function u(){for(;f.content.length;){var x=f.content.shift();if(x!==void 0){if(p(x))return;r(c,x)}}c(!1,(D>1?f.indents:"")+(f.name?"</"+f.name+">":"")+(f.indent&&!b?`
`:"")),b&&b()}function p(x){return x.interrupt?(x.interrupt.append=c,x.interrupt.end=u,x.interrupt=!1,c(!0),!0):!1}if(c(!1,f.indents+(f.name?"<"+f.name:"")+(f.attributes.length?" "+f.attributes.join(" "):"")+(D?f.name?">":"":f.name?"/>":"")+(f.indent&&D>1?`
`:"")),!D)return c(!1,f.indent?`
`:"");p(f)||u()}function d(c,f){return c+'="'+s(f)+'"'}return Va.exports=n,Va.exports.element=Va.exports.Element=a,Va.exports}var mS=uS();const Ps=_d(mS),Ca=0,jc=32,pS=32,fS=(s,t)=>{const i=t.replace(/-/g,"");if(i.length!==pS)throw new Error(`Error: Cannot extract GUID from font filename: ${t}`);const a=i.replace(/(..)/g,"$1 ").trim().split(" ").map(d=>parseInt(d,16));a.reverse();const l=s.slice(Ca,jc).map((d,c)=>d^a[c%a.length]),r=new Uint8Array(Ca+l.length+Math.max(0,s.length-jc));return r.set(s.slice(0,Ca)),r.set(l,Ca),r.set(s.slice(jc),Ca+l.length),r};class hS{format(t,i={stack:[]}){const n=t.prepForXml(i);if(n)return n;throw Error("XMLComponent did not format correctly")}}class bS{replace(t,i,n){let a=t;return i.forEach((o,l)=>{a=a.replace(new RegExp(`{${o.fileName}}`,"g"),(n+l).toString())}),a}getMediaData(t,i){return i.Array.filter(n=>t.search(`{${n.fileName}}`)>0)}}class NS{replace(t,i){let n=t;for(const a of i)n=n.replace(new RegExp(`{${a.reference}-${a.instance}}`,"g"),a.numId.toString());return n}}class xS{constructor(){Pe(this,"formatter"),Pe(this,"imageReplacer"),Pe(this,"numberingReplacer"),this.formatter=new hS,this.imageReplacer=new bS,this.numberingReplacer=new NS}compile(t,i,n=[]){const a=new cS,o=this.xmlifyFile(t,i),l=new Map(Object.entries(o));for(const[,r]of l)if(Array.isArray(r))for(const d of r)a.file(d.path,d.data);else a.file(r.path,r.data);for(const r of n)a.file(r.path,r.data);for(const r of t.Media.Array)r.type!=="svg"?a.file(`word/media/${r.fileName}`,r.data):(a.file(`word/media/${r.fileName}`,r.data),a.file(`word/media/${r.fallback.fileName}`,r.fallback.data));for(const{data:r,name:d,fontKey:c}of t.FontTable.fontOptionsWithKey){const[f]=d.split(".");a.file(`word/fonts/${f}.odttf`,fS(r,c))}return a}xmlifyFile(t,i){const n=t.Document.Relationships.RelationshipCount+1,a=Ps(this.formatter.format(t.Document.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),o=t.Comments.Relationships.RelationshipCount+1,l=Ps(this.formatter.format(t.Comments,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),r=this.imageReplacer.getMediaData(a,t.Media),d=this.imageReplacer.getMediaData(l,t.Media);return{Relationships:{data:(r.forEach((c,f)=>{t.Document.Relationships.createRelationship(n+f,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),t.Document.Relationships.createRelationship(t.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),Ps(this.formatter.format(t.Document.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const c=this.imageReplacer.replace(a,r,n);return this.numberingReplacer.replace(c,t.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const c=Ps(this.formatter.format(t.Styles,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(c,t.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Ps(this.formatter.format(t.CoreProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Ps(this.formatter.format(t.Numbering,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Ps(this.formatter.format(t.FileRelationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:t.Headers.map((c,f)=>{const b=Ps(this.formatter.format(c.View,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(b,t.Media).forEach((u,p)=>{c.Relationships.createRelationship(p,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),{data:Ps(this.formatter.format(c.Relationships,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${f+1}.xml.rels`}}),FooterRelationships:t.Footers.map((c,f)=>{const b=Ps(this.formatter.format(c.View,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(b,t.Media).forEach((u,p)=>{c.Relationships.createRelationship(p,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),{data:Ps(this.formatter.format(c.Relationships,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${f+1}.xml.rels`}}),Headers:t.Headers.map((c,f)=>{const b=Ps(this.formatter.format(c.View,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),D=this.imageReplacer.getMediaData(b,t.Media),u=this.imageReplacer.replace(b,D,0);return{data:this.numberingReplacer.replace(u,t.Numbering.ConcreteNumbering),path:`word/header${f+1}.xml`}}),Footers:t.Footers.map((c,f)=>{const b=Ps(this.formatter.format(c.View,{viewWrapper:c,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),D=this.imageReplacer.getMediaData(b,t.Media),u=this.imageReplacer.replace(b,D,0);return{data:this.numberingReplacer.replace(u,t.Numbering.ConcreteNumbering),path:`word/footer${f+1}.xml`}}),ContentTypes:{data:Ps(this.formatter.format(t.ContentTypes,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Ps(this.formatter.format(t.CustomProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Ps(this.formatter.format(t.AppProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Ps(this.formatter.format(t.FootNotes.View,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Ps(this.formatter.format(t.FootNotes.Relationships,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Ps(this.formatter.format(t.Settings,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const c=this.imageReplacer.replace(l,d,o);return this.numberingReplacer.replace(c,t.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(d.forEach((c,f)=>{t.Comments.Relationships.createRelationship(o+f,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),Ps(this.formatter.format(t.Comments.Relationships,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:Ps(this.formatter.format(t.FontTable.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:Ps(this.formatter.format(t.FontTable.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:i,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const gS={WITH_2_BLANKS:"  "},Hp=s=>s===!0?gS.WITH_2_BLANKS:s===!1?void 0:s,VN=class Xn{static pack(t,i,n){return Py(this,arguments,function*(a,o,l,r=[]){return this.compiler.compile(a,Hp(l),r).generateAsync({type:o,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(t,i,n=[]){return Xn.pack(t,"string",i,n)}static toBuffer(t,i,n=[]){return Xn.pack(t,"nodebuffer",i,n)}static toBase64String(t,i,n=[]){return Xn.pack(t,"base64",i,n)}static toBlob(t,i,n=[]){return Xn.pack(t,"blob",i,n)}static toArrayBuffer(t,i,n=[]){return Xn.pack(t,"arraybuffer",i,n)}static toStream(t,i,n=[]){const a=new rS.Stream;return this.compiler.compile(t,Hp(i),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(l=>{a.emit("data",l),a.emit("end")}),a}};Pe(VN,"compiler",new xS);let CN=VN;function vS({serverNote:s,onSave:t,language:i=ga,languageName:n}){const[a,o]=h.useState(!1),[l,r]=h.useState(null),[d,c]=h.useState(null),{toast:f}=Ci(),b=async()=>{o(!0);try{const S=await kS(s,i);d&&URL.revokeObjectURL(d);const m=URL.createObjectURL(S);c(m),r(yS(s,i)),f({title:"Document Generated",description:"Server notes document ready to print or download."})}catch(S){console.error(S),f({title:"Generation Failed",description:"Unable to build the document. Please retry.",variant:"destructive"})}finally{o(!1)}},D=async()=>{let S;if(d)try{const g=await(await fetch(d)).blob();S=await new Promise((N,w)=>{const A=new FileReader;A.onload=()=>N(A.result),A.onerror=w,A.readAsDataURL(g)})}catch(v){console.error("Failed to capture docx data",v)}const m={...s,docxDataUrl:S,updatedAt:new Date().toISOString()};t(m),f({title:"Server Notes Saved",description:`"${s.title||"Untitled"}" stored successfully.`})},u=()=>{if(!l){f({title:"Generate document first",description:"Build the document before printing or downloading.",variant:"destructive"});return}const S=window.open("","_blank");S&&(S.document.write(l),S.document.close(),S.focus(),S.print())},p=()=>{if(!l){f({title:"Generate document first",description:"Build the document before opening the editor.",variant:"destructive"});return}const S=window.open("","_blank");S&&(S.document.write(l),S.document.close(),S.focus())},x=()=>{if(!d){f({title:"No document yet",description:"Generate a document before downloading.",variant:"destructive"});return}const S=document.createElement("a");S.href=d,S.download=`${s.title||"server-notes"}.docx`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return e.jsxDEV($e,{children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"flex items-center gap-2",children:[e.jsxDEV(Hi,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:167,columnNumber:11},this),"Generate Server Notes Document"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:166,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxDEV(kr,{icon:e.jsxDEV(Fr,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:174,columnNumber:19},this),label:"Recipes Selected",value:`${s.selectedRecipes.length}`},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:173,columnNumber:11},this),e.jsxDEV(kr,{icon:e.jsxDEV(qa,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:179,columnNumber:19},this),label:"Layout",value:s.layout.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:178,columnNumber:11},this),e.jsxDEV(kr,{icon:e.jsxDEV(vd,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:184,columnNumber:19},this),label:s.pageFormat==="standard"?"Orientation":"Card Format",value:s.pageFormat==="standard"?s.orientation:`${s.cardsPerPage} cards / page`},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:183,columnNumber:11},this),e.jsxDEV(kr,{icon:e.jsxDEV(Og,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:197,columnNumber:19},this),label:"Language",value:n||i},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:196,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:172,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsxDEV("span",{children:"Color Scheme:"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:204,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-1",children:[e.jsxDEV("span",{className:"h-4 w-4 rounded border",style:{background:s.colorScheme.primary}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:206,columnNumber:13},this),e.jsxDEV("span",{className:"h-4 w-4 rounded border",style:{background:s.colorScheme.secondary}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:210,columnNumber:13},this),e.jsxDEV("span",{className:"h-4 w-4 rounded border",style:{background:s.colorScheme.accent}},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:214,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV(et,{variant:"outline",children:s.colorScheme.name},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:219,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:203,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap gap-3 pt-4",children:[e.jsxDEV(ne,{onClick:b,disabled:a||s.selectedRecipes.length===0,className:"flex items-center gap-2",children:[e.jsxDEV(Hi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:228,columnNumber:13},this),a?"Generating...":"Generate Document"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:223,columnNumber:11},this),e.jsxDEV(ne,{variant:"outline",onClick:D,className:"flex items-center gap-2",children:[e.jsxDEV(_a,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:236,columnNumber:13},this),"Save Draft"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:231,columnNumber:11},this),l?e.jsxDEV(ne,{variant:"outline",onClick:p,className:"flex items-center gap-2",children:[e.jsxDEV(Xr,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:245,columnNumber:15},this),"Open Editor"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:240,columnNumber:13},this):null,l?e.jsxDEV(ne,{variant:"outline",onClick:u,className:"flex items-center gap-2",children:"Print"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:250,columnNumber:13},this):null,d?e.jsxDEV(ne,{variant:"outline",onClick:x,className:"flex items-center gap-2",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:264,columnNumber:15},this),"Download Word (.docx)"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:259,columnNumber:13},this):null]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:222,columnNumber:9},this),s.selectedRecipes.length===0&&e.jsxDEV("div",{className:"py-10 text-center text-sm text-muted-foreground",children:[e.jsxDEV(Hi,{className:"mx-auto mb-2 h-10 w-10 text-muted"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:272,columnNumber:13},this),"Select recipes to generate your server notes document."]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:271,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:171,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:164,columnNumber:5},this)}function kr({icon:s,label:t,value:i}){return e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s,e.jsxDEV("span",{className:"text-muted-foreground",children:[t,":"]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:291,columnNumber:7},this),e.jsxDEV("span",{className:"font-semibold",children:i},void 0,!1,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:292,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesGenerator.tsx",lineNumber:289,columnNumber:5},this)}function yS(s,t=ga){if(s.layout.id==="luccca-briefing")return ES(s,t);const{colorScheme:i,orientation:n,pageFormat:a,cardsPerPage:o}=s;if(a==="index-card"){const r=Math.max(1,Math.min(2,o||2)),d=s.layout.indexCardLayout.fontSize==="small"?"12px":"14px",c=[];for(let f=0;f<s.selectedRecipes.length;f+=r){const D=s.selectedRecipes.slice(f,f+r).map(u=>{const p=s.layout.indexCardLayout.contentPriority!=="instructions"?`<div class="card-subtitle">Ingredients</div>
                 <ul class="tight-list">
                   ${u.recipe.ingredients?.slice(0,8).map(g=>`<li>${g}</li>`).join("")||""}
                 </ul>`:"",x=s.layout.indexCardLayout.contentPriority!=="ingredients"?`<div class="card-subtitle">Steps</div>
                 <ol class="tight-list">
                   ${u.recipe.instructions?.slice(0,6).map(g=>`<li>${g}</li>`).join("")||""}
                 </ol>`:"",S=u.wineSelection?`<div class="card-subtitle">Wine</div><div class="small-note">${u.wineSelection}</div>`:"",m=u.sellingNotes?`<div class="card-subtitle">Selling Points</div><div class="small-note">${u.sellingNotes}</div>`:"",v=s.layout.indexCardLayout.includeImages&&u.recipe.image?`<img src="${u.recipe.image}" alt="${u.recipe.title}" class="card-image" />`:"";return`<div class="card">
            <div class="card-header">${u.recipe.title}</div>
            <div class="card-content">
              ${v}
              <div class="card-section">
                ${p}
                ${x}
                ${S}
                ${m}
              </div>
            </div>
          </div>`}).join("");c.push(`<div class="sheet">${D}</div>`)}return`<!DOCTYPE html>
<html lang="${t}">
<head>
  <meta charset="utf-8" />
  <title>${s.title} - Server Notes</title>
  <style>
    @page { size: letter; margin: 0.5in; }
    body { margin: 0; background: ${i.background}; color: ${i.text}; font-family: ${s.layout.standardLayout.fontFamily}; }
    .sheet { page-break-after: always; display: grid; grid-template-rows: repeat(${r}, 1fr); gap: 0.5in; align-content: center; }
    .card { width: 5in; height: 3in; margin: 0 auto; border: 1px solid ${i.secondary}; border-radius: 8px; padding: 10px; box-sizing: border-box; }
    .card-header { font-weight: bold; color: ${i.primary}; border-bottom: 1px solid ${i.accent}; padding-bottom: 4px; margin-bottom: 6px; text-align: ${s.layout.indexCardLayout.headerStyle==="centered"?"center":"left"}; }
    .card-content { font-size: ${d}; line-height: 1.25; position: relative; }
    .card-image { width: 1.2in; height: 1in; object-fit: cover; border-radius: 4px; float: right; margin-left: 8px; }
    .card-subtitle { font-weight: 600; color: ${i.primary}; margin-top: 4px; }
    .tight-list { margin: 4px 0; padding-left: 16px; }
    .tight-list li { margin: 2px 0; }
    .small-note { font-style: italic; color: ${i.secondary}; }
  </style>
</head>
<body>
  ${c.join("")}
</body>
</html>`}const l=s.selectedRecipes.map((r,d)=>{const c=r.wineSelection?`<div class="section"><div class="section-title">Wine Pairing & Selection</div><div class="wine-notes">${r.wineSelection}</div></div>`:"",f=r.sellingNotes?`<div class="section"><div class="section-title">Server Selling Points</div><p>${r.sellingNotes}</p></div>`:"",b=r.serviceInstructions?`<div class="section"><div class="section-title">Service Instructions</div><p>${r.serviceInstructions}</p></div>`:"",D=r.silverwareRequired&&r.silverwareRequired.length?`<div class="section"><div class="section-title">Required Silverware</div><div class="silverware-list">${r.silverwareRequired.map(S=>`<span class="silverware-item">${S}</span>`).join("")}</div></div>`:"",u=r.recipe.tags?.filter(S=>/gluten|dairy|nut|shellfish|soy|egg|sesame/i.test(S)),p=u&&u.length&&s.layout.standardLayout.includeNutrition?`<div class="section"><div class="section-title">Allergens</div><div class="wine-notes">${u.join(", ")}</div></div>`:"",x=s.layout.standardLayout.includeImages&&r.recipe.image?`<img src="${r.recipe.image}" alt="${r.recipe.title}" class="recipe-image" />`:"";return`<div class="page recipe-item">
        <div class="recipe-header">${r.recipe.title}</div>
        <div class="recipe-content">
          ${x}
          <div class="recipe-description">"${r.recipe.description??""}"</div>
          <div class="section"><div class="section-title">Ingredients & Quantities</div><div class="ingredients-list">${r.recipe.ingredients?.map(S=>`<div class="ingredient">• ${S}</div>`).join("")??""}</div></div>
          <div class="section"><div class="section-title">Preparation Method</div><ol>${r.recipe.instructions?.map(S=>`<li>${S}</li>`).join("")??""}</ol></div>
          ${c}
          ${f}
          ${b}
          ${D}
          ${p}
          <div class="meta">
            <strong>Course:</strong> ${r.recipe.course??"—"} •
            <strong> Cuisine:</strong> ${r.recipe.cuisine??"—"}
          </div>
        </div>
      </div>`}).join("");return`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${s.title} - Server Notes</title>
  <style>
    @page { size: ${n==="horizontal"?"landscape":"portrait"}; margin: 0.75in; }
    body { font-family: '${s.layout.standardLayout.fontFamily}'; color: ${i.text}; background-color: ${i.background}; line-height: 1.4; margin: 0; padding: 0; }
    .header { text-align: ${s.layout.standardLayout.headerStyle==="centered"?"center":"left"}; border-bottom: 2px solid ${i.primary}; padding-bottom: 20px; margin-bottom: 30px; }
    .logo-container { display: flex; justify-content: center; gap: 20px; margin-bottom: 15px; }
    .logo { height: 60px; width: auto; }
    .company-name { font-size: 28px; font-weight: bold; color: ${i.primary}; margin: 10px 0; }
    .outlet-name { font-size: 18px; color: ${i.secondary}; margin: 5px 0; }
    .document-title { font-size: 24px; font-weight: bold; color: ${i.primary}; margin: 15px 0 5px 0; }
    .distribution-date { font-size: 14px; color: ${i.secondary}; margin-bottom: 20px; }
    .recipe-item { page-break-inside: avoid; margin-bottom: 30px; border: 1px solid ${i.secondary}; border-radius: 8px; overflow: hidden; }
    .recipe-header { background-color: ${i.primary}; color: white; padding: 15px; font-size: 20px; font-weight: bold; }
    .recipe-content { padding: 20px; position: relative; }
    .recipe-image { float: right; width: 150px; height: 120px; object-fit: cover; border-radius: 6px; margin-left: 20px; margin-bottom: 10px; }
    .recipe-description { font-style: italic; margin-bottom: 15px; color: ${i.secondary}; }
    .section { margin-bottom: 15px; }
    .section-title { font-weight: bold; color: ${i.primary}; border-bottom: 1px solid ${i.accent}; padding-bottom: 2px; margin-bottom: 5px; }
    .ingredients-list { ${s.layout.standardLayout.recipeLayout==="two-column"?"columns: 2; column-gap: 20px;":""} margin-bottom: 15px; }
    .ingredient { break-inside: avoid; margin-bottom: 3px; }
    .silverware-list { display: flex; flex-wrap: wrap; gap: 5px; }
    .silverware-item { background-color: ${i.accent}; color: ${i.text}; padding: 3px 8px; border-radius: 12px; font-size: 12px; }
    .wine-notes { background-color: ${i.background}; border-left: 4px solid ${i.accent}; padding: 10px; margin: 10px 0; font-style: italic; }
    .index-page { page-break-after: always; }
    .index-list { list-style: none; padding: 0; }
    .index-item { padding: 10px; border-bottom: 1px dotted ${i.secondary}; display: flex; justify-content: space-between; }
    .meta { margin-top: 16px; font-size: 12px; color: ${i.secondary}; border-top: 1px solid ${i.secondary}; padding-top: 10px; }
  </style>
</head>
<body>
  <div class="page title-page">
    <div class="header">
      ${s.logos.length?`<div class="logo-container">${s.logos.map(r=>`<img src="${r}" alt="Logo" class="logo" />`).join("")}</div>`:""}
      ${s.companyName?`<div class="company-name">${s.companyName}</div>`:""}
      ${s.outletName?`<div class="outlet-name">${s.outletName}</div>`:""}
      <div class="document-title">${s.title}</div>
      <div class="distribution-date">Distribution Date: ${new Date(s.distributionDate).toLocaleDateString()}</div>
    </div>
  </div>
  <div class="page index-page">
    <h2 style="color: ${i.primary}; border-bottom: 2px solid ${i.primary}; padding-bottom: 10px;">Menu Index</h2>
    <ul class="index-list">
      ${s.selectedRecipes.map((r,d)=>`<li class="index-item"><span>${r.recipe.title}</span><span>Page ${d+3}</span></li>`).join("")}
    </ul>
  </div>
  ${l}
</body>
</html>`}const DS=/gluten|dairy|milk|nut|peanut|tree nut|shellfish|fish|soy|egg|sesame|wheat/i,Vc=(s,t="000000")=>{if(!s)return t;const i=s.replace("#","").trim();return i.length?i:t},Is=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),Sr=s=>Is(s).replace(/\r?\n/g,"<br />"),Cc=(s,t,i)=>{const n=[...s];for(;n.length<t;)n.push(i());return n},Xd=s=>s.split(/\r?\n+/).map(t=>t.trim()).filter(Boolean);function RN(s){return s.selectedRecipes.map(t=>{const n=(t.recipe.extra??{}).serverNotes??null,o=(n?.ingredients??[]).map(p=>({qty:[p.qty,p.unit].filter(Boolean).join(" ").trim(),component:p.item??"",notes:[p.prep,p.yield].filter(Boolean).join(" ").trim()}));!o.length&&t.recipe.ingredients?.length&&o.push(...t.recipe.ingredients.map(p=>({qty:"",component:p,notes:""})));const l=Cc(o,12,()=>({qty:"",component:"",notes:""})),r=n?.allergens?.length?n.allergens:t.recipe.tags?.filter(p=>DS.test(p))??[],d=r.length?r.map(p=>({item:t.recipe.title,allergen:p,modify:"",alternative:""})):[{item:t.recipe.title,allergen:"",modify:"",alternative:""}],c=Cc(d,6,()=>({item:"",allergen:"",modify:"",alternative:""})),b=(t.wineSelection?Xd(t.wineSelection):[]).map(p=>{const x=p.split("|").map(S=>S.trim());return{item:x[0]||p,year:x[1]||"",location:x[2]||"",country:x[3]||""}}),D=Cc(b,5,()=>({item:"",year:"",location:"",country:""})),u=[];return t.serviceInstructions?.trim()&&u.push(t.serviceInstructions.trim()),t.silverwareRequired?.length&&u.push(`Utensils: ${t.silverwareRequired.join(", ")}`),{entry:t,menuName:Qr(t.recipe),menuPrice:Jc(t.recipe),description:t.recipe.description?.trim()||"",serverNotes:t.sellingNotes?.trim()||"",serviceware:u.join(`
`),dishComponents:l,allergens:c,beverages:D,imageSrc:t.recipe.imageDataUrls?.[0]||t.recipe.image||void 0}})}function ES(s,t){const i=RN(s),{colorScheme:n}=s,a=i.map((d,c)=>`<li><span class="index-number">${c+1}.</span><span contenteditable="true">${Is(d.menuName)}</span></li>`).join(""),o=(s.logos||[]).slice(0,2).map(d=>`<img src="${d}" alt="Logo" />`).join(""),l=`<div class="page cover">
    <header class="cover-header">
      <div class="cover-meta" style="border-color: ${n.primary};">
        ${s.companyName?`<h1 contenteditable="true">${Is(s.companyName)}</h1>`:""}
        ${s.outletName?`<h2 contenteditable="true">${Is(s.outletName)}</h2>`:""}
        <p class="cover-title" contenteditable="true">${Is(s.title||"Service Briefing")}</p>
        <p class="cover-date" contenteditable="true">${Is(new Date(s.distributionDate).toLocaleDateString())}</p>
      </div>
      ${o?`<div class="cover-logos">${o}</div>`:""}
    </header>
    <section class="cover-body">
      <h3>Menu Overview</h3>
      <ul class="cover-list">
        ${a||'<li contenteditable="true">Add menu items</li>'}
      </ul>
      ${s.distributionNotes?`<div class="cover-notes"><h4>Distribution Notes</h4><p contenteditable="true">${Sr(s.distributionNotes)}</p></div>`:'<div class="cover-notes"><h4>Distribution Notes</h4><p contenteditable="true">Add notes</p></div>'}
    </section>
  </div>`,r=i.map((d,c)=>{const f=d.imageSrc?`<img src="${d.imageSrc}" alt="${Is(d.menuName)}" />`:'<div class="image-placeholder" contenteditable="true">Add Image</div>',b=d.dishComponents.map(p=>`
            <tr>
              <td contenteditable="true">${Is(p.qty)}</td>
              <td contenteditable="true">${Is(p.component)}</td>
              <td contenteditable="true">${Is(p.notes)}</td>
            </tr>
          `).join(""),D=d.allergens.map(p=>`
            <tr>
              <td contenteditable="true">${Is(p.item)}</td>
              <td contenteditable="true">${Is(p.allergen)}</td>
              <td contenteditable="true">${Is(p.modify)}</td>
              <td contenteditable="true">${Is(p.alternative)}</td>
            </tr>
          `).join(""),u=d.beverages.map(p=>`
            <tr>
              <td contenteditable="true">${Is(p.item)}</td>
              <td contenteditable="true">${Is(p.year)}</td>
              <td contenteditable="true">${Is(p.location)}</td>
              <td contenteditable="true">${Is(p.country)}</td>
            </tr>
          `).join("");return`<div class="page recipe">
        <header class="recipe-header" style="background: ${n.primary}; color: ${n.background};">
          <div class="header-title" contenteditable="true">${Is(d.menuName)}</div>
          <div class="header-price" contenteditable="true">${d.menuPrice?Is(d.menuPrice):""}</div>
        </header>
        <main class="recipe-body">
          <div class="left-column">
            <div class="hero-image">${f}</div>
            <table class="components-table">
              <thead style="background: ${n.secondary}; color: ${n.background};">
                <tr>
                  <th>Qty</th>
                  <th>Component</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody>
                ${b}
              </tbody>
            </table>
          </div>
          <div class="right-column">
            <section>
              <h4>Menu Description</h4>
              <div class="editable" contenteditable="true">${d.description?Sr(d.description):"Add description"}</div>
            </section>
            <section>
              <h4>Server Notes</h4>
              <div class="editable" contenteditable="true">${d.serverNotes?Sr(d.serverNotes):"Add notes"}</div>
            </section>
            <section>
              <h4>Serviceware</h4>
              <div class="editable" contenteditable="true">${d.serviceware?Sr(d.serviceware):"Add utensils needed"}</div>
            </section>
          </div>
        </main>
        <section class="full-width">
          <h4 style="background: ${n.accent};">Allergens</h4>
          <table class="allergen-table">
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Allergy</th>
                <th>Modify</th>
                <th>Alternative</th>
              </tr>
            </thead>
            <tbody>
              ${D}
            </tbody>
          </table>
        </section>
        <section class="full-width">
          <h4 style="background: ${n.accent};">Wine & Beverage Pairings</h4>
          <table class="beverage-table">
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Year</th>
                <th>Location</th>
                <th>Country</th>
              </tr>
            </thead>
            <tbody>
              ${u}
            </tbody>
          </table>
        </section>
        <footer class="footer-meta">
          <span>Page ${c+2}</span>
          <span contenteditable="true">${Is(s.companyName||"")}</span>
        </footer>
      </div>`}).join("");return`<!DOCTYPE html>
<html lang="${t}">
<head>
  <meta charset="utf-8" />
  <title>${Is(s.title||"Server Notes")}</title>
  <style>
    @page { size: letter; margin: 0.5in; }
    body { margin: 0; font-family: 'Arial', 'Helvetica', sans-serif; background: #0f172a; }
    .page { width: 7.5in; min-height: 10in; margin: 0.5in auto; background: #ffffff; padding: 0.6in; box-shadow: 0 20px 60px rgba(15, 23, 42, 0.35); box-sizing: border-box; position: relative; }
    .page:not(:last-child) { page-break-after: always; }
    [contenteditable="true"] { outline: none; }
    [contenteditable="true"]:hover { box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.4); }
    [contenteditable="true"]:focus { box-shadow: inset 0 0 0 2px rgba(59, 130, 246, 0.7); }
    .cover { display: flex; flex-direction: column; gap: 24px; }
    .cover-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 24px; }
    .cover-meta { border-left: 4px solid; padding-left: 18px; }
    .cover-meta h1 { margin: 0; font-size: 28px; }
    .cover-meta h2 { margin: 4px 0 12px; font-size: 18px; color: #475569; }
    .cover-title { font-size: 22px; font-weight: 600; margin: 0 0 6px; }
    .cover-date { margin: 0; color: #64748b; }
    .cover-logos img { max-height: 64px; margin-left: 12px; }
    .cover-body h3 { margin: 0 0 12px; font-size: 18px; }
    .cover-list { list-style: none; padding: 0; margin: 0 0 16px; }
    .cover-list li { display: flex; gap: 12px; padding: 8px 0; border-bottom: 1px solid rgba(148, 163, 184, 0.35); }
    .cover-list .index-number { font-weight: 600; color: ${n.primary}; }
    .cover-notes h4 { margin: 0 0 6px; font-size: 16px; }
    .cover-notes p { margin: 0; line-height: 1.4; }
    .recipe-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-radius: 12px; font-size: 20px; font-weight: 700; margin-bottom: 20px; color: ${n.background}; }
    .recipe-body { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .left-column { display: flex; flex-direction: column; gap: 16px; }
    .hero-image { border: 1px solid rgba(148, 163, 184, 0.4); border-radius: 12px; padding: 6px; min-height: 200px; display: flex; align-items: center; justify-content: center; background: #f8fafc; }
    .hero-image img { width: 100%; border-radius: 10px; object-fit: cover; }
    .image-placeholder { width: 100%; text-align: center; color: #64748b; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid rgba(148, 163, 184, 0.45); padding: 6px 8px; font-size: 12px; }
    th { text-transform: uppercase; letter-spacing: 0.04em; font-size: 11px; }
    .components-table thead { color: ${n.background}; }
    .right-column section { margin-bottom: 16px; }
    .right-column h4, .full-width h4 { margin: 0 0 8px; font-size: 13px; text-transform: uppercase; letter-spacing: 0.06em; padding: 6px 10px; border-radius: 6px; background: rgba(148, 163, 184, 0.18); display: inline-block; }
    .editable { min-height: 70px; border: 1px dashed rgba(148, 163, 184, 0.45); border-radius: 8px; padding: 8px 10px; line-height: 1.45; font-size: 13px; }
    .full-width { margin-top: 20px; }
    .footer-meta { display: flex; justify-content: space-between; margin-top: 24px; font-size: 11px; color: #94a3b8; }
  </style>
</head>
<body>
  ${l}
  ${r}
</body>
</html>`}async function wS(s,t=ga){const i=PN(t),n=s.pageFormat==="standard",a=n?1:Math.max(1,Math.min(2,s.cardsPerPage||2)),o=n?{width:s.orientation==="horizontal"?Pt(11):Pt(8.5),height:s.orientation==="horizontal"?Pt(8.5):Pt(11),orientation:s.orientation==="horizontal"?bn.LANDSCAPE:bn.PORTRAIT}:{width:Pt(8.5),height:Pt(11),orientation:bn.PORTRAIT},l=(s.layout.standardLayout.fontFamily||"Times New Roman").split(",")[0]?.replace(/['"]/g,"").trim()||"Times New Roman",r=p=>p.replace("#","")||"000000",d=(p,x,S=ps.LEFT)=>new Tt({heading:x,alignment:S,children:[new Ut({text:p,bold:!0,color:r(s.colorScheme.primary),font:l})]}),c=(p,x)=>new Tt({alignment:x?.align,children:[new Ut({text:p,color:r(x?.color||s.colorScheme.text),bold:x?.bold,size:x?.size,font:l})]}),f=[],b=[];s.companyName&&b.push(c(s.companyName,{align:ps.CENTER,color:s.colorScheme.primary,bold:!0,size:56})),s.outletName&&b.push(c(s.outletName,{align:ps.CENTER,color:s.colorScheme.secondary}));const D=s.title?.trim()||i.titleFallback;if(b.push(new Tt({text:D,heading:ki.HEADING_1,alignment:ps.CENTER,children:[new Ut({font:l})]})),b.push(c(`${i.distributionDate}: ${new Date(s.distributionDate).toLocaleDateString(t)}`,{align:ps.CENTER,color:s.colorScheme.secondary})),f.push({properties:{page:{size:o,margin:{top:Pt(.75),right:Pt(.75),bottom:Pt(.75),left:Pt(.75)}}},children:b}),n)for(const p of s.selectedRecipes){const x=[],S=s.layout.standardLayout.headerStyle==="centered"?ps.CENTER:ps.LEFT;if(x.push(new Tt({alignment:S,children:[new Ut({text:p.recipe.title,bold:!0,size:36,color:r(s.colorScheme.primary),font:l})]})),s.layout.standardLayout.includeImages&&p.recipe.image&&x.push(c(`[Image: ${p.recipe.image}]`,{align:ps.RIGHT,color:s.colorScheme.secondary})),p.recipe.description&&x.push(c(p.recipe.description,{color:s.colorScheme.secondary})),s.layout.standardLayout.recipeLayout==="two-column"){const m=p.recipe.ingredients?.map(N=>c(`• ${N}`))||[],v=p.recipe.instructions?.map((N,w)=>c(`${w+1}. ${N}`))||[],g=new on({children:[new Ls({children:[d(i.sectionIngredients,ki.HEADING_3),...m]}),new Ls({children:[d(i.sectionPreparation,ki.HEADING_3),...v]})]});x.push(new ba({width:{size:100,type:Ai.PERCENTAGE},rows:[g]}))}else x.push(d(i.sectionIngredients,ki.HEADING_3)),p.recipe.ingredients?.forEach(m=>x.push(c(`• ${m}`))),x.push(d(i.sectionPreparation,ki.HEADING_3)),p.recipe.instructions?.forEach((m,v)=>x.push(c(`${v+1}. ${m}`)));p.wineSelection&&(x.push(d(i.sectionWinePairing,ki.HEADING_3)),x.push(c(p.wineSelection))),p.sellingNotes&&(x.push(d(i.sectionSellingPoints,ki.HEADING_3)),x.push(c(p.sellingNotes))),p.serviceInstructions&&(x.push(d(i.sectionServiceInstructions,ki.HEADING_3)),x.push(c(p.serviceInstructions))),p.silverwareRequired?.length&&(x.push(d(i.sectionRequiredSilverware,ki.HEADING_3)),p.silverwareRequired.forEach(m=>x.push(c(`• ${m}`)))),f.push({properties:{page:{size:o,margin:{top:Pt(.75),right:Pt(.75),bottom:Pt(.75),left:Pt(.75)}}},children:x})}else for(let p=0;p<s.selectedRecipes.length;p+=a){const x=s.selectedRecipes.slice(p,p+a),S=[];for(const m of x){const v=[];v.push(new Tt({alignment:s.layout.indexCardLayout.headerStyle==="centered"?ps.CENTER:ps.LEFT,children:[new Ut({text:m.recipe.title,bold:!0,size:32,color:r(s.colorScheme.primary),font:l})]})),s.layout.indexCardLayout.includeImages&&m.recipe.image&&v.push(c(`[Image: ${m.recipe.image}]`,{align:ps.RIGHT,color:s.colorScheme.secondary})),s.layout.indexCardLayout.contentPriority!=="instructions"&&(v.push(d(i.sectionIngredients,ki.HEADING_3)),m.recipe.ingredients?.slice(0,8).forEach(g=>v.push(c(`• ${g}`)))),s.layout.indexCardLayout.contentPriority!=="ingredients"&&(v.push(d(i.sectionSteps,ki.HEADING_3)),m.recipe.instructions?.slice(0,6).forEach((g,N)=>v.push(c(`${N+1}. ${g}`)))),m.wineSelection&&(v.push(d(i.sectionWine,ki.HEADING_3)),v.push(c(m.wineSelection))),m.sellingNotes&&(v.push(d(i.sectionSelling,ki.HEADING_3)),v.push(c(m.sellingNotes))),S.push(new on({height:{value:Pt(3),rule:Tw.EXACT},children:[new Ls({margins:{top:Pt(.15),bottom:Pt(.15),left:Pt(.2),right:Pt(.2)},width:{size:Pt(5),type:Ai.DXA},borders:{top:{style:hi.SINGLE,size:2,color:"999999"},bottom:{style:hi.SINGLE,size:2,color:"999999"},left:{style:hi.SINGLE,size:2,color:"999999"},right:{style:hi.SINGLE,size:2,color:"999999"}},children:v})]}))}f.push({properties:{page:{size:o,margin:{top:Pt(.5),right:Pt(.5),bottom:Pt(.5),left:Pt(.5)}}},children:[new ba({width:{size:Pt(5),type:Ai.DXA},rows:S})]})}const u=new jN({sections:f,creator:"Echo Recipe Pro",description:`Language: ${t}`});return CN.toBlob(u)}async function kS(s,t=ga){return s.layout.id==="luccca-briefing"?SS(s,t):wS(s,t)}async function SS(s,t=ga){const i=PN(t),n=RN(s),a={width:s.orientation==="horizontal"?Pt(11):Pt(8.5),height:s.orientation==="horizontal"?Pt(8.5):Pt(11),orientation:s.orientation==="horizontal"?bn.LANDSCAPE:bn.PORTRAIT},o={top:Pt(.5),right:Pt(.5),bottom:Pt(.5),left:Pt(.5)},l=(s.layout.standardLayout.fontFamily||"Arial").split(",")[0]?.replace(/['"]/g,"").trim()||"Arial",r=Vc(s.colorScheme.primary,"1F2933"),d=Vc(s.colorScheme.secondary,"64748B"),c=Vc(s.colorScheme.text,"111827"),f=[],b=[],D=new Date(s.distributionDate).toLocaleDateString(t);s.companyName&&b.push(new Tt({alignment:ps.CENTER,spacing:{after:200},children:[new Ut({text:s.companyName,bold:!0,size:64,color:r,font:l})]})),s.outletName&&b.push(new Tt({alignment:ps.CENTER,spacing:{after:160},children:[new Ut({text:s.outletName,size:32,color:d,font:l})]})),b.push(new Tt({alignment:ps.CENTER,spacing:{after:160},children:[new Ut({text:s.title?.trim()||i.serviceBriefing,bold:!0,size:52,color:r,font:l})]})),b.push(new Tt({alignment:ps.CENTER,spacing:{after:320},children:[new Ut({text:`${i.distributionDate}: ${D}`,color:d,font:l})]})),b.push(new Tt({spacing:{after:120},children:[new Ut({text:i.menuOverview,bold:!0,size:32,color:r,font:l})]})),n.forEach((p,x)=>{b.push(new Tt({spacing:{after:80},children:[new Ut({text:`${x+1}. ${p.menuName}`,color:c,font:l})]}))}),s.distributionNotes&&(b.push(new Tt({spacing:{before:160,after:80},children:[new Ut({text:i.distributionNotes,bold:!0,color:r,font:l})]})),Xd(s.distributionNotes).forEach(p=>b.push(new Tt({spacing:{after:80},children:[new Ut({text:p,color:c,font:l})]})))),f.push({properties:{page:{size:a,margin:o}},children:b});for(const p of n){const x=[];if(x.push(new ba({width:{size:100,type:Ai.PERCENTAGE},rows:[new on({children:[new Ls({width:{size:75,type:Ai.PERCENTAGE},borders:{bottom:{style:hi.SINGLE,size:12,color:r}},children:[new Tt({children:[new Ut({text:p.menuName,bold:!0,size:36,color:r,font:l})]})]}),new Ls({width:{size:25,type:Ai.PERCENTAGE},borders:{bottom:{style:hi.SINGLE,size:12,color:r}},children:[new Tt({alignment:ps.RIGHT,children:[new Ut({text:p.menuPrice??"",bold:!0,size:32,color:r,font:l})]})]})]})]})),p.imageSrc){const S=await RS(p.imageSrc);if(S){const m={data:S,transformation:{width:400,height:260}};x.push(new Tt({alignment:ps.CENTER,spacing:{after:200},children:[new S2(m)]}))}}x.push(...Rc(i.sectionMenuDescription,p.description,c,d,l)),x.push(...Rc(i.sectionServerNotes,p.serverNotes,c,d,l)),x.push(...Rc(i.sectionServiceware,p.serviceware,c,d,l)),x.push(new Tt({spacing:{before:160,after:80},children:[new Ut({text:i.sectionDishComponents,bold:!0,color:r,font:l})]})),x.push(jS(p,r,d,c,l,{qty:i.tableQty,component:i.tableComponent,notes:i.tableNotes})),x.push(new Tt({spacing:{before:160,after:80},children:[new Ut({text:i.sectionAllergens,bold:!0,color:r,font:l})]})),x.push(VS(p,r,c,l,{item:i.tableItem,allergy:i.tableAllergy,modify:i.tableModify,alternative:i.tableAlternative})),x.push(new Tt({spacing:{before:160,after:80},children:[new Ut({text:i.sectionBeverages,bold:!0,color:r,font:l})]})),x.push(CS(p,r,c,l,{item:i.tableItem,year:i.tableYear,location:i.tableLocation,country:i.tableCountry})),f.push({properties:{page:{size:a,margin:o}},children:x})}const u=new jN({sections:f,creator:"Echo Recipe Pro",description:`Language: ${t}`});return CN.toBlob(u)}function Rc(s,t,i,n,a){const o=[new Tt({spacing:{before:160,after:80},children:[new Ut({text:s,bold:!0,color:n,font:a})]})],l=Xd(t);return l.length===0?o.push(new Tt({spacing:{after:80},children:[new Ut({text:" ",color:i,font:a})]})):l.forEach(r=>o.push(new Tt({spacing:{after:80},children:[new Ut({text:r,color:i,font:a})]}))),o}function jS(s,t,i,n,a,o){const l=new on({children:[o.qty,o.component,o.notes].map(d=>new Ls({shading:{fill:t,color:"FFFFFF"},children:[new Tt({alignment:ps.CENTER,children:[new Ut({text:d,bold:!0,color:"FFFFFF",font:a})]})]}))}),r=s.dishComponents.map(d=>new on({children:[new Ls({children:[new Tt({children:[new Ut({text:d.qty,color:n,font:a})]})]}),new Ls({children:[new Tt({children:[new Ut({text:d.component,color:n,font:a})]})]}),new Ls({children:[new Tt({children:[new Ut({text:d.notes,color:n,font:a})]})]})]}));return new ba({width:{size:100,type:Ai.PERCENTAGE},borders:{top:{style:hi.SINGLE,size:4,color:i},bottom:{style:hi.SINGLE,size:4,color:i},left:{style:hi.SINGLE,size:4,color:i},right:{style:hi.SINGLE,size:4,color:i},insideHorizontal:{style:hi.SINGLE,size:2,color:i},insideVertical:{style:hi.SINGLE,size:2,color:i}},rows:[l,...r]})}function VS(s,t,i,n,a){const o=new on({children:[a.item,a.allergy,a.modify,a.alternative].map(r=>new Ls({shading:{fill:t,color:"FFFFFF"},children:[new Tt({alignment:ps.CENTER,children:[new Ut({text:r,bold:!0,color:"FFFFFF",font:n})]})]}))}),l=s.allergens.map(r=>new on({children:[new Ls({children:[new Tt({children:[new Ut({text:r.item,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.allergen,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.modify,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.alternative,color:i,font:n})]})]})]}));return new ba({width:{size:100,type:Ai.PERCENTAGE},rows:[o,...l]})}function CS(s,t,i,n,a){const o=new on({children:[a.item,a.year,a.location,a.country].map(r=>new Ls({shading:{fill:t,color:"FFFFFF"},children:[new Tt({alignment:ps.CENTER,children:[new Ut({text:r,bold:!0,color:"FFFFFF",font:n})]})]}))}),l=s.beverages.map(r=>new on({children:[new Ls({children:[new Tt({children:[new Ut({text:r.item,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.year,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.location,color:i,font:n})]})]}),new Ls({children:[new Tt({children:[new Ut({text:r.country,color:i,font:n})]})]})]}));return new ba({width:{size:100,type:Ai.PERCENTAGE},rows:[o,...l]})}function PN(s){const t=Oc[ga],i=Oc[s]??t,n=(a,o)=>i[a]??t[a]??o;return{titleFallback:n("serverNotes.doc.titleFallback","Server Notes"),serviceBriefing:n("serverNotes.doc.serviceBriefing","Service Briefing"),distributionDate:n("serverNotes.doc.distributionDate","Distribution Date"),menuOverview:n("serverNotes.doc.menuOverview","Menu Overview"),distributionNotes:n("serverNotes.doc.distributionNotes","Distribution Notes"),sectionMenuDescription:n("serverNotes.doc.section.menuDescription","Menu Description"),sectionServerNotes:n("serverNotes.doc.section.serverNotes","Server Notes"),sectionServiceware:n("serverNotes.doc.section.serviceware","Serviceware"),sectionIngredients:n("serverNotes.doc.section.ingredients","Ingredients"),sectionPreparation:n("serverNotes.doc.section.preparation","Preparation"),sectionSteps:n("serverNotes.doc.section.steps","Steps"),sectionWinePairing:n("serverNotes.doc.section.winePairing","Wine Pairing"),sectionSellingPoints:n("serverNotes.doc.section.sellingPoints","Selling Points"),sectionServiceInstructions:n("serverNotes.doc.section.serviceInstructions","Service Instructions"),sectionRequiredSilverware:n("serverNotes.doc.section.requiredSilverware","Required Silverware"),sectionWine:n("serverNotes.doc.section.wine","Wine"),sectionSelling:n("serverNotes.doc.section.selling","Selling"),sectionDishComponents:n("serverNotes.doc.section.dishComponents","Dish Components"),sectionAllergens:n("serverNotes.doc.section.allergens","Allergens"),sectionBeverages:n("serverNotes.doc.section.beverages","Wine & Beverage Pairings"),tableQty:n("serverNotes.doc.table.qty","Qty"),tableComponent:n("serverNotes.doc.table.component","Component"),tableNotes:n("serverNotes.doc.table.notes","Notes"),tableItem:n("serverNotes.doc.table.item","Item Name"),tableAllergy:n("serverNotes.doc.table.allergy","Allergy"),tableModify:n("serverNotes.doc.table.modify","Modify"),tableAlternative:n("serverNotes.doc.table.alternative","Alternative"),tableYear:n("serverNotes.doc.table.year","Year"),tableLocation:n("serverNotes.doc.table.location","Location"),tableCountry:n("serverNotes.doc.table.country","Country")}}async function RS(s){if(!s)return null;try{if(s.startsWith("data:")){const n=s.split(",")[1];if(!n)return null;const a=atob(n),o=a.length,l=new Uint8Array(o);for(let r=0;r<o;r+=1)l[r]=a.charCodeAt(r);return l}const t=await fetch(s);if(!t.ok)return null;const i=await t.arrayBuffer();return new Uint8Array(i)}catch(t){return console.warn("Failed to load image for DOCX",t),null}}const PS=/(gluten|dairy|milk|lactose|egg|soy|soya|nut|peanut|tree\s*nuts|shellfish|crustacean|mollusk|fish|sesame|wheat)/i;function IS(s){return Array.isArray(s)?s.map(t=>String(t)).filter(t=>t.trim().length>0):typeof s=="string"&&s.trim()?s.split(/[,;\n]/).map(t=>t.trim()).filter(Boolean):[]}function No(s){const t=s.recipe??{},i=new Set,n=o=>{for(const l of IS(o))i.add(l)};if(n(t.allergens),n(t.extra?.allergenList),n(t.extra?.selectedAllergens),n(t.extra?.selectedAllergenList),Array.isArray(t.tags))for(const o of t.tags)PS.test(String(o))&&i.add(String(o));const a=Array.from(i);return a.sort((o,l)=>o.localeCompare(l,void 0,{sensitivity:"base"})),a}function AS(s){const t=new Set;for(const n of s)for(const a of No(n))t.add(a);const i=Array.from(t);return i.sort((n,a)=>n.localeCompare(a,void 0,{sensitivity:"base"})),i}const qp={"en-US":{title:"Food Allergen Matrix",subtitle:"Cross-reference selected recipes against allergen flags.",allergen:"Allergen",recipe:"Recipe",present:"Yes",absent:"No",noData:"No recipes selected.",noAllergensRow:"No allergens flagged",print:"Print Matrix"},"fr-FR":{title:"Matrice des allergènes",subtitle:"Recoupez les recettes sélectionnées avec les allergènes signalés.",allergen:"Allergène",recipe:"Recette",present:"Oui",absent:"Non",noData:"Aucune recette sélectionnée.",noAllergensRow:"Aucun allergène signalé",print:"Imprimer la matrice"},"it-IT":{title:"Matrice degli allergeni",subtitle:"Incrocia le ricette selezionate con gli allergeni indicati.",allergen:"Allergene",recipe:"Ricetta",present:"Sì",absent:"No",noData:"Nessuna ricetta selezionata.",noAllergensRow:"Nessun allergene segnalato",print:"Stampa matrice"},"es-ES":{title:"Matriz de alérgenos",subtitle:"Cruza las recetas seleccionadas con los alérgenos indicados.",allergen:"Alérgeno",recipe:"Receta",present:"Sí",absent:"No",noData:"No hay recetas seleccionadas.",noAllergensRow:"Sin alérgenos señalados",print:"Imprimir matriz"},"pt-BR":{title:"Matriz de alérgenos",subtitle:"Cruze as receitas selecionadas com os alérgenos informados.",allergen:"Alergênico",recipe:"Receita",present:"Sim",absent:"Não",noData:"Nenhuma receita selecionada.",noAllergensRow:"Nenhum alergênico sinalizado",print:"Imprimir matriz"},"de-DE":{title:"Allergenmatrix",subtitle:"Vergleichen Sie ausgewählte Rezepte mit gemeldeten Allergenen.",allergen:"Allergen",recipe:"Rezept",present:"Ja",absent:"Nein",noData:"Keine Rezepte ausgewählt.",noAllergensRow:"Keine Allergene markiert",print:"Matrix drucken"}};function TS(s,t,i,n,a){const o=s.length>0,l=o?t.map(c=>`<th>${c.recipe.title?c.recipe.title:n.recipe}</th>`).join(""):"",r=o?s.map(c=>{const f=t.map(b=>`<td>${new Set(No(b).map(p=>p.toLowerCase())).has(c.toLowerCase())?n.present:n.absent}</td>`).join("");return`<tr><th>${c}</th>${f}</tr>`}).join(""):t.map(c=>`<tr><th>${c.recipe.title||n.recipe}</th><td>${n.noAllergensRow}</td></tr>`).join(""),d=o?`<tr><th>${n.allergen}</th>${l}</tr>`:`<tr><th>${n.recipe}</th><th>${n.allergen}</th></tr>`;return`<!DOCTYPE html>
<html lang="${i}">
<head>
<meta charset="utf-8" />
<title>${n.title}</title>
<style>
  body { font-family: "Inter", sans-serif; margin: 0; padding: 2rem; }
  h1 { text-transform: uppercase; letter-spacing: 0.2em; font-size: 1.4rem; margin-bottom: 0.75rem; }
  p { color: #4b5563; margin-top: 0; margin-bottom: 1.25rem; }
  table { width: 100%; border-collapse: collapse; }
  th, td { border: 1px solid #d1d5db; padding: 0.6rem; text-align: center; font-size: 0.9rem; }
  th { background: #f3f4f6; font-weight: 600; }
  th:first-child { text-align: left; }
</style>
</head>
<body>
  <h1>${n.title}</h1>
  <p>${n.subtitle} — ${a}</p>
  <table>
    <thead>
      ${d}
    </thead>
    <tbody>
      ${r}
    </tbody>
  </table>
</body>
</html>`}function WS({recipes:s,language:t,languageOptions:i}){const n=h.useMemo(()=>qp[t]??qp["en-US"],[t]),[a,o]=h.useState(!1),l=h.useMemo(()=>AS(s),[s]),r=l.length>0,d=h.useMemo(()=>[...s].sort((b,D)=>(b.order??0)-(D.order??0)),[s]),c=h.useMemo(()=>i.find(b=>b.code===t)?.label||t,[t,i]),f=()=>{if(!l.length||!d.length)return;const b=TS(l,d,t,n,c),D=window.open("","_blank");D&&(D.document.write(b),D.document.close(),D.focus(),D.print())};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>o(!0),disabled:d.length===0,className:"flex items-center gap-2",children:[e.jsxDEV(Fg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:209,columnNumber:9},this),n.title]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:202,columnNumber:7},this),e.jsxDEV(ss,{open:a,onOpenChange:o,children:e.jsxDEV(is,{className:"max-w-4xl",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:n.title},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:215,columnNumber:13},this),e.jsxDEV(yi,{children:n.subtitle},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:216,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:214,columnNumber:11},this),d.length===0?e.jsxDEV("div",{className:"py-12 text-center text-sm text-muted-foreground",children:n.noData},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:219,columnNumber:13},this):r?e.jsxDEV("div",{className:"overflow-auto",children:e.jsxDEV("table",{className:"w-full min-w-[480px] border-collapse text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"sticky left-0 bg-background px-3 py-2 text-left font-semibold uppercase tracking-[0.18em]",children:n.allergen},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:227,columnNumber:21},this),d.map(b=>e.jsxDEV("th",{className:"px-3 py-2 text-left font-semibold uppercase tracking-[0.18em]",children:b.recipe.title},b.recipe.id,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:231,columnNumber:23},this))]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:226,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:225,columnNumber:17},this),e.jsxDEV("tbody",{children:l.map(b=>{const D=b.toLowerCase();return e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("th",{className:"sticky left-0 bg-background px-3 py-2 text-left font-medium",children:b},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:245,columnNumber:25},this),d.map(u=>{const p=No(u).map(x=>x.toLowerCase()).includes(D);return e.jsxDEV("td",{className:`px-3 py-2 text-center text-xs font-semibold ${p?"text-red-600":"text-muted-foreground"}`,children:p?n.present:n.absent},`${u.recipe.id}-${b}`,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:253,columnNumber:29},this)})]},b,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:244,columnNumber:23},this)})},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:240,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:224,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:223,columnNumber:13},this):e.jsxDEV("div",{className:"overflow-auto",children:e.jsxDEV("table",{className:"w-full min-w-[420px] border-collapse text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"sticky left-0 bg-background px-3 py-2 text-left font-semibold uppercase tracking-[0.18em]",children:n.recipe},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:274,columnNumber:21},this),e.jsxDEV("th",{className:"px-3 py-2 text-left font-semibold uppercase tracking-[0.18em]",children:n.allergen},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:277,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:273,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:272,columnNumber:17},this),e.jsxDEV("tbody",{children:d.map(b=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("th",{className:"sticky left-0 bg-background px-3 py-2 text-left font-medium",children:b.recipe.title},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:285,columnNumber:23},this),e.jsxDEV("td",{className:"px-3 py-2 text-sm italic text-muted-foreground",children:n.noAllergensRow},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:288,columnNumber:23},this)]},b.recipe.id,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:284,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:282,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:271,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:270,columnNumber:13},this),e.jsxDEV(Li,{children:e.jsxDEV(ne,{variant:"outline",onClick:f,disabled:d.length===0,className:"flex items-center gap-2",children:[e.jsxDEV(Ba,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:304,columnNumber:15},this),n.print]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:298,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:297,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:213,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:212,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergyMatrixDialog.tsx",lineNumber:201,columnNumber:5},this)}const Kp={"en-US":{cookbookTitle:"Cook's Recipe Book",subtitle:"Build a printable package with title page, index, and full recipes.",preparedFor:"Prepared for",generatedOn:"Generated on",index:"Index",ingredients:"Ingredients",instructions:"Instructions",allergens:"Allergens",noAllergens:"No allergens reported",course:"Course",cuisine:"Cuisine",totalTime:"Total Time",yield:"Yield",language:"Language",totalRecipes:"Recipes",generate:"Generate Cookbook",print:"Print Cookbook",download:"Download HTML",empty:"Add recipes to Step 2 to enable the cookbook export."},"fr-FR":{cookbookTitle:"Carnet de Recettes",subtitle:"Créez un dossier imprimable avec page de titre, index et recettes complètes.",preparedFor:"Préparé pour",generatedOn:"Généré le",index:"Index",ingredients:"Ingrédients",instructions:"Instructions",allergens:"Allergènes",noAllergens:"Aucun allergène signalé",course:"Service",cuisine:"Cuisine",totalTime:"Temps total",yield:"Rendement",language:"Langue",totalRecipes:"Recettes",generate:"Générer le carnet",print:"Imprimer le carnet",download:"Télécharger HTML",empty:"Ajoutez des recettes à l’étape 2 pour activer l’export du carnet."},"it-IT":{cookbookTitle:"Ricettario della Cucina",subtitle:"Crea un pacchetto stampabile con copertina, indice e ricette complete.",preparedFor:"Preparato per",generatedOn:"Generato il",index:"Indice",ingredients:"Ingredienti",instructions:"Istruzioni",allergens:"Allergeni",noAllergens:"Nessun allergene segnalato",course:"Portata",cuisine:"Cucina",totalTime:"Tempo totale",yield:"Resa",language:"Lingua",totalRecipes:"Ricette",generate:"Genera ricettario",print:"Stampa ricettario",download:"Scarica HTML",empty:"Aggiungi ricette al passaggio 2 per abilitare l’esportazione del ricettario."},"es-ES":{cookbookTitle:"Libro de Recetas",subtitle:"Crea un paquete imprimible con portada, índice y recetas completas.",preparedFor:"Preparado para",generatedOn:"Generado el",index:"Índice",ingredients:"Ingredientes",instructions:"Instrucciones",allergens:"Alérgenos",noAllergens:"Sin alérgenos registrados",course:"Servicio",cuisine:"Cocina",totalTime:"Tiempo total",yield:"Rendimiento",language:"Idioma",totalRecipes:"Recetas",generate:"Generar libro",print:"Imprimir libro",download:"Descargar HTML",empty:"Agrega recetas al paso 2 para habilitar la exportación del libro."},"pt-BR":{cookbookTitle:"Livro de Receitas",subtitle:"Crie um pacote imprimível com capa, índice e receitas completas.",preparedFor:"Preparado para",generatedOn:"Gerado em",index:"Índice",ingredients:"Ingredientes",instructions:"Instruções",allergens:"Alergênicos",noAllergens:"Nenhum alergênico informado",course:"Serviço",cuisine:"Culinária",totalTime:"Tempo total",yield:"Rendimento",language:"Idioma",totalRecipes:"Receitas",generate:"Gerar livro",print:"Imprimir livro",download:"Baixar HTML",empty:"Adicione receitas à etapa 2 para habilitar a exportação do livro."},"de-DE":{cookbookTitle:"Rezeptbuch",subtitle:"Erstelle ein druckbares Paket mit Titelseite, Index und vollständigen Rezepten.",preparedFor:"Erstellt für",generatedOn:"Erstellt am",index:"Inhaltsverzeichnis",ingredients:"Zutaten",instructions:"Anweisungen",allergens:"Allergene",noAllergens:"Keine Allergene gemeldet",course:"Gang",cuisine:"Küche",totalTime:"Gesamtzeit",yield:"Ertrag",language:"Sprache",totalRecipes:"Rezepte",generate:"Rezeptbuch erstellen",print:"Rezeptbuch drucken",download:"HTML herunterladen",empty:"Füge Rezepte in Schritt 2 hinzu, um den Rezeptbuch-Export zu aktivieren."}};function pi(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function LS(s,t,i,n,a){const o=[...s].sort((c,f)=>(c.order??0)-(f.order??0)),l=c=>{try{return new Date(c).toLocaleDateString(i)}catch{return c}},r=o.map((c,f)=>`<li><span>${pi(c.recipe.title||n.cookbookTitle)}</span><span>${f+3}</span></li>`).join(""),d=o.map((c,f)=>{const b=`recipe-${f+1}`,D=c.recipe.description?`<p class="description">${pi(c.recipe.description)}</p>`:"",u=Array.isArray(c.recipe.ingredients)?c.recipe.ingredients.map(I=>`<li>${pi(String(I))}</li>`).join(""):"",p=Array.isArray(c.recipe.instructions)?c.recipe.instructions.map(I=>`<li>${pi(String(I))}</li>`).join(""):"",x=No(c),S=x.length>0?`<ul class="allergen-list">${x.map(I=>`<li>${pi(I)}</li>`).join("")}</ul>`:`<p class="muted">${n.noAllergens}</p>`,m=[];c.recipe.course&&m.push(`${n.course}: ${pi(c.recipe.course)}`),c.recipe.cuisine&&m.push(`${n.cuisine}: ${pi(c.recipe.cuisine)}`);const v=(c.recipe.prepTime??0)+(c.recipe.cookTime??0);v>0&&m.push(`${n.totalTime}: ${v} min`);const g=c.recipe.extra??{},N=g?.yieldQty??g?.portionCount,w=g?.yieldUnit??g?.portionUnit;N&&m.push(`${n.yield}: ${N}${w?` ${pi(String(w))}`:""}`);const A=m.length?`<p class="meta">${m.join(" • ")}</p>`:"";return`<section id="${b}" class="recipe-section">
        <header>
          <h2>${pi(c.recipe.title||`${n.cookbookTitle} ${f+1}`)}</h2>
          ${A}
        </header>
        ${D}
        <div class="columns">
          <div class="column">
            <h3>${n.ingredients}</h3>
            <ul class="bullet-list">${u}</ul>
          </div>
          <div class="column">
            <h3>${n.instructions}</h3>
            <ol class="numbered-list">${p}</ol>
          </div>
        </div>
        <div class="allergens">
          <h3>${n.allergens}</h3>
          ${S}
        </div>
      </section>`}).join("");return`<!DOCTYPE html>
<html lang="${i}">
<head>
  <meta charset="utf-8" />
  <title>${pi(t.title||n.cookbookTitle)}</title>
  <style>
    body { font-family: "Inter", "Helvetica", sans-serif; color: #111827; background: #f8fafc; margin: 0; }
    .page { page-break-after: always; padding: 2.5rem 2rem; background: white; min-height: 100vh; box-sizing: border-box; }
    .title-page { display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 1.2rem; text-align: center; }
    .title-page h1 { font-size: 2.75rem; letter-spacing: 0.12em; text-transform: uppercase; margin: 0; }
    .title-page .subtitle { font-size: 1rem; color: #4b5563; letter-spacing: 0.35em; text-transform: uppercase; }
    .title-page .meta { font-size: 0.95rem; color: #374151; }
    .index-page h2 { font-size: 1.4rem; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.2em; }
    .index-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 0.65rem; }
    .index-list li { display: flex; justify-content: space-between; font-size: 0.95rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.4rem; }
    .recipe-section { page-break-after: always; padding: 2rem 1.5rem; }
    .recipe-section header h2 { font-size: 1.8rem; margin: 0; text-transform: uppercase; letter-spacing: 0.08em; }
    .recipe-section .meta { color: #6b7280; font-size: 0.85rem; margin-top: 0.4rem; }
    .recipe-section .description { margin-top: 1rem; font-size: 1rem; color: #1f2937; }
    .columns { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
    .columns h3 { font-size: 1rem; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.18em; }
    .bullet-list, .numbered-list { margin: 0; padding-left: 1.25rem; font-size: 0.95rem; display: grid; gap: 0.4rem; }
    .numbered-list { counter-reset: step; }
    .numbered-list li { counter-increment: step; position: relative; padding-left: 0.4rem; }
    .allergens { margin-top: 1.75rem; }
    .allergen-list { display: flex; flex-wrap: wrap; gap: 0.5rem; list-style: none; padding: 0; margin: 0; }
    .allergen-list li { background: #fee2e2; color: #991b1b; padding: 0.35rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; }
    .muted { color: #6b7280; font-size: 0.9rem; }
    @media print {
      body { background: white; }
      .page { box-shadow: none; }
    }
  </style>
</head>
<body>
  <section class="page title-page">
    <h1>${pi(n.cookbookTitle)}</h1>
    <div class="subtitle">${pi(t.title||n.cookbookTitle)}</div>
    <p class="meta">${n.preparedFor} ${pi(t.companyName||"")}${t.outletName?` • ${pi(t.outletName)}`:""}</p>
    <p class="meta">${n.language}: ${pi(a)}</p>
    <p class="meta">${n.generatedOn} ${l(new Date().toISOString())}</p>
    <p class="meta">${n.totalRecipes}: ${o.length}</p>
  </section>
  <section class="page index-page">
    <h2>${n.index}</h2>
    <ul class="index-list">${r}</ul>
  </section>
  ${d}
</body>
</html>`}function Yp(s){s&&URL.revokeObjectURL(s)}function MS({recipes:s,language:t,onLanguageChange:i,languageOptions:n,note:a}){const o=h.useMemo(()=>Kp[t]??Kp["en-US"],[t]),[l,r]=h.useState(!1),[d,c]=h.useState(null),[f,b]=h.useState(null);h.useEffect(()=>()=>Yp(f),[f]);const D=h.useMemo(()=>n.find(S=>S.code===t)?.label||t,[t,n]),u=async()=>{if(s.length){r(!0);try{const S=LS(s,a,t,o,D);Yp(f);const m=new Blob([S],{type:"text/html"});c(S),b(URL.createObjectURL(m))}finally{r(!1)}}},p=()=>{if(!d)return;const S=window.open("","_blank");S&&(S.document.write(d),S.document.close(),S.focus(),S.print())},x=()=>{if(!f)return;const S=document.createElement("a");S.href=f,S.download=`cookbook-${t}-${Date.now()}.html`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return e.jsxDEV("div",{className:"space-y-3 rounded-2xl border border-white/60 bg-white/80 p-4 shadow-sm backdrop-blur-md dark:border-cyan-500/25 dark:bg-slate-950/70",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-semibold uppercase tracking-[0.25em]",children:o.cookbookTitle},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:383,columnNumber:11},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:o.subtitle},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:382,columnNumber:9},this),e.jsxDEV(cs,{value:t,onValueChange:S=>i(S),children:[e.jsxDEV(rs,{className:"w-[160px]",children:e.jsxDEV(ds,{placeholder:o.language},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:392,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:391,columnNumber:11},this),e.jsxDEV(os,{children:n.map(S=>e.jsxDEV(yt,{value:S.code,children:[S.flag," ",S.label]},S.code,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:396,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:394,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:390,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:381,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(ne,{onClick:u,disabled:l||s.length===0,className:"flex items-center gap-2",children:[e.jsxDEV(Bg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:409,columnNumber:11},this),l?`${o.generate}…`:o.generate]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:404,columnNumber:9},this),e.jsxDEV(ne,{variant:"outline",onClick:p,disabled:!d,className:"flex items-center gap-2",children:[e.jsxDEV(Ba,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:418,columnNumber:11},this),o.print]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:412,columnNumber:9},this),e.jsxDEV(ne,{variant:"outline",onClick:x,disabled:!f,className:"flex items-center gap-2",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:427,columnNumber:11},this),o.download]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:421,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:403,columnNumber:7},this),s.length===0&&e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:o.empty},void 0,!1,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:432,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipeBookGenerator.tsx",lineNumber:380,columnNumber:5},this)}function Da(s,t,i){const n=typeof s=="string"?new Blob([s],{type:i}):s;kx(n,t)}function Si(s,t,i){return Oc[t]?.[s]??i}function _S(s,t){const i={title:s.title||Si("export.serverNotes.defaultTitle",t.language,"Server Notes"),company:s.companyName,outlet:s.outletName,distributionDate:s.distributionNotes,recipes:s.selectedRecipes,layout:s.layout,colorScheme:s.colorScheme,language:t.language,exportedAt:new Date().toISOString()};Da(JSON.stringify(i,null,2),`${t.filename}.json`,"application/json")}function OS(s,t){const i=[];i.push(Si("export.serverNotes.csvTitle",t.language,"Server Notes Export")),i.push(`${Si("export.common.title",t.language,"Title")},${s.title||Si("common.untitled",t.language,"Untitled")}`),i.push(`${Si("export.common.company",t.language,"Company")},${s.companyName}`),i.push(`${Si("export.common.outlet",t.language,"Outlet")},${s.outletName}`),i.push(`${Si("export.common.distributionDate",t.language,"Distribution Date")},${s.distributionNotes}`),i.push(""),i.push(Si("export.common.recipes",t.language,"Recipes")),i.push(`${Si("export.common.recipeName",t.language,"Recipe Name")},${Si("export.common.course",t.language,"Course")},${Si("export.common.cuisine",t.language,"Cuisine")},${Si("export.common.portions",t.language,"Portions")}`),s.selectedRecipes.forEach(n=>{const a=n.recipe,o=a.course||"",l=a.cuisine||"";i.push(`"${a.title}","${o}","${l}",""`)}),Da(i.join(`
`),`${t.filename}.csv`,"text/csv;charset=utf-8")}function FS(s,t){const i={title:Si("export.cooksRecipes.defaultTitle",t.language,"Cook's Recipe Book"),language:t.language,totalRecipes:s.length,recipes:s,exportedAt:new Date().toISOString()};Da(JSON.stringify(i,null,2),`${t.filename}.json`,"application/json")}function BS(s,t){const i=[];i.push("Cook's Recipe Book"),i.push(`Total Recipes,${s.length}`),i.push(""),i.push("Recipe Name,Prep Time,Cook Time,Yield,Allergens"),s.forEach(n=>{const a=n.prepTime||"",o=n.cookTime||"",l=n.yield||"",r=n.allergens?.join("; ")||"";i.push(`"${n.name}","${a}","${o}","${l}","${r}"`)}),Da(i.join(`
`),`${t.filename}.csv`,"text/csv;charset=utf-8")}function US(s,t){const i={title:"Allergen Sheet",language:t.language,totalItems:s.length,items:s,exportedAt:new Date().toISOString()};Da(JSON.stringify(i,null,2),`${t.filename}.json`,"application/json")}function $S(s,t){const i=[];i.push("Allergen Sheet"),i.push(`Total Items,${s.length}`),i.push(""),i.push("Item Name,Course,Dish,Allergens"),s.forEach(n=>{const a=n.course||"",o=n.dish||"",l=n.allergens.join("; ");i.push(`"${n.name}","${a}","${o}","${l}"`)}),Da(i.join(`
`),`${t.filename}.csv`,"text/csv;charset=utf-8")}function zS({notes:s,open:t,onOpenChange:i}){const{t:n,language:a}=Vs(),[o,l]=h.useState("json"),[r,d]=h.useState(!1),c=async()=>{if(s){d(!0);try{const f=`server-notes-${s.title||"export"}-${new Date().toISOString().split("T")[0]}`;o==="json"?_S(s,{filename:f,format:o,language:a}):o==="csv"&&OS(s,{filename:f,format:o,language:a}),i(!1)}finally{d(!1)}}};return e.jsxDEV(ss,{open:t,onOpenChange:i,children:e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:n("export.serverNotes.title","Export Server Notes")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:68,columnNumber:11},this),e.jsxDEV(yi,{children:n("export.serverNotes.description","Choose a format and export your server notes")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:67,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:n("export.serverNotes.format","Format")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:79,columnNumber:13},this),e.jsxDEV(cs,{value:o,onValueChange:f=>l(f),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:84,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:83,columnNumber:15},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"json",children:n("export.serverNotes.json","JSON")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:87,columnNumber:17},this),e.jsxDEV(yt,{value:"csv",children:n("export.serverNotes.csv","CSV")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:90,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:86,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV("div",{className:"bg-blue-50 p-3 rounded text-sm text-blue-900",children:[o==="json"&&n("export.serverNotes.jsonDescription","Export as structured JSON data"),o==="csv"&&n("export.serverNotes.csvDescription","Export as comma-separated values")]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:97,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>i(!1),children:n("common.cancel","Cancel")},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV(ne,{onClick:c,disabled:r,className:"gap-2",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:111,columnNumber:15},this),r?n("common.exporting","Exporting..."):n("export.serverNotes.button","Export")]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:102,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:77,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:66,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/ServerNotesExportDialog.tsx",lineNumber:65,columnNumber:5},this)}function GS({recipes:s,open:t,onOpenChange:i}){const{t:n,language:a}=Vs(),[o,l]=h.useState("json"),[r,d]=h.useState(!1),c=async()=>{if(s.length!==0){d(!0);try{const f=`cooks-recipes-${new Date().toISOString().split("T")[0]}`;o==="json"?FS(s,{filename:f,format:o,language:a}):o==="csv"&&BS(s,{filename:f,format:o,language:a}),i(!1)}finally{d(!1)}}};return e.jsxDEV(ss,{open:t,onOpenChange:i,children:e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:n("export.cooksRecipes.title","Export Cook's Recipes")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(yi,{children:n("export.cooksRecipes.description","Choose a format and export your cook's recipes")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:68,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:n("export.cooksRecipes.format","Format")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV(cs,{value:o,onValueChange:f=>l(f),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:83,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:82,columnNumber:15},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"json",children:n("export.cooksRecipes.json","JSON")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:86,columnNumber:17},this),e.jsxDEV(yt,{value:"csv",children:n("export.cooksRecipes.csv","CSV")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:89,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[n("export.cooksRecipes.summary","Recipes to export"),": ",s.length]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("div",{className:"bg-blue-50 p-3 rounded text-sm text-blue-900",children:[o==="json"&&n("export.cooksRecipes.jsonDescription","Export as structured JSON data with all recipe details"),o==="csv"&&n("export.cooksRecipes.csvDescription","Export as comma-separated values for spreadsheets")]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>i(!1),children:n("common.cancel","Cancel")},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:107,columnNumber:13},this),e.jsxDEV(ne,{onClick:c,disabled:r||s.length===0,className:"gap-2",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:115,columnNumber:15},this),r?n("common.exporting","Exporting..."):n("export.cooksRecipes.button","Export")]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:110,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/CooksRecipesExportDialog.tsx",lineNumber:64,columnNumber:5},this)}function HS({items:s,open:t,onOpenChange:i}){const{t:n,language:a}=Vs(),[o,l]=h.useState("json"),[r,d]=h.useState(!1),c=async()=>{if(s.length!==0){d(!0);try{const f=`allergen-sheet-${new Date().toISOString().split("T")[0]}`;o==="json"?US(s,{filename:f,format:o,language:a}):o==="csv"&&$S(s,{filename:f,format:o,language:a}),i(!1)}finally{d(!1)}}};return e.jsxDEV(ss,{open:t,onOpenChange:i,children:e.jsxDEV(is,{children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:n("export.allergenSheet.title","Export Allergen Sheet")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV(yi,{children:n("export.allergenSheet.description","Choose a format and export your allergen sheet")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:68,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:n("export.allergenSheet.format","Format")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV(cs,{value:o,onValueChange:f=>l(f),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:83,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:82,columnNumber:15},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"json",children:n("export.allergenSheet.json","JSON")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:86,columnNumber:17},this),e.jsxDEV(yt,{value:"csv",children:n("export.allergenSheet.csv","CSV")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:89,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:85,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:[n("export.allergenSheet.summary","Items to export"),": ",s.length]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("div",{className:"bg-amber-50 p-3 rounded text-sm text-amber-900",children:[o==="json"&&n("export.allergenSheet.jsonDescription","Export as structured JSON data for system integration"),o==="csv"&&n("export.allergenSheet.csvDescription","Export as comma-separated values for spreadsheets and reports")]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>i(!1),children:n("common.cancel","Cancel")},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:107,columnNumber:13},this),e.jsxDEV(ne,{onClick:c,disabled:r||s.length===0,className:"gap-2",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:115,columnNumber:15},this),r?n("common.exporting","Exporting..."):n("export.allergenSheet.button","Export")]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:110,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:65,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/AllergenSheetExportDialog.tsx",lineNumber:64,columnNumber:5},this)}const Qp="serverNotes:saved",Zp="serverNotes:settings",qS="serverNotes:presetSelection",KS=[{titleKey:"serverNotes.steps.configure.title",descriptionKey:"serverNotes.steps.configure.description",icon:oa},{titleKey:"serverNotes.steps.select.title",descriptionKey:"serverNotes.steps.select.description",icon:Ug},{titleKey:"serverNotes.steps.preview.title",descriptionKey:"serverNotes.steps.preview.description",icon:$g}];function YS(){const{recipes:s}=ln(),{toast:t}=Ci(),{language:i,setLanguage:n,options:a}=md(),{t:o}=Vs(),l=h.useMemo(()=>Mu(Ld[0],Yr[0]),[]),[r,d]=h.useState(l),[c,f]=h.useState([]),[b,D]=h.useState(0),[u,p]=h.useState(!1),[x,S]=h.useState(!1),[m,v]=h.useState(!1),g=h.useRef(null);h.useEffect(()=>{try{const k=localStorage.getItem(Qp);if(k){const Q=JSON.parse(k);f(Q)}}catch(k){console.warn("Failed to read server notes",k)}try{const k=localStorage.getItem(Zp);if(k){const Q=JSON.parse(k);d(J=>({...J,companyName:Q.companyName||J.companyName,outletName:Q.outletName||J.outletName,logos:Q.logos||J.logos}))}}catch(k){console.warn("Failed to read server notes settings",k)}},[l]),h.useEffect(()=>{localStorage.setItem(Qp,JSON.stringify(c))},[c]);const N=k=>{d(Q=>({...Q,...k,updatedAt:new Date().toISOString()}))},w=k=>{const Q=k.map((J,O)=>({...J,order:O}));d(J=>({...J,selectedRecipes:Q,updatedAt:new Date().toISOString()}))},A=k=>{localStorage.setItem(Zp,JSON.stringify({companyName:k.companyName,outletName:k.outletName,logos:k.logos}))},I=()=>{let k=null;d(Q=>(k={...Mu(Q.layout,Q.colorScheme),companyName:Q.companyName,outletName:Q.outletName,logos:[...Q.logos],orientation:Q.orientation,pageFormat:Q.pageFormat,cardsPerPage:Q.cardsPerPage},k)),k&&A(k),D(Q=>Q+1),t({title:o("serverNotes.toast.new.title"),description:o("serverNotes.toast.new.description")})},B=k=>{const J={...k.id?k:{...k,id:`note-${Date.now()}`},updatedAt:new Date().toISOString()};f(O=>{const me=O.findIndex(fe=>fe.id===J.id);if(me===-1)return[J,...O];const de=[...O];return de[me]=J,de}),d(J),A(J)},W=k=>{d(k),A(k),D(J=>J+1);const Q=k.title||o("common.untitled");t({title:o("serverNotes.toast.loaded.title"),description:o("serverNotes.toast.loaded.description",void 0,{title:Q})})},se=k=>{f(Q=>Q.filter(J=>J.id!==k)),t({title:o("serverNotes.toast.deleted.title"),description:o("serverNotes.toast.deleted.description")})};h.useEffect(()=>{A(r)},[r.companyName,r.outletName,r.logos]),h.useEffect(()=>{if(typeof window>"u"||g.current===b)return;let k=[];try{const O=window.sessionStorage.getItem(qS);if(!O){g.current=b;return}const me=JSON.parse(O);me&&Array.isArray(me.ids)&&(k=me.ids.filter(de=>typeof de=="string"&&de.length>0))}catch(O){console.warn("Failed to read pending recipe selection",O),g.current=b;return}if(!k.length){g.current=b;return}const Q=new Map;for(const O of k){const me=s.find(de=>de.id===O);me&&Q.set(O,me)}if(Q.size===0)return;let J=0;d(O=>{const me=new Set(O.selectedRecipes.map(ae=>ae.recipe.id)),de=O.selectedRecipes.length,fe=[];return k.forEach(ae=>{const L=Q.get(ae);!L||me.has(ae)||fe.push({recipe:L,order:de+fe.length})}),fe.length?(J=fe.length,{...O,selectedRecipes:[...O.selectedRecipes,...fe],updatedAt:new Date().toISOString()}):O}),Q.size===k.length&&(g.current=b),J>0&&t({title:o("serverNotes.toast.recipesAdded.title"),description:J===1?o("serverNotes.toast.recipesAdded.one"):o("serverNotes.toast.recipesAdded.other",void 0,{count:J})})},[s,b,t]);const ie=h.useMemo(()=>[...r.selectedRecipes].sort((k,Q)=>(k.order??0)-(Q.order??0)),[r.selectedRecipes]),R="overflow-hidden rounded-3xl border border-white/70 bg-white/80 shadow-[0_32px_90px_-48px_rgba(15,23,42,0.35)] backdrop-blur-xl transition-shadow dark:border-cyan-500/20 dark:bg-slate-950/70 dark:shadow-[0_0_70px_rgba(56,189,248,0.35)]",F=h.useMemo(()=>a.find(k=>k.code===i)?.label||i,[i,a]);return e.jsxDEV("div",{className:"min-h-screen bg-background",children:[e.jsxDEV("div",{className:"mx-auto w-full max-w-[1600px] px-4 py-8 sm:px-6 lg:px-10 xl:px-14",children:e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("header",{className:"flex flex-wrap items-center justify-between gap-2 border-b pb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV(Ya,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:317,columnNumber:15},this),e.jsxDEV("div",{className:"leading-tight",children:[e.jsxDEV("h1",{className:"text-lg font-semibold",children:o("serverNotes.heading")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:319,columnNumber:17},this),e.jsxDEV("p",{className:"text-[13px] text-muted-foreground",children:o("serverNotes.subtitle")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:320,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:318,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:316,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:I,className:"gap-1.5",children:[e.jsxDEV(Js,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:332,columnNumber:17},this)," ",o("serverNotes.actions.newDocument")]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:326,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"gap-1.5",children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:340,columnNumber:17},this)," ",o("export.serverNotes.button","Export")]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:334,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>S(!0),className:"gap-1.5",disabled:ie.length===0,children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:349,columnNumber:17},this)," ",o("export.cooksRecipes.button","Export Recipes")]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:342,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"gap-1.5",disabled:ie.length===0,children:[e.jsxDEV(Ni,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:358,columnNumber:17},this)," ",o("export.allergenSheet.button","Export Allergens")]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:351,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:325,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:315,columnNumber:11},this),e.jsxDEV("div",{className:`${R} p-4 sm:p-5 xl:p-6`,children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:[e.jsxDEV("div",{className:"leading-tight",children:[e.jsxDEV("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:o("serverNotes.helper.label")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:366,columnNumber:17},this),e.jsxDEV("h2",{className:"text-base font-semibold text-foreground",children:o("serverNotes.helper.title")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:369,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:365,columnNumber:15},this),e.jsxDEV(et,{variant:"secondary",className:"rounded-full px-2.5 py-0.5 text-[11px] uppercase tracking-[0.25em]",children:o("serverNotes.helper.badge")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:373,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:364,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 grid gap-3 md:grid-cols-3 xl:gap-4 2xl:gap-6",children:KS.map((k,Q)=>{const J=k.icon;return e.jsxDEV("div",{className:"flex items-start gap-2.5 rounded-2xl border border-white/60 bg-white/70 p-3 shadow-sm backdrop-blur-sm transition-colors dark:border-cyan-500/30 dark:bg-slate-950/60",children:[e.jsxDEV("span",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full border border-white/80 bg-white text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm dark:border-cyan-500/40 dark:bg-slate-900 dark:text-cyan-200",children:Q+1},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:388,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[e.jsxDEV(J,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:393,columnNumber:25},this),e.jsxDEV("span",{children:o(k.titleKey)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:394,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:392,columnNumber:23},this),e.jsxDEV("p",{className:"text-xs leading-relaxed text-muted-foreground",children:o(k.descriptionKey)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:396,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:391,columnNumber:21},this)]},k.titleKey,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:384,columnNumber:19},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:380,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:363,columnNumber:11},this),e.jsxDEV("section",{className:"grid items-stretch gap-5 lg:grid-cols-12 xl:gap-6 2xl:gap-8",children:[e.jsxDEV($e,{className:`${R} flex h-full flex-col lg:col-span-4 xl:col-span-4`,children:[e.jsxDEV(Ke,{className:"border-b border-white/70 px-4 py-3.5 dark:border-cyan-500/25",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(et,{variant:"outline",className:"rounded-full px-2.5 py-0.5 text-[11px] font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:`${o("serverNotes.steps.step")} 1`},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:416,columnNumber:21},this),e.jsxDEV(Ze,{className:"text-sm font-semibold",children:o("serverNotes.panels.configuration")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:422,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:415,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:414,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:413,columnNumber:15},this),e.jsxDEV(Ge,{className:"flex-1 space-y-3.5 px-4 pb-4 pt-3 lg:max-h-[calc(100vh-220px)] lg:overflow-y-auto",children:e.jsxDEV(by,{config:r,onUpdate:N},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:427,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:426,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:410,columnNumber:13},this),e.jsxDEV($e,{className:`${R} flex h-full flex-col lg:col-span-4 xl:col-span-4`,children:[e.jsxDEV(Ke,{className:"border-b border-white/70 px-4 py-3.5 dark:border-cyan-500/25",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(et,{variant:"outline",className:"rounded-full px-2.5 py-0.5 text-[11px] font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:`${o("serverNotes.steps.step")} 2`},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:440,columnNumber:21},this),e.jsxDEV(Ze,{className:"text-sm font-semibold",children:o("serverNotes.panels.recipes")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:446,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:439,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:438,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:437,columnNumber:15},this),e.jsxDEV(Ge,{className:"flex-1 space-y-3.5 px-4 pb-4 pt-3 lg:max-h-[calc(100vh-220px)] lg:overflow-y-auto",children:e.jsxDEV(ky,{availableRecipes:s,selectedRecipes:ie,onRecipesChange:w},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:451,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:434,columnNumber:13},this),e.jsxDEV($e,{className:`${R} flex h-full flex-col lg:col-span-4 xl:col-span-4`,children:[e.jsxDEV(Ke,{className:"border-b border-white/70 px-4 py-3.5 dark:border-cyan-500/25",children:e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2.5",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(et,{variant:"outline",className:"rounded-full px-2.5 py-0.5 text-[11px] font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:`${o("serverNotes.steps.step")} 3`},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:465,columnNumber:21},this),e.jsxDEV(Ze,{className:"text-sm font-semibold",children:o("serverNotes.panels.preview")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:471,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:464,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:463,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:462,columnNumber:15},this),e.jsxDEV(Ge,{className:"flex flex-1 flex-col space-y-3.5 px-4 pb-4 pt-3",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:[e.jsxDEV("span",{children:o("serverNotes.preview.languageLabel")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:478,columnNumber:21},this),e.jsxDEV(cs,{value:i,onValueChange:k=>n(k),children:[e.jsxDEV(rs,{className:"h-8 w-[160px] text-[11px]",children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:484,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:483,columnNumber:23},this),e.jsxDEV(os,{children:a.map(k=>e.jsxDEV(yt,{value:k.code,children:[k.flag," ",k.label]},k.code,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:488,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:479,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:477,columnNumber:19},this),e.jsxDEV(WS,{recipes:ie,language:i,languageOptions:a},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:495,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:476,columnNumber:17},this),e.jsxDEV(Zc,{layout:r.layout,color:r.colorScheme,pageFormat:r.pageFormat,variant:"mini"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:501,columnNumber:17},this),e.jsxDEV(vS,{serverNote:r,onSave:B,language:i,languageName:F},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:507,columnNumber:17},this),e.jsxDEV(MS,{recipes:ie,language:i,onLanguageChange:k=>n(k),languageOptions:a,note:r},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:513,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:475,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:459,columnNumber:13},this)]},b,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:406,columnNumber:11},this),e.jsxDEV("section",{children:[e.jsxDEV("div",{className:"mb-3 flex items-center gap-2 text-muted-foreground",children:[e.jsxDEV(zg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:526,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm font-medium text-foreground",children:o("serverNotes.saved.heading")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:527,columnNumber:15},this),c.length>0&&e.jsxDEV(et,{variant:"secondary",children:c.length},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:531,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:525,columnNumber:13},this),e.jsxDEV("div",{className:"grid items-stretch gap-6 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4",children:[c.map(k=>e.jsxDEV($e,{className:`${R} flex h-full flex-col hover:shadow-[0_38px_110px_-60px_rgba(15,23,42,0.45)]`,children:[e.jsxDEV(Ke,{className:"border-b border-white/70 px-6 py-4 dark:border-cyan-500/25",children:e.jsxDEV(Ze,{className:"flex items-center justify-between text-base",children:[e.jsxDEV("span",{className:"line-clamp-1",children:k.title||o("common.untitled")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:542,columnNumber:23},this),e.jsxDEV(et,{variant:"outline",children:k.selectedRecipes.length===1?o("serverNotes.saved.badge.recipes.one"):o("serverNotes.saved.badge.recipes.other",void 0,{count:k.selectedRecipes.length})},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:545,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:541,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:540,columnNumber:19},this),e.jsxDEV(Ge,{className:"flex flex-1 flex-col justify-between space-y-4 px-6 pb-6 pt-4 text-sm",children:[e.jsxDEV("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:o("serverNotes.saved.labels.company")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:557,columnNumber:25},this)," ",k.companyName||"—"]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:556,columnNumber:23},this),k.outletName&&e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:o("serverNotes.saved.labels.outlet")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:561,columnNumber:27},this)," ",k.outletName]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:560,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:o("serverNotes.saved.labels.distribution")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:565,columnNumber:25},this)," ",new Date(k.distributionDate).toLocaleDateString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:564,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:o("serverNotes.saved.labels.layout")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:569,columnNumber:25},this)," ",k.layout.name]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:568,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:o("serverNotes.saved.labels.updated")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:572,columnNumber:25},this)," ",new Date(k.updatedAt).toLocaleDateString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:571,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:555,columnNumber:21},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ne,{size:"sm",className:"flex-1",onClick:()=>W(k),children:o("serverNotes.saved.actions.loadEdit")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:577,columnNumber:23},this),k.docxDataUrl&&e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>{const Q=document.createElement("a");Q.href=k.docxDataUrl,Q.download=`${k.title||"server-notes"}.docx`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},children:o("serverNotes.saved.actions.download")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:585,columnNumber:25},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>se(k.id),className:"text-red-600",children:o("serverNotes.saved.actions.delete")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:600,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:576,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:554,columnNumber:19},this)]},k.id,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:536,columnNumber:17},this)),c.length===0&&e.jsxDEV("div",{className:"col-span-full rounded-3xl border border-dashed border-white/70 bg-white/40 py-12 text-center text-sm text-muted-foreground shadow-inner backdrop-blur-sm dark:border-cyan-500/25 dark:bg-slate-950/40",children:o("serverNotes.saved.empty")},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:613,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:534,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:524,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:314,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:313,columnNumber:7},this),e.jsxDEV(zS,{notes:r,open:u,onOpenChange:p},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:622,columnNumber:7},this),e.jsxDEV(GS,{recipes:ie.map(k=>({name:k.recipe.title||"Untitled",ingredients:k.recipe.ingredients||[],instructions:(k.recipe.instructions||[]).join(`
`),cookTime:k.recipe.cookTime?.toString(),prepTime:k.recipe.prepTime?.toString(),yield:k.recipe.description,allergens:[]})),open:x,onOpenChange:S},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:628,columnNumber:7},this),e.jsxDEV(HS,{items:ie.map(k=>({name:k.recipe.title||"Untitled",allergens:[],course:k.recipe.course,dish:k.recipe.description})),open:m,onOpenChange:v},void 0,!1,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:642,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/server-notes/index.tsx",lineNumber:312,columnNumber:5},this)}const IN=Mf("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),QS=h.forwardRef(({className:s,variant:t,size:i,...n},a)=>e.jsxDEV(ch,{ref:a,className:je(IN({variant:t,size:i,className:s})),...n},void 0,!1,{fileName:"/app/code/client/components/ui/toggle.tsx",lineNumber:34,columnNumber:3},void 0));QS.displayName=ch.displayName;const AN=h.createContext({size:"default",variant:"default"}),TN=h.forwardRef(({className:s,variant:t,size:i,children:n,...a},o)=>e.jsxDEV(dh,{ref:o,className:je("flex items-center justify-center gap-1",s),...a,children:e.jsxDEV(AN.Provider,{value:{variant:t,size:i},children:n},void 0,!1,{fileName:"/app/code/client/components/ui/toggle-group.tsx",lineNumber:25,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/toggle-group.tsx",lineNumber:20,columnNumber:3},void 0));TN.displayName=dh.displayName;const Jn=h.forwardRef(({className:s,children:t,variant:i,size:n,...a},o)=>{const l=h.useContext(AN);return e.jsxDEV(uh,{ref:o,className:je(IN({variant:l.variant||i,size:l.size||n}),s),...a,children:t},void 0,!1,{fileName:"/app/code/client/components/ui/toggle-group.tsx",lineNumber:41,columnNumber:5},void 0)});Jn.displayName=uh.displayName;const Xp=864e5,rd=new Intl.DateTimeFormat(void 0,{dateStyle:"medium"}),Jp={high:0,medium:1,low:2},ef="operationsDocs.pinned.v1";function ZS(){const{toast:s}=Ci(),[t,i]=h.useState(""),[n,a]=h.useState([]),[o,l]=h.useState("all"),[r,d]=h.useState("next-review"),[c,f]=h.useState(()=>{if(typeof window>"u")return[];try{const R=window.localStorage.getItem(ef);if(!R)return[];const F=JSON.parse(R);return Array.isArray(F)?F.filter(k=>typeof k=="string"):[]}catch{return[]}}),[b,D]=h.useState(null);h.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(ef,JSON.stringify(c))},[c]);const u=h.useMemo(()=>cu.map(XS),[]),p=h.useMemo(()=>new Set(c),[c]),x=h.useMemo(()=>Array.from(new Set(cu.map(R=>R.category))).sort((R,F)=>R.localeCompare(F)),[]),S=h.useMemo(()=>{const R=new Map;return u.forEach(F=>{R.set(F.doc.category,(R.get(F.doc.category)||0)+1)}),R},[u]),m=h.useMemo(()=>t3(u),[u]),v=h.useMemo(()=>{const R=t.trim().toLowerCase();return u.filter(F=>n.length&&!n.includes(F.doc.category)||o==="attention"&&F.status.id==="on-track"||o!=="all"&&o!=="attention"&&F.status.id!==o?!1:R?[F.doc.title,F.doc.docType,F.doc.summary,F.doc.owner,F.doc.category,F.doc.tags.join(" "),F.doc.linkedSystems.join(" ")].join(" ").toLowerCase().includes(R):!0)},[u,t,n,o]),g=h.useMemo(()=>{const R=[...v];return R.sort((F,k)=>s3(F,k,r,p)),R},[v,r,p]);h.useEffect(()=>{if(!g.length){b!==null&&D(null);return}(!b||!g.some(R=>R.doc.id===b))&&D(g[0].doc.id)},[g,b]);const N=h.useMemo(()=>g.find(R=>R.doc.id===b)??null,[g,b]),w=h.useMemo(()=>u.filter(R=>R.status.id!=="on-track").length,[u]),A=R=>{a(F=>F.includes(R)?F.filter(k=>k!==R):[...F,R])},I=()=>{i(""),a([]),l("all")},B=R=>{f(F=>F.includes(R)?F.filter(k=>k!==R):[R,...F])},W=R=>{s({title:"Export queued",description:`${R.title} export has been added to the downloads tray.`})},se=R=>{s({title:"Share link copied",description:`${R.title} share link is ready to send to your teams.`})},ie=(R,F)=>{const k=rd.format(F.nextReview);s({title:"Review scheduled",description:`${R.title} will prompt a review on ${k}.`})};return e.jsxDEV(pd,{children:e.jsxDEV("div",{className:"container mx-auto grid gap-4 px-3 py-3 xl:grid-cols-[minmax(0,2fr)_minmax(320px,1fr)]",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(i3,{stats:m,attentionCount:w},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:220,columnNumber:11},this),e.jsxDEV(n3,{search:t,onSearchChange:i,categories:x,categoryCounts:S,selectedCategories:n,onToggleCategory:A,onClearFilters:I,statusFilter:o,onStatusFilterChange:l,sortOption:r,onSortChange:d,attentionCount:w},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:221,columnNumber:11},this),g.length?e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:g.map(R=>e.jsxDEV(a3,{meta:R,isPinned:p.has(R.doc.id),isActive:R.doc.id===b,onSelect:()=>D(R.doc.id),onTogglePin:()=>B(R.doc.id)},R.doc.id,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:238,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:236,columnNumber:13},this):e.jsxDEV(o3,{onReset:I},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:249,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:219,columnNumber:9},this),e.jsxDEV(r3,{meta:N,onExport:W,onShare:se,onScheduleReview:ie},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:252,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:218,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:217,columnNumber:5},this)}function XS(s){const t=JS(s.lastUpdatedISO),i=e3(s,t);return{doc:s,status:i,lastUpdated:t}}function JS(s){const t=Date.parse(s);return Number.isNaN(t)?new Date:new Date(t)}function e3(s,t){const i=Date.now(),n=s.cadenceDays*Xp,a=new Date(t.getTime()+n),o=a.getTime()-i,l=Math.ceil(o/Xp),r=s.auditWindowDays??Math.max(2,Math.round(s.cadenceDays*.3));return l<0?{id:"past-due",label:"Past due",tone:"destructive",daysUntilReview:l,nextReview:a}:l<=r?{id:"due-soon",label:"Due soon",tone:"warning",daysUntilReview:l,nextReview:a}:{id:"on-track",label:"On track",tone:"default",daysUntilReview:l,nextReview:a}}function t3(s){const t=s.length,i=s.filter(r=>r.status.id==="due-soon").length,n=s.filter(r=>r.status.id==="past-due").length,a=s.filter(r=>r.doc.riskLevel==="high").length,o=s.reduce((r,d)=>r+d.doc.attachments,0),l=t===0?0:s.reduce((r,d)=>r+d.doc.metrics.completionRate,0)/t;return{total:t,dueSoon:i,pastDue:n,highRisk:a,attachments:o,avgCompletion:l}}function s3(s,t,i,n){const a=Number(n.has(s.doc.id))-Number(n.has(t.doc.id));if(a!==0)return-a;switch(i){case"risk":return Jp[s.doc.riskLevel]-Jp[t.doc.riskLevel];case"recent-update":return t.lastUpdated.getTime()-s.lastUpdated.getTime();case"coverage":return t.doc.metrics.coverage-s.doc.metrics.coverage;case"next-review":default:return s.status.daysUntilReview-t.status.daysUntilReview}}function i3({stats:s,attentionCount:t}){return e.jsxDEV("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsxDEV(jr,{icon:Hi,title:"Documents in Library",metric:s.total.toString(),description:`${s.attachments} attachments stored`},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:369,columnNumber:7},this),e.jsxDEV(jr,{icon:Lh,title:"Needs Attention",metric:t.toString(),description:`${s.dueSoon} due soon · ${s.pastDue} past due`,tone:"warning"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:375,columnNumber:7},this),e.jsxDEV(jr,{icon:Oh,title:"High-Risk Programs",metric:s.highRisk.toString(),description:"HACCP, inspections, allergen matrix",tone:"destructive"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:382,columnNumber:7},this),e.jsxDEV(jr,{icon:Gg,title:"Avg Completion",metric:`${Math.round(s.avgCompletion*100)}%`,description:"Completion across active docs"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:389,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:368,columnNumber:5},this)}function jr({icon:s,title:t,metric:i,description:n,tone:a="default"}){return e.jsxDEV($e,{className:je("border border-border/70 bg-card/70 backdrop-blur-sm",a==="warning"&&"border-amber-400/80 bg-amber-50/40 dark:border-amber-400/30 dark:bg-amber-900/10",a==="destructive"&&"border-red-500/70 bg-red-50/50 dark:border-red-500/30 dark:bg-red-900/10"),children:[e.jsxDEV(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV("p",{className:"text-xs font-medium uppercase tracking-[0.22em] text-muted-foreground",children:t},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:417,columnNumber:9},this),e.jsxDEV(s,{className:"h-4 w-4 text-muted-foreground","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:420,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:416,columnNumber:7},this),e.jsxDEV(Ge,{children:[e.jsxDEV("div",{className:"text-2xl font-semibold tracking-tight text-foreground",children:i},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:423,columnNumber:9},this),e.jsxDEV("p",{className:"mt-1 text-xs text-muted-foreground",children:n},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:424,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:422,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:409,columnNumber:5},this)}function n3({search:s,onSearchChange:t,categories:i,categoryCounts:n,selectedCategories:a,onToggleCategory:o,onClearFilters:l,statusFilter:r,onStatusFilterChange:d,sortOption:c,onSortChange:f,attentionCount:b}){return e.jsxDEV($e,{className:"border border-border/70 bg-card/70 backdrop-blur-sm",children:e.jsxDEV(Ge,{className:"space-y-4 p-4",children:[e.jsxDEV("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxDEV("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxDEV(Fh,{className:"hidden h-4 w-4 text-muted-foreground lg:block","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:464,columnNumber:13},this),e.jsxDEV(Xe,{value:s,onChange:D=>t(D.target.value),placeholder:"Search documents, owners, or tags",className:"flex-1",suggestionScope:["documents","people","tags","systems"],minSuggestionQueryLength:1,suggestionLimit:10},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:465,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:463,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(cs,{value:c,onValueChange:D=>f(D),children:[e.jsxDEV(rs,{className:"w-[200px]",children:[e.jsxDEV(Hg,{className:"mr-2 h-4 w-4 text-muted-foreground","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:478,columnNumber:17},this),e.jsxDEV(ds,{placeholder:"Sort"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:479,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:477,columnNumber:15},this),e.jsxDEV(os,{align:"end",children:[e.jsxDEV(yt,{value:"next-review",children:"Next review"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:482,columnNumber:17},this),e.jsxDEV(yt,{value:"recent-update",children:"Last updated"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:483,columnNumber:17},this),e.jsxDEV(yt,{value:"risk",children:"Risk level"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:484,columnNumber:17},this),e.jsxDEV(yt,{value:"coverage",children:"Coverage score"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:485,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:481,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:476,columnNumber:13},this),e.jsxDEV(ne,{variant:"ghost",size:"sm",onClick:l,className:"gap-1",children:[e.jsxDEV(cn,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:489,columnNumber:15},this),"Reset"]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:488,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:475,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:462,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:e.jsxDEV(TN,{type:"single",value:r,onValueChange:D=>d(D||"all"),children:[e.jsxDEV(Jn,{value:"all",className:"text-xs",children:"All"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:500,columnNumber:13},this),e.jsxDEV(Jn,{value:"attention",className:"text-xs",children:["Attention (",b,")"]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:503,columnNumber:13},this),e.jsxDEV(Jn,{value:"due-soon",className:"text-xs",children:"Due soon"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:506,columnNumber:13},this),e.jsxDEV(Jn,{value:"past-due",className:"text-xs",children:"Past due"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:509,columnNumber:13},this),e.jsxDEV(Jn,{value:"on-track",className:"text-xs",children:"On track"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:512,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:495,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:494,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:i.map(D=>{const u=a.includes(D),p=n.get(D)??0;return e.jsxDEV(ne,{type:"button",variant:u?"default":"outline",size:"sm",className:je("gap-1",u?"bg-primary text-primary-foreground shadow-sm":"border-dashed text-muted-foreground hover:text-foreground"),onClick:()=>o(D),children:[e.jsxDEV(jh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:535,columnNumber:17},this),e.jsxDEV("span",{className:"text-xs font-semibold uppercase tracking-[0.22em]",children:D},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:536,columnNumber:17},this),e.jsxDEV(et,{variant:u?"secondary":"outline",children:p},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:539,columnNumber:17},this)]},D,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:522,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:517,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:461,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:460,columnNumber:5},this)}function a3({meta:s,isPinned:t,isActive:i,onSelect:n,onTogglePin:a}){const{doc:o,status:l}=s;return e.jsxDEV($e,{role:"button","aria-pressed":i,tabIndex:0,onClick:n,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),n())},className:je("group flex h-full cursor-pointer flex-col border border-border/70 bg-card/80 p-4 transition",i&&"border-primary shadow-lg shadow-primary/10",!i&&"hover:border-primary/50"),children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV(et,{variant:"outline",className:"font-semibold uppercase tracking-[0.26em]",children:o.docType},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:579,columnNumber:11},this),e.jsxDEV("h3",{className:"text-base font-semibold leading-tight text-foreground",children:o.title},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:582,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-3",children:o.summary},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:585,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:578,columnNumber:9},this),e.jsxDEV(ne,{type:"button",variant:"ghost",size:"icon","aria-label":t?"Unpin document":"Pin document",onClick:r=>{r.stopPropagation(),a()},children:t?e.jsxDEV(qg,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:597,columnNumber:23},this):e.jsxDEV(Kg,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:597,columnNumber:75},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:587,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:577,columnNumber:7},this),e.jsxDEV(Wi,{className:"my-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:600,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3 text-xs text-muted-foreground",children:[e.jsxDEV(Vr,{icon:Dd,label:"Next review",value:LN(l.daysUntilReview,l.nextReview)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:602,columnNumber:9},this),e.jsxDEV(Vr,{icon:so,label:"Watchers",value:`${o.watchers}`},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:603,columnNumber:9},this),e.jsxDEV(Vr,{icon:Yg,label:"Attachments",value:`${o.attachments}`},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:604,columnNumber:9},this),e.jsxDEV(Vr,{icon:Oh,label:"Risk",value:MN(o.riskLevel)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:605,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:601,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 flex flex-wrap gap-1",children:o.tags.map(r=>e.jsxDEV(et,{variant:"secondary",className:"text-[10px] uppercase tracking-[0.22em]",children:r},r,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:609,columnNumber:11},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:607,columnNumber:7},this),e.jsxDEV("div",{className:"mt-3 flex items-center justify-between text-xs font-medium uppercase tracking-[0.32em]",children:[e.jsxDEV(WN,{status:l},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:615,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-1 text-primary",children:["View",e.jsxDEV(Ha,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:618,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:616,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:614,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:560,columnNumber:5},this)}function Vr({icon:s,label:t,value:i}){return e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(s,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:634,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.3em] text-muted-foreground/80",children:t},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:636,columnNumber:9},this),e.jsxDEV("span",{className:"text-[12px] font-semibold text-foreground",children:i},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:637,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:635,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:633,columnNumber:5},this)}function WN({status:s}){const t={"on-track":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-300","due-soon":"bg-amber-500/20 text-amber-600 dark:text-amber-300","past-due":"bg-red-500/25 text-red-600 dark:text-red-300"};return e.jsxDEV("span",{className:je("inline-flex items-center rounded-full px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.28em]",t[s.id]),children:s.label},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:654,columnNumber:5},this)}function r3({meta:s,onExport:t,onShare:i,onScheduleReview:n}){if(!s)return e.jsxDEV($e,{className:"sticky top-[88px] h-fit border border-dashed border-border/70 bg-card/50 backdrop-blur-sm",children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-base font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Operations Docs"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:677,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:676,columnNumber:9},this),e.jsxDEV(Ge,{children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Adjust your filters or pick a document from the library to review workflows, ownership, and compliance history."},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:682,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:681,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:675,columnNumber:7},this);const{doc:a,status:o}=s,l=rd.format(o.nextReview);return e.jsxDEV($e,{className:"sticky top-[88px] h-fit border border-border/70 bg-card/80 backdrop-blur-sm",children:[e.jsxDEV(Ke,{children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV(et,{variant:"outline",className:"font-semibold uppercase tracking-[0.26em]",children:a.docType},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:699,columnNumber:13},this),e.jsxDEV(Ze,{className:"text-xl font-semibold leading-tight text-foreground",children:a.title},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:702,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[e.jsxDEV("span",{className:"uppercase tracking-[0.28em]",children:["Owner: ",a.owner]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:706,columnNumber:15},this),e.jsxDEV(Wi,{orientation:"vertical",className:"hidden h-4 lg:block"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:707,columnNumber:15},this),e.jsxDEV("span",{className:"hidden uppercase tracking-[0.28em] text-muted-foreground lg:block",children:["Frequency: ",a.frequencyLabel]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:708,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:705,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:698,columnNumber:11},this),e.jsxDEV(WN,{status:o},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:713,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:697,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 grid gap-2 md:grid-cols-3",children:[e.jsxDEV(Pc,{onClick:()=>t(a),icon:Ni,label:"Export packet"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:716,columnNumber:11},this),e.jsxDEV(Pc,{onClick:()=>i(a),icon:Bc,label:"Share workspace"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:717,columnNumber:11},this),e.jsxDEV(Pc,{onClick:()=>n(a,o),icon:Dd,label:"Schedule review"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:718,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:715,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:696,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid gap-3 rounded-lg border border-border/60 bg-background/50 p-3 text-xs",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV(fd,{children:[e.jsxDEV(hd,{asChild:!0,children:e.jsxDEV(et,{variant:"secondary",className:"uppercase tracking-[0.28em]",children:["Next review · ",l]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:730,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:729,columnNumber:15},this),e.jsxDEV(bd,{children:LN(o.daysUntilReview,o.nextReview)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:734,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:728,columnNumber:13},this),e.jsxDEV(et,{variant:"outline",className:"uppercase tracking-[0.28em]",children:["Cadence · ",a.frequencyLabel]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:736,columnNumber:13},this),e.jsxDEV(et,{variant:"outline",className:"uppercase tracking-[0.28em]",children:["Risk · ",MN(a.riskLevel)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:739,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:727,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:a.summary},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:743,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:726,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h4",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Metrics"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:747,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Ic,{label:"Completion",value:a.metrics.completionRate},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:749,columnNumber:13},this),e.jsxDEV(Ic,{label:"Adoption",value:a.metrics.adoption},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:750,columnNumber:13},this),e.jsxDEV(Ic,{label:"Coverage",value:a.metrics.coverage},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:751,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:748,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:746,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Linked systems"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:756,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:a.linkedSystems.map(r=>e.jsxDEV(et,{variant:"outline",className:"text-[10px] uppercase tracking-[0.26em]",children:r},r,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:759,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:757,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:755,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Playbook focus"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:767,columnNumber:11},this),e.jsxDEV("ul",{className:"list-disc space-y-1 pl-5 text-sm text-muted-foreground",children:a.playbookFocus.map(r=>e.jsxDEV("li",{children:r},r,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:770,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:768,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:766,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"History"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:776,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:a.history.map((r,d)=>e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxDEV("span",{className:"font-semibold uppercase tracking-[0.28em]",children:rd.format(new Date(r.date))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:781,columnNumber:19},this),e.jsxDEV(Wi,{orientation:"vertical",className:"h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:784,columnNumber:19},this),e.jsxDEV("span",{className:"uppercase tracking-[0.28em]",children:r.author},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:785,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:780,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-foreground",children:r.note},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:787,columnNumber:17},this),d<a.history.length-1?e.jsxDEV(Wi,{},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:788,columnNumber:51},this):null]},`${r.date}-${r.author}`,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:779,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:777,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:775,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:725,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:695,columnNumber:5},this)}function Pc({onClick:s,icon:t,label:i}){return e.jsxDEV(ne,{type:"button",variant:"outline",className:"w-full justify-start gap-2 border border-border/60 bg-background/60",onClick:s,children:[e.jsxDEV(t,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:812,columnNumber:7},this),e.jsxDEV("span",{className:"text-xs font-semibold uppercase tracking-[0.28em]",children:i},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:813,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:806,columnNumber:5},this)}function Ic({label:s,value:t}){const i=Math.round(t*100);return e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxDEV("span",{className:"uppercase tracking-[0.28em]",children:s},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:828,columnNumber:9},this),e.jsxDEV("span",{className:"font-semibold text-foreground",children:[i,"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:829,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:827,columnNumber:7},this),e.jsxDEV(Vd,{value:i,className:"h-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:831,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:826,columnNumber:5},this)}function o3({onReset:s}){return e.jsxDEV($e,{className:"border border-dashed border-border/70 bg-card/60 p-6 text-center",children:e.jsxDEV(Ge,{className:"space-y-4 p-0",children:[e.jsxDEV("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full border border-border/70 bg-background/60",children:e.jsxDEV(Hi,{className:"h-5 w-5 text-muted-foreground","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:845,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:844,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("h3",{className:"text-base font-semibold text-foreground",children:"No documents found"},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:848,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your filters or clearing search to see the full operations playbook."},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:849,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:847,columnNumber:9},this),e.jsxDEV(ne,{type:"button",variant:"outline",onClick:s,className:"gap-1",children:[e.jsxDEV(Fh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:854,columnNumber:11},this),"Reset filters"]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:853,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:843,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/OperationsDocsWorkspace.tsx",lineNumber:842,columnNumber:5},this)}function LN(s,t){if(s===0)return"Due today";if(s>0)return s===1?"In 1 day":`In ${s} days`;const i=Math.abs(s);return i===1?"1 day overdue":`${i} days overdue`}function MN(s){return s.charAt(0).toUpperCase()+s.slice(1)}function l3(){return e.jsxDEV(ZS,{},void 0,!1,{fileName:"/app/code/client/pages/sections/operations-docs/index.tsx",lineNumber:4,columnNumber:10},this)}const c3=Yx,_N=[{key:"agilysys",name:"Agilysys InfoGenesis",short:"Agilysys"},{key:"micros",name:"Oracle MICROS Simphony",short:"Simphony"},{key:"aloha",name:"NCR Aloha / Voyix",short:"Aloha"},{key:"toast",name:"Toast",short:"Toast"},{key:"square",name:"Square for Restaurants",short:"Square"},{key:"lightspeed",name:"Lightspeed Restaurant (K-Series)",short:"Lightspeed"},{key:"spoton",name:"SpotOn Restaurant",short:"SpotOn"}],ji=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Math.random().toString(36).slice(2)}${Date.now().toString(36)}`,ea=s=>{if(typeof s=="number"&&Number.isFinite(s))return s;if(typeof s=="string"){const t=s.replace(/[^0-9.,-]/g,"");if(!t)return null;const i=t.replace(/,(?=\d{3}\b)/g,"").replace(/,/g,""),n=Number.parseFloat(i);return Number.isFinite(n)?n:null}return null},Ac=s=>typeof s=="string"?s.trim():s==null?"":String(s).trim(),d3=s=>{const t=s.extra??{},i=t.serverNotes??null,n=Array.isArray(s.tags)?s.tags.map(m=>String(m)).filter(Boolean):[],a=Array.isArray(i?.modifiers?.equipment)?i.modifiers.equipment.map(m=>Ac(m)).filter(Boolean):[],o=Array.isArray(i?.allergens)?i.allergens.map(m=>Ac(m)).filter(Boolean):[],l=Ac(i?.currency)||"USD";let r=null;const d=ea(i?.portionCost),c=i?.totals??{},f=ea(c?.fullRecipeCost),b=ea(i?.portionCount);d!==null?r=d:f!==null&&b&&b>0&&(r=Number((f/b).toFixed(2)));let D=null;const u=["menuPrice","menu_price","price","menuItemPrice","menu_item_price"];for(const m of u)if(D=ea(t[m]),D!==null)break;const p=typeof s.rating=="number"?s.rating:null,x=ea(t.salesVelocity??t.popularityScore),S=s.imageDataUrls?.[0]??s.image??(Array.isArray(s.imageNames)&&s.imageNames.length?String(s.imageNames[0]):null);return{id:s.id,title:s.title,menuName:Qr(s),description:s.description?.trim()??"",cuisine:s.cuisine??null,course:s.course??null,tags:n,rating:p,image:S,allergens:o,equipment:a,costPerPortion:r,currency:l,menuPrice:D,popularityHint:x}},Jd=s=>{if(!s)return 1;const t=Number.parseFloat(s.trim().split(/\s+/)[0]??"");if(Number.isFinite(t)&&t>0)return t;const i=s.match(/(\d+)\s*(?:\/|\s*)(\d+)/);if(i){const n=Number.parseFloat(i[1]??"0"),a=Number.parseFloat(i[2]??"1");if(a>0)return Number((n/a).toFixed(3))}return 1},tn=(s,t="USD")=>{if(s==null||Number.isNaN(s))return"";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch{return`${Lf(t)}${s.toFixed(2)}`}},Wa=s=>s.length?s.length===1?s[0]:s.length===2?`${s[0]} and ${s[1]}`:`${s.slice(0,-1).join(", ")}, and ${s[s.length-1]}`:"",u3=(s,t)=>{const i=[];for(const a of s){if(!a.recipeId)continue;const o=t.get(a.recipeId);o&&i.push(a.label.trim()||o.menuName||o.title)}if(!i.length)return"";const n=i[0];return i.length===1?n:`${n} with ${Wa(i.slice(1))}`},m3=(s,t)=>{const i=[],n=new Set,a=new Set;for(const r of s){if(!r.recipeId)continue;const d=t.get(r.recipeId);if(!d)continue;const c=r.label.trim()||d.menuName||d.title;i.push(`${Jd(r.quantity)}× ${c}`),d.cuisine&&n.add(d.cuisine);for(const f of d.tags){if(!f)continue;const b=f.trim();b&&a.add(b)}}if(!i.length)return"";const o=n.size?`${Wa(Array.from(n))} inspiration`:"chef-driven",l=a.size?`highlighting ${Wa(Array.from(a).slice(0,4))}`:"crafted for service speed";return`A ${o} plate featuring ${Wa(i)}. ${l} with a polished, guest-forward presentation.`},p3=(s,t)=>{const i=[];for(const n of s){if(!n.recipeId)continue;const a=t.get(n.recipeId);if(!a)continue;const o=n.label.trim()||a.menuName||a.title;i.push(`• ${o}: reference mise notes in recipe book; ensure portion control to protect margin.`)}return i.length?(i.push("• Call out premium ingredients and prep story when presenting."),i.push("• Remind team to align phrasing with menu description for upsell consistency."),i.join(`
`)):"Confirm expo understands build, allergen alerts, and cadence for fire to table."},f3=(s,t)=>{const i=new Set;for(const a of s){if(!a.recipeId)continue;const o=t.get(a.recipeId);o&&o.equipment.forEach(l=>i.add(l))}return`${i.size?`Stage ${Wa(Array.from(i))}.`:"Stage hot plates and polished flatware."} Deliver on warm plates with branded steak knives and ramekins pre-filled as needed.`},tf=(s,t)=>{const i=[];for(const n of s){if(!n.recipeId)continue;const a=t.get(n.recipeId);if(!a||!a.allergens.length)continue;const o=n.label.trim()||a.menuName||a.title;for(const l of a.allergens)i.push({id:ji(),itemName:o,allergen:l,modify:"Notify guest; omit on request",alternative:"Verify chef-approved substitution"})}return i},h3={french:[{id:ji(),itemName:"Premier Cru Chardonnay",year:"2020",location:"Côte de Beaune",country:"France"},{id:ji(),itemName:"Grand Cru Champagne",year:"NV",location:"Montagne de Reims",country:"France"}],spanish:[{id:ji(),itemName:"Ribera del Duero Crianza",year:"2019",location:"Castilla y León",country:"Spain"},{id:ji(),itemName:"Txakolina",year:"2022",location:"Getariako",country:"Spain"}],italian:[{id:ji(),itemName:"Barolo",year:"2018",location:"Piedmont",country:"Italy"},{id:ji(),itemName:"Super Tuscan Blend",year:"2019",location:"Bolgheri",country:"Italy"}],japanese:[{id:ji(),itemName:"Junmai Daiginjo Sake",year:"",location:"Niigata",country:"Japan"},{id:ji(),itemName:"Yuzu Highball",year:"Signature",location:"Bar Program",country:"In-house"}]},sf=(s,t)=>{const i=new Map;for(const n of t){if(!n.recipeId)continue;const a=s.get(n.recipeId);if(!a)continue;const o=a.cuisine?.toLowerCase()??"",l=h3[o];if(l&&l.length)for(const r of l){const d=`${r.itemName}:${r.location}:${r.country}`;i.has(d)||i.set(d,{...r,id:ji()})}}return i.size||(i.set("default-reserve",{id:ji(),itemName:"Reserve Cabernet Blend",year:"2019",location:"Napa Valley",country:"USA"}),i.set("default-zero-proof",{id:ji(),itemName:"Sparkling Verjus & Rosemary",year:"Signature",location:"House crafted",country:"USA"})),Array.from(i.values())},b3=(s,t)=>{const i=[];for(const n of t){if(!n.recipeId)continue;const a=s.get(n.recipeId);if(a){if(a.popularityHint!=null){i.push(Math.max(0,Math.min(100,a.popularityHint)));continue}if(a.rating!=null){i.push(Math.round(a.rating/5*100));continue}i.push(55)}}return i.length?i.reduce((n,a)=>n+a,0)/i.length:50},nf=(s,t)=>{let i=0,n="USD";for(const a of s){if(!a.recipeId)continue;const o=t.get(a.recipeId);if(o&&o.costPerPortion!=null){const l=Jd(a.quantity||"1");i+=o.costPerPortion*l,n=o.currency||n}}return{totalCost:Number(i.toFixed(2)),currency:n}},N3=s=>s?ea(s):null,x3=(s,t)=>{const i=s??.33,n=t>=60;return i<=.3&&n?{classification:"Star",narrative:"High profitability & high demand. Feature in marketing and maintain plating standards."}:i>.3&&n?{classification:"Plowhorse",narrative:"Guest favorite with thinner margins. Consider portion refinement or modest price move."}:i<=.3?{classification:"Puzzle",narrative:"Strong margin but trending lower demand. Coach team on storytelling and placement."}:{classification:"Dog",narrative:"Low margin and low demand. Validate concept or reposition within the menu mix."}},af=()=>_N.map(({key:s,name:t})=>({key:s,systemName:t,itemCode:"",autoCode:!0,price:"",autoPrice:!0,status:"draft"})),ON=(s,t)=>{const i=s.replace(/[^a-zA-Z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toUpperCase(),n=t.split(/\s+/).map(o=>o[0]).join("").toUpperCase();return`${i}-${n}`.slice(0,32)},rf=(s,t,i)=>s.map(n=>{const a={...n};return(n.autoCode||!n.itemCode)&&(a.itemCode=ON(t||"Dish",n.systemName),a.autoCode=!0),(n.autoPrice||!n.price)&&(a.price=i,a.autoPrice=!0),i&&(a.status="ready"),a});var of=1,g3=.9,v3=.8,y3=.17,Tc=.1,Wc=.999,D3=.9999,E3=.99,w3=/[\\\/_+.#"@\[\(\{&]/,k3=/[\\\/_+.#"@\[\(\{&]/g,S3=/[\s-]/,FN=/[\s-]/g;function od(s,t,i,n,a,o,l){if(o===t.length)return a===s.length?of:E3;var r=`${a},${o}`;if(l[r]!==void 0)return l[r];for(var d=n.charAt(o),c=i.indexOf(d,a),f=0,b,D,u,p;c>=0;)b=od(s,t,i,n,c+1,o+1,l),b>f&&(c===a?b*=of:w3.test(s.charAt(c-1))?(b*=v3,u=s.slice(a,c-1).match(k3),u&&a>0&&(b*=Math.pow(Wc,u.length))):S3.test(s.charAt(c-1))?(b*=g3,p=s.slice(a,c-1).match(FN),p&&a>0&&(b*=Math.pow(Wc,p.length))):(b*=y3,a>0&&(b*=Math.pow(Wc,c-a))),s.charAt(c)!==t.charAt(o)&&(b*=D3)),(b<Tc&&i.charAt(c-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&i.charAt(c-1)!==n.charAt(o))&&(D=od(s,t,i,n,c+1,o+2,l),D*Tc>b&&(b=D*Tc)),b>f&&(f=b),c=i.indexOf(d,c+1);return l[r]=f,f}function lf(s){return s.toLowerCase().replace(FN," ")}function j3(s,t,i){return s=i&&i.length>0?`${s+" "+i.join(" ")}`:s,od(s,t,lf(s),lf(t),0,0,{})}var Ra='[cmdk-group=""]',Lc='[cmdk-group-items=""]',V3='[cmdk-group-heading=""]',BN='[cmdk-item=""]',cf=`${BN}:not([aria-disabled="true"])`,ld="cmdk-item-select",ta="data-value",C3=(s,t,i)=>j3(s,t,i),UN=h.createContext(void 0),nr=()=>h.useContext(UN),$N=h.createContext(void 0),eu=()=>h.useContext($N),zN=h.createContext(void 0),GN=h.forwardRef((s,t)=>{let i=sa(()=>{var L,H;return{search:"",value:(H=(L=s.value)!=null?L:s.defaultValue)!=null?H:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=sa(()=>new Set),a=sa(()=>new Map),o=sa(()=>new Map),l=sa(()=>new Set),r=HN(s),{label:d,children:c,value:f,onValueChange:b,filter:D,shouldFilter:u,loop:p,disablePointerSelection:x=!1,vimBindings:S=!0,...m}=s,v=ia(),g=ia(),N=ia(),w=h.useRef(null),A=F3();Fn(()=>{if(f!==void 0){let L=f.trim();i.current.value=L,I.emit()}},[f]),Fn(()=>{A(6,F)},[]);let I=h.useMemo(()=>({subscribe:L=>(l.current.add(L),()=>l.current.delete(L)),snapshot:()=>i.current,setState:(L,H,le)=>{var ue,K,C,P;if(!Object.is(i.current[L],H)){if(i.current[L]=H,L==="search")R(),se(),A(1,ie);else if(L==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ee=document.getElementById(N);ee?ee.focus():(ue=document.getElementById(v))==null||ue.focus()}if(A(7,()=>{var ee;i.current.selectedItemId=(ee=k())==null?void 0:ee.id,I.emit()}),le||A(5,F),((K=r.current)==null?void 0:K.value)!==void 0){let ee=H??"";(P=(C=r.current).onValueChange)==null||P.call(C,ee);return}}I.emit()}},emit:()=>{l.current.forEach(L=>L())}}),[]),B=h.useMemo(()=>({value:(L,H,le)=>{var ue;H!==((ue=o.current.get(L))==null?void 0:ue.value)&&(o.current.set(L,{value:H,keywords:le}),i.current.filtered.items.set(L,W(H,le)),A(2,()=>{se(),I.emit()}))},item:(L,H)=>(n.current.add(L),H&&(a.current.has(H)?a.current.get(H).add(L):a.current.set(H,new Set([L]))),A(3,()=>{R(),se(),i.current.value||ie(),I.emit()}),()=>{o.current.delete(L),n.current.delete(L),i.current.filtered.items.delete(L);let le=k();A(4,()=>{R(),le?.getAttribute("id")===L&&ie(),I.emit()})}),group:L=>(a.current.has(L)||a.current.set(L,new Set),()=>{o.current.delete(L),a.current.delete(L)}),filter:()=>r.current.shouldFilter,label:d||s["aria-label"],getDisablePointerSelection:()=>r.current.disablePointerSelection,listId:v,inputId:N,labelId:g,listInnerRef:w}),[]);function W(L,H){var le,ue;let K=(ue=(le=r.current)==null?void 0:le.filter)!=null?ue:C3;return L?K(L,i.current.search,H):0}function se(){if(!i.current.search||r.current.shouldFilter===!1)return;let L=i.current.filtered.items,H=[];i.current.filtered.groups.forEach(ue=>{let K=a.current.get(ue),C=0;K.forEach(P=>{let ee=L.get(P);C=Math.max(ee,C)}),H.push([ue,C])});let le=w.current;Q().sort((ue,K)=>{var C,P;let ee=ue.getAttribute("id"),$=K.getAttribute("id");return((C=L.get($))!=null?C:0)-((P=L.get(ee))!=null?P:0)}).forEach(ue=>{let K=ue.closest(Lc);K?K.appendChild(ue.parentElement===K?ue:ue.closest(`${Lc} > *`)):le.appendChild(ue.parentElement===le?ue:ue.closest(`${Lc} > *`))}),H.sort((ue,K)=>K[1]-ue[1]).forEach(ue=>{var K;let C=(K=w.current)==null?void 0:K.querySelector(`${Ra}[${ta}="${encodeURIComponent(ue[0])}"]`);C?.parentElement.appendChild(C)})}function ie(){let L=Q().find(le=>le.getAttribute("aria-disabled")!=="true"),H=L?.getAttribute(ta);I.setState("value",H||void 0)}function R(){var L,H,le,ue;if(!i.current.search||r.current.shouldFilter===!1){i.current.filtered.count=n.current.size;return}i.current.filtered.groups=new Set;let K=0;for(let C of n.current){let P=(H=(L=o.current.get(C))==null?void 0:L.value)!=null?H:"",ee=(ue=(le=o.current.get(C))==null?void 0:le.keywords)!=null?ue:[],$=W(P,ee);i.current.filtered.items.set(C,$),$>0&&K++}for(let[C,P]of a.current)for(let ee of P)if(i.current.filtered.items.get(ee)>0){i.current.filtered.groups.add(C);break}i.current.filtered.count=K}function F(){var L,H,le;let ue=k();ue&&(((L=ue.parentElement)==null?void 0:L.firstChild)===ue&&((le=(H=ue.closest(Ra))==null?void 0:H.querySelector(V3))==null||le.scrollIntoView({block:"nearest"})),ue.scrollIntoView({block:"nearest"}))}function k(){var L;return(L=w.current)==null?void 0:L.querySelector(`${BN}[aria-selected="true"]`)}function Q(){var L;return Array.from(((L=w.current)==null?void 0:L.querySelectorAll(cf))||[])}function J(L){let H=Q()[L];H&&I.setState("value",H.getAttribute(ta))}function O(L){var H;let le=k(),ue=Q(),K=ue.findIndex(P=>P===le),C=ue[K+L];(H=r.current)!=null&&H.loop&&(C=K+L<0?ue[ue.length-1]:K+L===ue.length?ue[0]:ue[K+L]),C&&I.setState("value",C.getAttribute(ta))}function me(L){let H=k(),le=H?.closest(Ra),ue;for(;le&&!ue;)le=L>0?_3(le,Ra):O3(le,Ra),ue=le?.querySelector(cf);ue?I.setState("value",ue.getAttribute(ta)):O(L)}let de=()=>J(Q().length-1),fe=L=>{L.preventDefault(),L.metaKey?de():L.altKey?me(1):O(1)},ae=L=>{L.preventDefault(),L.metaKey?J(0):L.altKey?me(-1):O(-1)};return h.createElement(gn.div,{ref:t,tabIndex:-1,...m,"cmdk-root":"",onKeyDown:L=>{var H;(H=m.onKeyDown)==null||H.call(m,L);let le=L.nativeEvent.isComposing||L.keyCode===229;if(!(L.defaultPrevented||le))switch(L.key){case"n":case"j":{S&&L.ctrlKey&&fe(L);break}case"ArrowDown":{fe(L);break}case"p":case"k":{S&&L.ctrlKey&&ae(L);break}case"ArrowUp":{ae(L);break}case"Home":{L.preventDefault(),J(0);break}case"End":{L.preventDefault(),de();break}case"Enter":{L.preventDefault();let ue=k();if(ue){let K=new Event(ld);ue.dispatchEvent(K)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:B.inputId,id:B.labelId,style:U3},d),xo(s,L=>h.createElement($N.Provider,{value:I},h.createElement(UN.Provider,{value:B},L))))}),R3=h.forwardRef((s,t)=>{var i,n;let a=ia(),o=h.useRef(null),l=h.useContext(zN),r=nr(),d=HN(s),c=(n=(i=d.current)==null?void 0:i.forceMount)!=null?n:l?.forceMount;Fn(()=>{if(!c)return r.item(a,l?.id)},[c]);let f=qN(a,o,[s.value,s.children,o],s.keywords),b=eu(),D=xn(A=>A.value&&A.value===f.current),u=xn(A=>c||r.filter()===!1?!0:A.search?A.filtered.items.get(a)>0:!0);h.useEffect(()=>{let A=o.current;if(!(!A||s.disabled))return A.addEventListener(ld,p),()=>A.removeEventListener(ld,p)},[u,s.onSelect,s.disabled]);function p(){var A,I;x(),(I=(A=d.current).onSelect)==null||I.call(A,f.current)}function x(){b.setState("value",f.current,!0)}if(!u)return null;let{disabled:S,value:m,onSelect:v,forceMount:g,keywords:N,...w}=s;return h.createElement(gn.div,{ref:Ma(o,t),...w,id:a,"cmdk-item":"",role:"option","aria-disabled":!!S,"aria-selected":!!D,"data-disabled":!!S,"data-selected":!!D,onPointerMove:S||r.getDisablePointerSelection()?void 0:x,onClick:S?void 0:p},s.children)}),P3=h.forwardRef((s,t)=>{let{heading:i,children:n,forceMount:a,...o}=s,l=ia(),r=h.useRef(null),d=h.useRef(null),c=ia(),f=nr(),b=xn(u=>a||f.filter()===!1?!0:u.search?u.filtered.groups.has(l):!0);Fn(()=>f.group(l),[]),qN(l,r,[s.value,s.heading,d]);let D=h.useMemo(()=>({id:l,forceMount:a}),[a]);return h.createElement(gn.div,{ref:Ma(r,t),...o,"cmdk-group":"",role:"presentation",hidden:b?void 0:!0},i&&h.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},i),xo(s,u=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":i?c:void 0},h.createElement(zN.Provider,{value:D},u))))}),I3=h.forwardRef((s,t)=>{let{alwaysRender:i,...n}=s,a=h.useRef(null),o=xn(l=>!l.search);return!i&&!o?null:h.createElement(gn.div,{ref:Ma(a,t),...n,"cmdk-separator":"",role:"separator"})}),A3=h.forwardRef((s,t)=>{let{onValueChange:i,...n}=s,a=s.value!=null,o=eu(),l=xn(c=>c.search),r=xn(c=>c.selectedItemId),d=nr();return h.useEffect(()=>{s.value!=null&&o.setState("search",s.value)},[s.value]),h.createElement(gn.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":r,id:d.inputId,type:"text",value:a?s.value:l,onChange:c=>{a||o.setState("search",c.target.value),i?.(c.target.value)}})}),T3=h.forwardRef((s,t)=>{let{children:i,label:n="Suggestions",...a}=s,o=h.useRef(null),l=h.useRef(null),r=xn(c=>c.selectedItemId),d=nr();return h.useEffect(()=>{if(l.current&&o.current){let c=l.current,f=o.current,b,D=new ResizeObserver(()=>{b=requestAnimationFrame(()=>{let u=c.offsetHeight;f.style.setProperty("--cmdk-list-height",u.toFixed(1)+"px")})});return D.observe(c),()=>{cancelAnimationFrame(b),D.unobserve(c)}}},[]),h.createElement(gn.div,{ref:Ma(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":r,"aria-label":n,id:d.listId},xo(s,c=>h.createElement("div",{ref:Ma(l,d.listInnerRef),"cmdk-list-sizer":""},c)))}),W3=h.forwardRef((s,t)=>{let{open:i,onOpenChange:n,overlayClassName:a,contentClassName:o,container:l,...r}=s;return h.createElement(Qx,{open:i,onOpenChange:n},h.createElement(Zx,{container:l},h.createElement(Xx,{"cmdk-overlay":"",className:a}),h.createElement(Jx,{"aria-label":s.label,"cmdk-dialog":"",className:o},h.createElement(GN,{ref:t,...r}))))}),L3=h.forwardRef((s,t)=>xn(i=>i.filtered.count===0)?h.createElement(gn.div,{ref:t,...s,"cmdk-empty":"",role:"presentation"}):null),M3=h.forwardRef((s,t)=>{let{progress:i,children:n,label:a="Loading...",...o}=s;return h.createElement(gn.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},xo(s,l=>h.createElement("div",{"aria-hidden":!0},l)))}),Di=Object.assign(GN,{List:T3,Item:R3,Input:A3,Group:P3,Separator:I3,Dialog:W3,Empty:L3,Loading:M3});function _3(s,t){let i=s.nextElementSibling;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}}function O3(s,t){let i=s.previousElementSibling;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}}function HN(s){let t=h.useRef(s);return Fn(()=>{t.current=s}),t}var Fn=typeof window>"u"?h.useEffect:h.useLayoutEffect;function sa(s){let t=h.useRef();return t.current===void 0&&(t.current=s()),t}function xn(s){let t=eu(),i=()=>s(t.snapshot());return h.useSyncExternalStore(t.subscribe,i,i)}function qN(s,t,i,n=[]){let a=h.useRef(),o=nr();return Fn(()=>{var l;let r=(()=>{var c;for(let f of i){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),d=n.map(c=>c.trim());o.value(s,r,d),(l=t.current)==null||l.setAttribute(ta,r),a.current=r}),a}var F3=()=>{let[s,t]=h.useState(),i=sa(()=>new Map);return Fn(()=>{i.current.forEach(n=>n()),i.current=new Map},[s]),(n,a)=>{i.current.set(n,a),t({})}};function B3(s){let t=s.type;return typeof t=="function"?t(s.props):"render"in t?t.render(s.props):s}function xo({asChild:s,children:t},i){return s&&h.isValidElement(t)?h.cloneElement(B3(t),{ref:t.ref},i(t.props.children)):i(t)}var U3={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const KN=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Di,{ref:i,className:je("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:13,columnNumber:3},void 0));KN.displayName=Di.displayName;const YN=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsxDEV(qi,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:46,columnNumber:5},void 0),e.jsxDEV(Di.Input,{ref:i,className:je("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:47,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:45,columnNumber:3},void 0));YN.displayName=Di.Input.displayName;const QN=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Di.List,{ref:i,className:je("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:64,columnNumber:3},void 0));QN.displayName=Di.List.displayName;const ZN=h.forwardRef((s,t)=>e.jsxDEV(Di.Empty,{ref:t,className:"py-6 text-center text-sm",...s},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:77,columnNumber:3},void 0));ZN.displayName=Di.Empty.displayName;const XN=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Di.Group,{ref:i,className:je("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:90,columnNumber:3},void 0));XN.displayName=Di.Group.displayName;const $3=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Di.Separator,{ref:i,className:je("-mx-1 h-px bg-border",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:106,columnNumber:3},void 0));$3.displayName=Di.Separator.displayName;const JN=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Di.Item,{ref:i,className:je("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/command.tsx",lineNumber:118,columnNumber:3},void 0));JN.displayName=Di.Item.displayName;const z3=s=>h.useMemo(()=>Array.from(s.values()).map(t=>({id:t.id,title:t.menuName||t.title,cuisine:t.cuisine,course:t.course,cost:t.costPerPortion,currency:t.currency,tags:t.tags})),[s]),G3=({rows:s,recipeSummaries:t,onRowChange:i,onAssignRecipe:n,onAddRow:a,onRemoveRow:o,onFocusRow:l,className:r})=>{const d=z3(t),[c,f]=h.useState(null),b=(D,u)=>{n(D,u),f(null),l(D)};return e.jsxDEV($e,{className:je("border-primary/30 bg-background/95 shadow-lg",r),children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Dish Components"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:78,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:77,columnNumber:7},void 0),e.jsxDEV(Ge,{className:"space-y-3",children:[e.jsxDEV("div",{className:"grid grid-cols-[96px_minmax(0,1.2fr)_minmax(0,1.2fr)_auto] gap-3 rounded-xl border border-primary/30 bg-muted/20 p-3 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("div",{children:"Qty"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:84,columnNumber:11},void 0),e.jsxDEV("div",{children:"Component"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:85,columnNumber:11},void 0),e.jsxDEV("div",{children:"Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:86,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-right",children:"Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:87,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:83,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:s.map(D=>{const u=D.recipeId?t.get(D.recipeId):null,p=Jd(D.quantity||"1"),x=u?.costPerPortion!=null?u.costPerPortion*p:null,S=u?.currency??"USD";return e.jsxDEV("div",{className:"grid grid-cols-[96px_minmax(0,1.2fr)_minmax(0,1.2fr)_auto] gap-3 rounded-xl border border-primary/20 bg-background/70 p-3 shadow-sm backdrop-blur",children:[e.jsxDEV(Xe,{value:D.quantity,onChange:m=>i(D.id,{quantity:m.target.value}),placeholder:"1 ea",className:"h-10 rounded-lg border-primary/30",enableSuggestions:!1},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:105,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ao,{open:c===D.id,onOpenChange:m=>f(m?D.id:null),children:[e.jsxDEV(ro,{asChild:!0,children:e.jsxDEV(ne,{variant:"outline",role:"combobox",className:"h-10 w-full justify-between rounded-lg border-primary/30",children:[e.jsxDEV("span",{className:"truncate text-left text-sm font-medium",children:D.recipeId?D.label||u?.menuName||u?.title:D.label||"Select recipe"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:125,columnNumber:25},void 0),e.jsxDEV(qi,{className:"h-4 w-4 opacity-70"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:130,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:120,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:119,columnNumber:21},void 0),e.jsxDEV(Qa,{className:"w-[360px] p-0",align:"start",children:e.jsxDEV(KN,{children:[e.jsxDEV(YN,{placeholder:"Search recipes..."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:135,columnNumber:25},void 0),e.jsxDEV(QN,{children:[e.jsxDEV(ZN,{children:"No recipes found."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:137,columnNumber:27},void 0),e.jsxDEV(XN,{children:e.jsxDEV(Ds,{className:"max-h-72",children:d.map(m=>e.jsxDEV(JN,{onSelect:()=>b(D.id,m.id),children:e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsxDEV("span",{children:m.title},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:149,columnNumber:39},void 0),m.course?e.jsxDEV(et,{variant:"outline",className:"px-1 text-[10px] uppercase tracking-[0.28em]",children:m.course},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:151,columnNumber:41},void 0):null,m.cuisine?e.jsxDEV(et,{variant:"outline",className:"px-1 text-[10px] uppercase tracking-[0.28em]",children:m.cuisine},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:159,columnNumber:41},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:148,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-1 text-[10px] uppercase tracking-[0.28em] text-muted-foreground",children:m.tags.slice(0,4).map(v=>e.jsxDEV("span",{children:v},v,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:169,columnNumber:41},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:167,columnNumber:37},void 0),m.cost!=null?e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["Cost per portion:"," ",tn(m.cost,m.currency)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:173,columnNumber:39},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:147,columnNumber:35},void 0)},m.id,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:141,columnNumber:33},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:139,columnNumber:29},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:138,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:136,columnNumber:25},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:134,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:133,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:115,columnNumber:19},void 0),e.jsxDEV(Xe,{value:D.label,onChange:m=>i(D.id,{label:m.target.value}),placeholder:"Display name",className:"h-10 rounded-lg border-primary/20",suggestionScope:["recipes","collections","tags"],minSuggestionQueryLength:1},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:190,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:114,columnNumber:17},void 0),e.jsxDEV($s,{value:D.notes,onChange:m=>i(D.id,{notes:m.target.value}),placeholder:"Prep, plating, mise notes",className:"h-24 rounded-lg border-primary/20"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:201,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-col items-end gap-2",children:[e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:()=>l(D.id),className:"h-9 w-9 rounded-full",title:"Preview recipe",children:e.jsxDEV(Qg,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:217,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:210,columnNumber:19},void 0),e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:()=>o(D.id),className:"h-9 w-9 rounded-full text-destructive",title:"Remove",children:e.jsxDEV(vi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:226,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:219,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-right text-sm font-semibold",children:x!=null?tn(x,S):"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:228,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:209,columnNumber:17},void 0)]},D.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:101,columnNumber:15},void 0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:89,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex justify-center pt-2",children:e.jsxDEV(ne,{type:"button",variant:"outline",size:"sm",onClick:a,className:"rounded-full border-primary/40",children:[e.jsxDEV(Th,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:246,columnNumber:13},void 0),"Add component"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:239,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:238,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:82,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/DishComponentsTable.tsx",lineNumber:76,columnNumber:5},void 0)},H3=({mappings:s,onChange:t,menuPrice:i,menuTitle:n,variant:a="card"})=>{const o=h.useCallback((c,f)=>{t(s.map(b=>{if(b.key!==c)return b;const D={...b,...f};if(f.status)return D;const u=D.itemCode&&D.price?"ready":"draft";return{...D,status:u}}))},[s,t]),l=h.useCallback(()=>{t(s.map(c=>{const f={...c,itemCode:ON(n||"Dish",c.systemName),autoCode:!0,price:i||c.price,autoPrice:!!i||c.autoPrice},b=f.itemCode&&f.price?"ready":"draft";return{...f,status:b}}))},[s,i,n,t]),r=e.jsxDEV(ne,{size:"sm",variant:"outline",className:"rounded-full border-primary/40 text-primary hover:bg-primary/10",onClick:l,children:[e.jsxDEV(oa,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:62,columnNumber:7},void 0),"Auto map codes"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:56,columnNumber:5},void 0),d=e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)_auto] gap-3 rounded-xl border border-primary/30 bg-muted/20 p-3 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("div",{children:"System"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:70,columnNumber:9},void 0),e.jsxDEV("div",{children:"Item Code"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:71,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-right",children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:72,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:69,columnNumber:7},void 0),e.jsxDEV("div",{className:"space-y-3",children:_N.map(c=>{const f=s.find(D=>D.key===c.key)??{key:c.key,systemName:c.name,itemCode:"",price:"",autoCode:!0,status:"draft"},b=f.status==="synced"?"default":f.status==="ready"?"secondary":"outline";return e.jsxDEV("div",{className:"grid grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)_auto] gap-3 rounded-xl border border-primary/20 bg-background/80 p-3 shadow-sm",children:[e.jsxDEV("div",{className:"flex flex-col gap-1 text-xs uppercase tracking-[0.3em] text-muted-foreground",children:[e.jsxDEV("span",{className:"text-sm font-semibold tracking-[0.22em] text-foreground",children:c.name},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:97,columnNumber:17},void 0),e.jsxDEV(et,{variant:b,className:"w-fit uppercase tracking-[0.3em]",children:f.status},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:100,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:96,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Xe,{value:f.itemCode,onChange:D=>o(c.key,{itemCode:D.target.value,autoCode:!1}),placeholder:`${c.short.toUpperCase()}-ITEM`,className:"h-10 rounded-lg border-primary/30"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:105,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.32em] text-muted-foreground",children:f.autoCode?"Auto":"Manual"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:116,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:104,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex flex-col items-end gap-2",children:[e.jsxDEV(Xe,{value:f.price,onChange:D=>o(c.key,{price:D.target.value,autoPrice:!1}),placeholder:i||"$00.00",className:"h-10 w-28 rounded-lg border-primary/30 text-right"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:121,columnNumber:17},void 0),e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-9 w-9 rounded-full text-emerald-500",onClick:()=>o(c.key,{status:f.status==="synced"?"ready":"synced"}),title:"Toggle synced",children:e.jsxDEV(Zg,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:143,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:132,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:120,columnNumber:15},void 0)]},c.key,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:92,columnNumber:13},void 0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:74,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:68,columnNumber:5},void 0);return a==="card"?e.jsxDEV($e,{className:"border-primary/30 bg-background/95 shadow-lg",children:[e.jsxDEV(Ke,{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"POS Integrations"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:157,columnNumber:11},void 0),r]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:156,columnNumber:9},void 0),e.jsxDEV(Ge,{className:"space-y-3 text-sm",children:d},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:162,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:155,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-end gap-2",children:r},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:169,columnNumber:7},void 0),d]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/PosMappingSection.tsx",lineNumber:168,columnNumber:5},void 0)},q3=({rows:s,recipeSummaries:t,recipeMap:i,activeComponentId:n,onFocusRow:a,onNavigateToRecipe:o,className:l})=>{const r=h.useMemo(()=>s.filter(c=>c.recipeId).map(c=>{const f=c.recipeId?t.get(c.recipeId):null,b=c.recipeId?i.get(c.recipeId):null;return{row:c,summary:f,recipe:b}}).filter(c=>c.summary&&c.recipe),[i,t,s]),d=h.useMemo(()=>r.length?n?r.find(c=>c.row.id===n)??r[0]:r[0]:null,[n,r]);return e.jsxDEV($e,{className:je("border-primary/30 bg-background/95 shadow-lg",l),children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Component Explorer"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:61,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:60,columnNumber:7},void 0),e.jsxDEV(Ge,{className:"grid gap-4 md:grid-cols-[minmax(0,0.9fr)_minmax(0,1.1fr)]",children:[e.jsxDEV(Ds,{className:"max-h-72 rounded-xl border border-primary/30",children:e.jsxDEV("div",{className:"flex flex-col divide-y divide-primary/20",children:r.length===0?e.jsxDEV("div",{className:"flex h-48 items-center justify-center px-4 text-center text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Select recipes to unlock deep linking"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:69,columnNumber:15},void 0):r.map(({row:c,summary:f})=>e.jsxDEV("button",{type:"button",onClick:()=>a(c.id),className:`flex flex-col items-start gap-1 px-4 py-3 text-left transition hover:bg-primary/10 ${c.id===d?.row.id?"bg-primary/15":""}`,children:[e.jsxDEV("span",{className:"text-sm font-semibold tracking-[0.12em]",children:c.label||f.menuName||f.title},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:80,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-1 text-[10px] uppercase tracking-[0.32em] text-muted-foreground",children:[f.course?e.jsxDEV(et,{variant:"outline",children:f.course},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:85,columnNumber:23},void 0):null,f.cuisine?e.jsxDEV(et,{variant:"outline",children:f.cuisine},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:88,columnNumber:23},void 0):null,f.allergens.slice(0,2).map(b=>e.jsxDEV(et,{variant:"outline",children:b},b,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:91,columnNumber:23},void 0))]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:83,columnNumber:19},void 0)]},c.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:74,columnNumber:17},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:67,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:66,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-3",children:d?e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Component detail"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:106,columnNumber:19},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold tracking-[0.08em]",children:d.row.label||d.summary.menuName||d.summary.title},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:109,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:105,columnNumber:17},void 0),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>o(d.summary.id),className:"rounded-full border-primary/40 text-primary hover:bg-primary/10",children:["Open in search",e.jsxDEV(Xg,{className:"ml-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:122,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:115,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:104,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 text-[11px] uppercase tracking-[0.28em] text-muted-foreground",children:[d.summary.course?e.jsxDEV(et,{variant:"outline",children:d.summary.course},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:127,columnNumber:19},void 0):null,d.summary.cuisine?e.jsxDEV(et,{variant:"outline",children:d.summary.cuisine},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:130,columnNumber:19},void 0):null,d.summary.costPerPortion!=null?e.jsxDEV(et,{variant:"outline",children:["Cost"," ",tn(d.summary.costPerPortion,d.summary.currency)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:133,columnNumber:19},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:125,columnNumber:15},void 0),e.jsxDEV(Wi,{className:"bg-primary/20"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:142,columnNumber:15},void 0),d.summary.description?e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:d.summary.description},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:144,columnNumber:17},void 0):null,e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Key ingredients"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:149,columnNumber:17},void 0),e.jsxDEV(Ds,{className:"max-h-40 rounded-xl border border-primary/20",children:e.jsxDEV("ul",{className:"space-y-1.5 p-3 text-sm",children:d.recipe.ingredients?.map((c,f)=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"mt-0.5 h-1.5 w-1.5 flex-none rounded-full bg-primary/60"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:156,columnNumber:25},void 0),e.jsxDEV("span",{children:c},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:157,columnNumber:25},void 0)]},f,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:155,columnNumber:23},void 0))??e.jsxDEV("li",{className:"text-xs text-muted-foreground",children:"No ingredient list captured."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:160,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:153,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:152,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:148,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Directions snapshot"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:168,columnNumber:17},void 0),e.jsxDEV(Ds,{className:"max-h-40 rounded-xl border border-primary/20",children:e.jsxDEV("ol",{className:"space-y-2.5 p-3 text-sm",children:d.recipe.instructions?.length?d.recipe.instructions.map((c,f)=>e.jsxDEV("li",{className:"flex gap-2",children:[e.jsxDEV("span",{className:"font-semibold text-primary",children:[f+1,"."]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:176,columnNumber:27},void 0),e.jsxDEV("span",{children:c},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:179,columnNumber:27},void 0)]},f,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:175,columnNumber:25},void 0)):e.jsxDEV("li",{className:"text-xs text-muted-foreground",children:"No detailed instructions imported for this recipe."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:183,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:172,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:171,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:167,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:103,columnNumber:13},void 0):e.jsxDEV("div",{className:"flex h-full flex-col items-center justify-center gap-2 rounded-xl border border-dashed border-primary/30 bg-muted/20 p-6 text-center text-xs uppercase tracking-[0.35em] text-muted-foreground",children:"Select a component to preview recipe lineage"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:192,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:101,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RecipePreviewPanel.tsx",lineNumber:59,columnNumber:5},void 0)},df=({options:s,selectedIds:t,onToggle:i,emptyMessage:n,className:a})=>s.length?e.jsxDEV(pd,{delayDuration:150,children:e.jsxDEV("div",{className:je("flex flex-wrap items-center gap-2",a),children:s.map(o=>{const l=t.includes(o.id);return e.jsxDEV(fd,{children:[e.jsxDEV(hd,{asChild:!0,children:e.jsxDEV("button",{type:"button",onClick:r=>{r.preventDefault(),i(o.id,r.shiftKey)},onKeyDown:r=>{(r.key===" "||r.key==="Enter")&&(r.preventDefault(),i(o.id,r.shiftKey))},className:je("group relative flex items-center gap-2 rounded-full border px-3 py-1.5 text-[11px] font-semibold uppercase tracking-[0.28em] transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background",l?"border-primary bg-primary text-primary-foreground shadow-sm":"border-primary/30 bg-background/80 text-muted-foreground hover:border-primary/50 hover:text-primary",o.recommended&&!l?"border-dashed border-primary/60 text-primary":null),"aria-pressed":l,children:[e.jsxDEV("span",{className:"max-w-[12rem] truncate",children:o.label},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:77,columnNumber:19},void 0),o.tag?e.jsxDEV(et,{className:"rounded-full border border-primary/20 bg-primary/10 px-2 py-0.5 text-[10px] font-medium uppercase tracking-[0.32em] text-primary",children:o.tag},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:79,columnNumber:21},void 0):null,o.recommended&&!l?e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-primary",children:"Rec"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:84,columnNumber:21},void 0):null,e.jsxDEV(vn,{className:je("h-3.5 w-3.5 shrink-0 transition-opacity duration-150",l?"opacity-100 text-primary-foreground":"opacity-0 text-primary-foreground"),"aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:88,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:53,columnNumber:17},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:52,columnNumber:15},void 0),(o.description||o.meta)&&e.jsxDEV(bd,{side:"bottom",align:"center",className:"max-w-xs text-xs leading-relaxed",children:[e.jsxDEV("div",{className:"font-semibold text-foreground",children:o.label},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:105,columnNumber:19},void 0),o.tag?e.jsxDEV("div",{className:"mt-1 text-[10px] uppercase tracking-[0.32em] text-muted-foreground",children:o.tag},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:107,columnNumber:21},void 0):null,o.meta?e.jsxDEV("div",{className:"mt-1 text-muted-foreground",children:o.meta},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:112,columnNumber:21},void 0):null,o.description?e.jsxDEV("p",{className:"mt-2 text-muted-foreground",children:o.description},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:115,columnNumber:21},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:100,columnNumber:17},void 0)]},o.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:51,columnNumber:13},void 0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:47,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:46,columnNumber:5},void 0):e.jsxDEV("div",{className:je("flex h-full w-full items-center justify-center px-3 py-6 text-center text-xs uppercase tracking-[0.32em] text-muted-foreground",a),children:n},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:34,columnNumber:7},void 0),uf=({items:s,emptyMessage:t,className:i})=>s.length?e.jsxDEV(pd,{delayDuration:150,children:e.jsxDEV("div",{className:je("flex flex-wrap items-center gap-2 rounded-xl border border-primary/20 bg-muted/20 px-3 py-3",i),children:s.map(n=>e.jsxDEV(fd,{children:[e.jsxDEV(hd,{asChild:!0,children:e.jsxDEV("span",{tabIndex:0,className:"flex cursor-help items-center gap-1.5 rounded-full border border-primary/30 bg-background/80 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-primary outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:[e.jsxDEV("span",{className:"max-w-[11rem] truncate",children:n.label},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:174,columnNumber:17},void 0),n.tag?e.jsxDEV("span",{className:"text-[9px] font-medium uppercase tracking-[0.34em] text-muted-foreground",children:n.tag},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:176,columnNumber:19},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:170,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:169,columnNumber:13},void 0),(n.description||n.meta)&&e.jsxDEV(bd,{side:"bottom",align:"center",className:"max-w-xs text-xs leading-relaxed",children:[e.jsxDEV("div",{className:"font-semibold text-foreground",children:n.label},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:188,columnNumber:17},void 0),n.tag?e.jsxDEV("div",{className:"mt-1 text-[10px] uppercase tracking-[0.32em] text-muted-foreground",children:n.tag},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:190,columnNumber:19},void 0):null,n.meta?e.jsxDEV("div",{className:"mt-1 text-muted-foreground",children:n.meta},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:195,columnNumber:19},void 0):null,n.description?e.jsxDEV("p",{className:"mt-2 text-muted-foreground",children:n.description},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:198,columnNumber:19},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:183,columnNumber:15},void 0)]},n.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:168,columnNumber:11},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:161,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:160,columnNumber:5},void 0):e.jsxDEV("div",{className:je("rounded-xl border border-dashed border-primary/30 px-3 py-3 text-xs text-muted-foreground",i),children:t},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/components/RoutingSelector.tsx",lineNumber:148,columnNumber:7},void 0),K3=6,Lr=()=>({id:ji(),quantity:"1 ea",recipeId:null,label:"",notes:""}),mf=()=>Array.from({length:K3},()=>Lr()),Y3=()=>{const{recipes:s,listStations:t,listPrinters:i,addImages:n}=ln(),a=If(),{t:o}=Vs(),{setToolbar:l,resetToolbar:r}=oo(),d=h.useMemo(()=>{const we=new Map;for(const qe of s)we.set(qe.id,d3(qe));return we},[s]),c=h.useMemo(()=>{const we=new Map;for(const qe of s)we.set(qe.id,qe);return we},[s]),[f,b]=h.useState(mf),[D,u]=h.useState(""),[p,x]=h.useState(""),[S,m]=h.useState(""),[v,g]=h.useState(""),[N,w]=h.useState(""),[A,I]=h.useState([]),[B,W]=h.useState([]),[se,ie]=h.useState(()=>af()),[R,F]=h.useState(!1),[k,Q]=h.useState([]),[J,O]=h.useState([]),[me,de]=h.useState(null),[fe,ae]=h.useState(null),[L,H]=h.useState(0),[le,ue]=h.useState("stations"),[K,C]=h.useState(""),[P,ee]=h.useState(""),$=h.useMemo(()=>{if(fe)return fe;const we=f.map(Qe=>Qe.recipeId?d.get(Qe.recipeId):null).filter(Boolean);if(!we.length)return null;const qe=L%we.length;return we[qe]?.image??we[0]?.image??null},[f,fe,L,d]),{totalCost:U,currency:G}=h.useMemo(()=>nf(f,d),[f,d]),re=h.useMemo(()=>N3(p),[p]),V=h.useMemo(()=>!re||re<=0?null:Number((U/re).toFixed(3)),[re,U]);h.useMemo(()=>!re||re<=0?null:Number((re-U).toFixed(2)),[re,U]),h.useMemo(()=>{if(!re||re<=0)return null;const we=re-U;return Number((we/re*100).toFixed(1))},[re,U]);const Y=h.useMemo(()=>b3(d,f),[f,d]),T=h.useMemo(()=>x3(V,Y),[V,Y]),y=Number.isFinite(Y)?Math.round(Y):null,E=h.useMemo(()=>t(),[t]),j=h.useMemo(()=>i(),[i]),q=h.useMemo(()=>E.filter(we=>k.includes(we.id)),[E,k]),te=h.useMemo(()=>j.filter(we=>J.includes(we.id)),[j,J]),Z=h.useMemo(()=>{const we=new Set;return k.forEach(qe=>{const Qe=E.find(ot=>ot.id===qe);Qe&&Qe.defaultPrinters.forEach(ot=>we.add(ot))}),Array.from(we)},[k,E]),ve=h.useMemo(()=>new Set(Z),[Z]),ke=h.useMemo(()=>{const we=K.trim().toLowerCase();return we?E.filter(qe=>qe.name.toLowerCase().includes(we)||qe.category.toLowerCase().includes(we)):E},[K,E]),De=h.useMemo(()=>{const we=P.trim().toLowerCase();return we?j.filter(qe=>[qe.name,qe.technology,qe.recommendedUse,qe.description].filter(Boolean).map(ot=>ot.toLowerCase()).some(ot=>ot.includes(we))):j},[P,j]),We=h.useMemo(()=>ke.map(we=>{const qe=we.defaultPrinters.map(Qe=>j.find(ot=>ot.id===Qe)?.name).filter(Qe=>!!Qe);return{id:we.id,label:we.name,tag:we.category.replace(/-/g," ").toUpperCase(),description:we.description,meta:qe.length?`Suggested printers: ${qe.join(", ")}`:void 0}}),[ke,j]),ze=h.useMemo(()=>De.map(we=>({id:we.id,label:we.name,tag:we.technology.toUpperCase(),description:we.description,meta:we.recommendedUse,recommended:ve.has(we.id)})),[De,ve]),st=h.useMemo(()=>q.map(we=>{const qe=we.defaultPrinters.map(Qe=>j.find(ot=>ot.id===Qe)?.name).filter(Qe=>!!Qe);return{id:we.id,label:we.name,tag:we.category.replace(/-/g," ").toUpperCase(),description:we.description,meta:qe.length?`Suggested printers: ${qe.join(", ")}`:void 0}}),[j,q]),_t=h.useMemo(()=>te.map(we=>({id:we.id,label:we.name,tag:we.technology.toUpperCase(),description:we.description,meta:we.recommendedUse})),[te]),Nt=h.useCallback((we,qe)=>{b(Qe=>Qe.map(ot=>ot.id===we?{...ot,...qe}:ot))},[]),ye=h.useCallback((we,qe)=>{b(Qe=>Qe.map(ot=>{if(ot.id!==we)return ot;if(!qe)return{...ot,recipeId:null,label:ot.label,notes:ot.notes};const ft=d.get(qe),xt=ft?.menuName||ft?.title||ot.label;return{...ot,recipeId:qe,label:xt,notes:ot.notes}}))},[d]),pt=h.useCallback(()=>{b(we=>[...we,Lr()])},[]),ct=h.useCallback(we=>{b(qe=>qe.filter(Qe=>Qe.id!==we)),de(qe=>qe===we?null:qe)},[]),Ot=h.useCallback(()=>{const we=d;if(!f.some(Gt=>Gt.recipeId)){Gn({title:"Select components first",description:"Choose at least one recipe before generating copy."});return}const Qe=u3(f,we),ot=m3(f,we),ft=p3(f,we),xt=f3(f,we),jt=tf(f,we),At=sf(we,f),{totalCost:Vt,currency:Qt}=nf(f,we),ks=Vt>0?Vt*3.25:null,Yt=ks?tn(ks,Qt):p;u(Gt=>Gt.trim()?Gt:Qe),m(ot),g(ft),w(xt),I(jt),W(At),Yt&&x(Yt),ie(Gt=>rf(Gt,Qe,Yt)),Gn({title:"Dish assembly drafted",description:"Copy, allergens, pairings, and pricing have been updated."})},[f,p,d]),Es=h.useCallback(()=>{b(mf()),u(""),x(""),m(""),g(""),w(""),I([]),W([]),ie(af()),Q([]),O([]),de(null),ae(null),H(0),Kt.current=null,fs.current=null},[]);h.useEffect(()=>(l({title:"Dish Assembly",items:[{id:"dish-assembly-generate",label:"Auto-fill",ariaLabel:"Generate dish assembly details",onClick:Ot,icon:oa,className:"rounded-full border border-primary/40 bg-primary/10 text-primary shadow-sm hover:bg-primary/20"},{id:"dish-assembly-pos-connect",label:o("dishAssembly.actions.posConnect","POS Connect"),ariaLabel:o("dishAssembly.actions.posConnect","POS Connect"),onClick:()=>F(!0),icon:Jg,className:"rounded-full border border-primary/40 bg-background text-primary shadow-sm hover:bg-primary/10"},{id:"dish-assembly-reset",label:"Reset",ariaLabel:"Reset dish assembly workspace",onClick:Es,icon:Br,className:"rounded-full border border-destructive/30 bg-background text-destructive shadow-sm hover:bg-destructive/10"}]}),()=>r()),[Ot,r,Es,l,o]);const qt=h.useCallback(async we=>{if(!we)return;const qe=new FileReader;qe.onload=()=>{const Qe=qe.result;typeof Qe=="string"&&(ae(Qe),H(0))},qe.readAsDataURL(we);try{await n([we],{tags:["dish-assembly","upload"]})>0?Gn({title:"Image stored",description:"Uploaded dish imagery is now available in the gallery."}):Gn({title:"Image already saved",description:"This filename already exists in the gallery library."})}catch(Qe){Gn({title:"Upload failed",description:Qe instanceof Error?Qe.message:"Could not save image to gallery.",variant:"destructive"})}},[n]),ws=h.useRef(null),Kt=h.useRef(null),fs=h.useRef(null),Cs=h.useCallback((we,qe)=>{const Qe=E.findIndex(ot=>ot.id===we);Qe!==-1&&Q(ot=>{const ft=new Set(ot);if(qe&&Kt.current!=null){const xt=Kt.current,jt=Math.min(xt,Qe),At=Math.max(xt,Qe);for(let Vt=jt;Vt<=At;Vt+=1){const Qt=E[Vt];Qt&&ft.add(Qt.id)}}else ft.has(we)?ft.delete(we):ft.add(we);return Kt.current=Qe,E.filter(xt=>ft.has(xt.id)).map(xt=>xt.id)})},[E]),xs=h.useCallback((we,qe)=>{const Qe=j.findIndex(ot=>ot.id===we);Qe!==-1&&O(ot=>{const ft=new Set(ot);if(qe&&fs.current!=null){const xt=fs.current,jt=Math.min(xt,Qe),At=Math.max(xt,Qe);for(let Vt=jt;Vt<=At;Vt+=1){const Qt=j[Vt];Qt&&ft.add(Qt.id)}}else ft.has(we)?ft.delete(we):ft.add(we);return fs.current=Qe,j.filter(xt=>ft.has(xt.id)).map(xt=>xt.id)})},[j]),It=h.useCallback(()=>{Q([]),Kt.current=null},[]),ls=h.useCallback(()=>{O([]),fs.current=null},[]);h.useEffect(()=>{if(!k.length){O(we=>we.length?[]:we),fs.current=null;return}O(we=>{if(we.length)return we;const qe=Z.filter(Qe=>j.some(ot=>ot.id===Qe));return qe.length?qe:we})},[j,Z,k]),h.useMemo(()=>{if(!me)return null;const we=f.find(qe=>qe.id===me);return we?.recipeId?d.get(we.recipeId)??null:null},[me,f,d]);const zs=h.useCallback(we=>{de(we)},[]);h.useEffect(()=>{let we=null;try{we=sessionStorage.getItem("dishAssembly:incomingRecipeId")}catch{we=null}if(!we)return;const qe=d.get(we);if(!qe)return;sessionStorage.removeItem("dishAssembly:incomingRecipeId");let Qe=null;b(xt=>{const jt=xt.length?[...xt]:[Lr()];let At=jt.findIndex(Yt=>!Yt.recipeId);At===-1?(jt.push(Lr()),At=jt.length-1):jt[At]={...jt[At]};const Vt=jt[At],Qt=qe.menuName||qe.title||Vt.label,ks={...Vt,recipeId:we,label:Qt};return Qe=ks.id,jt[At]=ks,jt}),Qe&&de(Qe);const ot=qe.menuName||qe.title;u(xt=>xt.trim()?xt:ot||xt),m(xt=>xt.trim()?xt:qe.description||xt);const ft=qe.menuPrice!=null?tn(qe.menuPrice,qe.currency):"";ft&&x(xt=>xt.trim()?xt:ft),ie(xt=>rf(xt,ot||qe.title,ft)),Gn({title:o("dishAssembly.toasts.recipeImported","Recipe queued"),description:o("dishAssembly.toasts.recipeImportedDetail","{name} is ready in Dish Assembly.",{name:ot||qe.title})})},[d,o]);const ys=h.useCallback(we=>{sessionStorage.setItem("dishAssembly:focusRecipe",we),a("/?tab=search")},[a]);return e.jsxDEV("div",{className:"mx-auto w-full max-w-[1420px] space-y-6 px-4 py-6 sm:px-6 lg:px-10",children:[e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)] xl:grid-cols-[minmax(0,1.25fr)_minmax(0,0.85fr)]",children:[e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV($e,{className:"overflow-hidden border-primary/30 bg-background/95 shadow-lg backdrop-blur",children:e.jsxDEV("div",{className:"grid gap-4 p-4 md:grid-cols-[minmax(0,1.05fr)_minmax(0,0.95fr)]",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"relative rounded-xl border border-primary/30 bg-muted/20 p-2",children:[e.jsxDEV(c3,{ratio:4/3,children:$?e.jsxDEV("img",{src:$,alt:D||"Dish hero",className:"h-full w-full rounded-lg object-cover"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:648,columnNumber:23},void 0):e.jsxDEV("div",{className:"flex h-full w-full items-center justify-center rounded-lg border border-dashed border-primary/40 bg-muted/30 text-sm uppercase tracking-[0.35em] text-muted-foreground",children:"Upload or select recipe imagery"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:654,columnNumber:23},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:646,columnNumber:19},void 0),e.jsxDEV("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>ws.current?.click(),className:"border-primary/40 text-primary hover:bg-primary/10",children:[e.jsxDEV(Mh,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:666,columnNumber:23},void 0),"Upload image"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:660,columnNumber:21},void 0),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>ae(null),disabled:!fe,children:[e.jsxDEV(Nn,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:675,columnNumber:23},void 0),"Use recipe media"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:669,columnNumber:21},void 0),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>H(we=>we+1),disabled:f.every(we=>!we.recipeId),children:"Cycle selections"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:678,columnNumber:21},void 0),e.jsxDEV("input",{ref:ws,type:"file",accept:"image/*",className:"hidden",onChange:we=>{const qe=we.target.files?.[0]??null;qt(qe),we.target.value=""}},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:688,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:659,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:645,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-col gap-3 md:flex-row md:flex-wrap md:items-end md:gap-4",children:[e.jsxDEV("label",{className:"flex-1 min-w-[240px] space-y-1 text-sm font-medium uppercase tracking-[0.28em] text-muted-foreground",children:["Menu Item Name",e.jsxDEV(Xe,{value:D,onChange:we=>u(we.target.value),placeholder:"Generated name",className:"rounded-xl border-primary/40 bg-background/80 text-base font-semibold uppercase tracking-[0.35em]"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:705,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:703,columnNumber:21},void 0),e.jsxDEV("label",{className:"flex w-full min-w-[160px] flex-col space-y-1 text-sm font-medium uppercase tracking-[0.28em] text-muted-foreground md:w-48",children:["Sell Price",e.jsxDEV(Xe,{value:p,onChange:we=>x(we.target.value),placeholder:tn(U*3.25,G),className:"rounded-xl border-primary/40 bg-background/80 text-lg font-semibold"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:714,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:712,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:702,columnNumber:19},void 0),e.jsxDEV("div",{className:"grid gap-2 sm:grid-cols-3",children:[e.jsxDEV("div",{className:"rounded-xl border border-primary/30 bg-background/80 px-3 py-3 text-center shadow-sm",children:[e.jsxDEV("div",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Food Cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:727,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-base font-semibold text-primary",children:V!=null?`${Math.round(V*100)}%`:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:730,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:726,columnNumber:21},void 0),e.jsxDEV("div",{className:"rounded-xl border border-primary/30 bg-background/80 px-3 py-3 text-center shadow-sm",children:[e.jsxDEV("div",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Menu Engineering"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:737,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-base font-semibold text-primary",children:T.classification},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:740,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:736,columnNumber:21},void 0),e.jsxDEV("div",{className:"rounded-xl border border-primary/30 bg-background/80 px-3 py-3 text-center shadow-sm",children:[e.jsxDEV("div",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Popularity"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:745,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-base font-semibold text-primary",children:y!=null?`${y}%`:"—"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:748,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:744,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:725,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:701,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:644,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:643,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:642,columnNumber:11},void 0),e.jsxDEV($e,{className:"border-primary/30 bg-background/95 shadow-lg",children:[e.jsxDEV(Ke,{className:"space-y-1",children:[e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Narrative & Service Brief"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:760,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs uppercase tracking-[0.28em] text-muted-foreground",children:"Shape guest-facing language and expo reminders."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:763,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:759,columnNumber:13},void 0),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Menu Description"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:769,columnNumber:17},void 0),e.jsxDEV($s,{value:S,onChange:we=>m(we.target.value),rows:6,placeholder:"Elegant marketing copy for the menu listing",className:"h-auto min-h-[160px] rounded-xl border border-primary/30 bg-background/80"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:772,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:768,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Server Notes"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:781,columnNumber:17},void 0),e.jsxDEV($s,{value:v,onChange:we=>g(we.target.value),rows:6,placeholder:"Talking points, plating, or expo reminders",className:"h-auto min-h-[160px] rounded-xl border border-primary/30 bg-background/80"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:784,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:780,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(ne,{size:"sm",className:"rounded-full bg-primary text-primary-foreground hover:bg-primary/90",onClick:Ot,children:[e.jsxDEV(oa,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:798,columnNumber:19},void 0),"Auto-fill narrative"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:793,columnNumber:17},void 0),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:Es,className:"rounded-full border-destructive/40 text-destructive hover:bg-destructive/10",children:[e.jsxDEV(Br,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:807,columnNumber:19},void 0),"Clear workspace"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:801,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:792,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:767,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:758,columnNumber:11},void 0),e.jsxDEV(G3,{rows:f,recipeSummaries:d,onRowChange:Nt,onAssignRecipe:ye,onAddRow:pt,onRemoveRow:ct,onFocusRow:zs},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:814,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:641,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV($e,{className:"border-primary/30 bg-background/95 shadow-lg",children:[e.jsxDEV(Ke,{className:"space-y-1",children:[e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Routing & Printers"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:828,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs uppercase tracking-[0.28em] text-muted-foreground",children:"Map the dish journey across stations and chit devices."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:831,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:827,columnNumber:13},void 0),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV(et,{variant:"outline",className:"border-primary/40 text-primary",children:[k.length," station",k.length===1?"":"s"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:837,columnNumber:17},void 0),e.jsxDEV(et,{variant:"outline",className:"border-primary/40 text-primary",children:[J.length," printer",J.length===1?"":"s"]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:840,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:836,columnNumber:15},void 0),e.jsxDEV(Ki,{value:le,onValueChange:we=>ue(we),className:"w-full",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-2 bg-background/80",children:[e.jsxDEV(bs,{value:"stations",children:["Stations",e.jsxDEV("span",{className:"ml-2 rounded-full bg-primary/15 px-2 py-0.5 text-[10px] font-semibold",children:k.length},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:854,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:852,columnNumber:19},void 0),e.jsxDEV(bs,{value:"printers",children:["Printers",e.jsxDEV("span",{className:"ml-2 rounded-full bg-primary/15 px-2 py-0.5 text-[10px] font-semibold",children:J.length},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:860,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:858,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:851,columnNumber:17},void 0),e.jsxDEV(St,{value:"stations",className:"space-y-3 pt-3",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV(Xe,{value:K,onChange:we=>C(we.target.value),placeholder:"Search stations",className:"h-9 flex-1 rounded-full border-primary/30 bg-background/80 text-sm"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:868,columnNumber:21},void 0),e.jsxDEV(ne,{type:"button",variant:"ghost",size:"sm",onClick:It,disabled:!k.length,className:"h-8 rounded-full px-3",children:"Clear"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:874,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:867,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.28em] text-muted-foreground",children:"Shift-click to span selections across stations."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:885,columnNumber:19},void 0),e.jsxDEV(Ds,{className:"max-h-48 rounded-xl border border-primary/30",children:e.jsxDEV(df,{options:We,selectedIds:k,onToggle:Cs,emptyMessage:"No stations found",className:"w-full p-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:889,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:888,columnNumber:19},void 0),e.jsxDEV(uf,{items:st,emptyMessage:"Select stations to map the dish workflow."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:897,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:866,columnNumber:17},void 0),e.jsxDEV(St,{value:"printers",className:"space-y-3 pt-3",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV(Xe,{value:P,onChange:we=>ee(we.target.value),placeholder:"Search printers",className:"h-9 flex-1 rounded-full border-primary/30 bg-background/80 text-sm"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:905,columnNumber:21},void 0),e.jsxDEV(ne,{type:"button",variant:"ghost",size:"sm",onClick:ls,disabled:!J.length,className:"h-8 rounded-full px-3",children:"Clear"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:911,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:904,columnNumber:19},void 0),Z.length?e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.28em] text-primary",children:["Recommended from stations:"," ",Z.map(we=>j.find(qe=>qe.id===we)?.name??"").filter(Boolean).join(", ")]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:923,columnNumber:21},void 0):e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.28em] text-muted-foreground",children:"Shift-click to capture multiple devices in sequence."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:931,columnNumber:21},void 0),e.jsxDEV(Ds,{className:"max-h-48 rounded-xl border border-primary/30",children:e.jsxDEV(df,{options:ze,selectedIds:J,onToggle:xs,emptyMessage:"No printers found",className:"w-full p-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:936,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:935,columnNumber:19},void 0),e.jsxDEV(uf,{items:_t,emptyMessage:"Choose printers to capture routing instructions for POS setup."},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:944,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:903,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:844,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:835,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:826,columnNumber:11},void 0),e.jsxDEV($e,{className:"border-primary/30 bg-background/95 shadow-lg",children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Serviceware & Allergens"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:955,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:954,columnNumber:13},void 0),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Serviceware"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:961,columnNumber:17},void 0),e.jsxDEV($s,{value:N,onChange:we=>w(we.target.value),rows:4,placeholder:"Plating vessels, utensils, expo requirements",className:"rounded-xl border border-primary/30 bg-background/80"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:964,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:960,columnNumber:15},void 0),e.jsxDEV(Ki,{defaultValue:"allergens",className:"w-full",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-2 bg-background/80",children:[e.jsxDEV(bs,{value:"allergens",children:"Allergens"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:974,columnNumber:19},void 0),e.jsxDEV(bs,{value:"pairings",children:"Pairings"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:975,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:973,columnNumber:17},void 0),e.jsxDEV(St,{value:"allergens",className:"pt-3",children:[e.jsxDEV("div",{className:"flex justify-between pb-2 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("span",{children:"Item / Allergen call-outs"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:979,columnNumber:21},void 0),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>I(tf(f,d)),className:"h-7 text-xs uppercase tracking-[0.28em]",children:"Refresh"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:980,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:978,columnNumber:19},void 0),e.jsxDEV(Ds,{className:"max-h-60 rounded-xl border border-primary/30",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-muted/40 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:997,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Allergen"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:998,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Modify"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:999,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Alternative"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1e3,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:996,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:995,columnNumber:23},void 0),e.jsxDEV("tbody",{children:A.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:4,className:"px-3 py-6 text-center text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Generate allergen guidance from components"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1006,columnNumber:29},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1005,columnNumber:27},void 0):A.map(we=>e.jsxDEV("tr",{className:"border-t border-border/60 text-[12px]",children:[e.jsxDEV("td",{className:"px-3 py-2 font-medium",children:we.itemName},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1019,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2",children:we.allergen},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1022,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2 text-xs text-muted-foreground",children:we.modify},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1023,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2 text-xs text-muted-foreground",children:we.alternative},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1026,columnNumber:31},void 0)]},we.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1015,columnNumber:29},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1003,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:994,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:993,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:977,columnNumber:17},void 0),e.jsxDEV(St,{value:"pairings",className:"pt-3",children:[e.jsxDEV("div",{className:"flex justify-between pb-2 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("span",{children:"Wine & Beverage Strategy"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1038,columnNumber:21},void 0),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:()=>W(sf(d,f)),className:"h-7 text-xs uppercase tracking-[0.28em]",children:"Refresh"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1039,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1037,columnNumber:19},void 0),e.jsxDEV(Ds,{className:"max-h-60 rounded-xl border border-primary/30",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-muted/40 text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1056,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Year"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1057,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Location"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1058,columnNumber:27},void 0),e.jsxDEV("th",{className:"px-3 py-2 text-left",children:"Country"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1059,columnNumber:27},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1055,columnNumber:25},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1054,columnNumber:23},void 0),e.jsxDEV("tbody",{children:B.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:4,className:"px-3 py-6 text-center text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Generate beverage pairings from cuisine cues"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1065,columnNumber:29},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1064,columnNumber:27},void 0):B.map(we=>e.jsxDEV("tr",{className:"border-t border-border/60 text-[12px]",children:[e.jsxDEV("td",{className:"px-3 py-2 font-medium",children:we.itemName},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1078,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2",children:we.year||"NV"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1081,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2",children:we.location},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1082,columnNumber:31},void 0),e.jsxDEV("td",{className:"px-3 py-2",children:we.country},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1083,columnNumber:31},void 0)]},we.id,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1074,columnNumber:29},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1062,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1053,columnNumber:21},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1052,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1036,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:972,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:959,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:953,columnNumber:11},void 0),e.jsxDEV(q3,{rows:f,recipeSummaries:d,recipeMap:c,activeComponentId:me,onFocusRow:zs,onNavigateToRecipe:ys},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1095,columnNumber:11},void 0),e.jsxDEV($e,{className:"border-primary/30 bg-background/95",children:[e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"text-sm font-semibold uppercase tracking-[0.35em] text-muted-foreground",children:"Performance Outlook"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1106,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1105,columnNumber:13},void 0),e.jsxDEV(Ge,{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"uppercase tracking-[0.32em] text-muted-foreground",children:"Estimated cost"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1112,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-base font-semibold",children:tn(U,G)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1115,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1111,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"uppercase tracking-[0.32em] text-muted-foreground",children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1120,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-base font-semibold",children:p||tn(U*3.25,G)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1123,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1119,columnNumber:15},void 0),e.jsxDEV(Wi,{className:"bg-primary/20"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1127,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Menu Engineering"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1129,columnNumber:17},void 0),e.jsxDEV("div",{className:"text-base font-semibold text-primary",children:T.classification},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1132,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:T.narrative},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1135,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1128,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1110,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1104,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:825,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:640,columnNumber:7},void 0),e.jsxDEV(ss,{open:R,onOpenChange:F,children:e.jsxDEV(is,{className:"max-w-4xl border-primary/40 bg-background/95 shadow-xl",children:[e.jsxDEV(ns,{children:[e.jsxDEV(as,{children:o("dishAssembly.actions.posConnect","POS Connect")},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1146,columnNumber:13},void 0),e.jsxDEV(yi,{children:o("dishAssembly.actions.posConnectDescription","Map dish codes and pricing across connected POS systems.")},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1149,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1145,columnNumber:11},void 0),e.jsxDEV(H3,{mappings:se,onChange:ie,menuPrice:p,menuTitle:D,variant:"plain"},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1156,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1144,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:1143,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/dish-assembly/DishAssemblyWorkspace.tsx",lineNumber:639,columnNumber:5},void 0)};function Q3(){return e.jsxDEV(Y3,{},void 0,!1,{fileName:"/app/code/client/pages/sections/dish-assembly/index.tsx",lineNumber:5,columnNumber:10},this)}const Na=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(mh,{ref:i,className:je("relative flex w-full touch-none select-none items-center",s),...t,children:[e.jsxDEV(eg,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsxDEV(tg,{className:"absolute h-full bg-primary"},void 0,!1,{fileName:"/app/code/client/components/ui/slider.tsx",lineNumber:19,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/slider.tsx",lineNumber:18,columnNumber:5},void 0),e.jsxDEV(sg,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},void 0,!1,{fileName:"/app/code/client/components/ui/slider.tsx",lineNumber:21,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/slider.tsx",lineNumber:10,columnNumber:3},void 0));Na.displayName=mh.displayName;const Pa=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(ph,{className:je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:i,children:e.jsxDEV(ig,{className:je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")},void 0,!1,{fileName:"/app/code/client/components/ui/switch.tsx",lineNumber:18,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/switch.tsx",lineNumber:10,columnNumber:3},void 0));Pa.displayName=ph.displayName;function Z3(s,t){const i=t?.maxStates,[n,a]=h.useState({past:[],present:s,future:[]}),o=h.useCallback(b=>{const D=typeof b=="function"?b(n.present):b;a(u=>{const p=[...u.past,u.present];return p.length>i&&p.shift(),{past:p,present:D,future:[]}})},[n.present,i]),l=h.useCallback(()=>{a(b=>{if(b.past.length===0)return b;const D=b.past.slice(0,-1),u=b.past[b.past.length-1];return{past:D,present:u,future:[b.present,...b.future]}})},[]),r=h.useCallback(()=>{a(b=>{if(b.future.length===0)return b;const D=b.future[0],u=b.future.slice(1);return{past:[...b.past,b.present],present:D,future:u}})},[]),d=h.useCallback(b=>{a({past:[],present:b,future:[]})},[]),c=n.past.length>0,f=n.future.length>0;return{state:n.present,setState:o,undo:l,redo:r,reset:d,canUndo:c,canRedo:f}}function X3(s,t){const{toast:i}=Ci(),{enabled:n=!0,showToast:a=!1}=t||{},o=h.useCallback(async()=>{if(n)try{await s(),a&&i({title:"Saved",description:"Your changes have been saved."})}catch(l){console.error("Save error:",l),i({title:"Save failed",description:"Failed to save your changes.",variant:"destructive"})}},[s,n,a,i]);_f("save-shortcut",{key:"s",meta:!0,handler:()=>o(),preventDefault:!0})}function J3(){const[s,t]=h.useState(null);return{feedback:s,showFeedback:n=>{t({type:n,timestamp:Date.now()})},UndoRedoFeedbackComponent:()=>e.jsxDEV(ej,{feedback:s},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:26,columnNumber:38},this)}}function ej({feedback:s}){const{t}=Vs();return e.jsxDEV(wd,{children:s&&e.jsxDEV($a.div,{initial:{opacity:0,y:-10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.9},transition:{duration:.2},className:"pointer-events-none fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50",children:e.jsxDEV("div",{className:"flex items-center gap-2 rounded-lg bg-foreground/80 px-4 py-2 text-background shadow-lg backdrop-blur-sm",children:s.type==="undo"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Nn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:51,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm font-medium",children:t("common.undo","Undo")},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:52,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:50,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Bh,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:58,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm font-medium",children:t("common.redo","Redo")},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:59,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:57,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:48,columnNumber:11},this)},`feedback-${s.timestamp}`,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:40,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/components/UndoRedoFeedback.tsx",lineNumber:38,columnNumber:5},this)}const tu="menu-studio:designs";function La(){try{const s=localStorage.getItem(tu);return s?JSON.parse(s):[]}catch(s){return console.error("Failed to load designs from storage:",s),[]}}function pf(s){try{const t=La(),i=t.findIndex(n=>n.id===s.id);i>=0?t[i]=s:t.push(s),t.length>20&&(t.sort((n,a)=>a.updatedAt-n.updatedAt),t.splice(20)),localStorage.setItem(tu,JSON.stringify(t))}catch(t){console.error("Failed to save design to storage:",t)}}function tj(s){try{const i=La().filter(n=>n.id!==s);localStorage.setItem(tu,JSON.stringify(i))}catch(t){console.error("Failed to delete design from storage:",t)}}function sj({images:s,onSelectImage:t,onClose:i}){const[n,a]=h.useState(""),o=h.useMemo(()=>{if(!n.trim())return s;const l=n.toLowerCase();return s.filter(r=>r.name.toLowerCase().includes(l)||r.tags?.some(d=>d.toLowerCase().includes(l)))},[s,n]);return e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxDEV("div",{className:"flex h-[90vh] max-h-[800px] w-full max-w-2xl flex-col gap-4 rounded-3xl border border-slate-300/50 dark:border-slate-700/60 bg-white dark:bg-slate-950 shadow-xl",children:[e.jsxDEV("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-800 px-6 py-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Select image from gallery"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:45,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[o.length," image",o.length!==1?"s":""," available"]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:i,className:"rounded-full","aria-label":"Close",children:e.jsxDEV(cn,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:59,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:52,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:43,columnNumber:9},this),e.jsxDEV("div",{className:"px-6",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(qi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV(Xe,{placeholder:"Search by name or tag...",value:n,onChange:l=>a(l.target.value),className:"pl-10"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:65,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:64,columnNumber:9},this),e.jsxDEV(Ds,{className:"flex-1 px-6",children:s.length===0?e.jsxDEV("div",{className:"flex h-64 items-center justify-center text-center",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"No images in gallery"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:81,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Upload images to the Gallery module first"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:84,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:80,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:79,columnNumber:13},this):o.length===0?e.jsxDEV("div",{className:"flex h-64 items-center justify-center text-center",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"No images found"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:92,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Try a different search term"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:95,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:91,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:90,columnNumber:13},this):e.jsxDEV("div",{className:"grid grid-cols-2 gap-4 pb-4 sm:grid-cols-3",children:o.map(l=>e.jsxDEV("button",{onClick:()=>{t(l),i()},className:je("group relative flex flex-col overflow-hidden rounded-2xl border-2 transition hover:border-sky-400","border-slate-300/50 dark:border-slate-700/60 hover:shadow-lg"),children:[e.jsxDEV("div",{className:"relative aspect-square overflow-hidden bg-slate-200 dark:bg-slate-800",children:[l.dataUrl||l.blobUrl?e.jsxDEV("img",{src:l.dataUrl||l.blobUrl,alt:l.name,className:"h-full w-full object-cover transition group-hover:scale-105"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:117,columnNumber:23},this):e.jsxDEV("div",{className:"flex h-full items-center justify-center bg-slate-300 dark:bg-slate-700",children:e.jsxDEV("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"No preview"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:124,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:123,columnNumber:23},this),e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 transition group-hover:bg-black/40",children:e.jsxDEV("span",{className:"text-xs font-semibold text-white opacity-0 transition group-hover:opacity-100",children:"Select"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:131,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:130,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:115,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-1 flex-col gap-1 bg-white dark:bg-slate-950 px-3 py-2",children:[e.jsxDEV("p",{className:"line-clamp-2 text-left text-xs font-medium text-slate-900 dark:text-slate-100",children:l.name},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:139,columnNumber:21},this),l.tags&&l.tags.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:[l.tags.slice(0,2).map(r=>e.jsxDEV("span",{className:"inline-block rounded-full bg-sky-500/20 px-2 py-0.5 text-[10px] text-sky-700 dark:text-sky-300",children:r},r,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:145,columnNumber:27},this)),l.tags.length>2&&e.jsxDEV("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:["+",l.tags.length-2]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:153,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:143,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:138,columnNumber:19},this)]},l.id,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:103,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV("div",{className:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex justify-end gap-2",children:e.jsxDEV(ne,{variant:"outline",onClick:i,children:"Cancel"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:168,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:167,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:41,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/GalleryImagePicker.tsx",lineNumber:40,columnNumber:5},this)}function ij({onSave:s,onLoad:t,savedDesigns:i,onDeleteDesign:n,currentName:a,isOpen:o,onClose:l}){const[r,d]=h.useState("load"),[c,f]=h.useState(a),[b,D]=h.useState(!1);if(!o)return null;const u=i.find(m=>m.name===c.trim()),p=()=>{if(c.trim()){if(u&&!b){D(!0);return}s(c),D(!1),l()}},x=m=>{t(m),l()},S=m=>{const v=new Date(m),N=new Date().getTime()-v.getTime(),w=Math.floor(N/6e4),A=Math.floor(N/36e5),I=Math.floor(N/864e5);return w<1?"Just now":w<60?`${w}m ago`:A<24?`${A}h ago`:I<7?`${I}d ago`:v.toLocaleDateString()};return e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxDEV("div",{className:"flex h-[90vh] max-h-[700px] w-full max-w-2xl flex-col gap-4 rounded-3xl border border-slate-300/50 dark:border-slate-700/60 bg-white dark:bg-slate-950 shadow-xl",children:[e.jsxDEV("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-800 px-6 py-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r==="save"?"Save design":"Load design"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:76,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:r==="save"?"Save your current design to browser storage":`${i.length} design${i.length!==1?"s":""} saved`},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",onClick:l,className:"rounded-full","aria-label":"Close",children:e.jsxDEV(cn,{className:"h-5 w-5"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:92,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-800 px-6",children:[e.jsxDEV("button",{onClick:()=>d("load"),className:je("px-4 py-2 text-sm font-medium border-b-2 transition",r==="load"?"border-cyan-500 text-cyan-600 dark:text-cyan-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Load"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:98,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>d("save"),className:je("px-4 py-2 text-sm font-medium border-b-2 transition",r==="save"?"border-cyan-500 text-cyan-600 dark:text-cyan-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"),children:"Save"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1 overflow-hidden px-6",children:r==="save"?e.jsxDEV("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Design name"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:127,columnNumber:17},this),e.jsxDEV(Xe,{value:c,onChange:m=>{f(m.target.value),D(!1)},onKeyDown:m=>{m.key==="Enter"&&p()},placeholder:"Enter design name...",className:"mt-2",autoFocus:!0},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:130,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:126,columnNumber:15},this),u&&b&&e.jsxDEV("div",{className:"rounded-lg border border-amber-200 dark:border-amber-900 bg-amber-50 dark:bg-amber-950/30 p-4 flex gap-3",children:[e.jsxDEV(to,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:146,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Design already exists"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:148,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-amber-800 dark:text-amber-200 mt-1",children:['"',c,'" will be overwritten with the current design.']},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:151,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:147,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:145,columnNumber:17},this),e.jsxDEV("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/30 p-4",children:e.jsxDEV("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"💾 Your design will be automatically saved to this browser's local storage. You can load it anytime from the Load tab."},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:158,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:157,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:125,columnNumber:13},this):e.jsxDEV(Ds,{className:"h-full",children:i.length===0?e.jsxDEV("div",{className:"flex h-64 items-center justify-center text-center py-8",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"No saved designs yet"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:168,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Save a design to get started"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:171,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:167,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:166,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-3 pb-4 pr-4",children:i.map(m=>e.jsxDEV("button",{onClick:()=>x(m),className:"group w-full rounded-xl border border-slate-300/50 dark:border-slate-700/60 bg-white dark:bg-slate-900/30 p-4 text-left transition hover:border-sky-400 hover:bg-sky-50 dark:hover:bg-sky-950/30",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"font-medium text-slate-900 dark:text-slate-100 truncate",children:m.name},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:186,columnNumber:27},this),e.jsxDEV("div",{className:"mt-1 flex items-center gap-4 text-xs text-slate-600 dark:text-slate-400",children:[e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(qa,{className:"h-3 w-3"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:191,columnNumber:31},this),S(m.updatedAt)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:190,columnNumber:29},this),e.jsxDEV("span",{children:[m.pageSize?.width,"x",m.pageSize?.height,"px"]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:194,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:189,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:185,columnNumber:25},this),e.jsxDEV("button",{onClick:v=>{v.stopPropagation(),n(m.id)},className:"opacity-0 transition group-hover:opacity-100 text-red-500 hover:text-red-600","aria-label":"Delete design",children:e.jsxDEV(vi,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:205,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:197,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:184,columnNumber:23},this)},m.id,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:179,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:177,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:164,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:123,columnNumber:9},this),e.jsxDEV("div",{className:"border-t border-slate-200 dark:border-slate-800 px-6 py-4 flex justify-end gap-2",children:[e.jsxDEV(ne,{variant:"outline",onClick:()=>{D(!1),l()},children:"Cancel"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:218,columnNumber:11},this),r==="save"&&e.jsxDEV(ne,{onClick:p,disabled:!c.trim(),variant:b?"destructive":"default",children:b?"Overwrite design":"Save design"},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:228,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:72,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/menu-studio/SaveLoadDialog.tsx",lineNumber:71,columnNumber:5},this)}async function nj(s,t,i){try{let n,a;try{n=(await Aa(()=>import("jspdf"),[])).jsPDF}catch{throw new Error("jsPDF is not installed. Please install it with: npm install jspdf")}try{a=(await Aa(()=>import("html2canvas"),[])).default}catch{throw new Error("html2canvas is not installed. Please install it with: npm install html2canvas")}const l=(await a(s,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"})).toDataURL("image/png"),r=i.widthIn||8.5,d=i.heightIn||11,c=new n({orientation:r>d?"landscape":"portrait",unit:"in",format:[r,d]}),f=i.bleedIn||.125;return c.addImage(l,"PNG",-f,-f,r+f*2,d+f*2),c.save(`${t}.pdf`),{success:!0}}catch(n){throw console.error("PDF export failed:",n),n}}async function aj(s,t,i){try{const n=rj(s,t),a=new Blob([n],{type:"image/svg+xml"}),o=URL.createObjectURL(a),l=document.createElement("a");return l.href=o,l.download=`${i}.svg`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o),{success:!0}}catch(n){throw console.error("SVG export failed:",n),new Error("Failed to export SVG.")}}function rj(s,t){let i=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${t.width} ${t.height}" width="${t.width}" height="${t.height}">
  <defs>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');
    </style>
  </defs>`;const n=[...s].sort((a,o)=>(a.zIndex||0)-(o.zIndex||0));for(const a of n)i+=oj(a);return i+=`
</svg>`,i}function oj(s){const{x:t,y:i,width:n,height:a,rotation:o,opacity:l}=s,r=o?`transform="rotate(${o} ${t+n/2} ${i+a/2})"`:"",d=l!==void 0?`opacity="${l}"`:"";let c="";switch(s.type){case"shape":s.shape==="ellipse"?c=`
  <ellipse cx="${t+n/2}" cy="${i+a/2}" rx="${n/2}" ry="${a/2}" 
    fill="${s.fill||"transparent"}" stroke="${s.borderColor||"none"}" 
    stroke-width="${s.borderWidth||0}" ${d} ${r} />`:c=`
  <rect x="${t}" y="${i}" width="${n}" height="${a}" rx="${s.borderRadius||0}"
    fill="${s.fill||"transparent"}" stroke="${s.borderColor||"none"}" 
    stroke-width="${s.borderWidth||0}" ${d} ${r} />`;break;case"divider":c=`
  <line x1="${t}" y1="${i+a/2}" x2="${t+n}" y2="${i+a/2}"
    stroke="${s.color||"#000000"}" stroke-width="${s.thickness||1}" ${d} ${r} />`;break;case"image":s.imageUrl&&(c=`
  <image x="${t}" y="${i}" width="${n}" height="${a}" href="${s.imageUrl}"
    preserveAspectRatio="${s.objectFit==="cover"?"xMidYMid slice":"xMidYMid meet"}" 
    ${d} ${r} />`);break;case"heading":case"subheading":case"body":case"menu-item":const f=s.fontFamily||"Arial, sans-serif",b=s.fontSize||16,D=s.color||"#000000",u=s.align==="center"?"middle":s.align==="right"?"end":"start",p=s.align==="center"?t+n/2:s.align==="right"?t+n:t;if(c=`
  <text x="${p}" y="${i+b}" font-family="${f}" font-size="${b}"
    fill="${D}" text-anchor="${u}" 
    letter-spacing="${s.letterSpacing||0}"
    line-height="${s.lineHeight||1.4}" ${d} ${r}
    style="white-space: pre-wrap; word-wrap: break-word; max-width: ${n}px;">
    ${ff(s.text||"")}
  </text>`,(s.type==="menu-item"||s.type==="body")&&s.description){const x=i+b+4,S=b*.8|0;c+=`
  <text x="${p}" y="${x+S}" font-family="${f}" font-size="${S}"
    fill="${s.accentColor||D}" text-anchor="${u}" opacity="0.8"
    style="white-space: pre-wrap; word-wrap: break-word; max-width: ${n}px;">
    ${ff(s.description)}
  </text>`}if(s.type==="menu-item"&&s.price){const x=t+n-20;c+=`
  <text x="${x}" y="${i+b}" font-family="${f}" font-size="${b}"
    fill="${s.accentColor||D}" text-anchor="end" ${d}>
    ${s.currency==="USD"?"$":""}${s.price}
  </text>`}break}return c}function ff(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const lj=["heading","subheading","body","menu-item"],cd=s=>lj.includes(s.type),cj=s=>s.type==="menu-item"?{name:s.name??"",text:s.text??"",description:s.description??"",price:s.price,currency:s.currency??"USD"}:{text:s.text??""},dj=(s,t)=>{const i={};return"text"in t&&(i.text=t.text??""),s.type==="menu-item"&&("name"in t&&(i.name=t.name??s.name),"description"in t&&(i.description=t.description??""),"price"in t&&(i.price=t.price===void 0?void 0:t.price),"currency"in t&&(i.currency=t.currency??s.currency??"USD")),i},go=[{label:"Playfair Display",family:"Playfair Display",value:"'Playfair Display', serif",importUrl:"https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap"},{label:"Cormorant Garamond",family:"Cormorant Garamond",value:"'Cormorant Garamond', serif",importUrl:"https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&display=swap"},{label:"Lora",family:"Lora",value:"'Lora', serif",importUrl:"https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&display=swap"},{label:"DM Sans",family:"DM Sans",value:"'DM Sans', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap"},{label:"Inter",family:"Inter",value:"'Inter', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"},{label:"Montserrat",family:"Montserrat",value:"'Montserrat', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"},{label:"Source Serif 4",family:"Source Serif 4",value:"'Source Serif 4', serif",importUrl:"https://fonts.googleapis.com/css2?family=Source+Serif+4:wght@400;500;600;700&display=swap"},{label:"Libre Baskerville",family:"Libre Baskerville",value:"'Libre Baskerville', serif",importUrl:"https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap"},{label:"Bodoni Moda",family:"Bodoni Moda",value:"'Bodoni Moda', serif",importUrl:"https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@400;500;600;700&display=swap"},{label:"EB Garamond",family:"EB Garamond",value:"'EB Garamond', serif",importUrl:"https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap"},{label:"Merriweather",family:"Merriweather",value:"'Merriweather', serif",importUrl:"https://fonts.googleapis.com/css2?family=Merriweather:wght@400;500;600;700&display=swap"},{label:"Work Sans",family:"Work Sans",value:"'Work Sans', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap"},{label:"Figtree",family:"Figtree",value:"'Figtree', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700&display=swap"},{label:"Raleway",family:"Raleway",value:"'Raleway', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&display=swap"},{label:"Poppins",family:"Poppins",value:"'Poppins', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"},{label:"Space Grotesk",family:"Space Grotesk",value:"'Space Grotesk', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"},{label:"Crimson Pro",family:"Crimson Pro",value:"'Crimson Pro', serif",importUrl:"https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;500;600;700&display=swap"},{label:"Rubik",family:"Rubik",value:"'Rubik', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap"},{label:"Manrope",family:"Manrope",value:"'Manrope', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap"},{label:"Quicksand",family:"Quicksand",value:"'Quicksand', sans-serif",importUrl:"https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap"}],uj=new Map(go.map(s=>[s.value,s])),mj=new Map(go.map(s=>[s.family,s])),ex=go[0]?.value??"serif",pj=[{name:"Earthy Mineral",swatches:["#fef6ec","#c0763a","#4a3b2a","#8d7350","#1f2933"]},{name:"Charcoal & Ice",swatches:["#f8fafc","#64748b","#0f172a","#38bdf8","#ecfeff"]},{name:"Citrus Atelier",swatches:["#fff8ed","#f97316","#facc15","#2563eb","#1e293b"]},{name:"Midnight Velvet",swatches:["#101828","#1f2937","#f8fafc","#d946ef","#818cf8"]}],fj=[{id:"charred-wagyu",label:"Charred Wagyu Striploin",url:"https://images.unsplash.com/photo-1473093226795-af9932fe5856?auto=format&fit=crop&w=900&q=80"},{id:"autumn-salad",label:"Autumn Market Salad",url:"https://images.unsplash.com/photo-1516684732162-798a0062be99?auto=format&fit=crop&w=900&q=80"},{id:"signature-dessert",label:"Smoked Chocolate Mousse",url:"https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?auto=format&fit=crop&w=900&q=80"},{id:"chefs-cocktail",label:"Chef's Welcome Cocktail",url:"https://images.unsplash.com/photo-1563371351-e53ebb744a1f?auto=format&fit=crop&w=900&q=80"}],hj=96,tx=s=>s/25.4,Cr=s=>Math.round(s*hj),hf=(s,t,i,n)=>{if(typeof s=="number")return s;if(typeof t=="number")return tx(t);throw new Error(`Preset ${i} is missing ${n} measurement`)},bf=(s,t,i)=>typeof s=="number"?s:typeof t=="number"?tx(t):i,qs=s=>{const t=hf(s.widthIn,s.widthMm,s.id,"width"),i=hf(s.heightIn,s.heightMm,s.id,"height"),n=bf(s.bleedIn,s.bleedMm,.125),a=bf(s.safeMarginIn,s.safeMarginMm,.25),o=s.orientation??(i>=t?"portrait":"landscape");return{id:s.id,label:s.label,widthPx:Cr(t),heightPx:Cr(i),widthIn:t,heightIn:i,bleedIn:n,safeMarginIn:a,bleedPx:Cr(n),safeMarginPx:Cr(a),dpi:s.dpi,colorProfile:s.colorProfile,orientation:o,description:s.description}},Rr=s=>{const t=Math.round(s*100)/100;return Number.isInteger(t)?t.toFixed(0):t.toFixed(2).replace(/0+$/,"").replace(/\.$/,"")},Mr=[qs({id:"letter_menu",label:"Full Menu – US Letter",widthIn:8.5,heightIn:11,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Standard dine-in menus, most common in the U.S."}),qs({id:"legal_menu",label:"Extended Menu – Legal",widthIn:8.5,heightIn:14,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Adds extra length for prix-fixe courses or wine lists."}),qs({id:"tabloid_menu",label:"Oversize Menu – Tabloid",widthIn:11,heightIn:17,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Ideal for folded menus, drink menus, or dual-page layouts."}),qs({id:"a4_menu",label:"International Menu – A4",widthMm:210,heightMm:297,bleedMm:3,safeMarginMm:5,dpi:300,colorProfile:"FOGRA39 (ISO Coated v2)",orientation:"portrait",description:"Global standard equivalent to US Letter."}),qs({id:"a3_menu",label:"Large Format – A3",widthMm:297,heightMm:420,bleedMm:3,safeMarginMm:5,dpi:300,colorProfile:"FOGRA39 (ISO Coated v2)",orientation:"portrait",description:"Common for bold single-sheet menus or posters."}),qs({id:"half_letter",label:"Menu Card – Half Letter",widthIn:5.5,heightIn:8.5,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Perfect for cocktail, dessert, or insert cards."}),qs({id:"third_letter",label:"Cocktail/Wine List – Third Letter",widthIn:3.66,heightIn:8.5,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Slim bar menus or focused wine lists."}),qs({id:"square_menu_8",label:"Square Menu 8×8",widthIn:8,heightIn:8,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Boutique square layout for tasting menus."}),qs({id:"square_menu_9",label:"Square Menu 9×9",widthIn:9,heightIn:9,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Premium square layout with additional breathing room."}),qs({id:"buffet_label",label:"Buffet Label Card (Folded)",widthIn:3.5,heightIn:4,bleedIn:.0625,safeMarginIn:.125,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"landscape",description:"Tent card size for buffet or station labeling."}),qs({id:"mini_tent",label:"Mini Tent Card 4×6",widthIn:6,heightIn:4,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"landscape",description:"Tent cards with additional space for allergen callouts."}),qs({id:"tray_label",label:"Tray Label 2×6",widthIn:6,heightIn:2,bleedIn:.0625,safeMarginIn:.2,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"landscape",description:"Steam table or chafing dish clip labels."}),qs({id:"table_tent_small",label:"Table Tent Small 4×6",widthIn:4,heightIn:6,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Drink specials or dessert promo tents."}),qs({id:"table_tent_medium",label:"Table Tent Medium 5×7",widthIn:5,heightIn:7,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Multi-panel event or daily special tents."}),qs({id:"tri_fold_tent",label:"Tri-Fold Tent 4.25��11",widthIn:4.25,heightIn:11,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Premium three-sided tent presentation."}),qs({id:"tabloid_plus",label:"Tabloid+ Oversize 12×18",widthIn:12,heightIn:18,bleedIn:.125,safeMarginIn:.25,dpi:300,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Fine dining multi-page folded menus."}),qs({id:"poster_18x24",label:"Poster Display 18×24",widthIn:18,heightIn:24,bleedIn:.125,safeMarginIn:.25,dpi:200,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Daily feature or buffet display boards."}),qs({id:"poster_24x36",label:"Poster Display 24×36",widthIn:24,heightIn:36,bleedIn:.125,safeMarginIn:.25,dpi:200,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"portrait",description:"Large-format hero signage for foyers or buffets."}),qs({id:"banner_11x42",label:"Banner 11×42",widthIn:42,heightIn:11,bleedIn:.125,safeMarginIn:.5,dpi:150,colorProfile:"US Sheetfed Coated (SWOP) v2",orientation:"landscape",description:"Wall or buffet backdrop banners."})],Ft=(s,t,i)=>Number.isNaN(s)?t:Math.min(Math.max(s,t),i),dd=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2,11),su={id:"seasonal",name:"Seasonal Tasting",description:"Serif-led hierarchy with photo-driven storytelling and right-aligned pricing.",pageSize:{width:816,height:1056},settings:{background:"#fefaf4",margin:64,columns:2,gutter:32,showGrid:!0,showMargins:!0,showColumns:!1},elements:[{type:"shape",name:"Vellum Frame",x:36,y:36,width:744,height:984,rotation:0,opacity:1,zIndex:1,shape:"rectangle",fill:"#f6f1e7",borderColor:"#f6f1e7",borderWidth:0,borderRadius:48},{type:"shape",name:"Copper Accent",x:72,y:120,width:12,height:720,rotation:0,opacity:1,zIndex:5,shape:"rectangle",fill:"#c0763a",borderColor:"#c0763a",borderWidth:0,borderRadius:8},{type:"heading",name:"Menu Title",text:"Spring Chef's Table",x:120,y:104,width:420,height:90,rotation:0,opacity:1,zIndex:6,fontFamily:"'Playfair Display', serif",fontSize:54,fontWeight:600,lineHeight:1.05,letterSpacing:2.2,color:"#1c1c1c",align:"left"},{type:"subheading",name:"Event Details",text:"April 2024 · Five Courses",x:120,y:176,width:380,height:60,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,fontWeight:400,letterSpacing:3,lineHeight:1.4,color:"#4b5563",align:"left"},{type:"image",name:"Hero Dish",imageUrl:"https://images.unsplash.com/photo-1473093226795-af9932fe5856?auto=format&fit=crop&w=1000&q=80",x:500,y:120,width:240,height:320,rotation:0,opacity:1,zIndex:4,objectFit:"cover",borderRadius:28},{type:"divider",name:"Intro Divider",x:120,y:236,width:320,height:4,rotation:0,opacity:1,zIndex:6,thickness:3,color:"#c0763a"},{type:"menu-item",name:"Course One",text:"Chilled English Pea Custard",description:"meyer lemon · cultured cream · rye crumble",price:18,currency:"USD",x:120,y:268,width:360,height:108,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.6,letterSpacing:.6,color:"#1f2933",accentColor:"#c0763a"},{type:"menu-item",name:"Course Two",text:"Fire-Roasted Asparagus",description:"smoked hollandaise · preserved citrus · buckwheat",price:24,currency:"USD",x:120,y:388,width:360,height:108,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.6,letterSpacing:.6,color:"#1f2933",accentColor:"#c0763a"},{type:"menu-item",name:"Course Three",text:"Charred Wagyu Striploin",description:"black garlic · arrowhead cabbage · smoked potato",price:46,currency:"USD",x:120,y:508,width:360,height:120,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.6,letterSpacing:.6,color:"#1f2933",accentColor:"#c0763a"},{type:"divider",name:"Mid Divider",x:120,y:648,width:320,height:4,rotation:0,opacity:1,zIndex:6,thickness:2,color:"#d1bfa2"},{type:"menu-item",name:"Course Four",text:"Lobster Agnolotti",description:"brown butter · sorrel · candied fennel pollen",price:38,currency:"USD",x:120,y:680,width:360,height:108,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.6,letterSpacing:.6,color:"#1f2933",accentColor:"#c0763a"},{type:"menu-item",name:"Course Five",text:"Honey Pollen Pavlova",description:"chamomile cream �� macerated berries · verbena ice",price:16,currency:"USD",x:120,y:800,width:360,height:108,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.6,letterSpacing:.6,color:"#1f2933",accentColor:"#c0763a"},{type:"shape",name:"Pairing Panel",x:500,y:460,width:240,height:320,rotation:0,opacity:1,zIndex:3,shape:"rectangle",fill:"#fff7ed",borderColor:"#fbd5a5",borderWidth:1,borderRadius:28},{type:"heading",name:"Pairing Header",text:"Wine Pairings",x:520,y:480,width:200,height:60,rotation:0,opacity:1,zIndex:6,fontFamily:"'Playfair Display', serif",fontSize:28,fontWeight:600,letterSpacing:1.4,lineHeight:1.2,color:"#7c2d12",align:"left"},{type:"body",name:"Pairing Copy",text:"Sommelier curated pairings available for $75 per guest. Focused on Loire whites and coastal Italian reds.",x:520,y:538,width:200,height:140,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:14,lineHeight:1.6,letterSpacing:.4,color:"#1f2937",align:"left"},{type:"body",name:"Service Footer",text:"Kindly inform us of allergies or dietary needs. Menu evolves weekly with the season.",x:120,y:928,width:620,height:60,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:13,lineHeight:1.6,letterSpacing:.3,color:"#4b5563",align:"center"}]},bj={id:"modern-grid",name:"Modern Grid",description:"Bold sans serif layout with modular grid and alternating imagery.",pageSize:{width:900,height:1200},settings:{background:"#0f172a",margin:72,columns:3,gutter:40,showGrid:!0,showMargins:!0,showColumns:!0},elements:[{type:"shape",name:"Dark Background",x:0,y:0,width:900,height:1200,rotation:0,opacity:1,zIndex:1,shape:"rectangle",fill:"#0f172a",borderColor:"#0f172a",borderWidth:0,borderRadius:0},{type:"heading",name:"Hero Headline",text:"Chef's Sélection",x:96,y:96,width:520,height:120,rotation:0,opacity:1,zIndex:4,fontFamily:"'Montserrat', sans-serif",fontSize:72,fontWeight:700,lineHeight:.95,letterSpacing:1.6,color:"#f8fafc",align:"left"},{type:"subheading",name:"Date Line",text:"May 2024 · Seven moments",x:96,y:206,width:360,height:60,rotation:0,opacity:1,zIndex:4,fontFamily:"'Inter', sans-serif",fontSize:18,fontWeight:500,letterSpacing:2,lineHeight:1.4,color:"#94a3b8",align:"left"},{type:"image",name:"Left Panel",imageUrl:"https://images.unsplash.com/photo-1543353071-1cf6624b9987?auto=format&fit=crop&w=1000&q=80",x:96,y:280,width:240,height:320,rotation:0,opacity:1,zIndex:3,objectFit:"cover",borderRadius:24},{type:"image",name:"Right Panel",imageUrl:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=1000&q=80",x:552,y:280,width:260,height:360,rotation:0,opacity:1,zIndex:3,objectFit:"cover",borderRadius:32},{type:"shape",name:"Highlight Badge",x:392,y:280,width:136,height:136,rotation:0,opacity:.92,zIndex:4,shape:"ellipse",fill:"#f97316",borderColor:"#f97316",borderWidth:0,borderRadius:136},{type:"heading",name:"Badge Copy",text:`Tasting
$125`,x:400,y:292,width:120,height:120,rotation:0,opacity:1,zIndex:5,fontFamily:"'Montserrat', sans-serif",fontSize:28,fontWeight:600,lineHeight:1.2,letterSpacing:1,color:"#0f172a",align:"center"},{type:"menu-item",name:"Course Highlight",text:"Coal-Roasted Langoustine",description:"xo butter · smoked paprika �� fermented yuzu",price:32,currency:"USD",x:96,y:632,width:340,height:120,rotation:0,opacity:1,zIndex:4,fontFamily:"'Inter', sans-serif",fontSize:20,lineHeight:1.5,letterSpacing:.4,color:"#e2e8f0",accentColor:"#38bdf8"},{type:"menu-item",name:"Course Secondary",text:"Miso Glazed Cauliflower",description:"togarashi caramel · pickled kumquat · sesame",price:22,currency:"USD",x:460,y:632,width:352,height:110,rotation:0,opacity:1,zIndex:4,fontFamily:"'Inter', sans-serif",fontSize:20,lineHeight:1.5,letterSpacing:.4,color:"#e2e8f0",accentColor:"#38bdf8"},{type:"divider",name:"Lower Divider",x:96,y:772,width:716,height:4,rotation:0,opacity:.6,zIndex:4,thickness:2,color:"#1e293b"},{type:"body",name:"Pairing Caption",text:"Wine pairings anchored in Jura, Sicily, and Anderson Valley.",x:96,y:800,width:716,height:80,rotation:0,opacity:1,zIndex:4,fontFamily:"'Inter', sans-serif",fontSize:16,lineHeight:1.6,letterSpacing:.3,color:"#cbd5f5",align:"left"},{type:"body",name:"Footer",text:"Service charge of 20% applies. Vegan substitutions crafted with 24-hour notice.",x:96,y:1e3,width:716,height:100,rotation:0,opacity:1,zIndex:4,fontFamily:"'Inter', sans-serif",fontSize:14,lineHeight:1.6,letterSpacing:.3,color:"#94a3b8",align:"center"}]},Nj={id:"coastal-brunch",name:"Coastal Brunch",description:"Sun-washed palette with airy serif headings and seaside accents.",pageSize:{width:768,height:1024},settings:{background:"#f1f9ff",margin:56,columns:2,gutter:28,showGrid:!1,showMargins:!0,showColumns:!0},elements:[{type:"shape",name:"Ocean Frame",x:36,y:44,width:696,height:936,rotation:0,opacity:1,zIndex:1,shape:"rectangle",fill:"#ffffff",borderColor:"#cfeafd",borderWidth:1,borderRadius:44},{type:"shape",name:"Sunrise Halo",x:520,y:76,width:152,height:152,rotation:0,opacity:1,zIndex:4,shape:"ellipse",fill:"#ffe8b0",borderColor:"#ffe8b0",borderWidth:0},{type:"heading",name:"Menu Title",text:"Seaside Brunch Club",x:96,y:96,width:420,height:80,rotation:0,opacity:1,zIndex:6,fontFamily:"'Playfair Display', serif",fontSize:46,fontWeight:500,lineHeight:1.05,letterSpacing:2.8,color:"#0f172a",align:"left"},{type:"subheading",name:"Subtitle",text:"Weekends · 10am - 2pm",x:96,y:158,width:420,height:48,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:16,fontWeight:500,lineHeight:1.5,letterSpacing:3.2,color:"#475569",align:"left"},{type:"divider",name:"Title Divider",x:96,y:212,width:360,height:3,rotation:0,opacity:1,zIndex:6,thickness:2,color:"#22d3ee"},{type:"image",name:"Signature Plate",imageUrl:"https://images.unsplash.com/photo-1467003909585-2f8a72700288?auto=format&fit=crop&w=900&q=80",x:456,y:204,width:224,height:272,rotation:0,opacity:1,zIndex:5,objectFit:"cover",borderRadius:36},{type:"menu-item",name:"Sunrise",text:"Citrus Ricotta Pancakes",description:"candied grapefruit �� vanilla creme fraiche · pistachio",price:18,currency:"USD",x:96,y:244,width:320,height:116,rotation:0,opacity:1,zIndex:8,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#0f172a",accentColor:"#0ea5e9",align:"left"},{type:"menu-item",name:"Harbor",text:"Lobster Benedict",description:"citrus hollandaise · sea asparagus · brioche",price:24,currency:"USD",x:96,y:380,width:320,height:116,rotation:0,opacity:1,zIndex:8,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#0f172a",accentColor:"#0ea5e9",align:"left"},{type:"menu-item",name:"Garden",text:"Avocado Tartine",description:"charred snap peas · mint oil · soft herbs",price:19,currency:"USD",x:96,y:516,width:320,height:116,rotation:0,opacity:1,zIndex:8,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#0f172a",accentColor:"#0ea5e9",align:"left"},{type:"shape",name:"Aqua Column",x:456,y:508,width:12,height:320,rotation:0,opacity:1,zIndex:4,shape:"rectangle",fill:"#38bdf8",borderColor:"#38bdf8",borderWidth:0,borderRadius:6},{type:"menu-item",name:"Raw Bar",text:"Ceviche Trio",description:"halibut · shrimp aguachile · scallop crudo",price:27,currency:"USD",x:488,y:508,width:216,height:132,rotation:0,opacity:1,zIndex:8,fontFamily:"'DM Sans', sans-serif",fontSize:16,lineHeight:1.6,letterSpacing:.5,color:"#0f172a",accentColor:"#0ea5e9",align:"left"},{type:"menu-item",name:"Refresh",text:"Herb Tonic",description:"lemon verbena · cucumber �� sparkling",price:9,currency:"USD",x:488,y:664,width:216,height:108,rotation:0,opacity:1,zIndex:8,fontFamily:"'DM Sans', sans-serif",fontSize:16,lineHeight:1.6,letterSpacing:.5,color:"#0f172a",accentColor:"#0ea5e9",align:"left"},{type:"divider",name:"Footer Divider",x:96,y:700,width:360,height:2,rotation:0,opacity:1,zIndex:6,thickness:2,color:"#bae6fd"},{type:"body",name:"Footer Copy",text:"Reservations recommended · Pier 7 Coastal Avenue",x:96,y:736,width:420,height:60,rotation:0,opacity:1,zIndex:6,fontFamily:"'DM Sans', sans-serif",fontSize:14,lineHeight:1.5,letterSpacing:1.2,color:"#475569",align:"left"}]},xj={id:"twilight-cocktail",name:"Twilight Cocktail Hour",description:"Moody twilight gradient with art-deco typography and spotlight imagery.",pageSize:{width:816,height:1280},settings:{background:"#06080f",margin:64,columns:2,gutter:36,showGrid:!0,showMargins:!0,showColumns:!1},elements:[{type:"shape",name:"Night Sky",x:32,y:32,width:752,height:1216,rotation:0,opacity:1,zIndex:1,shape:"rectangle",fill:"#0b1020",borderColor:"#0b1020",borderWidth:0,borderRadius:40},{type:"shape",name:"Iridescent Column",x:520,y:96,width:80,height:960,rotation:0,opacity:.8,zIndex:2,shape:"rectangle",fill:"#1e3a8a",borderColor:"#4338ca",borderWidth:0,borderRadius:40},{type:"heading",name:"Menu Title",text:"Twilight Lounge",x:104,y:128,width:360,height:96,rotation:0,opacity:1,zIndex:6,fontFamily:"'Cormorant Garamond', serif",fontSize:58,fontWeight:500,lineHeight:1.1,letterSpacing:3,color:"#fef3c7",align:"left"},{type:"subheading",name:"Subtitle",text:"Artisanal cocktails & small plates · 5pm - Midnight",x:104,y:204,width:420,height:60,rotation:0,opacity:1,zIndex:6,fontFamily:"'Inter', sans-serif",fontSize:16,fontWeight:500,lineHeight:1.5,letterSpacing:3,color:"#cbd5f5",align:"left"},{type:"divider",name:"Title Divider",x:104,y:252,width:320,height:3,rotation:0,opacity:1,zIndex:6,thickness:3,color:"#facc15"},{type:"image",name:"Signature Cocktail",imageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1000&q=80",x:472,y:176,width:240,height:320,rotation:0,opacity:1,zIndex:5,objectFit:"cover",borderRadius:32},{type:"shape",name:"Neon Ring",x:448,y:144,width:296,height:296,rotation:0,opacity:.6,zIndex:4,shape:"ellipse",fill:"#f472b6",borderColor:"#f472b6",borderWidth:0},{type:"menu-item",name:"Spark",text:"Yuzu Electric",description:"aged gin · yuzu cordial · electric daisy",price:17,currency:"USD",x:104,y:284,width:320,height:120,rotation:0,opacity:1,zIndex:8,fontFamily:"'Inter', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#f8fafc",accentColor:"#f59e0b",align:"left"},{type:"menu-item",name:"Aroma",text:"Smoked Plum Manhattan",description:"rye whiskey · black plum vermouth · cedar smoke",price:19,currency:"USD",x:104,y:424,width:320,height:120,rotation:0,opacity:1,zIndex:8,fontFamily:"'Inter', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#f8fafc",accentColor:"#f59e0b",align:"left"},{type:"menu-item",name:"Glow",text:"Saffron Highball",description:"rum blend · saffron syrup · soda · lemon mist",price:15,currency:"USD",x:104,y:564,width:320,height:120,rotation:0,opacity:1,zIndex:8,fontFamily:"'Inter', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.6,color:"#f8fafc",accentColor:"#f59e0b",align:"left"},{type:"divider",name:"Small Plates Divider",x:104,y:708,width:520,height:2,rotation:0,opacity:.8,zIndex:6,thickness:2,color:"#1d4ed8"},{type:"menu-item",name:"Savory",text:"Charred Octopus Skewer",description:"black garlic glaze · smoked tomato · pickled fennel",price:21,currency:"USD",x:104,y:740,width:520,height:128,rotation:0,opacity:1,zIndex:8,fontFamily:"'Inter', sans-serif",fontSize:17,lineHeight:1.6,letterSpacing:.5,color:"#e2e8f0",accentColor:"#38bdf8",align:"left"},{type:"menu-item",name:"Bright",text:"Citrus Cured Hamachi",description:"finger lime · purple shiso · chilled dashi",price:23,currency:"USD",x:104,y:884,width:520,height:128,rotation:0,opacity:1,zIndex:8,fontFamily:"'Inter', sans-serif",fontSize:17,lineHeight:1.6,letterSpacing:.5,color:"#e2e8f0",accentColor:"#38bdf8",align:"left"},{type:"body",name:"Footer Copy",text:"Live DJ weekends · rooftop access for reservations",x:104,y:1044,width:520,height:64,rotation:0,opacity:1,zIndex:6,fontFamily:"'Inter', sans-serif",fontSize:14,lineHeight:1.6,letterSpacing:1.2,color:"#94a3b8",align:"center"}]},gj=[su,bj,Nj,xj],sx=s=>s.elements.map((t,i)=>({...t,id:dd(),zIndex:t.zIndex??i+1,locked:t.locked??!1})),zi=Mr[0],Mc={background:"#fefaf4",margin:zi.safeMarginPx,bleed:zi.bleedPx,columns:2,gutter:32,showGrid:!0,showMargins:!0,showBleed:!0,showColumns:!1,zoom:.75,gridSize:24},_c={width:zi.widthPx,height:zi.heightPx},Nf=sx(su);function vj(){const{t:s}=Vs(),[t,i]=h.useState("Seasonal Reveal Menu"),[n,a]=h.useState(_c),[o,l]=h.useState(Mc),r=Z3(Nf,{maxStates:50}),d=r.state,c=r.setState,[f,b]=h.useState(Nf[0]?.id??null),[D,u]=h.useState(null),[p,x]=h.useState(null),[S,m]=h.useState(null),[v,g]=h.useState(zi.id),[N,w]=h.useState(zi),[A,I]=h.useState({x:24,y:32,pinned:!1}),[B,W]=h.useState({x:24,y:280,pinned:!1}),[se,ie]=h.useState(!1),[R,F]=h.useState(!1),[k,Q]=h.useState(!1),[J,O]=h.useState(La()),me=h.useRef(null),de=h.useRef(null),{toast:fe}=Ci(),ae=h.useRef(new Set),{images:L}=ln(),{showFeedback:H,UndoRedoFeedbackComponent:le}=J3();X3(()=>{if(t)return Promise.resolve(we(t))},{enabled:!0,showToast:!0}),h.useEffect(()=>{const oe=Ne=>{(Ne.metaKey||Ne.ctrlKey)&&!Ne.shiftKey&&Ne.key.toLowerCase()==="z"&&(Ne.preventDefault(),r.undo(),H("undo")),((Ne.metaKey||Ne.ctrlKey)&&Ne.shiftKey&&Ne.key.toLowerCase()==="z"||(Ne.metaKey||Ne.ctrlKey)&&Ne.key.toLowerCase()==="y")&&(Ne.preventDefault(),r.redo(),H("redo"))};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[r,H]);const ue=h.useCallback(oe=>{if(!oe)return;const Ne=oe.split(",")[0]?.replace(/['"]/g,"").trim(),Ue=uj.get(oe)??(Ne?mj.get(Ne):void 0);if(!Ue||typeof document>"u"||ae.current.has(Ue.family))return;if(!document.head.querySelector(`link[data-font-family="${Ue.family}"]`)){const Ct=document.createElement("link");Ct.rel="stylesheet",Ct.href=Ue.importUrl,Ct.dataset.fontFamily=Ue.family,Ct.onerror=()=>{console.warn(`Failed to load font: ${Ue.family}. Using fallback.`),fe({title:"Font unavailable",description:`${Ue.family} couldn't load. Using system fallback font instead.`,variant:"destructive"}),ae.current.add(`${Ue.family}:failed`)},Ct.onload=()=>{ae.current.add(Ue.family)},document.head.appendChild(Ct)}document.fonts&&typeof document.fonts.load=="function"&&document.fonts.load(`400 1rem ${Ue.family}`).catch(Ct=>{console.warn(`Font loading error for ${Ue.family}:`,Ct),ae.current.has(Ue.family)||fe({title:"Font loading error",description:`Could not load ${Ue.family}. Ensure you have internet connection.`,variant:"destructive"})}),ae.current.add(Ue.family)},[fe]);h.useEffect(()=>{ue(ex),K()},[ue,K]);const K=h.useCallback(()=>{try{if(!navigator.storage?.estimate)return;navigator.storage.estimate().then(oe=>{const Ne=(oe.usage||0)/(oe.quota||1),Ue=Math.round((oe.quota||0)/1024/1024),Me=Math.round((oe.usage||0)/1024/1024);Ne>.9?fe({title:"Critical: Storage almost full",description:`Using ${Me}MB of ${Ue}MB available. Delete old designs immediately to prevent data loss.`,variant:"destructive"}):Ne>.8?fe({title:"Storage warning",description:`Using ${Me}MB of ${Ue}MB available (${Math.round(Ne*100)}%). Consider deleting old designs.`,variant:"destructive"}):Ne>.6&&console.warn(`Browser storage is ${Math.round(Ne*100)}% full (${Me}MB of ${Ue}MB)`)})}catch(oe){console.warn("Could not check storage quota:",oe)}},[fe]);h.useEffect(()=>{if(se)return de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{try{const oe={id:`design-${Date.now()}`,name:t,elements:d,pageSize:n,canvasSettings:o,pagePreset:v,printPreset:N,updatedAt:Date.now(),version:1};pf(oe),ie(!1),fe({title:"Design saved",description:"Your work has been saved to browser storage."}),K()}catch(oe){console.error("Auto-save failed:",oe),fe({title:"Auto-save failed",description:"Could not save your design. Browser storage may be full.",variant:"destructive"})}},3e4),()=>{de.current&&clearTimeout(de.current)}},[se,t,d,n,o,v,N,fe,K]),h.useEffect(()=>{const oe=new Set;d.forEach(Ne=>{Ne.fontFamily&&oe.add(Ne.fontFamily)}),oe.forEach(Ne=>ue(Ne))},[d,ue]);const C=h.useCallback(oe=>{I(Ne=>({...Ne,...oe}))},[]),P=h.useCallback(oe=>{W(Ne=>({...Ne,...oe}))},[]),ee=h.useCallback(()=>{I(oe=>({...oe,pinned:!oe.pinned}))},[]),$=h.useCallback(()=>{W(oe=>({...oe,pinned:!oe.pinned}))},[]),U=h.useMemo(()=>[...d].sort((oe,Ne)=>oe.zIndex===Ne.zIndex?oe.name.localeCompare(Ne.name):Ne.zIndex-oe.zIndex),[d]),G=h.useCallback(()=>d.reduce((oe,Ne)=>Math.max(oe,Ne.zIndex),0)+1,[d]),re=h.useMemo(()=>d.find(oe=>oe.id===f)??null,[d,f]),V=h.useCallback((oe,Ne)=>{Ne.fontFamily&&ue(Ne.fontFamily),c(Ue=>Ue.map(Me=>{if(Me.id!==oe)return Me;const Ct=Object.prototype.hasOwnProperty.call(Ne,"locked");if(Me.locked&&!Ct)return Me;const Ws=Ct?!!Ne.locked:Me.locked??!1;return{...Me,...Ne,locked:Ws}})),ie(!0)},[ue]),Y=h.useCallback(oe=>{const Ne=d.find(Me=>Me.id===oe);if(!Ne||Ne.locked||!cd(Ne))return;const Ue=cj(Ne);u(oe),x(Ue),b(oe)},[d]),T=h.useCallback(oe=>{x(Ne=>({...Ne??{},...oe}))},[]),y=h.useCallback(()=>{if(!D||!p)return;const oe=d.find(Ue=>Ue.id===D);if(!oe){u(null),x(null);return}const Ne=dj(oe,p);V(D,Ne),u(null),x(null)},[p,D,d,V]),E=h.useCallback(()=>{u(null),x(null)},[]),j=h.useCallback(oe=>{const Ne=d.find(Ue=>Ue.id===oe);if(!(!Ne||Ne.type!=="image")){if(Ne.locked){fe({title:"Layer is locked",description:"Unlock the layer before editing its background."});return}if(Ne.rotation!==0){fe({title:"Reset rotation to edit background",description:"Set rotation to 0�� to align the selection tool with the image."});return}D&&y(),m({elementId:oe,points:Ne.mask?.type==="polygon"&&Ne.mask.points.length>=3?Ne.mask.points.map(Ue=>({...Ue})):[],preview:null}),b(oe)}},[D,d,y,b,fe]),q=h.useCallback(oe=>{m(Ne=>{if(!Ne)return Ne;const Ue={x:Ft(oe.x,0,1),y:Ft(oe.y,0,1)};return{...Ne,points:[...Ne.points,Ue]}})},[]),te=h.useCallback(oe=>{m(Ne=>Ne&&{...Ne,preview:oe?{x:Ft(oe.x,0,1),y:Ft(oe.y,0,1)}:null})},[]),Z=h.useCallback(()=>{m(oe=>!oe||oe.points.length===0?oe:{...oe,points:oe.points.slice(0,-1)})},[]),ve=h.useCallback(()=>{m(oe=>oe&&(oe.points.length<3?(fe({title:"Add more points",description:"Draw at least three points to outline the area to keep."}),oe):(V(oe.elementId,{mask:{type:"polygon",points:oe.points.map(Ne=>({...Ne}))}}),fe({title:"Background removed",description:"The selected area is now isolated from the background."}),null)))},[fe,V]),ke=h.useCallback(()=>{m(oe=>oe&&(fe({title:"Selection cancelled",description:"Background editing stopped without applying changes."}),null))},[fe]),De=h.useCallback(oe=>{const Ne=d.find(Ue=>Ue.id===oe);if(Ne){if(Ne.locked){fe({title:"Layer is locked",description:"Unlock the layer before clearing its background mask."});return}Ne.mask&&(V(oe,{mask:void 0}),S?.elementId===oe&&m(null),fe({title:"Mask cleared",description:"The image now shows its full background again."}))}},[d,S,fe,V]);h.useEffect(()=>{if(!S)return;const oe=Ne=>{if(Ne.key==="Escape"){Ne.preventDefault(),ke();return}if((Ne.key==="Backspace"||Ne.key==="Delete")&&S.points.length>0){Ne.preventDefault(),Z();return}Ne.key==="Enter"&&(Ne.preventDefault(),ve())};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[ke,ve,Z,S]),h.useEffect(()=>{if(!S)return;d.some(Ne=>Ne.id===S.elementId)||m(null)},[d,S]);const We=h.useCallback(()=>{S||D&&y()},[D,y,S]),ze=h.useCallback(()=>{S||(D&&y(),b(null))},[D,y,S]),st=h.useCallback((oe,Ne)=>{c(Ue=>Ue.map(Me=>{if(Me.id!==oe||Me.locked)return Me;const Ct=Math.max(0,n.width-Me.width),Ws=Math.max(0,n.height-Me.height);return{...Me,x:Ft(Ne.x,0,Ct),y:Ft(Ne.y,0,Ws)}}))},[n.height,n.width]),_t=h.useCallback((oe,Ne)=>{f&&(D||c(Ue=>Ue.map(Me=>{if(Me.id!==f||Me.locked)return Me;const Ct=Math.max(0,n.width-Me.width),Ws=Math.max(0,n.height-Me.height);return{...Me,x:Ft(Me.x+oe,0,Ct),y:Ft(Me.y+Ne,0,Ws)}})))},[D,n.height,n.width,f]),Nt=h.useCallback(oe=>{D&&D!==oe&&y(),b(oe)},[D,y]),ye=h.useCallback(()=>{if(!f)return;const oe=d.find(Ne=>Ne.id===f);!oe||oe.locked||(c(Ne=>Ne.filter(Ue=>Ue.id!==f)),b(Ne=>Ne===f?null:Ne),D===f&&(u(null),x(null)))},[D,d,f]),pt=h.useCallback(()=>{if(D&&y(),!f)return;let oe=null;c(Ne=>{const Ue=Ne.find(Ct=>Ct.id===f);if(!Ue||Ue.locked)return Ne;const Me={...Ue,id:dd(),name:`${Ue.name} Copy`,x:Ft(Ue.x+32,0,n.width-Ue.width),y:Ft(Ue.y+32,0,n.height-Ue.height),zIndex:G(),locked:!1};return oe=Me.id,[...Ne,Me]}),oe&&b(oe)},[D,y,f,n.width,n.height,G]),ct=h.useCallback((oe,Ne)=>{D&&y(),c(Ue=>{if(Ue.length<2)return Ue;const Me=[...Ue].sort((Qs,Zs)=>Qs.zIndex-Zs.zIndex),Ct=Me.findIndex(Qs=>Qs.id===oe);if(Ct===-1)return Ue;const Ws=(()=>{switch(Ne){case"forward":return Math.min(Me.length-1,Ct+1);case"backward":return Math.max(0,Ct-1);case"front":return Me.length-1;case"back":return 0;default:return Ct}})();if(Ws===Ct)return Ue;const es=[...Me],[ti]=es.splice(Ct,1);return es.splice(Ws,0,ti),es.map((Qs,Zs)=>({...Qs,zIndex:Zs+1}))})},[D,y]),Ot=h.useCallback((oe,Ne)=>{V(oe,{opacity:Ft(Ne,0,1)})},[V]),Es=h.useCallback(oe=>{const Ue=!(d.find(Me=>Me.id===oe)?.locked??!1);c(Me=>Me.map(Ct=>Ct.id===oe?{...Ct,locked:Ue}:Ct)),Ue&&D===oe&&(u(null),x(null))},[d,D,x]),qt=h.useCallback(oe=>{const Ne=document.activeElement;if(Ne){const Me=Ne.tagName.toLowerCase();if(Me==="input"||Me==="textarea"||Ne.isContentEditable||Ne.getAttribute("role")==="textbox"){(oe.key==="z"||oe.key==="Z")&&(oe.metaKey||oe.ctrlKey)&&(oe.preventDefault(),oe.shiftKey?r.redo():r.undo(),fe({title:oe.shiftKey?"Redo":"Undo",description:oe.shiftKey?"Redid last action":"Undid last action"})),(oe.key==="s"||oe.key==="S")&&(oe.metaKey||oe.ctrlKey)&&(oe.preventDefault(),ie(!0));return}}if((oe.key==="z"||oe.key==="Z")&&(oe.metaKey||oe.ctrlKey)){oe.preventDefault(),oe.shiftKey?r.canRedo&&(r.redo(),fe({title:"Redo",description:"Redid last action"})):r.canUndo&&(r.undo(),fe({title:"Undo",description:"Undid last action"}));return}if((oe.key==="s"||oe.key==="S")&&(oe.metaKey||oe.ctrlKey)){oe.preventDefault(),ie(!0),fe({title:"Saving...",description:"Your design will be saved automatically"});return}if(S)return;if(D){oe.key==="Escape"&&(oe.preventDefault(),E());return}if(oe.key==="Escape"){f&&(oe.preventDefault(),ze());return}if(!f||!re)return;const Ue=!!re.locked;if((oe.key==="Delete"||oe.key==="Backspace")&&!Ue){oe.preventDefault(),ye(),fe({title:"Element deleted",description:"Press Ctrl+Z to undo"});return}if((oe.key==="d"||oe.key==="D")&&(oe.metaKey||oe.ctrlKey)&&!Ue){oe.preventDefault(),pt(),fe({title:"Element duplicated",description:"New element created"});return}if(oe.key.startsWith("Arrow")){oe.preventDefault();const Me=oe.shiftKey?10:1;switch(oe.key){case"ArrowUp":_t(0,-Me);break;case"ArrowDown":_t(0,Me);break;case"ArrowLeft":_t(-Me,0);break;case"ArrowRight":_t(Me,0);break}return}},[D,E,ye,pt,ze,_t,S,re,f,r,fe]);h.useEffect(()=>(window.addEventListener("keydown",qt),()=>window.removeEventListener("keydown",qt)),[qt]);const ws=h.useCallback(oe=>{u(null),x(null),oe.elements.forEach(Ue=>{const Me=Ue.fontFamily;Me&&ue(Me)});const Ne=sx(oe);if(c(Ne),b(Ne[0]?.id??null),oe.settings&&l(Ue=>({...Ue,...oe.settings})),oe.pageSize){a(oe.pageSize);const Ue=Mr.find(Me=>Me.widthPx===oe.pageSize?.width&&Me.heightPx===oe.pageSize?.height);if(Ue){g(Ue.id),w(Ue);const Me=typeof oe.settings?.margin=="number"?oe.settings.margin:Ue.safeMarginPx;l(Ct=>({...Ct,margin:Me,bleed:Ue.bleedPx}))}}i(oe.name)},[ue]),Kt=h.useCallback(oe=>{const Ne={...oe,id:dd(),zIndex:G(),locked:oe.locked??!1};Ne.fontFamily&&ue(Ne.fontFamily),c(Ue=>[...Ue,Ne]),b(Ne.id)},[ue,G]),fs=h.useCallback(()=>{Kt({type:"heading",name:"Headline",text:"New Menu Headline",x:o.margin+24,y:o.margin+24,width:Math.min(520,n.width-o.margin*2),height:96,rotation:0,opacity:1,fontFamily:"'Playfair Display', serif",fontSize:52,fontWeight:600,lineHeight:1.05,letterSpacing:1.8,color:"#111827",align:"left"})},[Kt,o.margin,n.width]),Cs=h.useCallback(()=>{Kt({type:"body",name:"Body Copy",text:"Describe ingredients, sourcing stories, or service cues.",x:o.margin+24,y:o.margin+140,width:Math.min(520,n.width-o.margin*2),height:140,rotation:0,opacity:1,fontFamily:"'DM Sans', sans-serif",fontSize:16,fontWeight:400,lineHeight:1.6,letterSpacing:.3,color:"#374151",align:"left"})},[Kt,o.margin,n.width]),xs=h.useCallback(()=>{Kt({type:"menu-item",name:"Menu Item",text:"Seared Diver Scallops",description:"meyer lemon · toasted barley · smoked trout roe",price:28,currency:"USD",x:o.margin+24,y:o.margin+220,width:Math.min(420,n.width-o.margin*2),height:112,rotation:0,opacity:1,fontFamily:"'DM Sans', sans-serif",fontSize:18,lineHeight:1.55,letterSpacing:.4,color:"#1f2937",accentColor:"#38bdf8"})},[Kt,o.margin,n.width]),It=h.useCallback(()=>{Kt({type:"divider",name:"Divider",x:o.margin+24,y:o.margin+320,width:Math.min(480,n.width-o.margin*2),height:4,rotation:0,opacity:.65,thickness:2,color:"#94a3b8"})},[Kt,o.margin,n.width]),ls=h.useCallback(oe=>{Kt({type:"shape",name:oe==="ellipse"?"Spotlight":"Backdrop",x:o.margin,y:o.margin,width:oe==="ellipse"?220:520,height:oe==="ellipse"?220:300,rotation:0,opacity:.9,shape:oe,fill:oe==="ellipse"?"#facc15":"#f1f5f9",borderColor:oe==="ellipse"?"#facc15":"#e2e8f0",borderWidth:oe==="ellipse"?0:1,borderRadius:oe==="ellipse"?220:36})},[Kt,o.margin]),zs=h.useCallback((oe,Ne)=>{Kt({type:"image",name:Ne,imageUrl:oe,x:o.margin+24,y:o.margin+24,width:260,height:320,rotation:0,opacity:1,objectFit:"cover",borderRadius:32})},[Kt,o.margin]),ys=h.useCallback(oe=>{const Ne=oe.dataUrl||oe.blobUrl;Ne&&(zs(Ne,oe.name),F(!1),fe({title:"Image added",description:`${oe.name} has been added to the canvas.`}))},[zs,fe]),we=h.useCallback(oe=>{try{const Ne={id:`design-${Date.now()}`,name:oe,elements:d,pageSize:n,canvasSettings:o,pagePreset:v,printPreset:N,updatedAt:Date.now(),version:1};pf(Ne),O(La()),ie(!1),i(oe),fe({title:"Design saved",description:`${oe} has been saved successfully.`})}catch(Ne){console.error("Save failed:",Ne),fe({title:"Save failed",description:"Failed to save design.",variant:"destructive"})}},[d,n,o,v,N,fe]),qe=h.useCallback(oe=>{try{c(oe.elements||[]),a(oe.pageSize||_c),l(oe.canvasSettings||Mc),g(oe.pagePreset||zi.id),w(oe.printPreset||zi),i(oe.name||"Untitled Menu"),b(oe.elements?.[0]?.id??null),ie(!1),r.reset(oe.elements||[]),fe({title:"Design loaded",description:`${oe.name} has been loaded successfully.`})}catch(Ne){console.error("Load failed:",Ne),fe({title:"Load failed",description:"Failed to load design.",variant:"destructive"})}},[fe,r]),Qe=h.useCallback(oe=>{try{tj(oe),O(La()),fe({title:"Design deleted",description:"The design has been removed from storage."})}catch(Ne){console.error("Delete failed:",Ne),fe({title:"Delete failed",description:"Failed to delete design.",variant:"destructive"})}},[fe]),ot=h.useCallback(oe=>{re?re.type==="shape"?V(re.id,{fill:oe[1]??oe[0],borderColor:oe[2]??oe[0]}):re.type==="menu-item"?V(re.id,{color:oe[0],accentColor:oe[1]??oe[0]}):V(re.id,{color:oe[0]}):l(Ne=>({...Ne,background:oe[0]}))},[re,V]),ft=h.useCallback(()=>{l(oe=>({...oe,showGrid:!oe.showGrid}))},[]),xt=h.useCallback(()=>{l(oe=>({...oe,showColumns:!oe.showColumns}))},[]),jt=h.useCallback(()=>{l(oe=>({...oe,showMargins:!oe.showMargins}))},[]),At=h.useCallback(oe=>{if(!re||!["heading","subheading","body","menu-item"].includes(re.type)||re.locked)return;const Ne=Ft((re.fontSize??16)+oe,6,240);V(re.id,{fontSize:Ne})},[re,V]),Vt=h.useCallback(oe=>{if(!re||!["heading","subheading","body","menu-item"].includes(re.type)||re.locked)return;const Ne=re.letterSpacing??0;V(re.id,{letterSpacing:Number((Ne+oe).toFixed(2))})},[re,V]),Qt=h.useCallback(oe=>{if(!re||!["heading","subheading","body","menu-item"].includes(re.type)||re.locked)return;const Ne=re.lineHeight??1.4;V(re.id,{lineHeight:Number(Ft(Ne+oe,.6,3).toFixed(2))})},[re,V]),ks=h.useCallback(oe=>{re&&["heading","subheading","body","menu-item"].includes(re.type)&&(re.locked||V(re.id,{align:oe}))},[re,V]),Yt=h.useCallback(async()=>{const Ne=JSON.stringify({name:t,pageSize:n,canvasSettings:o,elements:d},null,2);try{navigator?.clipboard?.writeText&&(await navigator.clipboard.writeText(Ne),fe({title:"Layout copied",description:"JSON payload copied to clipboard for handoff."}))}catch(Ue){console.error("Failed to copy layout",Ue)}},[o,t,d,n,fe]),Gt=h.useCallback(async()=>{try{fe({title:"Exporting...",description:"Generating PDF, this may take a moment."});const oe=me.current?.querySelector("[data-canvas]");if(!oe)throw new Error("Canvas element not found");await nj(oe,t||s("menu.menuDesignStudio"),N),fe({title:"PDF exported",description:"Your design has been saved as PDF."})}catch(oe){console.error("PDF export failed:",oe),fe({title:"Export failed",description:oe instanceof Error?oe.message:"Failed to export PDF. Make sure jsPDF is installed.",variant:"destructive"})}},[t,N,fe,me]),_s=h.useCallback(async()=>{try{await aj(d,n,t||s("menu.menuDesignStudio")),fe({title:"SVG exported",description:"Your design has been saved as SVG."})}catch(oe){console.error("SVG export failed:",oe),fe({title:"Export failed",description:oe instanceof Error?oe.message:"Failed to export SVG.",variant:"destructive"})}},[d,n,t,fe]),Ys=h.useCallback(()=>{c([]),b(null),i("Untitled Menu"),g(zi.id),w(zi),l(()=>({...Mc})),a(()=>({..._c}))},[]),Ts=h.useCallback(oe=>{l(Ne=>({...Ne,zoom:Ft(Number(Ne.zoom.toFixed(2))+oe,.3,1.6)}))},[]),Ei=h.useCallback(oe=>{const Ne=Mr.find(Ue=>Ue.id===oe);Ne&&(g(Ne.id),w(Ne),a({width:Ne.widthPx,height:Ne.heightPx}),l(Ue=>({...Ue,margin:Ne.safeMarginPx,bleed:Ne.bleedPx})))},[]);return h.useEffect(()=>{const oe=Ne=>{if(!f)return;const Ue=Ne.target;if(!(Ue&&/input|textarea|select/i.test(Ue.tagName))){if(Ne.key==="Delete"||Ne.key==="Backspace"){Ne.preventDefault(),ye();return}if((Ne.key==="d"||Ne.key==="D")&&(Ne.metaKey||Ne.ctrlKey)){Ne.preventDefault(),pt();return}if(Ne.key.startsWith("Arrow")){Ne.preventDefault();const Me=Ne.shiftKey?10:1,Ct=Ne.key==="ArrowRight"?Me:Ne.key==="ArrowLeft"?-Me:0,Ws=Ne.key==="ArrowDown"?Me:Ne.key==="ArrowUp"?-Me:0;if(!Ct&&!Ws)return;const es=d.find(ti=>ti.id===f);if(!es)return;V(f,{x:Ft(es.x+Ct,0,n.width-es.width),y:Ft(es.y+Ws,0,n.height-es.height)})}}};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[d,ye,pt,n.height,n.width,f,V]),e.jsxDEV("div",{className:"flex h-full min-h-[calc(100vh-140px)] flex-col gap-4 px-4 pb-10 pt-4 lg:px-6",children:[e.jsxDEV(le,{},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3400,columnNumber:7},this),e.jsxDEV($e,{className:"border border-cyan-500/30 bg-gradient-to-br from-cyan-500/10 via-background to-emerald-500/5 shadow-lg",children:e.jsxDEV(Ke,{className:"gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(Ze,{className:"text-xl font-semibold uppercase tracking-[0.45em] text-cyan-700 dark:text-cyan-200",children:s("menu.menuDesignStudio")},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3405,columnNumber:15},this),se&&e.jsxDEV("div",{className:"flex items-center gap-2 rounded-full bg-amber-100/70 px-3 py-1 dark:bg-amber-500/20",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full bg-amber-600 dark:bg-amber-400 animate-pulse"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3410,columnNumber:19},this),e.jsxDEV("span",{className:"text-[11px] font-semibold uppercase tracking-[0.2em] text-amber-700 dark:text-amber-200",children:"Unsaved changes"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3411,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3409,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3404,columnNumber:13},this),e.jsxDEV(Lt,{className:"max-w-3xl text-sm",children:"Start from a blank canvas or seasoned templates, arrange typography, imagery, and pricing with precise grid control, and export layout primitives ready for production."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3417,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3403,columnNumber:11},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV(cs,{value:v,onValueChange:Ei,children:[e.jsxDEV(rs,{className:"w-[220px]",children:e.jsxDEV(ds,{placeholder:s("menu.menuDesignStudio")},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3427,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3426,columnNumber:17},this),e.jsxDEV(os,{children:Mr.map(oe=>e.jsxDEV(yt,{value:oe.id,children:oe.label},oe.id,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3431,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3429,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3425,columnNumber:15},this),e.jsxDEV("div",{className:"text-[11px] font-medium uppercase tracking-[0.24em] text-muted-foreground",children:`${Rr(N.widthIn)}��� × ${Rr(N.heightIn)}″ • ${N.dpi} DPI`},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3437,columnNumber:15},this),e.jsxDEV("div",{className:"text-[11px] uppercase tracking-[0.24em] text-muted-foreground",children:`Safe ${Rr(N.safeMarginIn)}″ • Bleed ${Rr(N.bleedIn)}″ • ${N.colorProfile}`},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3440,columnNumber:15},this),e.jsxDEV("div",{className:"text-[10px] uppercase tracking-[0.2em] text-muted-foreground/70 pt-0.5",children:`Canvas: ${Math.round(n.width)}px × ${Math.round(n.height)}px`},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3443,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3424,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>a(({width:oe,height:Ne})=>({width:Ne,height:oe})),children:[e.jsxDEV(Fa,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3457,columnNumber:15},this),"Flip orientation"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3447,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:Ys,children:[e.jsxDEV(e0,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3461,columnNumber:15},this),"Blank canvas"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3460,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>ws(su),children:[e.jsxDEV(oa,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3469,columnNumber:15},this),"Apply seasonal"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3464,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>Q(!0),className:"border-emerald-300/50 hover:border-emerald-400 dark:border-emerald-500/30",children:[e.jsxDEV(_a,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3478,columnNumber:15},this),"Save / Load"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3472,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2 rounded-lg border-2 border-blue-400/50 bg-blue-50 dark:border-blue-500/50 dark:bg-blue-950/30 p-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:Yt,title:"Copy design as JSON to clipboard for technical handoff",className:"border-blue-300 hover:bg-blue-100 dark:border-blue-600 dark:hover:bg-blue-900",children:[e.jsxDEV(Ni,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3489,columnNumber:17},this),"JSON"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3482,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:Gt,title:"Export design as print-ready PDF with 300 DPI",className:"border-blue-300 hover:bg-blue-100 dark:border-blue-600 dark:hover:bg-blue-900",children:[e.jsxDEV(Ni,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3499,columnNumber:17},this),"PDF"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3492,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:_s,title:"Export design as vector SVG for editing",className:"border-blue-300 hover:bg-blue-100 dark:border-blue-600 dark:hover:bg-blue-900",children:[e.jsxDEV(Ni,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3509,columnNumber:17},this),"SVG"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3502,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3481,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-1 overflow-hidden rounded-full border border-cyan-500/30",children:[e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"rounded-none",onClick:()=>r.undo(),disabled:!r.canUndo,"aria-label":"Undo (Ctrl+Z)",title:"Undo (Ctrl+Z)",children:e.jsxDEV(Nn,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3523,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3514,columnNumber:15},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"rounded-none",onClick:()=>r.redo(),disabled:!r.canRedo,"aria-label":"Redo (Ctrl+Shift+Z)",title:"Redo (Ctrl+Shift+Z)",children:e.jsxDEV(Bh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3534,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3525,columnNumber:15},this),e.jsxDEV("div",{className:"h-5 w-px bg-border"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3536,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3513,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center overflow-hidden rounded-full border border-cyan-500/30",children:[e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"rounded-none",onClick:()=>Ts(-.05),"aria-label":"Zoom out",children:e.jsxDEV(wh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3546,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3539,columnNumber:15},this),e.jsxDEV("span",{className:"px-3 text-xs font-medium uppercase tracking-[0.32em] text-muted-foreground",children:[Math.round(o.zoom*100),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3548,columnNumber:15},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"rounded-none",onClick:()=>Ts(.05),"aria-label":"Zoom in",children:e.jsxDEV(kh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3558,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3551,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3538,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3423,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3402,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3401,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-1 flex-col gap-4 xl:flex-row",children:[e.jsxDEV(yj,{documentName:t,setDocumentName:i,templates:gj,onApplyTemplate:ws,onAddHeading:fs,onAddBody:Cs,onAddMenuItem:xs,onAddDivider:It,onAddShape:ls,onAddImage:zs,imageLibrary:fj,colorPalettes:pj,onPaletteApply:ot,selectedElement:re,onOpenGalleryPicker:()=>F(!0)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3566,columnNumber:9},this),R&&e.jsxDEV(sj,{images:L,onSelectImage:ys,onClose:()=>F(!1)},L.length,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3585,columnNumber:11},this),e.jsxDEV(ij,{isOpen:k,onClose:()=>Q(!1),currentName:t,onSave:we,onLoad:qe,savedDesigns:J,onDeleteDesign:Qe},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3593,columnNumber:9},this),e.jsxDEV("div",{ref:me,className:"relative flex flex-1",children:[e.jsxDEV(Dj,{elements:d,selectedId:f,onSelect:b,onDeselect:ze,canvasSettings:o,pageSize:n,onPositionChange:st,editingId:D,editingDraft:p,onEditingChange:T,onBeginEdit:Y,onCommitEdit:y,onCancelEdit:E,onCanvasPointerDown:We,maskEditor:S,onMaskPointAdd:q,onMaskPreview:te,onMaskComplete:ve},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3604,columnNumber:11},this),e.jsxDEV("div",{className:"pointer-events-none fixed inset-0 z-50",children:[e.jsxDEV(Ij,{containerRef:me,bounds:"viewport",state:A,onStateChange:C,onTogglePin:ee,onAddHeading:fs,onAddBody:Cs,onAddMenuItem:xs,onAddDivider:It,onAddShape:ls,canvasSettings:o,onToggleGrid:ft,onToggleColumns:xt,onToggleMargins:jt,selectedElement:re,onAlignChange:ks,onAdjustFontSize:At,onAdjustLetterSpacing:Vt,onAdjustLineHeight:Qt,onDuplicateSelected:pt,onDeleteSelected:ye,onSelectionUpdate:V},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3626,columnNumber:13},this),e.jsxDEV(Aj,{containerRef:me,bounds:"viewport",state:B,onStateChange:P,onTogglePin:$,layers:U,selectedId:f,onSelectLayer:Nt,onLayerShift:ct,onChangeOpacity:Ot,onToggleLock:Es},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3650,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3625,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3603,columnNumber:9},this),e.jsxDEV(kj,{canvasSettings:o,onCanvasSettingsChange:oe=>l(Ne=>({...Ne,...oe})),pageSize:n,onPageSizeChange:oe=>a(Ne=>({...Ne,...oe})),selectedElement:re,onUpdateElement:V,onDeleteSelected:ye,onDuplicateSelected:pt,layers:U,onSelectLayer:Nt,onLayerShift:ct,onLayerOpacityChange:Ot,onToggleLayerLock:Es,maskEditor:S,onBeginMaskEditing:j,onMaskUndo:Z,onMaskCommit:ve,onMaskCancel:ke,onMaskClear:De},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3666,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3565,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3399,columnNumber:5},this)}function yj({documentName:s,setDocumentName:t,templates:i,onApplyTemplate:n,onAddHeading:a,onAddBody:o,onAddMenuItem:l,onAddDivider:r,onAddShape:d,onAddImage:c,imageLibrary:f,colorPalettes:b,onPaletteApply:D,selectedElement:u,onOpenGalleryPicker:p}){return e.jsxDEV($e,{className:"w-full border border-slate-200/50 bg-white/80 backdrop-blur lg:w-[280px] dark:border-slate-800/60 dark:bg-slate-950/40",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base font-semibold",children:"Project assets"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3734,columnNumber:9},this),e.jsxDEV(Lt,{className:"text-xs",children:"Templates, components, and palettes to accelerate composition."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3737,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3733,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"document-name",className:"text-xs uppercase tracking-[0.32em] text-muted-foreground",children:"Document"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3743,columnNumber:11},this),e.jsxDEV(Xe,{id:"document-name",value:s,onChange:x=>t(x.target.value),className:"mt-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3749,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3742,columnNumber:9},this),e.jsxDEV(Ki,{defaultValue:"templates",className:"w-full",children:[e.jsxDEV(Yi,{className:"grid w-full grid-cols-3 text-xs",children:[e.jsxDEV(bs,{value:"templates",children:"Layouts"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3758,columnNumber:13},this),e.jsxDEV(bs,{value:"elements",children:"Elements"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3759,columnNumber:13},this),e.jsxDEV(bs,{value:"palettes",children:"Palettes"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3760,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3757,columnNumber:11},this),e.jsxDEV(St,{value:"templates",className:"mt-3",children:e.jsxDEV(Ds,{className:"h-[360px] pr-3",children:e.jsxDEV("div",{className:"space-y-3",children:i.map(x=>e.jsxDEV($e,{className:"border border-slate-200 bg-white/70 shadow-sm transition hover:border-cyan-400 dark:border-slate-800/70 dark:bg-slate-900/60",children:[e.jsxDEV(Ke,{className:"space-y-1",children:[e.jsxDEV(Ze,{className:"text-sm font-semibold",children:x.name},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3771,columnNumber:23},this),e.jsxDEV(Lt,{className:"text-xs",children:x.description},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3774,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3770,columnNumber:21},this),e.jsxDEV(Ge,{children:e.jsxDEV(ne,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n(x),children:[e.jsxDEV(yd,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3785,columnNumber:25},this),"Apply layout"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3779,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3778,columnNumber:21},this)]},x.id,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3766,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3764,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3763,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3762,columnNumber:11},this),e.jsxDEV(St,{value:"elements",className:"mt-3",children:e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:a,children:[e.jsxDEV(Ua,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3801,columnNumber:17},this),"Add headline"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3796,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:o,children:[e.jsxDEV(Ua,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3809,columnNumber:17},this),"Add body copy"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3804,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:l,children:[e.jsxDEV(eo,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3817,columnNumber:17},this),"Add menu item"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3812,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:()=>d("rectangle"),children:[e.jsxDEV(Ur,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3825,columnNumber:17},this),"Add rectangle"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3820,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:()=>d("ellipse"),children:[e.jsxDEV(io,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3833,columnNumber:17},this),"Add ellipse"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3828,columnNumber:15},this),e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start",onClick:r,children:[e.jsxDEV(Fa,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3841,columnNumber:17},this),"Add divider"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3836,columnNumber:15},this),e.jsxDEV(Wi,{className:"my-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3844,columnNumber:15},this),p&&e.jsxDEV(ne,{variant:"outline",className:"w-full justify-start border-sky-300/50 bg-sky-50 hover:bg-sky-100 dark:border-sky-500/30 dark:bg-sky-950/30 dark:hover:bg-sky-900/30",onClick:p,children:[e.jsxDEV(Oa,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3851,columnNumber:19},this),"From gallery"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3846,columnNumber:17},this),e.jsxDEV(Wi,{className:"my-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3855,columnNumber:15},this),e.jsxDEV(Ds,{className:"h-[180px] pr-3",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:f.map(x=>e.jsxDEV("button",{type:"button",className:"group overflow-hidden rounded-xl border border-slate-200 bg-white/80 text-left text-xs font-medium transition hover:border-cyan-500 dark:border-slate-800/70 dark:bg-slate-900/60",onClick:()=>c(x.url,x.label),children:[e.jsxDEV("div",{className:"relative aspect-[4/3] overflow-hidden",children:e.jsxDEV("img",{src:x.url,alt:x.label,className:"h-full w-full object-cover transition duration-500 group-hover:scale-[1.05]"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3866,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3865,columnNumber:23},this),e.jsxDEV("div",{className:"px-2 py-2 text-[11px] uppercase tracking-[0.24em] text-muted-foreground",children:[e.jsxDEV(Oa,{className:"mr-1 inline h-3 w-3","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3873,columnNumber:25},this),x.label]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3872,columnNumber:23},this)]},x.id,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3859,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3857,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3856,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3795,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3794,columnNumber:11},this),e.jsxDEV(St,{value:"palettes",className:"mt-3",children:e.jsxDEV(Ds,{className:"h-[360px] pr-3",children:e.jsxDEV("div",{className:"space-y-3",children:b.map(x=>e.jsxDEV($e,{className:"border border-slate-200/80 bg-white/80 shadow-sm dark:border-slate-800/70 dark:bg-slate-900/60",children:[e.jsxDEV(Ke,{className:"space-y-1",children:[e.jsxDEV(Ze,{className:"text-sm font-medium",children:x.name},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3894,columnNumber:23},this),e.jsxDEV(Lt,{className:"text-xs",children:["Click to apply to"," ",u?"selection":"canvas","."]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3897,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3893,columnNumber:21},this),e.jsxDEV(Ge,{className:"space-y-3",children:e.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:x.swatches.map(S=>e.jsxDEV("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200 shadow-sm transition hover:scale-110 dark:border-slate-700",style:{backgroundColor:S},onClick:()=>D(x.swatches),"aria-label":`Apply swatch ${S}`},S,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3905,columnNumber:27},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3903,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3902,columnNumber:21},this)]},x.name,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3889,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3887,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3886,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3885,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3756,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3741,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:3732,columnNumber:5},this)}function Dj({elements:s,selectedId:t,onSelect:i,onDeselect:n,canvasSettings:a,pageSize:o,onPositionChange:l,editingId:r,editingDraft:d,onEditingChange:c,onBeginEdit:f,onCommitEdit:b,onCancelEdit:D,onCanvasPointerDown:u,maskEditor:p,onMaskPointAdd:x,onMaskPreview:S,onMaskComplete:m}){const v=h.useRef(null),g=h.useRef(null),N=h.useMemo(()=>[...s].sort((F,k)=>F.zIndex-k.zIndex),[s]),w=h.useCallback(F=>{const k=g.current;if(!k)return;const Q=v.current;if(!Q)return;const J=Q.getBoundingClientRect(),O=a.zoom||1,me=(F.clientX-J.left)/O,de=(F.clientY-J.top)/O,fe=Ft(me-k.offsetX,0,o.width-k.width),ae=Ft(de-k.offsetY,0,o.height-k.height);l(k.id,{x:fe,y:ae})},[a.zoom,l,o.height,o.width]),A=h.useCallback(()=>{g.current=null,window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",A)},[w]),I=h.useCallback((F,k)=>{if(F.stopPropagation(),p||F.button!==0)return;if(r){if(r===k.id){i(k.id);return}b()}const Q=v.current;if(!Q)return;if(k.locked){i(k.id);return}const J=Q.getBoundingClientRect(),O=a.zoom||1,me=(F.clientX-J.left)/O,de=(F.clientY-J.top)/O;g.current={id:k.id,offsetX:me-k.x,offsetY:de-k.y,width:k.width,height:k.height},window.addEventListener("pointermove",w),window.addEventListener("pointerup",A),i(k.id)},[a.zoom,r,w,A,p,b,i]),B=h.useCallback(()=>{p||(u&&u(),n())},[p,u,n]),W=h.useMemo(()=>o.width-a.margin*2,[a.margin,o.width]),se=h.useMemo(()=>a.columns<=0?W:(W-a.gutter*(a.columns-1))/a.columns,[a.columns,a.gutter,W]),ie=a.showGrid?{backgroundImage:"linear-gradient(0deg, rgba(15,23,42,0.06) 1px, transparent 1px), linear-gradient(90deg, rgba(15,23,42,0.06) 1px, transparent 1px)",backgroundSize:`${a.gridSize}px ${a.gridSize}px`}:{},R=h.useCallback((F,k)=>{F.stopPropagation(),!(k.locked||!cd(k))&&(i(k.id),f(k.id))},[f,i]);return e.jsxDEV("div",{className:"flex flex-1 flex-col",children:e.jsxDEV("div",{className:"relative flex min-h-0 flex-1 overflow-auto rounded-3xl border border-slate-200 bg-slate-100/40 p-6 shadow-inner dark:border-slate-800/70 dark:bg-slate-950/40",children:e.jsxDEV("div",{className:"flex w-full justify-center",children:e.jsxDEV("div",{className:"relative",style:{width:o.width*a.zoom,height:o.height*a.zoom},children:e.jsxDEV("div",{ref:v,role:"presentation",className:"relative rounded-[40px] shadow-2xl transition-colors",style:{width:o.width,height:o.height,transform:`scale(${a.zoom})`,transformOrigin:"top left",backgroundColor:a.background,...ie},onPointerDown:B,children:[a.showBleed&&a.bleed>0?e.jsxDEV("div",{className:"pointer-events-none absolute inset-0",style:{borderRadius:"inherit",boxShadow:`0 0 0 ${a.bleed}px rgba(244, 63, 94, 0.18)`,border:"1px dashed rgba(244, 63, 94, 0.55)"}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4120,columnNumber:17},this):null,a.showMargins&&a.margin>0?e.jsxDEV("div",{className:"pointer-events-none absolute inset-0",style:{padding:a.margin},children:e.jsxDEV("div",{className:"h-full w-full rounded-[32px] border border-dashed",style:{borderColor:"rgba(6, 182, 212, 0.6)",backgroundColor:"rgba(6, 182, 212, 0.08)"}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4136,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4130,columnNumber:17},this):null,a.showColumns&&a.columns>0?e.jsxDEV("div",{className:"pointer-events-none absolute inset-0 flex",style:{paddingLeft:a.margin,paddingRight:a.margin},children:new Array(a.columns).fill(null).map((F,k)=>e.jsxDEV("div",{style:{width:se,marginRight:k===a.columns-1?0:a.gutter,backgroundColor:"rgba(59,130,246,0.04)",borderLeft:"1px solid rgba(59,130,246,0.16)",borderRight:"1px solid rgba(59,130,246,0.16)"}},`column-${k}`,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4156,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4146,columnNumber:17},this):null,N.map(F=>{const k=F.id===t,Q=!!F.locked,J=cd(F),O=!!(r&&r===F.id&&d),me=!!(p&&p.elementId===F.id),de=O&&d?d:null,fe=de&&"text"in de?de.text??"":F.text??"",ae=de&&"name"in de?de.name??"":F.name??"",L=de&&"description"in de?de.description??"":F.description??"",H=de&&"currency"in de?de.currency??F.currency??"USD":F.currency??"USD",le=de&&"price"in de?de.price:F.price,ue=le!=null&&!Number.isNaN(le)?String(le):"";return e.jsxDEV("div",{role:"presentation",className:je("group absolute select-none transition-shadow",k?"ring-2 ring-cyan-500":"shadow-sm ring-1 ring-transparent",Q&&!k?"ring-1 ring-amber-400/70":void 0),"data-locked":Q||void 0,style:{left:F.x,top:F.y,width:F.width,height:F.height,transform:`rotate(${F.rotation}deg)`,opacity:F.opacity,borderRadius:F.borderRadius,cursor:me?"crosshair":Q?"not-allowed":O?"text":"move",zIndex:F.zIndex},onPointerDown:me?void 0:K=>I(K,F),onDoubleClick:me?void 0:K=>R(K,F),children:e.jsxDEV("div",{className:"relative h-full w-full",children:[e.jsxDEV("div",{className:je("h-full w-full transition-opacity",O?"pointer-events-none opacity-20":"opacity-100"),children:wj(F)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4252,columnNumber:23},this),me?e.jsxDEV(Ej,{points:p?.points??[],preview:p?.preview??null,onAddPoint:x,onPreview:S,onComplete:m},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4263,columnNumber:25},this):null,Q?e.jsxDEV("div",{className:"pointer-events-none absolute -top-3 -right-3 z-20 flex h-7 w-7 items-center justify-center rounded-full bg-slate-900 text-white shadow-lg dark:bg-slate-100 dark:text-slate-900",children:[e.jsxDEV(Ln,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4273,columnNumber:27},this),e.jsxDEV("span",{className:"sr-only",children:"Locked element"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4274,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4272,columnNumber:25},this):null,O&&J?F.type==="menu-item"?e.jsxDEV("div",{className:"absolute inset-0 z-10 flex h-full w-full flex-col gap-3 rounded-2xl border border-slate-300/60 bg-white/95 p-3 shadow-2xl backdrop-blur-sm dark:border-slate-700/70 dark:bg-slate-950/95",onPointerDown:K=>K.stopPropagation(),onKeyDown:K=>{K.key==="Escape"&&(K.stopPropagation(),D()),K.key==="Enter"&&(K.metaKey||K.ctrlKey)&&(K.preventDefault(),b())},children:[e.jsxDEV("div",{className:"space-y-2 text-left",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Label"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4298,columnNumber:33},this),e.jsxDEV(Xe,{autoFocus:!0,value:ae,onChange:K=>c({name:K.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4301,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4297,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Title"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4312,columnNumber:33},this),e.jsxDEV(Xe,{value:fe,onChange:K=>c({text:K.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4315,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4311,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Description"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4325,columnNumber:33},this),e.jsxDEV($s,{rows:3,value:L,className:"resize-none",onChange:K=>c({description:K.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4328,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4324,columnNumber:31},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4341,columnNumber:35},this),e.jsxDEV(Xe,{type:"number",inputMode:"decimal",value:ue,onChange:K=>{const C=K.target.value,P=Number.parseFloat(C);c({price:C===""||Number.isNaN(P)?void 0:P})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4344,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4340,columnNumber:33},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:"Currency"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4361,columnNumber:35},this),e.jsxDEV(Xe,{value:H,onChange:K=>c({currency:K.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4364,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4360,columnNumber:33},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4339,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4296,columnNumber:29},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-1",children:[e.jsxDEV(ne,{type:"button",size:"sm",variant:"ghost",onClick:()=>D(),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4376,columnNumber:31},this),e.jsxDEV(ne,{type:"button",size:"sm",onClick:()=>b(),children:"Save"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4384,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4375,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4279,columnNumber:27},this):e.jsxDEV($s,{autoFocus:!0,value:fe,className:"absolute inset-0 z-10 h-full w-full resize-none rounded-[inherit] border border-cyan-200/80 bg-white/95 p-3 text-base font-medium shadow-xl focus-visible:ring-2 focus-visible:ring-cyan-500 dark:border-cyan-500/40 dark:bg-slate-950/90",style:{fontFamily:F.fontFamily,fontSize:F.fontSize,fontWeight:F.fontWeight,lineHeight:F.lineHeight,letterSpacing:F.letterSpacing,color:F.color??"#0f172a",textAlign:F.align,whiteSpace:"pre-wrap"},onChange:K=>c({text:K.target.value}),onPointerDown:K=>K.stopPropagation(),onKeyDown:K=>{K.key==="Escape"&&(K.stopPropagation(),D()),K.key==="Enter"&&(K.metaKey||K.ctrlKey)&&(K.preventDefault(),b())}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4394,columnNumber:27},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4251,columnNumber:21},this)},F.id,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4210,columnNumber:19},this)})]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4105,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4098,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4097,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4096,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4095,columnNumber:5},this)}function Ej({points:s,preview:t,onAddPoint:i,onPreview:n,onComplete:a}){const o=h.useCallback(b=>{b.preventDefault(),b.stopPropagation();const D=b.currentTarget.getBoundingClientRect();if(!D.width||!D.height)return;const u={x:Ft((b.clientX-D.left)/D.width,0,1),y:Ft((b.clientY-D.top)/D.height,0,1)};i(u)},[i]),l=h.useCallback(b=>{const D=b.currentTarget.getBoundingClientRect();if(!D.width||!D.height){n(null);return}const u={x:Ft((b.clientX-D.left)/D.width,0,1),y:Ft((b.clientY-D.top)/D.height,0,1)};n(u)},[n]),r=h.useCallback(()=>{n(null)},[n]),d=h.useCallback(b=>{b.preventDefault(),b.stopPropagation(),a()},[a]),c=h.useMemo(()=>s.length<3?"":s.map(b=>`${(b.x*100).toFixed(2)},${(b.y*100).toFixed(2)}`).join(" "),[s]),f=h.useMemo(()=>{const b=t?[...s,t]:s;return b.length===0?"":b.map(D=>`${(D.x*100).toFixed(2)},${(D.y*100).toFixed(2)}`).join(" ")},[s,t]);return e.jsxDEV("div",{className:"absolute inset-0 z-40 cursor-crosshair",onPointerDown:o,onPointerMove:l,onPointerLeave:r,onDoubleClick:d,onContextMenu:b=>b.preventDefault(),children:[e.jsxDEV("svg",{className:"absolute inset-0 h-full w-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[c?e.jsxDEV("polygon",{points:c,fill:"rgba(6, 182, 212, 0.25)",stroke:"rgba(6, 182, 212, 0.6)",strokeWidth:.6},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4537,columnNumber:11},this):null,f?e.jsxDEV("polyline",{points:f,fill:"none",stroke:"rgba(6, 182, 212, 0.8)",strokeWidth:.7,strokeDasharray:"1.6 1.6"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4545,columnNumber:11},this):null,s.map((b,D)=>e.jsxDEV("circle",{cx:(b.x*100).toFixed(2),cy:(b.y*100).toFixed(2),r:1.6,fill:"#06b6d4",stroke:"#ffffff",strokeWidth:.5},`mask-point-${D}`,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4554,columnNumber:11},this)),t?e.jsxDEV("circle",{cx:(t.x*100).toFixed(2),cy:(t.y*100).toFixed(2),r:1.8,fill:"#38bdf8",stroke:"#ffffff",strokeWidth:.5,opacity:.8},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4565,columnNumber:11},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4531,columnNumber:7},this),e.jsxDEV("div",{className:"pointer-events-none absolute inset-x-0 top-2 flex justify-center",children:e.jsxDEV("span",{className:"rounded-full bg-slate-900/80 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.28em] text-white shadow-lg",children:"Click to add points · Double-click/Enter to apply · Esc to cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4577,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4576,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4523,columnNumber:5},this)}function wj(s){switch(s.type){case"heading":case"subheading":case"body":return e.jsxDEV("div",{className:"h-full w-full",style:{fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,color:s.color??"#1f2937",textAlign:s.align,whiteSpace:"pre-wrap"},children:s.text},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4591,columnNumber:9},this);case"menu-item":return e.jsxDEV("div",{className:"flex h-full w-full flex-col justify-between rounded-xl bg-white/70 p-4 shadow-sm backdrop-blur dark:bg-slate-900/70",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:s.name},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4612,columnNumber:13},this),e.jsxDEV("div",{className:"mt-1 text-lg font-semibold",style:{fontFamily:s.fontFamily,color:s.color??"#111827",letterSpacing:s.letterSpacing},children:s.text},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4615,columnNumber:13},this),e.jsxDEV("div",{className:"mt-1 text-sm text-muted-foreground",children:s.description},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4625,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4611,columnNumber:11},this),e.jsxDEV("div",{className:"mt-3 flex items-center justify-between text-sm font-semibold",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:s.currency},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4630,columnNumber:13},this),e.jsxDEV("span",{className:"rounded-full px-3 py-1 text-sm",style:{backgroundColor:`${s.accentColor??"#38bdf8"}20`,color:s.accentColor??"#0f172a"},children:s.price!=null?tn(s.price,s.currency??"USD"):"--"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4631,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4629,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4610,columnNumber:9},this);case"image":{if(!s.imageUrl)return null;const t=s.mask?.type==="polygon"&&s.mask.points.length>=3?`polygon(${s.mask.points.map(i=>`${(i.x*100).toFixed(2)}% ${(i.y*100).toFixed(2)}%`).join(", ")})`:void 0;return e.jsxDEV("div",{className:"h-full w-full overflow-hidden rounded-[inherit]",style:{clipPath:t,WebkitClipPath:t},children:e.jsxDEV("img",{src:s.imageUrl,alt:s.name,className:"h-full w-full",style:{objectFit:s.objectFit??"cover"}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4664,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4660,columnNumber:9},this)}case"shape":{const t=s.borderWidth?`${s.borderWidth}px solid ${s.borderColor??s.fill??"transparent"}`:void 0;return s.shape==="ellipse"?e.jsxDEV("div",{className:"h-full w-full",style:{backgroundColor:s.fill??"#f1f5f9",borderRadius:"9999px",border:t}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4679,columnNumber:11},this):e.jsxDEV("div",{className:"h-full w-full rounded-[inherit]",style:{backgroundColor:s.fill??"#f8fafc",border:t}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4690,columnNumber:9},this)}case"divider":return e.jsxDEV("div",{className:"h-full w-full",style:{height:s.thickness??s.height,backgroundColor:s.color??"#cbd5e1"}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4701,columnNumber:9},this);default:return null}}function kj({canvasSettings:s,onCanvasSettingsChange:t,pageSize:i,onPageSizeChange:n,selectedElement:a,onUpdateElement:o,onDeleteSelected:l,onDuplicateSelected:r,layers:d,onSelectLayer:c,onLayerShift:f,onLayerOpacityChange:b,onToggleLayerLock:D,maskEditor:u,onBeginMaskEditing:p,onMaskUndo:x,onMaskCommit:S,onMaskCancel:m,onMaskClear:v}){return e.jsxDEV($e,{className:"w-full border border-slate-200/60 bg-white/80 backdrop-blur xl:w-[320px] dark:border-slate-800/70 dark:bg-slate-950/40",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Ze,{className:"text-base font-semibold",children:"Inspector"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4764,columnNumber:9},this),e.jsxDEV(Lt,{className:"text-xs",children:"Adjust canvas settings, manage layers, and refine element details."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4765,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4763,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-5",children:[e.jsxDEV("div",{className:"space-y-3 rounded-2xl border border-slate-200/70 p-4 dark:border-slate-800/50",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.32em] text-muted-foreground",children:e.jsxDEV("span",{children:"Canvas"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4772,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4771,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"page-width",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Width"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4776,columnNumber:15},this),e.jsxDEV(Xe,{id:"page-width",type:"number",min:480,value:Math.round(i.width),onChange:g=>n({width:Ft(Number(g.target.value),480,2e3)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4782,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4775,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"page-height",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Height"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4795,columnNumber:15},this),e.jsxDEV(Xe,{id:"page-height",type:"number",min:640,value:Math.round(i.height),onChange:g=>n({height:Ft(Number(g.target.value),640,2400)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4801,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4794,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4774,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"canvas-safe-margin",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Safe margin"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4816,columnNumber:15},this),e.jsxDEV(Xe,{id:"canvas-safe-margin",type:"number",min:8,value:Math.round(s.margin),onChange:g=>t({margin:Ft(Number(g.target.value),8,Math.min(i.width,i.height)/2-8)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4822,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4815,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"canvas-bleed",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Bleed"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4839,columnNumber:15},this),e.jsxDEV(Xe,{id:"canvas-bleed",type:"number",min:0,value:Math.round(s.bleed),onChange:g=>t({bleed:Ft(Number(g.target.value),0,240)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4845,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4838,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4814,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"canvas-columns",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Columns"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4860,columnNumber:15},this),e.jsxDEV(Xe,{id:"canvas-columns",type:"number",min:1,value:s.columns,onChange:g=>t({columns:Ft(Number(g.target.value),1,8)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4866,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4859,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{htmlFor:"canvas-gutter",className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Gutter"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4879,columnNumber:15},this),e.jsxDEV(Xe,{id:"canvas-gutter",type:"number",min:0,value:Math.round(s.gutter),onChange:g=>t({gutter:Ft(Number(g.target.value),0,120)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4885,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4878,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4858,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Grid size"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4899,columnNumber:13},this),e.jsxDEV(Na,{value:[s.gridSize],min:8,max:80,step:2,onValueChange:g=>t({gridSize:g[0]??s.gridSize})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4902,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4898,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Show grid"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4916,columnNumber:15},this),e.jsxDEV(Pa,{checked:s.showGrid,onCheckedChange:g=>t({showGrid:g})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4917,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4915,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Show safe zone"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4925,columnNumber:15},this),e.jsxDEV(Pa,{checked:s.showMargins,onCheckedChange:g=>t({showMargins:g})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4926,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4924,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Show bleed overlay"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4934,columnNumber:15},this),e.jsxDEV(Pa,{checked:s.showBleed,onCheckedChange:g=>t({showBleed:g})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4935,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4933,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center justify-between text-xs",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Show column guides"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4943,columnNumber:15},this),e.jsxDEV(Pa,{checked:s.showColumns,onCheckedChange:g=>t({showColumns:g})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4944,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4942,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4914,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Paper tone"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4953,columnNumber:13},this),e.jsxDEV("input",{type:"color",value:s.background,onChange:g=>t({background:g.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4956,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4952,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4770,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2 rounded-2xl border border-slate-200/70 p-4 dark:border-slate-800/50",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("span",{children:"Layers"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4969,columnNumber:13},this),e.jsxDEV(Ka,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4970,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4968,columnNumber:11},this),e.jsxDEV(Ds,{className:"h-[140px] pr-2",children:e.jsxDEV("div",{className:"space-y-2",children:d.map(g=>{const N=a?.id===g.id,w=g.locked??!1;return e.jsxDEV("div",{className:je("rounded-xl border px-3 py-2 text-left text-xs transition",N?"border-cyan-400 bg-cyan-500/10":"border-slate-200 bg-white hover:border-cyan-400 dark:border-slate-800 dark:bg-slate-900/70",w?"opacity-80":void 0),children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>c(g.id),className:"flex flex-1 flex-col text-left",children:[e.jsxDEV("span",{className:"flex items-center gap-1 font-semibold text-foreground",children:[g.name,w?e.jsxDEV(Ln,{className:"h-3 w-3 text-amber-500","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4997,columnNumber:29},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4994,columnNumber:25},this),e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.34em] text-muted-foreground",children:g.type},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5003,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4989,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>D(g.id),"aria-label":w?"Unlock layer":"Lock layer",children:w?e.jsxDEV(Yh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5016,columnNumber:29},this):e.jsxDEV(Ln,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5018,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5008,columnNumber:25},this),e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>f(g.id,"front"),"aria-label":"Bring layer to front",children:e.jsxDEV(Qh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5028,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5021,columnNumber:25},this),e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>f(g.id,"forward"),"aria-label":"Move layer forward",children:e.jsxDEV(Nd,{className:"h-3 w-3","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5037,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5030,columnNumber:25},this),e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>f(g.id,"backward"),"aria-label":"Move layer backward",children:e.jsxDEV(Bn,{className:"h-3 w-3","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5046,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5039,columnNumber:25},this),e.jsxDEV(ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>f(g.id,"back"),"aria-label":"Send layer to back",children:e.jsxDEV(Zh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5055,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5048,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5007,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4988,columnNumber:21},this),e.jsxDEV("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.3em] text-muted-foreground",children:"Opacity"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5060,columnNumber:23},this),e.jsxDEV(Na,{value:[Math.round((g.opacity??1)*100)],min:0,max:100,step:1,className:"flex-1",onValueChange:A=>b(g.id,(A[0]??100)/100),"aria-label":"Layer opacity"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5063,columnNumber:23},this),e.jsxDEV("span",{className:"w-10 text-right text-[10px] font-semibold text-muted-foreground",children:[Math.round((g.opacity??1)*100),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5077,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5059,columnNumber:21},this)]},g.id,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4978,columnNumber:19},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4973,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4972,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4967,columnNumber:9},this),e.jsxDEV("div",{className:"rounded-2xl border border-slate-200/70 p-4 dark:border-slate-800/50",children:a?e.jsxDEV(Sj,{element:a,onUpdate:o,onDelete:l,onDuplicate:r,maskEditor:u,onBeginMaskEditing:p,onMaskUndo:x,onMaskCommit:S,onMaskCancel:m,onMaskClear:v},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5090,columnNumber:13},this):e.jsxDEV("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxDEV("p",{children:"Select a layer to expose typography, imagery, and layout controls."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5104,columnNumber:15},this),e.jsxDEV("p",{children:"Use ⌘/Ctrl + D to duplicate and arrow keys to nudge 1px (⇧ + arrows for 10px)."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5108,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5103,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5088,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4769,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:4762,columnNumber:5},this)}function Sj({element:s,onUpdate:t,onDelete:i,onDuplicate:n,maskEditor:a,onBeginMaskEditing:o,onMaskUndo:l,onMaskCommit:r,onMaskCancel:d,onMaskClear:c}){const f=p=>{t(s.id,p)},b=!!(a&&a.elementId===s.id),D=b?a?.points.length??0:s.mask?.type==="polygon"?s.mask.points.length:0,u=s.mask?.type==="polygon"&&(s.mask.points?.length??0)>=3;return e.jsxDEV("div",{className:"space-y-4 text-sm",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"col-span-2",children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Label"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5165,columnNumber:11},this),e.jsxDEV(Xe,{value:s.name,onChange:p=>f({name:p.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5168,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5164,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"X"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5174,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.x),onChange:p=>f({x:Number(p.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5177,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5173,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Y"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5186,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.y),onChange:p=>f({y:Number(p.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5189,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5185,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Width"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5198,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.width),onChange:p=>f({width:Ft(Number(p.target.value),40,2e3)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5201,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5197,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Height"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5212,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.height),onChange:p=>f({height:Ft(Number(p.target.value),10,2e3)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5215,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5211,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Rotation"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5226,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.rotation),onChange:p=>f({rotation:Number(p.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5229,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5225,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Opacity"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5238,columnNumber:11},this),e.jsxDEV(Na,{value:[Math.round(s.opacity*100)],min:0,max:100,onValueChange:p=>f({opacity:(p[0]??100)/100})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5241,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5237,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5163,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",className:"flex-1",onClick:n,children:[e.jsxDEV(Kh,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5258,columnNumber:11},this),"Duplicate"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5252,columnNumber:9},this),e.jsxDEV(ne,{variant:"destructive",size:"sm",onClick:i,children:[e.jsxDEV(vi,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5262,columnNumber:11},this),"Delete"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5261,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5251,columnNumber:7},this),s.type==="heading"||s.type==="subheading"||s.type==="body"?e.jsxDEV(jj,{element:s,onChange:f},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5269,columnNumber:9},this):null,s.type==="menu-item"?e.jsxDEV(Vj,{element:s,onChange:f},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5272,columnNumber:9},this):null,s.type==="image"?e.jsxDEV(Cj,{element:s,onChange:f,onBeginMaskEditing:()=>o(s.id),onMaskUndo:l,onMaskCommit:r,onMaskCancel:d,onMaskClear:()=>c(s.id),isMaskEditing:b,maskPointCount:D,hasMask:u},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5275,columnNumber:9},this):null,s.type==="shape"?e.jsxDEV(Rj,{element:s,onChange:f},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5289,columnNumber:9},this):null,s.type==="divider"?e.jsxDEV(Pj,{element:s,onChange:f},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5292,columnNumber:9},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5162,columnNumber:5},this)}function jj({element:s,onChange:t}){return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Content"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5307,columnNumber:9},this),e.jsxDEV($s,{value:s.text??"",onChange:i=>t({text:i.target.value}),rows:4},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5310,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5306,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Font size"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5318,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:Math.round(s.fontSize??16),onChange:i=>t({fontSize:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5321,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5317,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Line height"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5330,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",step:.05,value:Number(s.lineHeight??1.4).toFixed(2),onChange:i=>t({lineHeight:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5333,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5329,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Letter spacing"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5343,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",step:.1,value:Number(s.letterSpacing??0).toFixed(1),onChange:i=>t({letterSpacing:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5346,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5342,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Weight"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5356,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:s.fontWeight??400,onChange:i=>t({fontWeight:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5359,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5355,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5316,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Typeface"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5369,columnNumber:9},this),e.jsxDEV(cs,{value:s.fontFamily??ex,onValueChange:i=>t({fontFamily:i}),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5377,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5376,columnNumber:11},this),e.jsxDEV(os,{children:go.map(i=>e.jsxDEV(yt,{value:i.value,style:{fontFamily:i.value},children:i.label},i.value,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5381,columnNumber:15},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5379,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5372,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5368,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:s.align==="left"?"default":"outline",size:"icon",onClick:()=>t({align:"left"}),"aria-label":"Align left",children:e.jsxDEV(Gh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5399,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5393,columnNumber:9},this),e.jsxDEV(ne,{variant:s.align==="center"?"default":"outline",size:"icon",onClick:()=>t({align:"center"}),"aria-label":"Align center",children:e.jsxDEV(Hh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5407,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5401,columnNumber:9},this),e.jsxDEV(ne,{variant:s.align==="right"?"default":"outline",size:"icon",onClick:()=>t({align:"right"}),"aria-label":"Align right",children:e.jsxDEV(qh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5415,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5409,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5392,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Color"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5419,columnNumber:9},this),e.jsxDEV("input",{type:"color",value:s.color??"#111827",onChange:i=>t({color:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5422,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5418,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5305,columnNumber:5},this)}function Vj({element:s,onChange:t}){return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Dish name"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5442,columnNumber:9},this),e.jsxDEV(Xe,{value:s.text??"",onChange:i=>t({text:i.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5445,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5441,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Description"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5451,columnNumber:9},this),e.jsxDEV($s,{value:s.description??"",onChange:i=>t({description:i.target.value}),rows:3},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5454,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5450,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5462,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:s.price??0,onChange:i=>t({price:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5465,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5461,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Currency"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5474,columnNumber:11},this),e.jsxDEV(Xe,{value:s.currency??"USD",onChange:i=>t({currency:i.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5477,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5473,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5460,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Text color"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5484,columnNumber:9},this),e.jsxDEV("input",{type:"color",value:s.color??"#111827",onChange:i=>t({color:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5487,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5483,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Accent color"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5495,columnNumber:9},this),e.jsxDEV("input",{type:"color",value:s.accentColor??"#38bdf8",onChange:i=>t({accentColor:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5498,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5494,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5440,columnNumber:5},this)}function Cj({element:s,onChange:t,onBeginMaskEditing:i,onMaskUndo:n,onMaskCommit:a,onMaskCancel:o,onMaskClear:l,isMaskEditing:r,maskPointCount:d,hasMask:c}){return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Image URL"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5537,columnNumber:9},this),e.jsxDEV(Xe,{value:s.imageUrl??"",onChange:f=>t({imageUrl:f.target.value}),placeholder:"https://"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5540,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5536,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Object fit"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5547,columnNumber:9},this),e.jsxDEV(cs,{value:s.objectFit??"cover",onValueChange:f=>t({objectFit:f}),children:[e.jsxDEV(rs,{children:e.jsxDEV(ds,{},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5557,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5556,columnNumber:11},this),e.jsxDEV(os,{children:[e.jsxDEV(yt,{value:"cover",children:"Cover"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5560,columnNumber:13},this),e.jsxDEV(yt,{value:"contain",children:"Contain"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5561,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5559,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5550,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5546,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Corner radius"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5566,columnNumber:9},this),e.jsxDEV(Na,{value:[s.borderRadius??0],min:0,max:180,onValueChange:f=>t({borderRadius:f[0]??0})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5569,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5565,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-3 rounded-xl border border-dashed border-slate-300/70 p-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:[e.jsxDEV("span",{children:"Background"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5578,columnNumber:11},this),e.jsxDEV(yd,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5579,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5577,columnNumber:9},this),r?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-blue-700 dark:text-blue-300 mb-2",children:"ℹ️ Editing Instructions"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5584,columnNumber:15},this),e.jsxDEV("ul",{className:"text-[11px] leading-relaxed text-blue-600 dark:text-blue-200 space-y-1",children:[e.jsxDEV("li",{children:"✓ Click on the image to add selection points around the subject you want to keep"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5588,columnNumber:17},this),e.jsxDEV("li",{children:"✓ Minimum 3 points required to create a mask"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5589,columnNumber:17},this),e.jsxDEV("li",{children:'✓ Click "Undo point" to remove the last point'},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5590,columnNumber:17},this),e.jsxDEV("li",{children:["✓ Press ",e.jsxDEV("kbd",{className:"px-1.5 py-0.5 bg-blue-200 dark:bg-blue-700 rounded text-xs font-mono",children:"Enter"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5591,columnNumber:29},this)," or double-click to apply"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5591,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5587,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5583,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[e.jsxDEV(ne,{size:"sm",onClick:a,disabled:d<3,title:d<3?`Need ${3-d} more points`:"Apply mask",children:"Apply selection"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5595,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:n,disabled:d===0,title:"Undo last point",children:"Undo point"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5603,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:o,title:"Exit mask editor without saving",children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5612,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5594,columnNumber:13},this),e.jsxDEV("p",{className:"text-[10px] uppercase tracking-[0.3em] text-muted-foreground font-semibold",children:["Points added: ",e.jsxDEV("span",{className:"text-blue-600 dark:text-blue-400",children:[d,"/3+"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5617,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5616,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5582,columnNumber:11},this):e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 p-3",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-amber-700 dark:text-amber-300 mb-2",children:"💡 Background Removal"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5623,columnNumber:15},this),e.jsxDEV("p",{className:"text-[11px] leading-relaxed text-amber-700 dark:text-amber-200",children:"Remove the background from your image by creating a selection around the subject. The outlined area will be kept, and the rest will become transparent."},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5626,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5622,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:i,children:"Start background selection"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5630,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",variant:"ghost",onClick:l,disabled:!c,title:"Remove current mask and start over",children:"Clear mask"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5633,columnNumber:13},this),c?e.jsxDEV("span",{className:"inline-block rounded-full bg-emerald-500/10 border border-emerald-300 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-emerald-600 dark:text-emerald-400",children:"✓ Mask applied"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5643,columnNumber:15},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5621,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5576,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5535,columnNumber:5},this)}function Rj({element:s,onChange:t}){return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:s.shape==="rectangle"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>t({shape:"rectangle"}),children:[e.jsxDEV(Ur,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5669,columnNumber:11},this),"Rectangle"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5663,columnNumber:9},this),e.jsxDEV(ne,{variant:s.shape==="ellipse"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>t({shape:"ellipse"}),children:[e.jsxDEV(io,{className:"mr-2 h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5678,columnNumber:11},this),"Ellipse"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5672,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5662,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Fill"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5683,columnNumber:9},this),e.jsxDEV("input",{type:"color",value:s.fill??"#e2e8f0",onChange:i=>t({fill:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5686,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5682,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Border color"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5695,columnNumber:11},this),e.jsxDEV("input",{type:"color",value:s.borderColor??s.fill??"#e2e8f0",onChange:i=>t({borderColor:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5698,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5694,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Border width"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5706,columnNumber:11},this),e.jsxDEV(Xe,{type:"number",value:s.borderWidth??0,onChange:i=>t({borderWidth:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5709,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5705,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5693,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5661,columnNumber:5},this)}function Pj({element:s,onChange:t}){return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Color"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5731,columnNumber:9},this),e.jsxDEV("input",{type:"color",value:s.color??"#cbd5e1",onChange:i=>t({color:i.target.value}),className:"mt-2 h-10 w-full cursor-pointer rounded-xl border border-slate-200"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5734,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5730,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(Et,{className:"text-[11px] uppercase tracking-[0.32em] text-muted-foreground",children:"Thickness"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5742,columnNumber:9},this),e.jsxDEV(Xe,{type:"number",value:s.thickness??2,onChange:i=>t({thickness:Number(i.target.value)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5745,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5741,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5729,columnNumber:5},this)}function Ij({containerRef:s,bounds:t="container",state:i,onStateChange:n,onTogglePin:a,onAddHeading:o,onAddBody:l,onAddMenuItem:r,onAddDivider:d,onAddShape:c,canvasSettings:f,onToggleGrid:b,onToggleColumns:D,onToggleMargins:u,selectedElement:p,onAlignChange:x,onAdjustFontSize:S,onAdjustLetterSpacing:m,onAdjustLineHeight:v,onDuplicateSelected:g,onDeleteSelected:N,onSelectionUpdate:w}){const A=h.useRef(null),I=h.useRef(null),B=h.useCallback(()=>{if(t==="viewport"&&typeof window<"u")return{width:window.innerWidth,height:window.innerHeight};const J=s.current;if(J){const O=J.getBoundingClientRect();return{width:O.width,height:O.height}}return typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},[t,s]),W=h.useCallback(J=>{if(!I.current)return;const{startX:O,startY:me,originX:de,originY:fe,availableWidth:ae,availableHeight:L,panelWidth:H,panelHeight:le}=I.current,ue=J.clientX-O,K=J.clientY-me,C=Math.max(0,ae-H),P=Math.max(0,L-le);n({x:Ft(de+ue,0,C),y:Ft(fe+K,0,P)})},[n]),se=h.useCallback(()=>{I.current=null,window.removeEventListener("pointermove",W),window.removeEventListener("pointerup",se)},[W]),ie=h.useCallback(J=>{if(i.pinned||J.button!==0&&J.pointerType!=="touch"&&J.pointerType!=="pen")return;const O=J.target;if(O&&O.closest("button, a, input, textarea, select, label, [contenteditable='true'], [role='textbox'], [role='spinbutton'], [role='slider'], [data-floating-panel-interactive='true']"))return;const me=A.current;if(!me)return;const{width:de,height:fe}=B();I.current={startX:J.clientX,startY:J.clientY,originX:i.x,originY:i.y,availableWidth:de,availableHeight:fe,panelWidth:me.offsetWidth,panelHeight:me.offsetHeight},window.addEventListener("pointermove",W),window.addEventListener("pointerup",se),J.stopPropagation(),J.preventDefault()},[B,W,se,i.pinned,i.x,i.y]);h.useEffect(()=>()=>{window.removeEventListener("pointermove",W),window.removeEventListener("pointerup",se)},[W,se]),h.useEffect(()=>{const J=A.current;if(!J)return;const O=(fe,ae)=>{const L=Math.max(0,fe-J.offsetWidth),H=Math.max(0,ae-J.offsetHeight),le=Ft(i.x,0,L),ue=Ft(i.y,0,H);(le!==i.x||ue!==i.y)&&n({x:le,y:ue})};if(t==="viewport"){if(typeof window>"u")return;const fe=()=>{const{width:ae,height:L}=B();O(ae,L)};return fe(),window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)}const me=s.current;if(!me||typeof ResizeObserver>"u")return;const de=new ResizeObserver(([fe])=>{fe&&O(fe.contentRect.width,fe.contentRect.height)});return de.observe(me),()=>de.disconnect()},[t,s,B,n,i.x,i.y]);const R=!!p,F=!!p?.locked,k=R&&p&&!F&&["heading","subheading","body","menu-item"].includes(p.type),Q=R&&!F;return e.jsxDEV("div",{ref:A,"data-floating-panel":"toolbar",className:je("pointer-events-auto z-40 w-[260px] rounded-2xl border border-slate-200/70 bg-white/95 p-3 shadow-2xl backdrop-blur dark:border-slate-800/60 dark:bg-slate-900/80",t==="viewport"?"fixed":"absolute"),style:{top:t==="viewport"?0:void 0,left:t==="viewport"?0:void 0,transform:`translate(${i.x}px, ${i.y}px)`,touchAction:i.pinned?"auto":"none"},onPointerDownCapture:ie,children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:je("flex items-center gap-2 text-[10px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-200",i.pinned?"cursor-default":"cursor-move"),children:[e.jsxDEV(Jr,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6e3,columnNumber:11},this),"Toolbox"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5994,columnNumber:9},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:a,title:i.pinned?"Unpin toolbar":"Pin toolbar","aria-label":i.pinned?"Unpin toolbar":"Pin toolbar",children:i.pinned?e.jsxDEV(Uh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6012,columnNumber:13},this):e.jsxDEV($h,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6014,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6003,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5993,columnNumber:7},this),e.jsxDEV("div",{className:"mt-3 space-y-3 text-xs",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Quick add"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6021,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:o,children:[e.jsxDEV(Ua,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6026,columnNumber:15},this),"Heading"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6025,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:l,children:[e.jsxDEV(Ua,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6030,columnNumber:15},this),"Body copy"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6029,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:r,children:[e.jsxDEV(eo,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6034,columnNumber:15},this),"Menu item"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6033,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:d,children:[e.jsxDEV(Fa,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6038,columnNumber:15},this),"Divider"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6037,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>c("rectangle"),children:[e.jsxDEV(Ur,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6046,columnNumber:15},this),"Rectangle"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6041,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>c("ellipse"),children:[e.jsxDEV(io,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6054,columnNumber:15},this),"Ellipse"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6049,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6024,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6020,columnNumber:9},this),p?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Content"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6062,columnNumber:13},this),F?e.jsxDEV("div",{className:"flex items-center gap-2 rounded-lg bg-amber-100/70 px-2 py-1 text-[11px] font-medium text-amber-700 dark:bg-amber-500/10 dark:text-amber-200",children:[e.jsxDEV(Ln,{className:"h-3 w-3","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6067,columnNumber:17},this),e.jsxDEV("span",{children:"Unlock layer to edit"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6068,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6066,columnNumber:15},this):null,p.type==="menu-item"?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-medium uppercase tracking-[0.28em] text-muted-foreground",children:"Label"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6074,columnNumber:19},this),e.jsxDEV(Xe,{value:p.name,disabled:F,onChange:J=>{F||w(p.id,{name:J.target.value})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6077,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6073,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-medium uppercase tracking-[0.28em] text-muted-foreground",children:"Title"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6089,columnNumber:19},this),e.jsxDEV(Xe,{value:p.text??"",disabled:F,onChange:J=>{F||w(p.id,{text:J.target.value})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6092,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6088,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-medium uppercase tracking-[0.28em] text-muted-foreground",children:"Description"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6104,columnNumber:19},this),e.jsxDEV($s,{rows:3,value:p.description??"",disabled:F,onChange:J=>{F||w(p.id,{description:J.target.value})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6107,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6103,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-medium uppercase tracking-[0.28em] text-muted-foreground",children:"Price"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6121,columnNumber:21},this),e.jsxDEV(Xe,{type:"number",inputMode:"decimal",value:p.price!=null?p.price:"",disabled:F,onChange:J=>{if(F)return;const O=J.target.value,me=Number.parseFloat(O);w(p.id,{price:O===""||Number.isNaN(me)?void 0:me})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6124,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6120,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("span",{className:"text-[10px] font-medium uppercase tracking-[0.28em] text-muted-foreground",children:"Currency"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6147,columnNumber:21},this),e.jsxDEV(Xe,{value:p.currency??"USD",disabled:F,onChange:J=>{F||w(p.id,{currency:J.target.value})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6150,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6146,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6119,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6072,columnNumber:15},this):p.text!=null?e.jsxDEV($s,{rows:Math.min(6,Math.max(3,Math.ceil((p.height||60)/60))),value:p.text??"",disabled:F,onChange:J=>{F||w(p.id,{text:J.target.value})}},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6164,columnNumber:15},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6061,columnNumber:11},this):null,e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Canvas helpers"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6183,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxDEV(ne,{variant:f.showGrid?"default":"outline",size:"icon",className:"h-9 w-full",onClick:b,title:"Toggle grid","aria-label":"Toggle grid",children:e.jsxDEV(zh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6195,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6187,columnNumber:13},this),e.jsxDEV(ne,{variant:f.showColumns?"default":"outline",size:"icon",className:"h-9 w-full",onClick:D,title:"Toggle columns","aria-label":"Toggle columns",children:e.jsxDEV(Fa,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6205,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6197,columnNumber:13},this),e.jsxDEV(ne,{variant:f.showMargins?"default":"outline",size:"icon",className:"h-9 w-full",onClick:u,title:"Toggle margins","aria-label":"Toggle margins",children:e.jsxDEV(Ur,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6215,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6207,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6186,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6182,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Typography"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6221,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>S(-2),title:"Decrease font size","aria-label":"Decrease font size",children:e.jsxDEV(gd,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6234,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6225,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>S(2),title:"Increase font size","aria-label":"Increase font size",children:e.jsxDEV(Js,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6245,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6236,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>m(.2),title:"Loosen letter spacing","aria-label":"Loosen letter spacing",children:e.jsxDEV(pu,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6256,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6247,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>m(-.2),title:"Tighten letter spacing","aria-label":"Tighten letter spacing",children:e.jsxDEV(pu,{className:"h-4 w-4 rotate-180","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6267,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6258,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>v(.1),title:"Increase line height","aria-label":"Increase line height",children:e.jsxDEV(fu,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6281,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6272,columnNumber:13},this),e.jsxDEV(ne,{variant:"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>v(-.1),title:"Decrease line height","aria-label":"Decrease line height",children:e.jsxDEV(fu,{className:"h-4 w-4 rotate-180","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6292,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6283,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6224,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxDEV(ne,{variant:p?.align==="left"?"default":"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>x("left"),title:"Align left","aria-label":"Align left",children:e.jsxDEV(Gh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6310,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6299,columnNumber:13},this),e.jsxDEV(ne,{variant:p?.align==="center"?"default":"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>x("center"),title:"Align center","aria-label":"Align center",children:e.jsxDEV(Hh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6323,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6312,columnNumber:13},this),e.jsxDEV(ne,{variant:p?.align==="right"?"default":"outline",size:"icon",className:"h-9 w-full",disabled:!k,onClick:()=>x("right"),title:"Align right","aria-label":"Align right",children:e.jsxDEV(qh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6336,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6325,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6298,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6220,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-[10px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Selection"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6342,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",disabled:!Q,onClick:g,children:[e.jsxDEV(Kh,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6352,columnNumber:15},this),"Duplicate"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6346,columnNumber:13},this),e.jsxDEV(ne,{variant:"destructive",size:"sm",disabled:!Q,onClick:N,children:[e.jsxDEV(vi,{className:"mr-2 h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6361,columnNumber:15},this),"Delete"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6355,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6345,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6341,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6019,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:5978,columnNumber:5},this)}function Aj({containerRef:s,bounds:t="container",state:i,onStateChange:n,onTogglePin:a,layers:o,selectedId:l,onSelectLayer:r,onLayerShift:d,onChangeOpacity:c,onToggleLock:f}){const b=h.useRef(null),D=h.useRef(null),u=h.useCallback(()=>{if(t==="viewport"&&typeof window<"u")return{width:window.innerWidth,height:window.innerHeight};const m=s.current;if(m){const v=m.getBoundingClientRect();return{width:v.width,height:v.height}}return typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}},[t,s]),p=h.useCallback(m=>{if(!D.current)return;const{startX:v,startY:g,originX:N,originY:w,availableWidth:A,availableHeight:I,panelWidth:B,panelHeight:W}=D.current,se=m.clientX-v,ie=m.clientY-g,R=Math.max(0,A-B),F=Math.max(0,I-W);n({x:Ft(N+se,0,R),y:Ft(w+ie,0,F)})},[n]),x=h.useCallback(()=>{D.current=null,window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x)},[p]),S=h.useCallback(m=>{if(i.pinned||m.button!==0&&m.pointerType!=="touch"&&m.pointerType!=="pen")return;const v=m.target;if(v&&v.closest("button, a, input, textarea, select, label, [contenteditable='true'], [role='textbox'], [role='spinbutton'], [role='slider'], [data-floating-panel-interactive='true']"))return;const g=b.current;if(!g)return;const{width:N,height:w}=u();D.current={startX:m.clientX,startY:m.clientY,originX:i.x,originY:i.y,availableWidth:N,availableHeight:w,panelWidth:g.offsetWidth,panelHeight:g.offsetHeight},window.addEventListener("pointermove",p),window.addEventListener("pointerup",x),m.stopPropagation(),m.preventDefault()},[u,p,x,i.pinned,i.x,i.y]);return h.useEffect(()=>()=>{window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x)},[p,x]),h.useEffect(()=>{const m=b.current;if(!m)return;const v=(w,A)=>{const I=Math.max(0,w-m.offsetWidth),B=Math.max(0,A-m.offsetHeight),W=Ft(i.x,0,I),se=Ft(i.y,0,B);(W!==i.x||se!==i.y)&&n({x:W,y:se})};if(t==="viewport"){if(typeof window>"u")return;const w=()=>{const{width:A,height:I}=u();v(A,I)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)}const g=s.current;if(!g||typeof ResizeObserver>"u")return;const N=new ResizeObserver(([w])=>{w&&v(w.contentRect.width,w.contentRect.height)});return N.observe(g),()=>N.disconnect()},[t,s,u,n,i.x,i.y]),e.jsxDEV("div",{ref:b,className:je("pointer-events-auto z-30 w-[220px] rounded-2xl border border-slate-200/70 bg-white/95 p-3 shadow-2xl backdrop-blur dark:border-slate-800/60 dark:bg-slate-900/80",t==="viewport"?"fixed":"absolute"),style:{top:t==="viewport"?0:void 0,left:t==="viewport"?0:void 0,transform:`translate(${i.x}px, ${i.y}px)`,touchAction:i.pinned?"auto":"none"},onPointerDownCapture:S,children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:je("flex items-center gap-2 text-[10px] font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-200",i.pinned?"cursor-default":"cursor-move"),children:[e.jsxDEV(Ka,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6583,columnNumber:11},this),"Layers"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6577,columnNumber:9},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:a,title:i.pinned?"Unpin layers":"Pin layers","aria-label":i.pinned?"Unpin layers":"Pin layers",children:i.pinned?e.jsxDEV(Uh,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6595,columnNumber:13},this):e.jsxDEV($h,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6597,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6586,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6576,columnNumber:7},this),e.jsxDEV(Ds,{className:"mt-3 h-[200px] pr-2",children:e.jsxDEV("div",{className:"space-y-2 text-xs",children:o.map(m=>{const v=m.id===l,g=m.locked??!1;return e.jsxDEV("div",{className:je("rounded-xl border px-3 py-2 text-left transition",v?"border-cyan-400 bg-cyan-500/10":"border-slate-200 bg-white hover:border-cyan-400 dark:border-slate-800 dark:bg-slate-900/70",g?"opacity-80":void 0),children:[e.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>r(m.id),className:"flex flex-1 flex-col text-left","data-floating-panel-interactive":"true",children:[e.jsxDEV("span",{className:"flex items-center gap-1 text-xs font-semibold text-foreground",children:[m.name,g?e.jsxDEV(Ln,{className:"h-3 w-3 text-amber-500","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6628,columnNumber:25},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6625,columnNumber:21},this),e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.34em] text-muted-foreground",children:m.type},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6631,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6619,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>f(m.id),"aria-label":g?"Unlock layer":"Lock layer","data-floating-panel-interactive":"true",children:g?e.jsxDEV(Yh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6645,columnNumber:25},this):e.jsxDEV(Ln,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6647,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6636,columnNumber:21},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>d(m.id,"front"),"aria-label":"Bring layer to front","data-floating-panel-interactive":"true",children:e.jsxDEV(Qh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6658,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6650,columnNumber:21},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>d(m.id,"forward"),"aria-label":"Move layer forward","data-floating-panel-interactive":"true",children:e.jsxDEV(Nd,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6668,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6660,columnNumber:21},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>d(m.id,"backward"),"aria-label":"Move layer backward","data-floating-panel-interactive":"true",children:e.jsxDEV(Bn,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6678,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6670,columnNumber:21},this),e.jsxDEV(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>d(m.id,"back"),"aria-label":"Send layer to back","data-floating-panel-interactive":"true",children:e.jsxDEV(Zh,{className:"h-3.5 w-3.5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6688,columnNumber:23},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6680,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6635,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6618,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2 flex items-center gap-2","data-floating-panel-interactive":"true",children:[e.jsxDEV("span",{className:"text-[10px] uppercase tracking-[0.3em] text-muted-foreground",children:"Opacity"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6696,columnNumber:19},this),e.jsxDEV(Na,{value:[Math.round((m.opacity??1)*100)],min:0,max:100,step:1,className:"flex-1",onValueChange:N=>c(m.id,(N[0]??100)/100),"aria-label":"Layer opacity"},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6699,columnNumber:19},this),e.jsxDEV("span",{className:"w-10 text-right text-[10px] font-semibold text-muted-foreground",children:[Math.round((m.opacity??1)*100),"%"]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6710,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6692,columnNumber:17},this)]},m.id,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6608,columnNumber:15},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6603,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6602,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/EchoMenuStudio.tsx",lineNumber:6562,columnNumber:5},this)}const Tj=Mf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ix=h.forwardRef(({className:s,variant:t,...i},n)=>e.jsxDEV("div",{ref:n,role:"alert",className:je(Tj({variant:t}),s),...i},void 0,!1,{fileName:"/app/code/client/components/ui/alert.tsx",lineNumber:26,columnNumber:3},void 0));ix.displayName="Alert";const Wj=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("h5",{ref:i,className:je("mb-1 font-medium leading-none tracking-tight",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert.tsx",lineNumber:39,columnNumber:3},void 0));Wj.displayName="AlertTitle";const nx=h.forwardRef(({className:s,...t},i)=>e.jsxDEV("div",{ref:i,className:je("text-sm [&_p]:leading-relaxed",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/alert.tsx",lineNumber:51,columnNumber:3},void 0));nx.displayName="AlertDescription";const Lj=[{id:"EV-1",title:"Wedding Reception",date:new Date().toISOString().slice(0,10),time:"5:00 PM - 9:00 PM",room:"Ballroom A",guestCount:120,status:"confirmed",priority:"high",acknowledged:!1,clientName:"Smith"},{id:"EV-2",title:"Corporate Lunch",date:new Date().toISOString().slice(0,10),time:"12:00 PM - 2:00 PM",room:"Salon C",guestCount:60,status:"pending",priority:"medium",acknowledged:!0,clientName:"Acme Inc."},{id:"EV-3",title:"Gala Dinner",date:new Date(Date.now()+864e5).toISOString().slice(0,10),time:"6:00 PM - 11:00 PM",room:"Grand Hall",guestCount:200,status:"lead",priority:"urgent",acknowledged:!1,clientName:"Charity Org",revenue:15e3}];function Mj(){const[s,t]=Cn.useState(Lj),[i,n]=Cn.useState(!1),a={};async function o(){n(!0),setTimeout(()=>n(!1),100)}async function l(c,f){t(b=>b.map(D=>D.id===c?{...D,acknowledged:!0}:D))}async function r(c){t(f=>f.map(b=>b.id===c?{...b,beoId:`BEO-${c}`}:b))}async function d(c){return a[c]}return{events:s,isLoading:i,loadEvents:o,acknowledgeEvent:l,createBEO:r,isIntegrationEnabled:!1,syncStatus:{isConnected:!1,lastSyncAt:Date.now()},pendingConflicts:[],beos:a,loadBEO:d}}const _j=({status:s})=>e.jsxDEV(et,{variant:"outline",className:"capitalize",children:s.replace("_"," ")},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:16,columnNumber:3},void 0),Oj=({event:s,open:t,onClose:i,onEditBEO:n,onCreateBEO:a,onAck:o})=>!t||!s?null:Af.createPortal(e.jsxDEV("div",{className:"fixed inset-0 bg-black/60 z-[1000] flex items-center justify-center p-4",onClick:i,children:e.jsxDEV($e,{className:"max-w-xl w-full",onClick:l=>l.stopPropagation(),children:[e.jsxDEV(Ke,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-lg font-semibold",children:s.title},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:26,columnNumber:13},void 0),e.jsxDEV(ne,{variant:"ghost",size:"sm",onClick:i,children:"✕"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:27,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:25,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:24,columnNumber:9},void 0),e.jsxDEV(Ge,{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(_h,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:32,columnNumber:54},void 0),e.jsxDEV("span",{children:new Date(s.date).toLocaleDateString()},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:32,columnNumber:89},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:32,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(qa,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:33,columnNumber:54},void 0),e.jsxDEV("span",{children:s.time},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:33,columnNumber:82},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:33,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(so,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:34,columnNumber:54},void 0),e.jsxDEV("span",{children:[s.guestCount," guests"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:34,columnNumber:82},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:34,columnNumber:13},void 0),s.revenue?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Fc,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:35,columnNumber:71},void 0),e.jsxDEV("span",{children:["$",s.revenue.toLocaleString()]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:35,columnNumber:104},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:35,columnNumber:30},void 0):null]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:31,columnNumber:11},void 0),e.jsxDEV(_j,{status:s.status},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:37,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex gap-2 pt-2 border-t",children:[!s.acknowledged&&e.jsxDEV(ne,{className:"flex-1",onClick:()=>{o(s.id),i()},children:[e.jsxDEV(n0,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:39,columnNumber:111},void 0),"Acknowledge"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:39,columnNumber:38},void 0),s.beoId?e.jsxDEV(ne,{variant:"outline",className:"flex-1",onClick:()=>{n(s),i()},children:[e.jsxDEV(a0,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:41,columnNumber:107},void 0),"Edit BEO"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:41,columnNumber:15},void 0):e.jsxDEV(ne,{variant:"outline",className:"flex-1",onClick:()=>{a(s.id),i()},children:[e.jsxDEV(Hi,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:43,columnNumber:112},void 0),"Create BEO"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:43,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:38,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:30,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:23,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:22,columnNumber:5},void 0),document.body),Fj=({events:s,date:t,onEvent:i})=>{const n=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),a=new Date(t.getFullYear(),t.getMonth(),1).getDay(),o=Array.from({length:n},(d,c)=>c+1),l=Array.from({length:a},()=>null),r=d=>s.filter(c=>c.date===`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`);return e.jsxDEV("div",{className:"bg-white dark:bg-background border rounded-lg overflow-hidden",children:[e.jsxDEV("div",{className:"grid grid-cols-7 border-b bg-slate-100 dark:bg-slate-800 text-xs font-semibold",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(d=>e.jsxDEV("div",{className:"p-2 text-center",children:d},d,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:62,columnNumber:62},void 0))},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:61,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-7",children:[l.map((d,c)=>e.jsxDEV("div",{className:"h-24 border-r border-b"},`e-${c}`,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:65,columnNumber:28},void 0)),o.map(d=>{const c=r(d);return e.jsxDEV("div",{className:"h-24 border-r border-b p-1",children:[e.jsxDEV("div",{className:"text-xs font-semibold opacity-70",children:d},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:68,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1",children:[c.slice(0,3).map(f=>e.jsxDEV("div",{className:je("text-[11px] px-1 py-0.5 rounded border cursor-pointer truncate",!f.acknowledged&&"ring-1 ring-red-400"),onClick:()=>i(f),children:[f.title," • ",f.time.split(" ")[0]]},f.id,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:71,columnNumber:17},void 0)),c.length>3&&e.jsxDEV("div",{className:"text-[11px] text-muted-foreground",children:["+",c.length-3," more"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:75,columnNumber:32},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:69,columnNumber:13},void 0)]},d,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:67,columnNumber:11},void 0)})]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:64,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:60,columnNumber:5},void 0)},Bj=({onBEOSelect:s,onCreateBEO:t,events:i})=>{const n=Mj(),a=i??n.events,o=i?!1:n.isLoading,l=i?()=>{}:n.loadEvents,r=i?(N,w)=>{}:n.acknowledgeEvent,d=i?async N=>{}:n.createBEO,[c,f]=h.useState(new Date),[b,D]=h.useState("month"),[u,p]=h.useState(null),[x,S]=h.useState(!1),m=gx();if(h.useEffect(()=>{i||l()},[i]),h.useEffect(()=>{const w=new URLSearchParams(m.search||"").get("event");if(w){const A=a.find(I=>I.id===w);A&&(p(A),S(!0))}},[m.search,a]),o)return e.jsxDEV("div",{className:"p-6 text-center",children:"Loading…"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:98,columnNumber:26},void 0);const v=a.filter(N=>new Date(N.date).getMonth()===c.getMonth()&&new Date(N.date).getFullYear()===c.getFullYear()),g=v.reduce((N,w)=>N+(w.guestCount||0),0);return e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(ix,{className:"py-2",children:[e.jsxDEV(to,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:103,columnNumber:31},void 0),e.jsxDEV(nx,{className:"text-sm",children:[a.filter(N=>!N.acknowledged).length," BEO(s) need acknowledgment"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:103,columnNumber:65},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:103,columnNumber:7},void 0),e.jsxDEV($e,{className:"border shadow-md",children:[e.jsxDEV(Ke,{className:"bg-slate-50 dark:bg-slate-800 border-b",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>f(N=>{const w=new Date(N);return w.setMonth(N.getMonth()-1),w}),children:e.jsxDEV(xd,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:108,columnNumber:141},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:108,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-xl font-semibold",children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:109,columnNumber:15},void 0),e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>f(N=>{const w=new Date(N);return w.setMonth(N.getMonth()+1),w}),children:e.jsxDEV(Ha,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:110,columnNumber:141},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:110,columnNumber:15},void 0),e.jsxDEV(ne,{variant:"default",size:"sm",onClick:()=>f(new Date),children:[e.jsxDEV(qa,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:111,columnNumber:86},void 0),"Today"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:111,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:107,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:()=>l(),children:[e.jsxDEV(t0,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:114,columnNumber:79},void 0),"Refresh"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:114,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex border rounded-lg",children:[e.jsxDEV(ne,{variant:b==="month"?"default":"ghost",size:"sm",onClick:()=>D("month"),className:"rounded-r-none border-r",children:[e.jsxDEV(zh,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:116,columnNumber:147},void 0),"Month"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:116,columnNumber:17},void 0),e.jsxDEV(ne,{variant:b==="week"?"default":"ghost",size:"sm",onClick:()=>D("week"),className:"rounded-none border-r",children:[e.jsxDEV(s0,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:117,columnNumber:143},void 0),"Week"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:117,columnNumber:17},void 0),e.jsxDEV(ne,{variant:b==="today"?"default":"ghost",size:"sm",onClick:()=>D("today"),className:"rounded-l-none",children:[e.jsxDEV(i0,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:118,columnNumber:138},void 0),"Today"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:118,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:115,columnNumber:15},void 0),e.jsxDEV(et,{variant:"outline",className:"text-xs",children:[v.length," events"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:120,columnNumber:15},void 0),e.jsxDEV(et,{variant:"outline",className:"text-xs",children:[e.jsxDEV(so,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:121,columnNumber:60},void 0),g," covers"]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:121,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:113,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:106,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:105,columnNumber:9},void 0),e.jsxDEV(Ge,{className:"p-3",children:e.jsxDEV(Fj,{events:a,date:c,onEvent:N=>{p(N),S(!0)}},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:126,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:125,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:104,columnNumber:7},void 0),e.jsxDEV(Oj,{event:u,open:x,onClose:()=>S(!1),onEditBEO:N=>s?.(N.beoId||""),onCreateBEO:async N=>{await d(N),t?.(N)},onAck:N=>r(N,"Chef")},void 0,!1,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:129,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/components/panels/GlobalCalendar.tsx",lineNumber:102,columnNumber:5},void 0)},Uj=ng,$j=ag,zj=h.forwardRef(({className:s,inset:t,children:i,...n},a)=>e.jsxDEV(xh,{ref:a,className:je("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...n,children:[i,e.jsxDEV(Ha,{className:"ml-auto h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:35,columnNumber:5},void 0)]},void 0,!0,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:25,columnNumber:3},void 0));zj.displayName=xh.displayName;const Gj=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(gh,{ref:i,className:je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:45,columnNumber:3},void 0));Gj.displayName=gh.displayName;const ax=h.forwardRef(({className:s,sideOffset:t=4,...i},n)=>e.jsxDEV(rg,{children:e.jsxDEV(fh,{ref:n,sideOffset:t,className:je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:62,columnNumber:5},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:61,columnNumber:3},void 0));ax.displayName=fh.displayName;const Ia=h.forwardRef(({className:s,inset:t,...i},n)=>e.jsxDEV(bh,{ref:n,className:je("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...i},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:81,columnNumber:3},void 0));Ia.displayName=bh.displayName;const Hj=h.forwardRef(({className:s,children:t,checked:i,...n},a)=>e.jsxDEV(vh,{ref:a,className:je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...n,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV(yh,{children:e.jsxDEV(vn,{className:"h-4 w-4"},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:108,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:107,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:106,columnNumber:5},void 0),t]},void 0,!0,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:97,columnNumber:3},void 0));Hj.displayName=vh.displayName;const qj=h.forwardRef(({className:s,children:t,...i},n)=>e.jsxDEV(Dh,{ref:n,className:je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsxDEV(yh,{children:e.jsxDEV(io,{className:"h-2 w-2 fill-current"},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:131,columnNumber:9},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:130,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:129,columnNumber:5},void 0),t]},void 0,!0,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:121,columnNumber:3},void 0));qj.displayName=Dh.displayName;const rx=h.forwardRef(({className:s,inset:t,...i},n)=>e.jsxDEV(hh,{ref:n,className:je("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...i},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:145,columnNumber:3},void 0));rx.displayName=hh.displayName;const ox=h.forwardRef(({className:s,...t},i)=>e.jsxDEV(Nh,{ref:i,className:je("-mx-1 my-1 h-px bg-muted",s),...t},void 0,!1,{fileName:"/app/code/client/components/ui/dropdown-menu.tsx",lineNumber:161,columnNumber:3},void 0));ox.displayName=Nh.displayName;function Oi(s,t){try{const i=localStorage.getItem(s);return i?JSON.parse(i):t}catch{return t}}function Fi(s,t){try{localStorage.setItem(s,JSON.stringify(t))}catch{}}const xf="production.roles.v1",gf="production.staff.v1",vf="production.outlets.v1",yf="production.orders.v1",Df="production.orders.trash.v1",Ef="production.logs.v1",wf="production.tasks.v1",kf="production.inventory.raw.v1",Sf="production.inventory.finished.v1",jf="production.session.user.v1";function Xt(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}async function Kj(s){const i=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(n)).map(a=>a.toString(16).padStart(2,"0")).join("")}function Yj(){const{t:s}=Vs(),{recipes:t}=ln(),[i,n]=h.useState(()=>Oi(xf,[{id:Xt(),name:"Baker"},{id:Xt(),name:"Chocolates & Confections"}])),[a,o]=h.useState(()=>Oi(gf,[{id:Xt(),name:"Mike",roleId:void 0}])),[l,r]=h.useState(()=>Oi(vf,[{id:Xt(),name:"Banquets",type:"Banquets",orderCutoff:"14:00"},{id:Xt(),name:"Cafe",type:"Outlet",orderCutoff:"12:00"},{id:Xt(),name:"Custom Cakes",type:"Custom Cakes",orderCutoff:"10:00"}])),[d,c]=h.useState(()=>Oi(yf,[])),[f,b]=h.useState(()=>Oi(Df,[])),[D,u]=h.useState(()=>Oi(Ef,[])),[p,x]=h.useState(()=>Oi(wf,[])),[S,m]=h.useState(()=>Oi(kf,[{id:Xt(),name:"Flour",unit:"kg",onHand:50,par:30,location:"Row A • Shelf 1 • Bin 1"},{id:Xt(),name:"Chocolate",unit:"kg",onHand:20,par:10,location:"Row B • Shelf 2 • Bin 3"}])),[v,g]=h.useState(()=>Oi(Sf,[{id:Xt(),name:"Croissant",unit:"pcs",onHand:80,par:120,location:"Freezer 1 • Rack 2 • Tray A"},{id:Xt(),name:"Chocolate Bonbons",unit:"pcs",onHand:120,par:150,location:"Freezer 2 • Rack 1 • Tray C"}])),[N,w]=h.useState(()=>new Date().toISOString().slice(0,10)),[A,I]=h.useState(()=>Oi(jf,null)),B=h.useMemo(()=>a.find(_=>_.id===A)||null,[a,A]),[W,se]=h.useState(!1),[ie,R]=h.useState(null),[F,k]=h.useState(null),[Q,J]=h.useState(!1),[O,me]=h.useState(()=>N),[de,fe]=h.useState(()=>N),[ae,L]=h.useState(()=>[]),[H,le]=h.useState({}),[ue,K]=h.useState(()=>({open:!1,x:0,y:0})),[C,P]=h.useState(null),[ee,$]=h.useState(()=>N),[U,G]=h.useState(()=>N),[re,V]=h.useState(!1),[Y,T]=h.useState(null),[y,E]=h.useState(null),[j,q]=h.useState(!1),[te,Z]=h.useState(null),[ve,ke]=h.useState(!1),[De,We]=h.useState([]),[ze,st]=h.useState(()=>N),[_t,Nt]=h.useState(!1),[ye,pt]=h.useState(null),[ct,Ot]=h.useState([]),[Es,qt]=h.useState(!1),[ws,Kt]=h.useState(null),[fs,Cs]=h.useState(""),[xs,It]=h.useState(""),ls=h.useRef(null),zs=h.useRef(null);h.useEffect(()=>Fi(xf,i),[i]),h.useEffect(()=>Fi(gf,a),[a]),h.useEffect(()=>Fi(vf,l),[l]),h.useEffect(()=>Fi(yf,d),[d]),h.useEffect(()=>Fi(Df,f),[f]),h.useEffect(()=>Fi(Ef,D),[D]),h.useEffect(()=>Fi(wf,p),[p]),h.useEffect(()=>Fi(kf,S),[S]),h.useEffect(()=>Fi(Sf,v),[v]),h.useEffect(()=>Fi(jf,A),[A]),h.useEffect(()=>{const _=Date.now();b(M=>M.filter(X=>_-X.deletedAt<168*3600*1e3)),u(M=>M.filter(X=>_-X.ts<720*3600*1e3))},[]);const ys=h.useMemo(()=>p.filter(_=>_.dateISO===N).sort((_,M)=>_.start.localeCompare(M.start)),[p,N]),we=h.useMemo(()=>Object.fromEntries(i.map(_=>[_.id,_])),[i]),qe=h.useMemo(()=>Object.fromEntries(a.map(_=>[_.id,_])),[a]),Qe=h.useMemo(()=>Object.fromEntries(l.map(_=>[_.id,_])),[l]);function ot(){const _=prompt("New duty/role name","Bread Baker");_&&n(M=>[...M,{id:Xt(),name:_}])}function ft(){const _=prompt("Staff name","Mike");if(!_)return;const M=i[0]?.id;o(X=>[...X,{id:Xt(),name:_,roleId:M}])}function xt(){const _=prompt("Outlet name","Outlet A");if(!_)return;const M=prompt("Type: Outlet / Banquets / Custom Cakes","Outlet")||"Outlet",X=prompt("Order cutoff (HH:mm)","14:00")||"14:00";r(he=>[...he,{id:Xt(),name:_,type:M,orderCutoff:X}])}function jt(_){const M=Xt(),X=_.outletId||l[0]?.id,he=_.dueISO||new Date().toISOString(),Ee=_.lines&&_.lines.length?_.lines:[{id:Xt(),item:"Croissant",qty:50,unit:"pcs",finishedItemId:v[0]?.id}],Ve={id:M,outletId:X,dueISO:he,lines:Ee,notes:_.notes||"",createdAt:Date.now()};c(Ce=>[Ve,...Ce]),u(Ce=>[{id:Xt(),ts:Date.now(),kind:"order",message:`Order ${M} created for ${Qe[X]?.name}`,actorId:B?.id,actorName:B?.name},...Ce]),Ue(Ve)}function At(_){const[M,X]=_.split(":").map(he=>parseInt(he));return M*60+(X||0)}function Vt(_){const M=Math.floor(_/60),X=_%60;return`${String(M).padStart(2,"0")}:${String(X).padStart(2,"0")}`}function Qt(_){if(!_)return"";const M=Math.abs(_.split("").reduce((he,Ee)=>he+Ee.charCodeAt(0),0)),X=["#38bdf8","#a78bfa","#34d399","#f59e0b","#f472b6","#22d3ee","#fb7185"];return X[M%X.length]}function ks(_){switch(_){case"housekeeping":return"#22d3ee";case"delivery":return"#34d399";default:return"#94a3b8"}}function Yt(_){return _.color||Qt(_.roleId)||ks(_.category)}function Gt(_){const M=new Date(_.dueISO),X=Qe[_.outletId]?.orderCutoff||"12:00",he=At(X),Ee=At(`${new Date(_.createdAt).getHours().toString().padStart(2,"0")}:${new Date(_.createdAt).getMinutes().toString().padStart(2,"0")}`),Ve=M.toISOString().slice(0,10)===new Date(_.createdAt).toISOString().slice(0,10);return _.changedAt&&Date.now()-_.changedAt<24*3600*1e3?"change":Ve&&Ee>he?"late":"normal"}function _s(_){const M=_.getFullYear(),X=String(_.getMonth()+1).padStart(2,"0"),he=String(_.getDate()).padStart(2,"0");return`${M}-${X}-${he}`}function Ys(_){const M=String(_.getHours()).padStart(2,"0"),X=String(_.getMinutes()).padStart(2,"0");return`${M}:${X}`}function Ts(_){switch(_){case"late":return"pending";case"change":return"in_prep";default:return"confirmed"}}const Ei=h.useMemo(()=>{const _=d.map(X=>{const he=new Date(X.dueISO);return{id:`order-${X.id}`,title:`${Qe[X.outletId]?.name||"Outlet"} — Order`,date:_s(he),time:Ys(he),room:Qe[X.outletId]?.name||"Outlet",guestCount:X.lines.reduce((Ee,Ve)=>Ee+(Number(Ve.qty)||0),0),status:Ts(Gt(X)),priority:"medium",acknowledged:!0,clientName:Qe[X.outletId]?.name||void 0}}),M=p.map(X=>({id:`task-${X.id}`,title:X.title,date:X.dateISO,time:`${X.start} - ${X.end}`,room:X.outletId?Qe[X.outletId]?.name||"Outlet":"—",guestCount:Number(X.qty||0),status:X.done?"confirmed":"pending",priority:X.category==="production"?"medium":"low",acknowledged:!0,clientName:void 0}));return[..._,...M]},[d,p,Qe]);function oe(_){const M={id:_?.id||Xt(),title:_?.title||"",dateISO:_?.dateISO||N,start:_?.start||"06:00",end:_?.end||"08:00",outletId:_?.outletId||l[0]?.id,roleId:_?.roleId,staffId:_?.staffId,qty:_?.qty,unit:_?.unit,orderId:_?.orderId,color:_?.color,category:_?.category||"production",done:_?.done};k(_?.id||null),R(M),se(!0)}function Ne(){ie&&(x(_=>F?_.map(M=>M.id===F?ie:M):[..._,ie]),se(!1),R(null),k(null))}function Ue(_,M){const X=_.dueISO.slice(0,10),he=[],Ee=new Map(v.map(Ce=>[Ce.id,{...Ce}]));for(const Ce of _.lines){let He=0;if(Ce.finishedItemId&&Ee.has(Ce.finishedItemId)){const kt=Ee.get(Ce.finishedItemId),wt=Math.min(kt.onHand,Ce.qty);wt>0&&(He=wt,kt.onHand-=wt,he.push({id:Xt(),dateISO:X,start:"06:00",end:"06:15",outletId:_.outletId,orderId:_.id,title:`Pull ${wt} ${Ce.unit} ${kt.name} from freezer`,roleId:M?.roleId||i.find(ut=>/baker/i.test(ut.name))?.id,qty:wt,unit:Ce.unit,pullFromFinished:[{finishedItemId:kt.id,qty:wt}],color:Gt(_)==="late"?"#ef4444":Gt(_)==="change"?"#f59e0b":Qt(M?.roleId)}))}const Rt=Math.max(0,Ce.qty-He);if(Rt>0){const kt=M?.roleId||i.find(wt=>/chocolate|confection|baker/i.test(wt.name))?.id;he.push({id:Xt(),dateISO:X,start:"06:30",end:"10:30",outletId:_.outletId,orderId:_.id,title:`Produce ${Rt} ${Ce.unit} ${Ce.item}`,roleId:kt,staffId:M?.staffId,recipeId:Ce.recipeId,qty:Rt,unit:Ce.unit,color:Gt(_)==="late"?"#ef4444":Gt(_)==="change"?"#f59e0b":Qt(kt)})}}he.length&&x(Ce=>[...Ce,...he]);const Ve=v.map(Ce=>Ee.get(Ce.id)||Ce);g(Ve)}function Me(_){x(M=>M.filter(X=>X.id!==_))}function Ct(_,M){x(X=>{const he=X.find(Ee=>Ee.id===_);return he?(M&&!he.invAccounted&&(he.pullFromFinished&&g(Ee=>Ee.map(Ve=>{const Ce=he.pullFromFinished.find(He=>He.finishedItemId===Ve.id)?.qty||0;return Ce?{...Ve,onHand:Math.max(0,(Ve.onHand||0)-Ce)}:Ve})),he.useRaw&&m(Ee=>Ee.map(Ve=>{const Ce=he.useRaw.find(He=>He.rawItemId===Ve.id)?.qty||0;return Ce?{...Ve,onHand:Math.max(0,(Ve.onHand||0)-Ce)}:Ve})),he.recipeId&&he.qty&&g(Ee=>{const Ve=Ee.findIndex(Ce=>Ce.recipeId===he.recipeId);if(Ve>=0){const Ce=[...Ee];return Ce[Ve]={...Ce[Ve],onHand:(Ce[Ve].onHand||0)+(he.qty||0)},Ce}return Ee})),!M&&he.invAccounted&&(he.pullFromFinished&&g(Ee=>Ee.map(Ve=>{const Ce=he.pullFromFinished.find(He=>He.finishedItemId===Ve.id)?.qty||0;return Ce?{...Ve,onHand:(Ve.onHand||0)+Ce}:Ve})),he.useRaw&&m(Ee=>Ee.map(Ve=>{const Ce=he.useRaw.find(He=>He.rawItemId===Ve.id)?.qty||0;return Ce?{...Ve,onHand:(Ve.onHand||0)+Ce}:Ve})),he.recipeId&&he.qty&&g(Ee=>{const Ve=Ee.findIndex(Ce=>Ce.recipeId===he.recipeId);if(Ve>=0){const Ce=[...Ee];return Ce[Ve]={...Ce[Ve],onHand:Math.max(0,(Ce[Ve].onHand||0)-(he.qty||0))},Ce}return Ee})),X.map(Ee=>Ee.id===_?{...Ee,done:M,invAccounted:!!M}:Ee)):X})}window.importCommissaryOrder=_=>{const M={id:Xt(),outletId:_.outletId,dueISO:_.dueISO,lines:_.lines.map(X=>({id:Xt(),...X})),notes:_.notes||"",createdAt:Date.now()};c(X=>[M,...X]),Ue(M)},h.useMemo(()=>{const _={};for(const M of ys){const X=`${Qe[M.outletId||""]?.name||"Outlet"} • ${we[M.roleId||""]?.name||"Unassigned"}`;(_[X]||=[]).push(M)}return _},[ys,we,Qe]);const Ws=h.useMemo(()=>{const _=O||N,M=de||N,X=Ve=>Ve>=_&&Ve<=M,he=ae.length?new Set(ae):new Set(l.map(Ve=>Ve.id)),Ee={};for(const Ve of p){if(!X(Ve.dateISO)||Ve.outletId&&!he.has(Ve.outletId))continue;const Ce=`${Qe[Ve.outletId||""]?.name||"Outlet"} • ${we[Ve.roleId||""]?.name||"Unassigned"}`;(Ee[Ce]||=[]).push(Ve)}return Ee},[p,O,de,ae,we,Qe,l,N]),es=()=>K({open:!1,x:0,y:0}),ti=(_,M)=>{_.preventDefault(),K({open:!0,x:_.clientX,y:_.clientY,orderId:M})};function Qs(){const _=N,M=l[0],X=M?.guide?.length?M.guide.filter(he=>he.item).map(he=>({id:Xt(),item:he.item,qty:he.defaultQty||0,unit:he.unit||"pcs"})):[{id:Xt(),item:"",qty:0,unit:"pcs"}];Z({outletId:M?.id||"",date:_,time:"06:00",lines:X}),ke(!1),We([]),st(_),q(!0)}function Zs(_,M){const X=v.find(he=>he.name.toLowerCase()===M.toLowerCase());Z(he=>he&&{...he,lines:he.lines.map((Ee,Ve)=>Ve===_?{...Ee,item:M,finishedItemId:X?.id,unit:Ee.unit||X?.unit||"pcs"}:Ee)})}function Ri(){if(!te)return;const _=te.lines.filter(M=>M.item&&M.qty>0).map(M=>({id:Xt(),item:M.item,qty:M.qty,unit:M.unit,finishedItemId:M.finishedItemId}));if(!_.length){q(!1),Z(null);return}if(ve){const M=new Date(`${te.date}T00:00:00`),X=new Date(`${ze}T23:59:59`);for(let he=new Date(M);he<=X;he.setDate(he.getDate()+1)){const Ee=he.getDay();if(De.length&&!De.includes(Ee))continue;const Ve=he.getFullYear(),Ce=String(he.getMonth()+1).padStart(2,"0"),He=String(he.getDate()).padStart(2,"0"),Rt=`${Ve}-${Ce}-${He}`,kt=new Date(`${Rt}T${te.time}:00`).toISOString();jt({outletId:te.outletId,dueISO:kt,lines:_.map(wt=>({...wt,id:Xt()}))})}}else{const M=new Date(`${te.date}T${te.time}:00`).toISOString();jt({outletId:te.outletId,dueISO:M,lines:_})}q(!1),Z(null)}function us(_){const M=new Date(_.dueISO),X=new Date(M.getTime()-M.getTimezoneOffset()*6e4),he=X.toISOString().slice(0,10),Ee=`${String(X.getHours()).padStart(2,"0")}:${String(X.getMinutes()).padStart(2,"0")}`;c(Ve=>Ve.map(Ce=>Ce.id===_.id?{...Ce,changedAt:Date.now()}:Ce)),T(_.id),E({id:_.id,outletId:_.outletId,date:he,time:Ee,notes:_.notes||"",lines:_.lines.map(Ve=>({...Ve}))}),V(!0)}function Os(){if(!y)return;const _=new Date(`${y.date}T${y.time}:00`).toISOString();c(M=>M.map(X=>X.id===Y?{...X,outletId:y.outletId,dueISO:_,notes:y.notes,lines:y.lines,changedAt:Date.now()}:X)),u(M=>[{id:Xt(),ts:Date.now(),kind:"order",message:`Order ${y.id} changed`,actorId:B?.id,actorName:B?.name},...M]),V(!1),E(null),T(null)}const Rs=.8,Xs=h.useRef(null),[Ss,Gs]=h.useState(0);h.useEffect(()=>{const _=Xs.current;if(!_)return;const M=new ResizeObserver(()=>Gs(_.clientWidth));return M.observe(_),Gs(_.clientWidth),()=>M.disconnect()},[]),h.useMemo(()=>Ss>0?Ss/1440:2,[Ss]);function li(_,M,X){const he=At(M.start),Ee=At(M.end);zs.current={id:M.id,type:X,startY:_.clientY,startX:_.clientX,startMin:he,endMin:Ee},_.currentTarget.setPointerCapture?.(_.pointerId),window.addEventListener("pointermove",ci,{passive:!1}),window.addEventListener("pointerup",si,{once:!0})}function ci(_){const M=zs.current;if(!M)return;const X=_.clientY-M.startY,he=Math.round(X/Rs/15)*15;x(Ee=>Ee.map(Ve=>{if(Ve.id!==M.id)return Ve;let Ce=M.startMin,He=M.endMin;M.type==="move"?(Ce+=he,He+=he):He=Math.max(Ce+15,M.endMin+he),Ce=Math.max(0,Ce),He=Math.min(1440,He);const Rt={...Ve,start:Vt(Ce),end:Vt(He)};return Ve.timePending||(Rt.timePending=!0,Rt.pendingOriginalDateISO=Ve.dateISO,Rt.pendingOriginalStart=Vt(M.startMin),Rt.pendingOriginalEnd=Vt(M.endMin)),Rt}))}function si(_){window.removeEventListener("pointermove",ci);const M=zs.current;if(M){const X=_.clientX-M.startX,he=Math.max(1,Math.round((Ss||1)/3)),Ee=Math.round(X/he);Ee!==0&&x(Ve=>Ve.map(Ce=>Ce.id===M.id?{...Ce,laneBias:Math.max(-9,Math.min(9,(Ce.laneBias||0)+Ee))}:Ce))}zs.current=null}h.useEffect(()=>()=>{window.removeEventListener("pointermove",ci)},[]);const di=h.useMemo(()=>Object.fromEntries(d.map(_=>[_.id,_])),[d]),Zi=h.useMemo(()=>{const _={};for(const M of d)_[M.id]=M.lines.length;return _},[d]),Hs=h.useMemo(()=>{const _=ys.map(Ve=>({t:Ve,s:At(Ve.start),e:At(Ve.end)})).sort((Ve,Ce)=>Ve.s-Ce.s||Ve.e-Ce.e),M=[];let X=0,he=[];for(const Ve of _)he=he.filter(Ce=>Ce.e>Ve.s),he.length===0&&M.push({id:X++,items:[]}),M[M.length-1].items.push(Ve),he.push({s:Ve.s,e:Ve.e});const Ee=new Map;for(const Ve of M){const Ce=[],He=[...Ve.items].sort((Rt,kt)=>Rt.s-kt.s||(Rt.t.laneBias||0)-(kt.t.laneBias||0)||Rt.e-kt.e);for(const{t:Rt,s:kt,e:wt}of He){let ut=Ce.findIndex(Dt=>Dt<=kt);ut===-1?(ut=Ce.length,Ce.push(wt)):Ce[ut]=wt,Ee.set(Rt.id,{lane:ut,lanesTotal:Ce.length,groupId:Ve.id})}for(const{t:Rt}of He){const kt=Ee.get(Rt.id);kt&&(kt.lanesTotal=Ce.length)}}return{groups:M,laneMap:Ee}},[ys]).laneMap,Mi=f.length,wi=Mi===0?"#94a3b8":"#ef4444",[Se,Le]=h.useState(null);function Fe(_){x(M=>M.map(X=>X.id===_?{...X,timePending:!1,pendingOriginalDateISO:void 0,pendingOriginalStart:void 0,pendingOriginalEnd:void 0}:X))}function at(_){x(M=>M.map(X=>X.id===_?{...X,dateISO:X.pendingOriginalDateISO||X.dateISO,start:X.pendingOriginalStart||X.start,end:X.pendingOriginalEnd||X.end,timePending:!1,pendingOriginalDateISO:void 0,pendingOriginalStart:void 0,pendingOriginalEnd:void 0}:X))}function ht(_){Kt(_),Cs(""),It(""),qt(!0)}async function gt(){if(!ws)return;const _=d.find(M=>M.id===ws);if(!_){qt(!1),Kt(null);return}c(M=>M.filter(X=>X.id!==_.id)),b(M=>[{..._,deletedAt:Date.now(),deleteReason:fs.trim()},...M]),u(M=>[{id:Xt(),ts:Date.now(),kind:"order",message:`Order ${_.id} deleted${fs?` — ${fs}`:""}`},...M]),qt(!1),Kt(null)}return e.jsxDEV("div",{className:"container mx-auto px-4 py-4 space-y-4",children:[e.jsxDEV("div",{className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-base font-semibold flex items-center gap-2",children:[e.jsxDEV(Dd,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:515,columnNumber:76},this)," ",s("production.chef")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:515,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("input",{type:"date",value:N,onChange:_=>w(_.target.value),className:"rounded-md border px-2 py-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:517,columnNumber:13},this),e.jsxDEV(Uj,{children:[e.jsxDEV($j,{asChild:!0,children:e.jsxDEV(ne,{size:"sm",children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:520,columnNumber:35},this),s("production.addTask")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:520,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:519,columnNumber:15},this),e.jsxDEV(ax,{align:"end",children:[e.jsxDEV(rx,{children:s("production.addTask")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:523,columnNumber:17},this),e.jsxDEV(Ia,{onClick:()=>oe({category:"production",title:"",roleId:i[0]?.id}),children:s("production.production")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:524,columnNumber:17},this),e.jsxDEV(Ia,{onClick:()=>oe({category:"housekeeping",title:"Clean workstation"}),children:s("production.housekeeping")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:525,columnNumber:17},this),e.jsxDEV(Ia,{onClick:()=>oe({category:"delivery",title:"Delivery to outlet"}),children:"Delivery���"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:526,columnNumber:17},this),e.jsxDEV(ox,{},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:527,columnNumber:17},this),e.jsxDEV(Ia,{onClick:()=>oe({}),children:"Custom…"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:528,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:522,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:518,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:Qs,children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:531,columnNumber:71},this),s("production.addOrder")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:531,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:()=>J(!0),children:[e.jsxDEV(Ba,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:532,columnNumber:82},this),s("production.prepSheet")]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:532,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:516,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:514,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:513,columnNumber:7},this),e.jsxDEV(Ki,{defaultValue:"calendar",className:"w-full",children:[e.jsxDEV(Yi,{className:"flex flex-wrap gap-1 p-1 bg-muted rounded-lg",children:[e.jsxDEV(bs,{value:"calendar",children:s("production.calendar")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:539,columnNumber:11},this),e.jsxDEV(bs,{value:"global-cal",children:s("production.globalCalendar")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:540,columnNumber:11},this),e.jsxDEV(bs,{value:"orders",children:s("production.orders")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:541,columnNumber:11},this),e.jsxDEV(bs,{value:"staff",children:s("production.staffDuties")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:542,columnNumber:11},this),e.jsxDEV(bs,{value:"outlets",children:s("production.outlets")},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:543,columnNumber:11},this),e.jsxDEV(bs,{value:"trash",children:[s("production.trash")," ",e.jsxDEV("span",{style:{marginLeft:6,background:wi,color:"#fff",borderRadius:12,padding:"0 6px"},children:Mi},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:544,columnNumber:62},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:544,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:538,columnNumber:9},this),e.jsxDEV(St,{value:"calendar",children:e.jsxDEV("div",{ref:ls,className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:e.jsxDEV("div",{className:"grid grid-cols-[80px_1fr] gap-3",children:[e.jsxDEV("div",{className:"flex flex-col text-xs text-muted-foreground",children:Array.from({length:24}).map((_,M)=>e.jsxDEV("div",{className:"h-12 border-b last:border-b-0",children:[String(M).padStart(2,"0"),":00"]},M,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:552,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:550,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:24}).map((_,M)=>e.jsxDEV("div",{className:"h-12 border-b last:border-b-0"},M,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:558,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:556,columnNumber:17},this),e.jsxDEV("div",{className:"relative",ref:Xs,children:ys.map(_=>{const M=At(_.start)*Rs,X=Math.max(36,(At(_.end)-At(_.start))*Rs),he=Yt(_),Ee=Hs.get(_.id),Ve=Ee?.lane??0,Ce=Ee?.lanesTotal??1,He=Math.max(Ce,1),Rt=`calc(${100/He}% - 6px)`,kt=Math.max(0,Math.min(He-1,Ve+(_.laneBias||0))),wt=`${100/He*kt}%`;return e.jsxDEV("div",{className:"absolute",style:{top:M,height:X,left:wt,maxWidth:Rt,paddingRight:6},children:e.jsxDEV("div",{className:"rounded-lg border shadow p-2 text-sm select-none cursor-move w-max max-w-full pointer-events-auto relative",style:{background:`linear-gradient(180deg, ${he}22, transparent)`,touchAction:"none"},onPointerDown:ut=>li(ut,_,"move"),onDoubleClick:()=>{_.orderId&&di[_.orderId]?us(di[_.orderId]):oe(_)},children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium truncate flex items-center gap-1",children:[e.jsxDEV("span",{className:"truncate",children:_.title},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:578,columnNumber:31},this),_.orderId&&(Zi[_.orderId]||0)>=3&&e.jsxDEV("span",{className:"ml-1 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold text-white rounded-full",style:{background:"#ef4444",boxShadow:"0 0 10px rgba(239,68,68,0.7)"},title:"Multiple items",children:"→"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:579,columnNumber:83},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:577,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[_.timePending&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{className:"text-xs text-green-600",onClick:ut=>{ut.stopPropagation(),Fe(_.id)},title:"Save new time",children:e.jsxDEV(vn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:584,columnNumber:167},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:584,columnNumber:35},this),e.jsxDEV("button",{className:"text-xs",onClick:ut=>{ut.stopPropagation(),at(_.id)},title:"Revert to original time",children:e.jsxDEV(Nn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:585,columnNumber:161},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:585,columnNumber:35},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:583,columnNumber:33},this),e.jsxDEV("label",{className:"text-xs flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",checked:!!_.done,onChange:ut=>Ct(_.id,ut.target.checked)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:588,columnNumber:82},this)," Done"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:588,columnNumber:31},this),e.jsxDEV("button",{className:"text-xs text-red-600",onClick:()=>Me(_.id),title:"Delete",children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:589,columnNumber:118},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:589,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:581,columnNumber:29},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:576,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs opacity-80 flex flex-wrap gap-2",children:[e.jsxDEV("span",{children:[_.start,"–",_.end]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:593,columnNumber:29},this),_.outletId&&e.jsxDEV("span",{children:Qe[_.outletId]?.name},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:594,columnNumber:44},this),_.roleId&&e.jsxDEV("span",{children:we[_.roleId]?.name},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:595,columnNumber:42},this),_.staffId&&e.jsxDEV("span",{children:qe[_.staffId]?.name},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:596,columnNumber:43},this),_.qty&&_.unit&&e.jsxDEV("span",{children:[_.qty," ",_.unit]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:597,columnNumber:49},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:592,columnNumber:27},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-3 cursor-ns-resize",style:{touchAction:"none"},onPointerDown:ut=>{ut.stopPropagation(),li(ut,_,"resize")}},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:599,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:575,columnNumber:25},this)},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:574,columnNumber:23},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:561,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:555,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:549,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:548,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:547,columnNumber:9},this),e.jsxDEV(St,{value:"global-cal",children:e.jsxDEV("div",{className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:e.jsxDEV(Bj,{events:Ei},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:614,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:613,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:612,columnNumber:9},this),e.jsxDEV(St,{value:"orders",children:e.jsxDEV("div",{className:"rounded-xl border p-3 space-y-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"font-medium",children:[e.jsxDEV(Ya,{className:"inline w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:621,columnNumber:44},this),"Outlet & Banquets Orders"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:621,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:622,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:620,columnNumber:13},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-3",children:d.map(_=>{const M=Gt(_),X=M==="late"?{borderColor:"#ef4444",background:"linear-gradient(180deg, #ef444422, transparent)"}:M==="change"?{borderColor:"#f59e0b",background:"linear-gradient(180deg, #f59e0b22, transparent)"}:{};return e.jsxDEV("div",{className:"rounded-lg border p-2",onContextMenu:he=>ti(he,_.id),style:X,children:[e.jsxDEV("div",{className:"text-sm font-medium flex items-center justify-between",children:[e.jsxDEV("span",{children:[Qe[_.outletId]?.name," • ",new Date(_.dueISO).toLocaleString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:631,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[M==="late"&&e.jsxDEV("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-500 text-white",children:"Late"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:633,columnNumber:41},this),M==="change"&&e.jsxDEV("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-amber-500 text-white",children:"Change"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:634,columnNumber:43},this),e.jsxDEV("button",{className:"text-xs underline",onClick:()=>us(_),title:"Edit order",children:"Change"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:635,columnNumber:25},this),e.jsxDEV("button",{className:"text-xs text-red-600",onClick:()=>ht(_.id),title:"Delete order",children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:636,columnNumber:128},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:636,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:632,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:630,columnNumber:21},this),e.jsxDEV("ul",{className:"text-sm list-disc pl-5",children:_.lines.map(he=>e.jsxDEV("li",{children:[he.qty," ",he.unit," ",he.item]},he.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:640,columnNumber:40},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:639,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs opacity-70",children:"Right‑click to assign to a duty or staff and auto‑add to schedule."},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:642,columnNumber:21},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:629,columnNumber:19},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:624,columnNumber:13},this),ue.open&&e.jsxDEV("div",{className:"fixed z-50 rounded-md border bg-white shadow dark:bg-zinc-900 text-sm",style:{top:ue.y,left:ue.x},onMouseLeave:es,children:[e.jsxDEV("div",{className:"px-3 py-1 font-medium border-b",children:"Assign"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:649,columnNumber:17},this),e.jsxDEV("div",{className:"px-3 py-1",children:"To duty:"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:650,columnNumber:17},this),i.map(_=>e.jsxDEV("button",{className:"block w-full text-left px-3 py-1 hover:bg-muted",onClick:()=>{const M=d.find(X=>X.id===ue.orderId);Ue(M,{roleId:_.id}),es()},children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:652,columnNumber:19},this)),e.jsxDEV("div",{className:"px-3 py-1 border-t",children:"To staff:"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:656,columnNumber:17},this),a.map(_=>e.jsxDEV("button",{className:"block w-full text-left px-3 py-1 hover:bg-muted",onClick:()=>{const M=d.find(X=>X.id===ue.orderId);Ue(M,{staffId:_.id,roleId:_.roleId}),es()},children:[_.name," ",_.roleId?`��� ${we[_.roleId]?.name}`:""]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:658,columnNumber:19},this)),e.jsxDEV("div",{className:"border-t mt-1",children:e.jsxDEV("button",{className:"block w-full text-left px-3 py-1 hover:bg-muted",onClick:()=>{pt(ue.orderId||null),Nt(!0),es()},children:"Assign to multiple…"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:663,columnNumber:19},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:662,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:648,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:619,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:618,columnNumber:9},this),e.jsxDEV(St,{value:"trash",children:e.jsxDEV("div",{className:"rounded-xl border p-3 space-y-2 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Orders in Trash (auto‑empties after 7 days)"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:672,columnNumber:13},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-3",children:f.map(_=>e.jsxDEV("div",{className:"rounded border p-2 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("div",{children:[Qe[_.outletId]?.name," • ",new Date(_.dueISO).toLocaleString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:677,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Deleted ",Math.ceil((Date.now()-_.deletedAt)/36e5),"h ago",_.deletedByName?` by ${_.deletedByName}`:"",_.deleteReason?` — ${_.deleteReason}`:""]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:678,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:676,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:()=>{c(M=>[{id:_.id,outletId:_.outletId,dueISO:_.dueISO,notes:_.notes,lines:_.lines,createdAt:_.createdAt,changedAt:_.changedAt},...M]),b(M=>M.filter(X=>X.id!==_.id)),u(M=>[{id:Xt(),ts:Date.now(),kind:"order",message:`Order ${_.id} restored from trash`,actorId:B?.id,actorName:B?.name},...M])},children:"Restore"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:681,columnNumber:21},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:680,columnNumber:19},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:675,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:673,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:671,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:670,columnNumber:9},this),e.jsxDEV(St,{value:"staff",children:e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsxDEV(Fr,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:695,columnNumber:73},this),"Duties/Roles"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:695,columnNumber:15},this),e.jsxDEV("ul",{className:"text-sm",children:i.map(_=>e.jsxDEV("li",{className:"flex items-center justify-between border-t py-1",children:[e.jsxDEV("span",{children:_.name},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:699,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>n(M=>M.filter(X=>X.id!==_.id)),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:700,columnNumber:90},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:700,columnNumber:21},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:698,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:696,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",className:"mt-2",onClick:ot,children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:704,columnNumber:68},this),"Add role"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:704,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:694,columnNumber:13},this),e.jsxDEV("div",{className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsxDEV(so,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:707,columnNumber:73},this),"Staff"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:707,columnNumber:15},this),e.jsxDEV("ul",{className:"text-sm",children:a.map(_=>e.jsxDEV("li",{className:"flex items-center justify-between border-t py-1 gap-2",children:[e.jsxDEV("span",{className:"min-w-[120px]",children:_.name},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:711,columnNumber:21},this),e.jsxDEV("select",{className:"border rounded px-1 text-xs",value:_.roleId||"",onChange:M=>o(X=>X.map(he=>he.id===_.id?{...he,roleId:M.target.value||void 0}:he)),children:[e.jsxDEV("option",{value:"",children:"Unassigned"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:713,columnNumber:23},this),i.map(M=>e.jsxDEV("option",{value:M.id,children:M.name},M.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:714,columnNumber:38},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:712,columnNumber:21},this),e.jsxDEV(ne,{size:"sm",variant:"outline",onClick:async()=>{const M=prompt("Set 4–8 digit PIN for "+_.name,"");if(!M)return;if(!/^\d{4,8}$/.test(M)){alert("PIN must be 4–8 digits");return}const X=prompt("Confirm PIN","");if(M!==X){alert("PINs do not match");return}const he=await Kj(M);o(Ee=>Ee.map(Ve=>Ve.id===_.id?{...Ve,pinHash:he}:Ve))},children:"Set PIN"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:716,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>o(M=>M.filter(X=>X.id!==_.id)),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:723,columnNumber:90},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:723,columnNumber:21},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:710,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:708,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",className:"mt-2",onClick:ft,children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:727,columnNumber:69},this),"Add staff"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:727,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:706,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:693,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:692,columnNumber:9},this),e.jsxDEV(St,{value:"outlets",children:e.jsxDEV("div",{className:"rounded-xl border p-3 bg-white/95 dark:bg-zinc-900 ring-1 ring-black/5 dark:ring-sky-500/15",children:[e.jsxDEV("div",{className:"font-medium mb-2",children:"Outlets & Banquets"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:734,columnNumber:13},this),e.jsxDEV("ul",{className:"text-sm",children:l.map(_=>e.jsxDEV("li",{className:"flex items-center justify-between border-t py-1 gap-2",children:[e.jsxDEV("span",{className:"flex-1",children:[_.name," • ",_.type]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:738,columnNumber:19},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["Cutoff ",_.orderCutoff||"—"," | Hours ",_.open||"—","–",_.close||"���"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:739,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{size:"sm",variant:"secondary",onClick:()=>P(_),children:"Edit"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:741,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>r(M=>M.filter(X=>X.id!==_.id)),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:742,columnNumber:92},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:742,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:740,columnNumber:19},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:737,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:735,columnNumber:13},this),e.jsxDEV(ne,{size:"sm",className:"mt-2",onClick:xt,children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:747,columnNumber:68},this),"Add outlet"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:747,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:733,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:732,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:537,columnNumber:7},this),e.jsxDEV(ss,{open:W,onOpenChange:_=>{se(_),_||(R(null),k(null))},children:e.jsxDEV(is,{className:"max-w-lg",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:F?"Edit Task":"New Task"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:754,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:754,columnNumber:11},this),ie&&e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("label",{className:"block",children:["Title",e.jsxDEV("input",{className:"w-full border rounded px-2 py-1",value:ie.title,onChange:_=>R({...ie,title:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:757,columnNumber:45},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:757,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Start",e.jsxDEV("input",{className:"w-full border rounded px-2 py-1",value:ie.start,onChange:_=>R({...ie,start:_.target.value}),placeholder:"HH:mm"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:759,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:759,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["End",e.jsxDEV("input",{className:"w-full border rounded px-2 py-1",value:ie.end,onChange:_=>R({...ie,end:_.target.value}),placeholder:"HH:mm"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:760,columnNumber:45},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:760,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:758,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Outlet",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:ie.outletId||"",onChange:_=>R({...ie,outletId:_.target.value}),children:l.map(_=>e.jsxDEV("option",{value:_.id,children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:763,columnNumber:231},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:763,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:763,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Duty",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:ie.roleId||"",onChange:_=>R({...ie,roleId:_.target.value||void 0,color:Qt(_.target.value)}),children:[e.jsxDEV("option",{value:"",children:"Unassigned"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:764,columnNumber:253},this),i.map(_=>e.jsxDEV("option",{value:_.id,children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:764,columnNumber:304},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:764,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:764,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:762,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Staff",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:ie.staffId||"",onChange:_=>R({...ie,staffId:_.target.value||void 0}),children:[e.jsxDEV("option",{value:"",children:"Unassigned"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:767,columnNumber:222},this),a.map(_=>e.jsxDEV("option",{value:_.id,children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:767,columnNumber:273},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:767,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:767,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Qty/Unit",e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("input",{className:"border rounded px-2 py-1 w-24",value:ie.qty||"",onChange:_=>R({...ie,qty:Number(_.target.value||0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:768,columnNumber:78},this),e.jsxDEV("input",{className:"border rounded px-2 py-1 w-24",value:ie.unit||"",onChange:_=>R({...ie,unit:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:768,columnNumber:244},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:768,columnNumber:50},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:768,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:766,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Category",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:ie.category||"production",onChange:_=>R({...ie,category:_.target.value}),children:[e.jsxDEV("option",{value:"production",children:"Production"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:247},this),e.jsxDEV("option",{value:"housekeeping",children:"Housekeeping"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:293},this),e.jsxDEV("option",{value:"delivery",children:"Delivery"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:343},this),e.jsxDEV("option",{value:"other",children:"Other"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:385},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:50},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:771,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Color",e.jsxDEV("input",{className:"w-24 border rounded px-2 py-1",type:"color",value:ie.color||Yt(ie),onChange:_=>R({...ie,color:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:772,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:772,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:770,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>se(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:774,columnNumber:60},this),e.jsxDEV(ne,{onClick:Ne,children:"Save"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:774,columnNumber:143},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:774,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:756,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:753,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:752,columnNumber:7},this),e.jsxDEV(ss,{open:Q,onOpenChange:_=>{J(_),_&&(ae.length===0&&L(l.map(M=>M.id)),le(M=>{const X={};for(const he of Object.keys(Ws))X[he]=M[he]??!0;return X}))},children:e.jsxDEV(is,{className:"max-w-4xl shadow-[0_0_28px_rgba(59,130,246,0.35)] dark:shadow-[0_0_32px_rgba(14,165,233,0.45)] hover:shadow-[0_0_44px_rgba(59,130,246,0.5)] dark:hover:shadow-[0_0_52px_rgba(14,165,233,0.6)] transition-shadow print:max-w-none print:w-[960px]",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Prep Sheets"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:784,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:784,columnNumber:11},this),e.jsxDEV("style",{children:"@media print{ .no-print{ display:none } }"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:785,columnNumber:11},this),e.jsxDEV("div",{className:"no-print grid grid-cols-1 md:grid-cols-3 gap-2 mb-3",children:[e.jsxDEV("label",{className:"text-sm",children:["Start date",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:O,onChange:_=>me(_.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:787,columnNumber:50},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:787,columnNumber:13},this),e.jsxDEV("label",{className:"text-sm",children:["End date",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:de,onChange:_=>fe(_.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:788,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:788,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-end justify-end gap-2",children:e.jsxDEV(ne,{onClick:()=>window.print(),children:[e.jsxDEV(Ba,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:789,columnNumber:101},this),"Print"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:789,columnNumber:63},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:789,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:786,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3 relative",children:[Object.entries(Ws).map(([_,M])=>(H[_]??!0)&&e.jsxDEV("div",{className:"rounded border p-2 bg-background/60",children:[e.jsxDEV("div",{className:"font-medium mb-1 flex items-center gap-3",children:[e.jsxDEV("input",{type:"checkbox",checked:H[_]??!0,onChange:X=>le(he=>({...he,[_]:X.target.checked})),className:"no-print"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:795,columnNumber:19},this),e.jsxDEV("span",{children:_},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:796,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:794,columnNumber:17},this),e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"text-left",children:[e.jsxDEV("th",{children:"Time"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:84},this),e.jsxDEV("th",{children:"Task"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:97},this),e.jsxDEV("th",{children:"Assigned"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:110},this),e.jsxDEV("th",{children:"Qty"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:127},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:58},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:51},this),e.jsxDEV("tbody",{children:M.map(X=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{children:[X.start,"–",X.end]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:799,columnNumber:70},this),e.jsxDEV("td",{children:X.title},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:799,columnNumber:96},this),e.jsxDEV("td",{children:X.staffId?qe[X.staffId]?.name:we[X.roleId||""]?.name||""},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:799,columnNumber:114},this),e.jsxDEV("td",{children:X.qty?`${X.qty} ${X.unit||""}`:""},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:799,columnNumber:200},this)]},X.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:799,columnNumber:34},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:152},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:798,columnNumber:17},this)]},_,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:793,columnNumber:15},this)),e.jsxDEV("div",{className:"absolute right-2 bottom-2 opacity-70 print:opacity-100",children:e.jsxDEV(Of,{},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:804,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:803,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:791,columnNumber:11},this),e.jsxDEV("div",{className:"no-print mt-3 border-t pt-2",children:[e.jsxDEV("div",{className:"text-sm font-medium mb-1",children:"Outlets"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:808,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap gap-3",children:[e.jsxDEV("label",{className:"inline-flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",checked:ae.length===l.length,onChange:_=>L(_.target.checked?l.map(M=>M.id):[])},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:810,columnNumber:65},this),"Select all"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:810,columnNumber:15},this),l.map(_=>e.jsxDEV("label",{className:"inline-flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",checked:ae.includes(_.id),onChange:M=>L(X=>M.target.checked?[...X,_.id]:X.filter(he=>he!==_.id))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:813,columnNumber:19},this),_.name]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:812,columnNumber:17},this))]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:809,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:807,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:783,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:782,columnNumber:7},this),e.jsxDEV(ss,{open:_t,onOpenChange:_=>{Nt(_),_||(Ot([]),pt(null))},children:e.jsxDEV(is,{className:"max-w-sm",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Assign to multiple staff"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:824,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:824,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"max-h-60 overflow-auto border rounded p-2",children:a.map(_=>e.jsxDEV("label",{className:"flex items-center gap-2 py-1",children:[e.jsxDEV("input",{type:"checkbox",checked:ct.includes(_.id),onChange:M=>Ot(X=>M.target.checked?[...X,_.id]:X.filter(he=>he!==_.id))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:829,columnNumber:19},this),e.jsxDEV("span",{children:[_.name,_.roleId?` • ${we[_.roleId]?.name}`:""]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:830,columnNumber:19},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:828,columnNumber:17},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:826,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>Nt(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:835,columnNumber:15},this),e.jsxDEV(ne,{onClick:()=>{const _=d.find(M=>M.id===ye);_&&ct.forEach(M=>{const X=qe[M];Ue(_,{staffId:M,roleId:X?.roleId})}),Nt(!1),Ot([]),pt(null)},children:"Assign"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:836,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:834,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:825,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:823,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:822,columnNumber:7},this),e.jsxDEV(ss,{open:j,onOpenChange:_=>{q(_),_||Z(null)},children:e.jsxDEV(is,{className:"max-w-4xl shadow-[0_0_28px_rgba(59,130,246,0.35)] dark:shadow-[0_0_32px_rgba(14,165,233,0.45)] hover:shadow-[0_0_44px_rgba(59,130,246,0.5)] dark:hover:shadow-[0_0_52px_rgba(14,165,233,0.6)] transition-shadow",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Add order"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:848,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:848,columnNumber:11},this),te&&e.jsxDEV("div",{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"grid md:grid-cols-3 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Outlet",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:te.outletId,onChange:_=>{const M=_.target.value,X=l.find(Ee=>Ee.id===M),he=X?.guide?.length?X.guide.filter(Ee=>Ee.item).map(Ee=>({id:Xt(),item:Ee.item,qty:Ee.defaultQty||0,unit:Ee.unit||"pcs"})):te.lines.length?te.lines:[{id:Xt(),item:"",qty:0,unit:"pcs"}];Z({...te,outletId:M,lines:he})},children:l.map(_=>e.jsxDEV("option",{value:_.id,children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:852,columnNumber:549},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:852,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:852,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Date",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:te.date,onChange:_=>Z({...te,date:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:853,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:853,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Time",e.jsxDEV("input",{type:"time",className:"w-full border rounded px-2 py-1",value:te.time,onChange:_=>Z({...te,time:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:854,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:854,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:851,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Lines"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:857,columnNumber:17},this),e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"text-left",children:[e.jsxDEV("th",{children:"Finished item"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:52},this),e.jsxDEV("th",{children:"Qty"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:74},this),e.jsxDEV("th",{children:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:86},this),e.jsxDEV("th",{},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:99},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:26},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:859,columnNumber:19},this),e.jsxDEV("tbody",{children:te.lines.map((_,M)=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{children:e.jsxDEV("input",{list:"fin-items",className:"w-full border rounded px-1",value:_.item,onChange:X=>Zs(M,X.target.value),placeholder:"Type to search finished goods"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:864,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:863,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.qty,onChange:X=>Z({...te,lines:te.lines.map((he,Ee)=>Ee===M?{...he,qty:Number(X.target.value||0)}:he)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:866,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:866,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.unit,onChange:X=>Z({...te,lines:te.lines.map((he,Ee)=>Ee===M?{...he,unit:X.target.value}:he)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:867,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:867,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("button",{onClick:()=>Z({...te,lines:te.lines.filter((X,he)=>he!==M)}),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:868,columnNumber:143},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:868,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:868,columnNumber:25},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:862,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:860,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:858,columnNumber:17},this),e.jsxDEV("datalist",{id:"fin-items",children:v.map(_=>e.jsxDEV("option",{value:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:874,columnNumber:32},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:873,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV(ne,{size:"sm",onClick:()=>Z({...te,lines:[...te.lines,{id:Xt(),item:"",qty:0,unit:"pcs"}]}),children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:876,columnNumber:192},this),"Add line"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:876,columnNumber:39},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:876,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:856,columnNumber:15},this),e.jsxDEV("div",{className:"border-t pt-2",children:[e.jsxDEV("label",{className:"inline-flex items-center gap-2 mr-4",children:[e.jsxDEV("input",{type:"checkbox",checked:ve,onChange:_=>ke(_.target.checked)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:880,columnNumber:19},this),"Recurring"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:879,columnNumber:17},this),ve&&e.jsxDEV("div",{className:"mt-2 grid md:grid-cols-3 gap-2",children:[e.jsxDEV("div",{className:"col-span-2 flex flex-wrap gap-3 items-center",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((_,M)=>e.jsxDEV("label",{className:"inline-flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",checked:De.includes(M),onChange:X=>We(he=>X.target.checked?[...he,M]:he.filter(Ee=>Ee!==M))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:886,columnNumber:83},this),_]},_,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:886,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:884,columnNumber:21},this),e.jsxDEV("label",{className:"block",children:["Until",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:ze,onChange:_=>st(_.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:889,columnNumber:51},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:889,columnNumber:21},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:883,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>q(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:893,columnNumber:19},this),e.jsxDEV(ne,{onClick:Ri,children:"Create & plan"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:894,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:892,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:878,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:850,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:847,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:846,columnNumber:7},this),e.jsxDEV(ss,{open:re,onOpenChange:_=>{V(_),_||(T(null),E(null))},children:e.jsxDEV(is,{className:"max-w-3xl shadow-[0_0_28px_rgba(59,130,246,0.35)] dark:shadow-[0_0_32px_rgba(14,165,233,0.45)] hover:shadow-[0_0_44px_rgba(59,130,246,0.5)] dark:hover:shadow-[0_0_52px_rgba(14,165,233,0.6)] transition-shadow",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Edit Order"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:904,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:904,columnNumber:11},this),y&&e.jsxDEV("div",{className:"space-y-3 text-sm",children:[(()=>{const _=p.filter(M=>M.orderId===y.id&&M.timePending);return _.length?e.jsxDEV("div",{className:"rounded-md border p-2 bg-amber-50 text-amber-800",children:[e.jsxDEV("div",{className:"font-medium text-xs mb-1",children:"Pending time adjustments"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:909,columnNumber:19},this),e.jsxDEV("ul",{className:"text-xs space-y-1",children:_.map(M=>e.jsxDEV("li",{className:"flex items-center justify-between gap-2",children:[e.jsxDEV("span",{children:[M.title," — Time adjusted: ",M.pendingOriginalStart,"–",M.pendingOriginalEnd," on ",M.pendingOriginalDateISO]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:913,columnNumber:25},this),e.jsxDEV("button",{className:"underline",onClick:()=>at(M.id),children:"Revert"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:914,columnNumber:25},this)]},M.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:912,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:910,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:908,columnNumber:17},this):null})(),e.jsxDEV("div",{className:"grid md:grid-cols-3 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Outlet",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:y.outletId,onChange:_=>E({...y,outletId:_.target.value}),children:l.map(_=>e.jsxDEV("option",{value:_.id,children:_.name},_.id,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:921,columnNumber:230},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:921,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:921,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Date",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y.date,onChange:_=>E({...y,date:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:922,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:922,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Time",e.jsxDEV("input",{type:"time",className:"w-full border rounded px-2 py-1",value:y.time,onChange:_=>E({...y,time:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:923,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:923,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:920,columnNumber:15},this),e.jsxDEV("label",{className:"block",children:["Notes",e.jsxDEV("textarea",{className:"w-full border rounded px-2 py-1",value:y.notes,onChange:_=>E({...y,notes:_.target.value})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:925,columnNumber:45},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:925,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium mb-1",children:"Lines"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:927,columnNumber:17},this),e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"text-left",children:[e.jsxDEV("th",{children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:52},this),e.jsxDEV("th",{children:"Qty"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:65},this),e.jsxDEV("th",{children:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:77},this),e.jsxDEV("th",{},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:90},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:26},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:929,columnNumber:19},this),e.jsxDEV("tbody",{children:y.lines.map((_,M)=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-full border rounded px-1",value:_.item,onChange:X=>E({...y,lines:y.lines.map((he,Ee)=>Ee===M?{...he,item:X.target.value}:he)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:933,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:933,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.qty,onChange:X=>E({...y,lines:y.lines.map((he,Ee)=>Ee===M?{...he,qty:Number(X.target.value||0)}:he)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:934,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:934,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.unit,onChange:X=>E({...y,lines:y.lines.map((he,Ee)=>Ee===M?{...he,unit:X.target.value}:he)})},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:935,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:935,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV("button",{onClick:()=>E({...y,lines:y.lines.filter((X,he)=>he!==M)}),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:936,columnNumber:143},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:936,columnNumber:29},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:936,columnNumber:25},this)]},_.id,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:932,columnNumber:23},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:930,columnNumber:19},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:928,columnNumber:17},this),e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV(ne,{size:"sm",onClick:()=>E({...y,lines:[...y.lines,{id:Xt(),item:"",qty:0,unit:"pcs"}]}),children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:941,columnNumber:199},this),"Add line"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:941,columnNumber:39},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:941,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:926,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>V(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:944,columnNumber:17},this),e.jsxDEV(ne,{onClick:Os,children:"Save changes"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:945,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:943,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:906,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:903,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:902,columnNumber:7},this),e.jsxDEV(ss,{open:!!C,onOpenChange:_=>{_||P(null)},children:e.jsxDEV(is,{className:"max-w-3xl shadow-[0_0_28px_rgba(59,130,246,0.35)] dark:shadow-[0_0_32px_rgba(14,165,233,0.45)] hover:shadow-[0_0_44px_rgba(59,130,246,0.5)] dark:hover:shadow-[0_0_52px_rgba(14,165,233,0.6)] transition-shadow",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:["Outlet — ",C?.name]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:954,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:954,columnNumber:11},this),C&&e.jsxDEV("div",{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"grid md:grid-cols-5 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Name",e.jsxDEV("input",{className:"w-full border rounded px-2 py-1",value:C.name,onChange:_=>r(M=>M.map(X=>X.id===C.id?{...X,name:_.target.value}:X))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:958,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:958,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Type",e.jsxDEV("select",{className:"w-full border rounded px-2 py-1",value:C.type,onChange:_=>r(M=>M.map(X=>X.id===C.id?{...X,type:_.target.value}:X)),children:[e.jsxDEV("option",{children:"Outlet"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:959,columnNumber:248},this),e.jsxDEV("option",{children:"Banquets"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:959,columnNumber:271},this),e.jsxDEV("option",{children:"Custom Cakes"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:959,columnNumber:296},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:959,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:959,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Cutoff",e.jsxDEV("input",{type:"time",className:"w-full border rounded px-2 py-1",value:C.orderCutoff||"",onChange:_=>r(M=>M.map(X=>X.id===C.id?{...X,orderCutoff:_.target.value}:X))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:960,columnNumber:48},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:960,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Open",e.jsxDEV("input",{type:"time",className:"w-full border rounded px-2 py-1",value:C.open||"",onChange:_=>r(M=>M.map(X=>X.id===C.id?{...X,open:_.target.value}:X))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:961,columnNumber:46},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:961,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Close",e.jsxDEV("input",{type:"time",className:"w-full border rounded px-2 py-1",value:C.close||"",onChange:_=>r(M=>M.map(X=>X.id===C.id?{...X,close:_.target.value}:X))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:962,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:962,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:957,columnNumber:15},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-2",children:[e.jsxDEV("label",{className:"block",children:["Start",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:ee,onChange:_=>$(_.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:965,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:965,columnNumber:17},this),e.jsxDEV("label",{className:"block",children:["Until",e.jsxDEV("input",{type:"date",className:"w-full border rounded px-2 py-1",value:U,onChange:_=>G(_.target.value)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:966,columnNumber:47},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:966,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:964,columnNumber:15},this),e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"text-left",children:[e.jsxDEV("th",{children:"Item"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:50},this),e.jsxDEV("th",{children:"Default Qty"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:63},this),e.jsxDEV("th",{children:"Unit"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:83},this),e.jsxDEV("th",{children:"Times (comma‑sep)"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:96},this),e.jsxDEV("th",{children:"Recurring"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:122},this),e.jsxDEV("th",{children:"Days"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:140},this),e.jsxDEV("th",{},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:153},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:24},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:969,columnNumber:17},this),e.jsxDEV("tbody",{children:(C.guide||[]).map((_,M)=>e.jsxDEV("tr",{className:"border-t align-top",children:[e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-full border rounded px-1",value:_.item,onChange:X=>r(he=>he.map(Ee=>Ee.id===C.id?{...Ee,guide:(Ee.guide||[]).map((Ve,Ce)=>Ce===M?{...Ve,item:X.target.value}:Ve)}:Ee))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:973,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:973,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.defaultQty,onChange:X=>r(he=>he.map(Ee=>Ee.id===C.id?{...Ee,guide:(Ee.guide||[]).map((Ve,Ce)=>Ce===M?{...Ve,defaultQty:Number(X.target.value||0)}:Ve)}:Ee))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:974,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:974,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-24 border rounded px-1",value:_.unit,onChange:X=>r(he=>he.map(Ee=>Ee.id===C.id?{...Ee,guide:(Ee.guide||[]).map((Ve,Ce)=>Ce===M?{...Ve,unit:X.target.value}:Ve)}:Ee))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:975,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:975,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("input",{className:"w-40 border rounded px-1",placeholder:"06:00, 15:00",value:_.times||"",onChange:X=>r(he=>he.map(Ee=>Ee.id===C.id?{...Ee,guide:(Ee.guide||[]).map((Ve,Ce)=>Ce===M?{...Ve,times:X.target.value}:Ve)}:Ee))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:976,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:976,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("label",{className:"inline-flex items-center gap-1",children:[e.jsxDEV("input",{type:"checkbox",checked:!!_.recurring,onChange:X=>r(he=>he.map(Ee=>Ee.id===C.id?{...Ee,guide:(Ee.guide||[]).map((Ve,Ce)=>Ce===M?{...Ve,recurring:X.target.checked}:Ve)}:Ee))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:979,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs",children:"Yes"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:980,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:978,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:977,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:["S","M","T","W","T","F","S"].map((X,he)=>e.jsxDEV("label",{className:"inline-flex items-center gap-1 text-[11px]",children:[e.jsxDEV("input",{type:"checkbox",checked:(_.days||[]).includes(he),onChange:Ee=>r(Ve=>Ve.map(Ce=>Ce.id===C.id?{...Ce,guide:(Ce.guide||[]).map((He,Rt)=>Rt===M?{...He,days:Ee.target.checked?[...He.days||[],he]:(He.days||[]).filter(kt=>kt!==he)}:He)}:Ce))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:986,columnNumber:99},this),X]},he,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:986,columnNumber:29},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:984,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:983,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("button",{onClick:()=>r(X=>X.map(he=>he.id===C.id?{...he,guide:(he.guide||[]).filter((Ee,Ve)=>Ve!==M)}:he)),children:e.jsxDEV(pn,{className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:990,columnNumber:165},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:990,columnNumber:27},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:990,columnNumber:23},this)]},M,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:972,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:970,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:968,columnNumber:15},this),e.jsxDEV(ne,{size:"sm",onClick:()=>r(_=>_.map(M=>M.id===C.id?{...M,guide:[...M.guide||[],{item:"",defaultQty:0,unit:"pcs",times:"06:00"}]}:M)),children:[e.jsxDEV(Js,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:995,columnNumber:199},this),"Add line"]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:995,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>P(null),children:"Close"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:997,columnNumber:17},this),e.jsxDEV(ne,{onClick:()=>{const _=C;if(!_)return;const M=new Date(`${ee}T00:00:00`),X=new Date(`${U}T23:59:59`),he={};for(let Ee=new Date(M);Ee<=X;Ee.setDate(Ee.getDate()+1)){const Ve=Ee.getDay(),Ce=Ee.getFullYear(),He=String(Ee.getMonth()+1).padStart(2,"0"),Rt=String(Ee.getDate()).padStart(2,"0"),kt=`${Ce}-${He}-${Rt}`;for(const wt of _.guide||[]){if(!(wt.item&&(wt.defaultQty||0)>0)||!(wt.recurring?!(wt.days&&wt.days.length)||(wt.days||[]).includes(Ve):!0))continue;const Dt=(wt.times||"06:00").split(",").map(it=>it.trim()).filter(Boolean);for(const it of Dt){const mt=`${kt}|${it}`;(he[mt]||={dateStr:kt,time:it,lines:[]}).lines.push({id:Xt(),item:wt.item,qty:wt.defaultQty||0,unit:wt.unit||"pcs"})}}}Object.values(he).forEach(Ee=>{const Ve=new Date(`${Ee.dateStr}T${Ee.time}:00`).toISOString();jt({outletId:_.id,dueISO:Ve,lines:Ee.lines})}),P(null)},children:"Create Order Guide"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:998,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:996,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:956,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:953,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:952,columnNumber:7},this),e.jsxDEV(ss,{open:Es,onOpenChange:_=>{qt(_),_||(Kt(null),Cs(""),It(""))},children:e.jsxDEV(is,{className:"max-w-md",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:"Confirm delete order"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1034,columnNumber:25},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1034,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[ws&&(()=>{const _=d.find(M=>M.id===ws);return e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[Qe[_.outletId]?.name," • ",new Date(_.dueISO).toLocaleString()]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1037,columnNumber:15},this)})(),e.jsxDEV("label",{className:"block",children:["Reason",e.jsxDEV("input",{className:"w-full border rounded px-2 py-1",value:fs,onChange:_=>Cs(_.target.value),placeholder:"Optional"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1039,columnNumber:44},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1039,columnNumber:13},this),xs&&e.jsxDEV("div",{className:"text-xs text-red-600",children:xs},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1040,columnNumber:29},this),e.jsxDEV("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxDEV(ne,{variant:"secondary",onClick:()=>qt(!1),children:"Cancel"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1042,columnNumber:15},this),e.jsxDEV(ne,{variant:"destructive",onClick:gt,children:"Delete"},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1043,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1041,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1035,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1033,columnNumber:9},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:1032,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/Production.tsx",lineNumber:512,columnNumber:5},this)}const Qj=[{id:"sup-sysco",name:"Sysco Corporation",territory:"US Nationwide",contact:"Account Management",email:"accounts@sysco.com",phone:"+1-800-SYSCO-01",reliability:.95,sustainabilityScore:.72},{id:"sup-us-foods",name:"US Foods",territory:"US Nationwide",contact:"Customer Service",email:"service@usfoods.com",phone:"+1-800-USFOODS",reliability:.94,sustainabilityScore:.7},{id:"sup-gfs",name:"Gordon Food Service",territory:"US Nationwide",contact:"Sales Team",email:"sales@gfs.com",phone:"+1-800-GFS-FOOD",reliability:.93,sustainabilityScore:.68},{id:"sup-pfg",name:"Performance Food Group",territory:"US Nationwide",contact:"Account Manager",email:"accounts@pfgc.com",phone:"+1-877-PFG-CORP",reliability:.92,sustainabilityScore:.69},{id:"sup-mclane",name:"McLane Company",territory:"US Nationwide",contact:"Foodservice Division",email:"foodservice@mclaneco.com",phone:"+1-888-MCLANE",reliability:.91,sustainabilityScore:.65},{id:"sup-kehe",name:"KeHE Distributors",territory:"US Nationwide",contact:"Account Services",email:"accounts@kehe.com",phone:"+1-800-KEHE-1",reliability:.9,sustainabilityScore:.92},{id:"sup-shamrock",name:"Shamrock Foods",territory:"US West & Southwest",contact:"Sales Department",email:"sales@shamrockfoods.com",phone:"+1-800-SHAMROCK",reliability:.91,sustainabilityScore:.67},{id:"sup-ben-e-keith",name:"Ben E. Keith Co.",territory:"US South & Midwest",contact:"Account Team",email:"accounts@benekeith.com",phone:"+1-800-BEK-FOOD",reliability:.9,sustainabilityScore:.66},{id:"sup-golden-state",name:"Golden State Foods",territory:"US West Coast & Midwest",contact:"Customer Relations",email:"orders@gsf.com",phone:"+1-800-GSF-ORDER",reliability:.93,sustainabilityScore:.71}],Vf=[{supplierId:"sup-sysco",sku:"SYS-PROD-1001",ingredientName:"Heirloom carrots, peeled",ingredientKey:"heirloom-carrot",descriptors:["vegetable","carrot","peeled","produce"],packSize:25,packUnit:"lb",pricePerPack:45,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-sysco",sku:"SYS-GARL-1042",ingredientName:"Fresh garlic cloves, jumbo",ingredientKey:"garlic-clove",descriptors:["garlic","clove","fresh","produce"],packSize:10,packUnit:"lb",pricePerPack:28,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-sysco",sku:"SYS-MIRE-1089",ingredientName:"Classic mirepoix blend, diced",ingredientKey:"mirepoix",descriptors:["carrot","celery","onion","diced","mirepoix"],packSize:20,packUnit:"lb",pricePerPack:32,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-sysco",sku:"SYS-LEMO-1123",ingredientName:"Fresh Meyer lemons",ingredientKey:"meyer-lemon",descriptors:["lemon","meyer","citrus","fresh"],packSize:40,packUnit:"lb",pricePerPack:98,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-us-foods",sku:"USF-BEEF-2001",ingredientName:"Prime beef short rib, boneless",ingredientKey:"beef-short-rib",descriptors:["beef","short rib","boneless","prime"],packSize:40,packUnit:"lb",pricePerPack:520,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-us-foods",sku:"USF-BEEF-2045",ingredientName:"Rendered beef tallow",ingredientKey:"beef-tallow",descriptors:["fat","tallow","beef"],packSize:35,packUnit:"lb",pricePerPack:98,currency:"USD",minOrderPacks:2,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-gfs",sku:"GFS-ALMD-3001",ingredientName:"Whole blanched almonds",ingredientKey:"almond",descriptors:["nut","almond","blanched"],packSize:5,packUnit:"lb",pricePerPack:38.5,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-gfs",sku:"GFS-COCO-3078",ingredientName:"Organic coconut milk, 12x1L",ingredientKey:"coconut-milk",descriptors:["coconut","milk","organic"],packSize:12,packUnit:"L",pricePerPack:52,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-pfg",sku:"PFG-AGAR-4001",ingredientName:"Agar powder, pastry grade",ingredientKey:"agar",descriptors:["agar","stabilizer","pastry"],packSize:1,packUnit:"lb",pricePerPack:85,currency:"USD",minOrderPacks:1,leadTimeDays:3,lastUpdated:"2024-10-15"},{supplierId:"sup-pfg",sku:"PFG-VANL-4032",ingredientName:"Madagascar vanilla bean paste",ingredientKey:"vanilla-bean-paste",descriptors:["vanilla","paste","madagascar"],packSize:2,packUnit:"lb",pricePerPack:298,currency:"USD",minOrderPacks:1,leadTimeDays:4,lastUpdated:"2024-10-15"},{supplierId:"sup-mclane",sku:"MCL-CHIL-5001",ingredientName:"Fermented Calabrian chili puree",ingredientKey:"calabrian-chili",descriptors:["chili","fermented","calabrian"],packSize:5,packUnit:"lb",pricePerPack:68,currency:"USD",minOrderPacks:1,leadTimeDays:3,lastUpdated:"2024-10-15"},{supplierId:"sup-mclane",sku:"MCL-HONE-5015",ingredientName:"Wildflower honey, raw",ingredientKey:"honey",descriptors:["honey","raw","wildflower"],packSize:25,packUnit:"lb",pricePerPack:95,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-kehe",sku:"KEHE-ALMD-6001",ingredientName:"Whole blanched almonds",ingredientKey:"almond",descriptors:["nut","almond","blanched","organic"],packSize:5,packUnit:"lb",pricePerPack:42,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-kehe",sku:"KEHE-COCO-6089",ingredientName:"Organic coconut milk, 12x1L",ingredientKey:"coconut-milk",descriptors:["coconut","milk","organic"],packSize:12,packUnit:"L",pricePerPack:58,currency:"USD",minOrderPacks:1,leadTimeDays:3,lastUpdated:"2024-10-15"},{supplierId:"sup-shamrock",sku:"SHAM-BEEF-7001",ingredientName:"Prime beef short rib, boneless",ingredientKey:"beef-short-rib",descriptors:["beef","short rib","boneless","prime"],packSize:40,packUnit:"lb",pricePerPack:530,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-shamrock",sku:"SHAM-BEEF-7045",ingredientName:"Rendered beef tallow",ingredientKey:"beef-tallow",descriptors:["fat","tallow","beef"],packSize:35,packUnit:"lb",pricePerPack:102,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-ben-e-keith",sku:"BEK-PROD-8001",ingredientName:"Heirloom carrots, peeled",ingredientKey:"heirloom-carrot",descriptors:["vegetable","carrot","peeled","produce"],packSize:25,packUnit:"lb",pricePerPack:42,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-ben-e-keith",sku:"BEK-GARL-8042",ingredientName:"Fresh garlic cloves, jumbo",ingredientKey:"garlic-clove",descriptors:["garlic","clove","fresh","produce"],packSize:10,packUnit:"lb",pricePerPack:26,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-ben-e-keith",sku:"BEK-LEMO-8123",ingredientName:"Fresh Meyer lemons",ingredientKey:"meyer-lemon",descriptors:["lemon","meyer","citrus","fresh"],packSize:40,packUnit:"lb",pricePerPack:95,currency:"USD",minOrderPacks:1,leadTimeDays:1,lastUpdated:"2024-10-15"},{supplierId:"sup-golden-state",sku:"GSF-AGAR-9001",ingredientName:"Agar powder, pastry grade",ingredientKey:"agar",descriptors:["agar","stabilizer","pastry"],packSize:1,packUnit:"lb",pricePerPack:82,currency:"USD",minOrderPacks:1,leadTimeDays:2,lastUpdated:"2024-10-15"},{supplierId:"sup-golden-state",sku:"GSF-VANL-9032",ingredientName:"Madagascar vanilla bean paste",ingredientKey:"vanilla-bean-paste",descriptors:["vanilla","paste","madagascar"],packSize:2,packUnit:"lb",pricePerPack:305,currency:"USD",minOrderPacks:1,leadTimeDays:4,lastUpdated:"2024-10-15"}],Cf="General Line",Bi=s=>s.replace(/\s+/g," ").trim(),Zj=s=>Bi(s).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"general",Rf=s=>Bi(s).split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),Xj=s=>{const t=s.extra;if(!t)return;const i=t.serverNotes;if(!(!i||typeof i!="object"))return i};function Jj(s,t){const i=s.recipeIds.map(f=>t.find(b=>b.id===f)).filter(f=>!!f),n=new Map,a=new Map,o=[],l=new Set;i.forEach(f=>{const b=Xj(f);if(!b){o.push({recipeId:f.id,recipeName:f.title,reason:"missingServerNotes"});return}const D=(b.ingredients??[]).map((N,w)=>{const A=N.item?Bi(N.item):"";return A?{id:`${f.id}::${w}`,ingredient:A,quantity:N.qty?Bi(N.qty):void 0,unit:N.unit?Bi(N.unit):void 0,prep:N.prep?Bi(N.prep):void 0,yieldText:N.yield?Bi(N.yield):void 0,recipeId:f.id,recipeName:f.title}:null}).filter(N=>N!==null);if(D.length===0){o.push({recipeId:f.id,recipeName:f.title,reason:"noIngredients"});return}const p=(Array.isArray(b.access)?b.access:[]).map(N=>Bi(String(N))).filter(N=>N.length>0),S=(Array.isArray(b.modifiers?.courses)?b.modifiers?.courses.filter(N=>typeof N=="string"):[])[0]??f.course??void 0,m=typeof b.portionCount=="number"&&b.portionCount>0?{count:b.portionCount,unit:b.portionUnit||void 0}:null,v=Array.isArray(b.allergens)?b.allergens.filter(N=>typeof N=="string"):[];v.forEach(N=>l.add(Bi(N)));const g=p.length?p:[Cf];D.forEach(N=>{const w=Bi(N.ingredient).toLowerCase(),A=a.get(w);A?(A.count+=1,A.recipeIds.add(f.id)):a.set(w,{count:1,recipeIds:new Set([f.id])})}),g.forEach(N=>{const w=Rf(N||Cf),A=Zj(w);let I=n.get(A);I||(I={id:A,name:w,recipes:new Map},n.set(A,I));let B=I.recipes.get(f.id);B||(B={id:f.id,name:f.title,course:S,portions:m,allergens:v,items:[]},I.recipes.set(f.id,B)),B.items.push(...D.map(W=>({...W,id:`${A}::${W.id}`})))})});const r=Array.from(n.values()).map(f=>{const b=Array.from(f.recipes.values()).map(D=>({...D,items:D.items}));return{id:f.id,name:f.name,recipes:b,totalItems:b.reduce((D,u)=>D+u.items.length,0)}}).sort((f,b)=>f.name.localeCompare(b.name)),d={totalStations:r.length,totalRecipes:i.length,totalItems:r.reduce((f,b)=>f+b.totalItems,0),uniqueIngredients:a.size,allergens:Array.from(l).sort((f,b)=>f.localeCompare(b)),collectionName:s.name,updatedAt:s.updatedAt},c=Array.from(a.entries()).map(([f,b])=>({ingredient:Rf(f),occurrences:b.count,recipeIds:Array.from(b.recipeIds)})).sort((f,b)=>b.occurrences-f.occurrences||f.ingredient.localeCompare(b.ingredient));return{stations:r,summary:d,aggregates:c,missing:o}}const Pr="rounded-xl border border-white/60 bg-white/70 px-4 py-3 shadow-sm dark:border-cyan-500/40 dark:bg-slate-900/60",e5=6;function t5(){const{collections:s,recipes:t}=ln(),{t:i}=Vs(),[n,a]=h.useState(""),[o,l]=h.useState(new Set),r=h.useMemo(()=>[...s].sort((S,m)=>{const v=Date.parse(S.updatedAt)||0;return(Date.parse(m.updatedAt)||0)-v}),[s]);h.useEffect(()=>{if(!r.length){n&&a("");return}(!n||!r.some(S=>S.id===n))&&a(r[0].id)},[n,r]),h.useEffect(()=>{l(new Set)},[n]);const d=h.useMemo(()=>r.find(S=>S.id===n),[r,n]),c=h.useMemo(()=>d?Jj(d,t):null,[d,t]),f=c?.summary.totalItems??0,b=c?Array.from(o).filter(S=>c.stations.some(m=>m.recipes.some(v=>v.items.some(g=>g.id===S)))).length:0,D=h.useCallback((S,m)=>{l(v=>{const g=new Set(v);return m?g.add(S):g.delete(S),g})},[]),u=h.useCallback(()=>{if(!c)return;const S=new Set;c.stations.forEach(m=>{m.recipes.forEach(v=>{v.items.forEach(g=>{S.add(g.id)})})}),l(S)},[c]),p=h.useCallback(()=>{l(new Set)},[]),x=h.useCallback(S=>{const m=Date.parse(S);return Number.isFinite(m)?i("purchRec.checklist.updated","Updated {relative}",{relative:Uc(m,{addSuffix:!0})}):i("purchRec.checklist.updatedUnknown","Updated just now")},[i]);return e.jsxDEV($e,{className:"backdrop-blur",children:[e.jsxDEV(Ke,{className:"pb-3",children:[e.jsxDEV(Ze,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsxDEV(Ya,{className:"h-5 w-5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:112,columnNumber:11},this),i("purchRec.checklist.title","Line Checklist")]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:111,columnNumber:9},this),e.jsxDEV(Lt,{children:i("purchRec.checklist.description","Generate a service line checklist from your latest menu collections, grouped by station.")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:115,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:110,columnNumber:7},this),e.jsxDEV(Ge,{className:"space-y-4 pt-0",children:[e.jsxDEV("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxDEV("div",{className:"flex flex-col gap-1",children:[e.jsxDEV(cs,{value:n,onValueChange:a,disabled:!r.length,children:[e.jsxDEV(rs,{className:"w-full min-w-[220px] lg:w-[320px]",children:e.jsxDEV(ds,{placeholder:i("purchRec.checklist.select","Select a collection")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:127,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:126,columnNumber:15},this),e.jsxDEV(os,{children:r.map(S=>e.jsxDEV(yt,{value:S.id,children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"font-medium",children:S.name},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:133,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:Uc(Date.parse(S.updatedAt)||Date.now(),{addSuffix:!0})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:134,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:132,columnNumber:21},this)},S.id,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:131,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:129,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:125,columnNumber:13},this),d?e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:x(d.updatedAt)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:143,columnNumber:15},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(ne,{variant:"outline",size:"sm",onClick:u,disabled:!c||b>=f||f===0,children:i("purchRec.checklist.markAll","Mark all complete")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:149,columnNumber:13},this),e.jsxDEV(ne,{variant:"ghost",size:"sm",onClick:p,disabled:!o.size,children:i("purchRec.checklist.clear","Reset")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:157,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:123,columnNumber:9},this),r.length?null:e.jsxDEV("div",{className:"rounded-xl border border-dashed border-white/60 bg-white/60 p-6 text-center text-sm text-muted-foreground dark:border-cyan-500/40 dark:bg-slate-900/60",children:i("purchRec.checklist.empty","Create a menu collection in Recipe Search to generate a service checklist.")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:164,columnNumber:11},this),c?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid gap-2 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxDEV("div",{className:Pr,children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.25em] text-muted-foreground",children:i("purchRec.checklist.metrics.stations","Stations")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:176,columnNumber:17},this),e.jsxDEV("div",{className:"text-xl font-semibold text-slate-800 dark:text-cyan-100",children:c.summary.totalStations.toLocaleString()},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:179,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:175,columnNumber:15},this),e.jsxDEV("div",{className:Pr,children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.25em] text-muted-foreground",children:i("purchRec.checklist.metrics.recipes","Recipes")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:184,columnNumber:17},this),e.jsxDEV("div",{className:"text-xl font-semibold text-slate-800 dark:text-cyan-100",children:c.summary.totalRecipes.toLocaleString()},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:187,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("div",{className:Pr,children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.25em] text-muted-foreground",children:i("purchRec.checklist.metrics.items","Checklist Items")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:192,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-baseline gap-2",children:[e.jsxDEV("span",{className:"text-xl font-semibold text-slate-800 dark:text-cyan-100",children:f.toLocaleString()},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:196,columnNumber:19},this),f>0?e.jsxDEV("span",{className:"text-xs font-semibold uppercase tracking-wide text-primary",children:i("purchRec.checklist.metrics.completed","{done}/{total} ready",{done:b.toLocaleString(),total:f.toLocaleString()})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:200,columnNumber:21},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:195,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:191,columnNumber:15},this),e.jsxDEV("div",{className:Pr,children:[e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.25em] text-muted-foreground",children:i("purchRec.checklist.metrics.allergens","Allergens flagged")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:210,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm font-medium text-slate-800 dark:text-cyan-100",children:c.summary.allergens.length?c.summary.allergens.join(", "):i("purchRec.checklist.allergens.none","None flagged")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:213,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:209,columnNumber:15},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:174,columnNumber:13},this),c.aggregates.length?e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:c.aggregates.slice(0,e5).map(S=>e.jsxDEV(et,{variant:"outline",className:"gap-1 font-medium",children:[e.jsxDEV("span",{children:S.ingredient},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:225,columnNumber:21},this),e.jsxDEV("span",{className:"font-mono text-[11px] text-muted-foreground",children:["×",S.occurrences]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:226,columnNumber:21},this)]},S.ingredient,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:224,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:222,columnNumber:15},this):null,c.missing.length?e.jsxDEV("div",{className:"rounded-xl border border-amber-400/60 bg-amber-50/80 p-4 text-xs text-amber-800 dark:border-amber-300/40 dark:bg-amber-950/60 dark:text-amber-100",children:[e.jsxDEV("div",{className:"font-semibold uppercase tracking-[0.2em]",children:i("purchRec.checklist.missing.title","Recipes needing setup")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:234,columnNumber:17},this),e.jsxDEV("ul",{className:"mt-2 space-y-1",children:c.missing.map(S=>e.jsxDEV("li",{children:[e.jsxDEV("span",{className:"font-medium",children:S.recipeName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:240,columnNumber:23},this),e.jsxDEV("span",{className:"text-muted-foreground",children:" — "},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:241,columnNumber:23},this),S.reason==="missingServerNotes"?i("purchRec.checklist.missing.serverNotes","Add server notes metadata to enable station mapping."):i("purchRec.checklist.missing.ingredients","Add structured ingredients to include this recipe.")]},S.recipeId,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:239,columnNumber:21},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:237,columnNumber:17},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:233,columnNumber:15},this):null,e.jsxDEV(Ds,{className:"max-h-[520px] pr-3",children:e.jsxDEV("div",{className:"space-y-4",children:c.stations.map(S=>e.jsxDEV("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-4 shadow-sm transition hover:shadow-md dark:border-cyan-500/40 dark:bg-slate-900/60",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold text-slate-800 dark:text-cyan-100",children:S.name},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:266,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:i("purchRec.checklist.station.meta","{recipes} recipes · {items} items",{recipes:S.recipes.length,items:S.totalItems})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:269,columnNumber:25},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:265,columnNumber:23},this),e.jsxDEV(et,{variant:"outline",className:"font-mono text-[11px] uppercase",children:i("purchRec.checklist.station.itemsBadge","{count} items",{count:S.totalItems})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:276,columnNumber:23},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:264,columnNumber:21},this),e.jsxDEV(Wi,{className:"my-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:282,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-4",children:S.recipes.map(m=>e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold text-slate-800 dark:text-cyan-100",children:m.name},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:288,columnNumber:31},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:m.course?i("purchRec.checklist.recipe.meta","{course} · {portions}",{course:m.course,portions:m.portions?`${m.portions.count} ${m.portions.unit??i("purchRec.checklist.recipe.portions","portions")}`:i("purchRec.checklist.recipe.noPortions","Portion count pending")}):m.portions?i("purchRec.checklist.recipe.portionOnly","{count} {unit}",{count:m.portions.count,unit:m.portions.unit??i("purchRec.checklist.recipe.portions","portions")}):i("purchRec.checklist.recipe.metaFallback","Station prep details")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:291,columnNumber:31},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:287,columnNumber:29},this),m.allergens.length?e.jsxDEV(et,{variant:"secondary",className:"whitespace-nowrap text-xs uppercase",children:i("purchRec.checklist.recipe.allergens","Allergens: {list}",{list:m.allergens.join(", ")})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:311,columnNumber:31},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:286,columnNumber:27},this),e.jsxDEV("ul",{className:"space-y-2",children:m.items.map(v=>{const g=o.has(v.id),N=[];return v.quantity&&v.unit?N.push(`${v.quantity} ${v.unit}`):v.quantity?N.push(v.quantity):v.unit&&N.push(v.unit),v.prep&&N.push(v.prep),v.yieldText&&N.push(i("purchRec.checklist.item.yield","Yield {value}",{value:v.yieldText})),e.jsxDEV("li",{className:je("flex items-start gap-3 rounded-xl border border-white/60 bg-white/70 p-3 text-sm shadow-sm transition hover:border-primary/50 hover:bg-primary/5 dark:border-cyan-500/40 dark:bg-slate-900/60 dark:hover:border-cyan-400/60 dark:hover:bg-cyan-900/40",g&&"border-primary/60 bg-primary/10 dark:border-cyan-400/60 dark:bg-cyan-900/50"),children:[e.jsxDEV(hn,{checked:g,onCheckedChange:w=>D(v.id,w===!0||w==="indeterminate"),"aria-label":i("purchRec.checklist.item.aria","Toggle {item}",{item:v.ingredient})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:346,columnNumber:35},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"font-medium text-slate-800 dark:text-cyan-50",children:v.ingredient},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:356,columnNumber:37},this),N.length?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:N.join(" • ")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:360,columnNumber:39},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:355,columnNumber:35},this)]},v.id,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:338,columnNumber:33},this)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:318,columnNumber:27},this)]},`${S.id}::${m.id}`,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:285,columnNumber:25},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:283,columnNumber:21},this)]},S.id,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:260,columnNumber:19},this))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:258,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:257,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:173,columnNumber:11},this):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:122,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/components/LineChecklistPanel.tsx",lineNumber:109,columnNumber:5},this)}const Pf="inline-flex h-9 items-center justify-center gap-2 rounded-full border border-white/70 bg-white/80 px-4 text-xs font-semibold uppercase tracking-[0.3em] text-slate-600 shadow-sm transition hover:bg-white dark:border-cyan-500/40 dark:bg-slate-900/60 dark:text-cyan-200 dark:hover:bg-slate-900",s5=()=>{const{t:s}=Vs(),{toast:t}=Ci(),{setToolbar:i,resetToolbar:n}=oo(),a=s("purchRec.unknownSupplier","Unknown Supplier"),o=h.useMemo(()=>{const u=new Map;for(const p of Qj)u.set(p.id,p);return u},[]),l=h.useMemo(()=>Vf.map(u=>{const p=o.get(u.supplierId),x=u.packSize>0?u.packSize:null,S=x?u.pricePerPack/x:null;return{supplierId:u.supplierId,supplierName:p?.name??a,sku:u.sku,ingredientName:u.ingredientName,packDisplay:`${u.packSize} ${u.packUnit}`,pricePerPack:u.pricePerPack,currency:u.currency,unitPrice:S,minOrderValue:u.pricePerPack*u.minOrderPacks,leadTimeDays:u.leadTimeDays,reliability:p?.reliability??null,sustainability:p?.sustainabilityScore??null}}).sort((u,p)=>u.leadTimeDays-p.leadTimeDays||u.supplierName.localeCompare(p.supplierName)),[o,a]),r=h.useMemo(()=>{const u=new Map;for(const p of Vf){const x=u.get(p.supplierId);x?x.push(p):u.set(p.supplierId,[p])}return Gr.map(p=>{const x=o.get(p.supplierId),S=u.get(p.supplierId)??[],m=p.standardBatchUnit.toLowerCase(),v=S.find(B=>B.packUnit.toLowerCase()===m),g=B=>B.packSize<=0?null:p.standardBatchQty/B.packSize*B.pricePerPack;let N=null;if(v)N=g(v);else if(S.length){const B=S.map(W=>W.packSize>0?W.pricePerPack/W.packSize:null).filter(W=>W!=null&&Number.isFinite(W));B.length&&(N=B.reduce((se,ie)=>se+ie,0)/B.length*p.standardBatchQty)}const w=(v??S[0])?.currency??"USD",A=Math.max(p.defaultPortions,1),I=N!=null?N/A:null;return{id:p.id,supplierId:p.supplierId,supplierName:x?.name??a,itemName:p.name,expectedDate:p0(new Date,p.leadTimeDays),leadTimeDays:p.leadTimeDays,standardBatch:`${p.standardBatchQty} ${p.standardBatchUnit}`,estimatedCost:N,currency:w,portionSize:p.portionSize,portionUnit:p.portionUnit,portions:A,estimatedPortionCost:I}}).sort((p,x)=>p.expectedDate.getTime()-x.expectedDate.getTime())},[o,a]),d=h.useMemo(()=>{const u=new Map,p=x=>{let S=u.get(x);if(!S){const m=o.get(x);S={supplierId:x,supplierName:m?.name??a,queueValue:0,pipelineValue:0,avgLeadTime:0,reliability:m?.reliability??null,sustainability:m?.sustainabilityScore??null,catalogCount:0,receivingCount:0},u.set(x,S)}return S};for(const x of l){const S=p(x.supplierId);S.queueValue+=x.minOrderValue,S.avgLeadTime+=x.leadTimeDays,S.catalogCount+=1}for(const x of r){const S=p(x.supplierId);x.estimatedCost!=null&&(S.pipelineValue+=x.estimatedCost),S.receivingCount+=1}return Array.from(u.values()).map(x=>{const S=x.catalogCount||1;return{...x,avgLeadTime:x.avgLeadTime/S}}).sort((x,S)=>S.queueValue+S.pipelineValue-(x.queueValue+x.pipelineValue))},[l,r,o,a]),c=h.useMemo(()=>{const u=new Set(l.map(N=>N.supplierId)),p=l.reduce((N,w)=>N+w.minOrderValue,0),x=r.reduce((N,w)=>N+(w.estimatedCost??0),0),S=l.reduce((N,w)=>N+w.leadTimeDays,0),m=l.length?S/l.length:0,v=l.map(N=>N.reliability).filter(N=>typeof N=="number"),g=v.length?v.reduce((N,w)=>N+w,0)/v.length:0;return{uniqueSuppliers:u.size,totalMinOrderValue:p,inboundValue:x,totalSkus:l.length,avgLeadTime:m,avgReliability:g}},[l,r]),f=h.useCallback(()=>{t({title:s("purchRec.toast.refreshTitle","Pricing refreshed"),description:s("purchRec.toast.refresh","Supplier catalog costs recalculated against live pack data.")})},[s,t]),b=h.useCallback(()=>{const u=d.length,p=d.reduce((S,m)=>S+m.queueValue+m.pipelineValue,0),x=Bt(p,"USD");t({title:s("purchRec.toast.exportTitle","Export queued"),description:s("purchRec.toast.export","{count} supplier packets totaling {value} ready for download.",{count:u,value:x})})},[d,s,t]);h.useEffect(()=>(i({title:s("nav.purchasingReceiving","Purch/Rec"),items:[{id:"refresh-pricing",label:s("purchRec.toolbar.refresh","Refresh Pricing"),ariaLabel:s("purchRec.toolbar.refresh","Refresh Pricing"),title:s("purchRec.toolbar.refresh","Refresh Pricing"),icon:Br,onClick:f,className:Pf},{id:"export-orders",label:s("purchRec.toolbar.export","Export Orders"),ariaLabel:s("purchRec.toolbar.export","Export Orders"),title:s("purchRec.toolbar.export","Export Orders"),icon:Ni,onClick:b,className:Pf}]}),()=>{n()}),[b,f,n,i,s]);const D=h.useMemo(()=>{const u=Math.round(c.avgReliability*100);return[{label:s("purchRec.summary.suppliers","Active Suppliers"),value:c.uniqueSuppliers.toLocaleString(),detail:s("purchRec.summary.suppliersDetail","{count} catalog SKUs",{count:c.totalSkus.toLocaleString()})},{label:s("purchRec.summary.queue","Queued Spend"),value:Bt(c.totalMinOrderValue,"USD"),detail:s("purchRec.summary.queueDetail","Minimum commitments awaiting release")},{label:s("purchRec.summary.inbound","Inbound Value"),value:Bt(c.inboundValue,"USD"),detail:s("purchRec.summary.inboundDetail","Receiving batches priced and scheduled")},{label:s("purchRec.summary.lead","Avg Lead Time"),value:s("purchRec.summary.leadValue","{days} days",{days:Number.isFinite(c.avgLeadTime)?c.avgLeadTime.toFixed(1):"0"}),detail:s("purchRec.summary.leadDetail","Reliability {percent}%",{percent:u})}]},[c,s]);return e.jsxDEV("div",{className:"container mx-auto space-y-4 px-3 py-3",children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-4",children:D.map(u=>e.jsxDEV($e,{className:"backdrop-blur",children:[e.jsxDEV(Ke,{className:"pb-2",children:[e.jsxDEV(Lt,{className:"text-xs uppercase tracking-[0.3em] text-slate-500 dark:text-cyan-300/70",children:u.label},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:344,columnNumber:15},void 0),e.jsxDEV(Ze,{className:"text-2xl font-semibold text-slate-800 dark:text-cyan-100",children:u.value},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:347,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV(Ge,{className:"pt-0 text-sm text-slate-500 dark:text-cyan-200/80",children:u.detail},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:351,columnNumber:13},void 0)]},u.label,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:342,columnNumber:11},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:340,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid gap-4 lg:grid-cols-[2fr,1fr]",children:[e.jsxDEV($e,{className:"backdrop-blur",children:[e.jsxDEV(Ke,{className:"pb-3",children:[e.jsxDEV(Ze,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsxDEV(r0,{className:"h-5 w-5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:362,columnNumber:15},void 0),s("purchRec.card.queue","Purchase Queue")]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:361,columnNumber:13},void 0),e.jsxDEV(Lt,{children:s("purchRec.card.queueDescription","Prioritized supplier line items with calculated pack economics.")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:365,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:360,columnNumber:11},void 0),e.jsxDEV(Ge,{className:"pt-0",children:e.jsxDEV(Ds,{className:"max-h-[420px] pr-1",children:e.jsxDEV(Mn,{children:[e.jsxDEV(_n,{children:e.jsxDEV(bi,{children:[e.jsxDEV(Jt,{children:s("purchRec.table.supplier","Supplier")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:377,columnNumber:21},void 0),e.jsxDEV(Jt,{children:s("purchRec.table.sku","SKU")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:378,columnNumber:21},void 0),e.jsxDEV(Jt,{children:s("purchRec.table.item","Item")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:379,columnNumber:21},void 0),e.jsxDEV(Jt,{children:s("purchRec.table.packPrice","Pack / Price")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:380,columnNumber:21},void 0),e.jsxDEV(Jt,{className:"text-right",children:s("purchRec.table.minRelease","Min Release")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:381,columnNumber:21},void 0),e.jsxDEV(Jt,{className:"text-right",children:s("purchRec.table.lead","Lead")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:384,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:376,columnNumber:19},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:375,columnNumber:17},void 0),e.jsxDEV(On,{children:l.map(u=>{const p=u.minOrderValue>500?"destructive":u.minOrderValue>250?"secondary":"outline";return e.jsxDEV(bi,{children:[e.jsxDEV(Ht,{className:"font-medium",children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{children:u.supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:401,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:s("purchRec.table.reliabilityScore","Reliability {score}",{score:(u.reliability??0).toFixed(2)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:402,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:400,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:399,columnNumber:25},void 0),e.jsxDEV(Ht,{children:e.jsxDEV(et,{variant:"outline",className:"font-mono text-[11px] uppercase",children:u.sku},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:412,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:411,columnNumber:25},void 0),e.jsxDEV(Ht,{children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{children:u.ingredientName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:418,columnNumber:29},void 0),u.unitPrice!=null?e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:[Bt(u.unitPrice,u.currency)," ",s("purchRec.table.unitSuffix","/ unit")]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:420,columnNumber:31},void 0):null]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:417,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:416,columnNumber:25},void 0),e.jsxDEV(Ht,{children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{children:u.packDisplay},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:429,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:Bt(u.pricePerPack,u.currency)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:430,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:428,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:427,columnNumber:25},void 0),e.jsxDEV(Ht,{className:"text-right",children:e.jsxDEV(et,{variant:p,className:"justify-end gap-1 font-semibold",children:Bt(u.minOrderValue,u.currency)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:436,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:435,columnNumber:25},void 0),e.jsxDEV(Ht,{className:"text-right",children:e.jsxDEV("div",{className:"flex flex-col items-end",children:[e.jsxDEV("span",{children:s("purchRec.table.leadValue","{days} d",{days:u.leadTimeDays})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:442,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:s("purchRec.table.sustain","Sustain {percent}%",{percent:Math.round((u.sustainability??0)*100)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:447,columnNumber:29},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:441,columnNumber:27},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:440,columnNumber:25},void 0)]},u.sku,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:398,columnNumber:23},void 0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:389,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:374,columnNumber:15},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:373,columnNumber:13},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:372,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:359,columnNumber:9},void 0),e.jsxDEV($e,{className:"backdrop-blur",children:[e.jsxDEV(Ke,{className:"pb-3",children:[e.jsxDEV(Ze,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsxDEV(Br,{className:"h-5 w-5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:466,columnNumber:15},void 0),s("purchRec.card.coverage","Supplier Coverage")]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:465,columnNumber:13},void 0),e.jsxDEV(Lt,{children:s("purchRec.card.coverageDescription","Spend concentration, reliability, and inbound confirmations by partner.")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:469,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:464,columnNumber:11},void 0),e.jsxDEV(Ge,{className:"space-y-3 pt-0",children:d.map(u=>{const p=u.queueValue+u.pipelineValue;return e.jsxDEV("div",{className:"rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm dark:border-cyan-500/40 dark:bg-slate-900/60",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-semibold text-slate-800 dark:text-cyan-100",children:u.supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:486,columnNumber:23},void 0),e.jsxDEV("div",{className:"text-xs uppercase tracking-[0.25em] text-muted-foreground",children:s("purchRec.coverage.badge","{skus} skus · {inbound} inbound",{skus:u.catalogCount,inbound:u.receivingCount})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:489,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:485,columnNumber:21},void 0),e.jsxDEV(et,{variant:"outline",className:"font-mono text-[11px] uppercase",children:s("purchRec.coverage.onTime","{percent}% on-time",{percent:Math.round((u.reliability??0)*100)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:500,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:484,columnNumber:19},void 0),e.jsxDEV(Wi,{className:"my-2"},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:508,columnNumber:19},void 0),e.jsxDEV("div",{className:"space-y-1 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsxDEV("span",{children:s("purchRec.coverage.queue","Queued")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:511,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium text-slate-700 dark:text-cyan-100",children:Bt(u.queueValue,"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:512,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:510,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsxDEV("span",{children:s("purchRec.coverage.inbound","Inbound")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:517,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium text-slate-700 dark:text-cyan-100",children:Bt(u.pipelineValue,"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:518,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:516,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsxDEV("span",{children:s("purchRec.coverage.avgLead","Avg lead")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:523,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-medium text-slate-700 dark:text-cyan-100",children:s("purchRec.summary.leadValue","{days} days",{days:u.avgLeadTime.toFixed(1)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:524,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:522,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center justify-between text-muted-foreground",children:[e.jsxDEV("span",{children:s("purchRec.coverage.totalExposure","Total exposure")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:533,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-semibold text-slate-800 dark:text-cyan-50",children:Bt(p,"USD")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:534,columnNumber:23},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:532,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:509,columnNumber:19},void 0)]},u.supplierId,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:480,columnNumber:17},void 0)})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:476,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:463,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:358,columnNumber:7},void 0),e.jsxDEV(t5,{},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:546,columnNumber:7},void 0),e.jsxDEV($e,{className:"backdrop-blur",children:[e.jsxDEV(Ke,{className:"pb-3",children:[e.jsxDEV(Ze,{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsxDEV(o0,{className:"h-5 w-5","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:551,columnNumber:13},void 0),s("purchRec.card.receiving","Receiving Timeline")]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:550,columnNumber:11},void 0),e.jsxDEV(Lt,{children:s("purchRec.card.receivingDescription","Scheduled ready-made items with projected landed cost per portion.")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:554,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:549,columnNumber:9},void 0),e.jsxDEV(Ge,{className:"pt-0",children:e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:r.map(u=>e.jsxDEV("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-4 shadow-sm transition hover:shadow-md dark:border-cyan-500/40 dark:bg-slate-900/60",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.25em] text-muted-foreground",children:[e.jsxDEV("span",{children:f0(u.expectedDate,"MMM d")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:569,columnNumber:19},void 0),e.jsxDEV("span",{children:s("purchRec.timeline.lead","{days} day lead",{days:u.leadTimeDays})},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:570,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:568,columnNumber:17},void 0),e.jsxDEV("h3",{className:"mt-2 text-base font-semibold text-slate-800 dark:text-cyan-100",children:u.itemName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:576,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-1 text-sm text-muted-foreground",children:u.supplierName},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:579,columnNumber:17},void 0),e.jsxDEV(Wi,{className:"my-3"},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:582,columnNumber:17},void 0),e.jsxDEV("dl",{className:"grid gap-2 text-sm text-muted-foreground",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("dt",{children:s("purchRec.timeline.batch","Batch")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:585,columnNumber:21},void 0),e.jsxDEV("dd",{className:"font-medium text-slate-700 dark:text-cyan-100",children:u.standardBatch},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:586,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:584,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("dt",{children:s("purchRec.timeline.cost","Estimated cost")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:591,columnNumber:21},void 0),e.jsxDEV("dd",{className:"font-medium text-slate-700 dark:text-cyan-100",children:u.estimatedCost!=null?Bt(u.estimatedCost,u.currency):s("purchRec.timeline.sync","Sync pricing")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:592,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:590,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("dt",{children:s("purchRec.timeline.portionCost","Portion cost")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:599,columnNumber:21},void 0),e.jsxDEV("dd",{className:"font-medium text-slate-700 dark:text-cyan-100",children:u.estimatedPortionCost!=null?Bt(u.estimatedPortionCost,u.currency):s("purchRec.timeline.pending","Pending")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:600,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:598,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("dt",{children:s("purchRec.timeline.portionSize","Portion size")},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:607,columnNumber:21},void 0),e.jsxDEV("dd",{className:"font-medium text-slate-700 dark:text-cyan-100",children:[u.portionSize," ",u.portionUnit]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:608,columnNumber:21},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:606,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:583,columnNumber:17},void 0)]},u.id,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:564,columnNumber:15},void 0))},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:562,columnNumber:11},void 0)},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:561,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:548,columnNumber:7},void 0)]},void 0,!0,{fileName:"/app/code/client/pages/sections/purchasing-receiving/PurchasingReceivingWorkspace.tsx",lineNumber:339,columnNumber:5},void 0)};function i5(){return e.jsxDEV(s5,{},void 0,!1,{fileName:"/app/code/client/pages/sections/purchasing-receiving/index.tsx",lineNumber:4,columnNumber:10},this)}function n5({children:s}){return e.jsxDEV("div",{className:"min-h-screen",children:s},void 0,!1,{fileName:"/app/code/client/components/TronBackdrop.tsx",lineNumber:7,columnNumber:10},this)}function a5(){const[s,t]=h.useState(!1),[i,n]=h.useState(""),[a,o]=h.useState(0),[,l]=ud(),{t:r}=Vs(),d=h.useMemo(()=>[{id:"search",title:r("pages.search","Search Recipes"),category:r("common.navigation","Navigation"),icon:qi,action:()=>{l({tab:"search"}),t(!1)},keywords:["search","recipe","find"]},{id:"gallery",title:r("pages.gallery","Gallery"),category:r("common.navigation","Navigation"),icon:Oa,action:()=>{l({tab:"gallery"}),t(!1)},keywords:["gallery","images","photos"]},{id:"add-recipe",title:r("pages.add_recipe","Add Recipe"),category:r("common.navigation","Navigation"),icon:Hi,action:()=>{l({tab:"add-recipe"}),t(!1)},keywords:["add","new","recipe","create"]},{id:"menu-studio",title:r("pages.menu_studio","Menu Studio"),category:r("common.navigation","Navigation"),icon:l0,action:()=>{l({tab:"menu-studio"}),t(!1)},keywords:["menu","design","studio"]},{id:"production",title:r("pages.production","Production"),category:r("common.navigation","Navigation"),icon:Fr,action:()=>{l({tab:"production"}),t(!1)},keywords:["production","tasks","cooking"]},{id:"inventory",title:r("pages.inventory","Inventory & Supplies"),category:r("common.navigation","Navigation"),icon:c0,action:()=>{l({tab:"inventory"}),t(!1)},keywords:["inventory","supplies","stock"]},{id:"nutrition",title:r("pages.nutrition","Nutrition & Allergens"),category:r("common.navigation","Navigation"),icon:d0,action:()=>{l({tab:"nutrition"}),t(!1)},keywords:["nutrition","allergens","health"]},{id:"haccp",title:r("pages.haccp","HACCP/Compliance"),category:r("common.navigation","Navigation"),icon:Ya,action:()=>{l({tab:"haccp"}),t(!1)},keywords:["haccp","compliance","safety"]},{id:"dish-assembly",title:r("pages.dish_assembly","Dish Assembly"),category:r("common.navigation","Navigation"),icon:Fr,action:()=>{l({tab:"dish-assembly"}),t(!1)},keywords:["dish","assembly","component"]},{id:"server-notes",title:r("pages.server_notes","Server Notes"),category:r("common.navigation","Navigation"),icon:Hi,action:()=>{l({tab:"server-notes"}),t(!1)},keywords:["server","notes","documentation"]}],[l,r]),c=h.useMemo(()=>{if(!i)return d;const D=i.toLowerCase();return d.filter(u=>{const p=u.title.toLowerCase().includes(D),x=u.description?.toLowerCase().includes(D),S=u.keywords?.some(m=>m.toLowerCase().includes(D));return p||x||S})},[i,d]),f=h.useCallback(D=>{D.action(),t(!1),n("")},[]);h.useEffect(()=>{o(0)},[c]),h.useCallback(()=>{t(!0)},[]),h.useEffect(()=>{const D=u=>{(u.metaKey||u.ctrlKey)&&u.key.toLowerCase()==="k"&&(u.preventDefault(),t(!0))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]);const b=D=>{switch(D.key){case"ArrowDown":D.preventDefault(),o(u=>(u+1)%c.length);break;case"ArrowUp":D.preventDefault(),o(u=>u===0?c.length-1:u-1);break;case"Enter":D.preventDefault(),c[a]&&f(c[a]);break;case"Escape":D.preventDefault(),t(!1);break}};return e.jsxDEV(ss,{open:s,onOpenChange:t,children:e.jsxDEV(is,{className:"sm:max-w-[600px]",children:[e.jsxDEV(ns,{children:e.jsxDEV(as,{children:r("common.command_palette","Command Palette")},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:229,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:228,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(qi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV(Xe,{autoFocus:!0,placeholder:r("common.search_commands","Search commands..."),className:"pl-10",value:i,onChange:D=>n(D.target.value),onKeyDown:b},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("div",{className:"max-h-[400px] overflow-auto",children:c.length===0?e.jsxDEV("div",{className:"px-4 py-8 text-center text-sm text-muted-foreground",children:r("common.no_results","No commands found")},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:245,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-1",children:c.map((D,u)=>{const p=D.icon;return e.jsxDEV("button",{onClick:()=>f(D),className:je("w-full px-4 py-2 text-left text-sm rounded-md flex items-center gap-3 transition-colors",u===a?"bg-primary text-primary-foreground":"hover:bg-accent"),children:[p&&e.jsxDEV(p,{className:"h-4 w-4 flex-shrink-0"},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:263,columnNumber:32},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"font-medium truncate",children:D.title},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:265,columnNumber:25},this),D.description&&e.jsxDEV("div",{className:"text-xs opacity-70 truncate",children:D.description},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:267,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:264,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs opacity-50 flex-shrink-0",children:D.category},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:272,columnNumber:23},this)]},D.id,!0,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:253,columnNumber:21},this)})},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:249,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:243,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:231,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:227,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/components/CommandPalette.tsx",lineNumber:226,columnNumber:5},this)}function k5(){return e.jsxDEV(Iv,{children:e.jsxDEV(r5,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:36,columnNumber:7},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:35,columnNumber:5},this)}function r5(){const[s,t]=ud(),i=s.get("tab")||"search",{config:{items:n,title:a}}=oo(),o={duration:.375,ease:[.4,0,.2,1]},l=h.useCallback(()=>{t({tab:"add-recipe"},{replace:!0})},[t]),r=h.useMemo(()=>({key:"n",meta:!0,handler:l,preventDefault:!0}),[l]);_f("add-recipe-shortcut",r);const d=h.useCallback(c=>{t({tab:c},{replace:!0})},[t]);return e.jsxDEV(n5,{children:[e.jsxDEV(a5,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV("div",{className:"min-h-screen text-foreground",style:{paddingLeft:"calc(var(--sidebar-offset, 88px) - 0.35rem)"},children:[e.jsxDEV(Sx,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:84,columnNumber:9},this),e.jsxDEV("header",{className:"flex flex-wrap items-center justify-between gap-3 pr-3 pt-3 pb-1.5 pl-2 sm:flex-nowrap sm:pl-2.5",children:[e.jsxDEV("div",{className:"flex items-center gap-2.5",children:[e.jsxDEV("span",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-white/60 bg-white/80 text-xs font-semibold uppercase tracking-[0.35em] text-slate-700 shadow-sm backdrop-blur-sm dark:border-cyan-500/40 dark:bg-cyan-500/15 dark:text-cyan-200",children:"ER"},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-sm font-semibold uppercase tracking-[0.65em] text-slate-700 dark:text-cyan-200",children:"Echo Recipe Pro"},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:91,columnNumber:15},this),e.jsxDEV("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-400 dark:text-cyan-300/70",children:"Research & Development Suite"},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:94,columnNumber:15},this),a?e.jsxDEV("span",{className:"mt-1 text-[10px] font-semibold uppercase tracking-[0.4em] text-slate-500/80 dark:text-cyan-300/70",children:a},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:98,columnNumber:17},this):null]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-end gap-2 sm:flex-nowrap",children:e.jsxDEV(wd,{mode:"sync",children:n.length?e.jsxDEV($a.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:o},exit:{opacity:0,y:-12,transition:o},className:"flex flex-wrap items-center justify-end gap-2 sm:flex-nowrap",children:n.map((c,f)=>e.jsxDEV($a.div,{initial:{opacity:0,scale:.92},animate:{opacity:1,scale:1,transition:{...o,delay:f*.04}},exit:{opacity:0,scale:.88,transition:o},children:c.type==="custom"?c.element:e.jsxDEV("button",{type:"button",onClick:c.onClick,className:c.className,"aria-label":c.ariaLabel||c.label,title:c.title||c.label,children:[c.icon?e.jsxDEV(c.icon,{className:"h-4 w-4","aria-hidden":!0},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:143,columnNumber:29},this):null,e.jsxDEV("span",{className:"sr-only",children:c.label},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:145,columnNumber:27},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:135,columnNumber:25},this)},c.id,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:115,columnNumber:21},this))},"toolbar",!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:107,columnNumber:17},this):null},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:105,columnNumber:13},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:104,columnNumber:11},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV("main",{className:"w-full py-2",children:e.jsxDEV(Ki,{value:i,onValueChange:d,className:"w-full",children:[e.jsxDEV(St,{value:"search",children:e.jsxDEV(w0,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:161,columnNumber:13},this),e.jsxDEV(St,{value:"gallery",children:e.jsxDEV(q0,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:165,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV(St,{value:"add-recipe",children:e.jsxDEV(Ov,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:168,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV(St,{value:"saas",children:e.jsxDEV(Bv,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:171,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:170,columnNumber:13},this),e.jsxDEV(St,{value:"inventory",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(d1,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:175,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(St,{value:"nutrition",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(y1,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:180,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:179,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:178,columnNumber:13},this),e.jsxDEV(St,{value:"haccp",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(P1,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:185,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:184,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:183,columnNumber:13},this),e.jsxDEV(St,{value:"waste-tracking",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV($1,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:190,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:189,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:188,columnNumber:13},this),e.jsxDEV(St,{value:"customer-service",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(ty,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:195,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:194,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:193,columnNumber:13},this),e.jsxDEV(St,{value:"plate-costing",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(sy,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:200,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:199,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:198,columnNumber:13},this),e.jsxDEV(St,{value:"suppliers",children:e.jsxDEV("div",{className:"container mx-auto space-y-3 px-3 py-3",children:e.jsxDEV(fy,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:205,columnNumber:17},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:204,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:203,columnNumber:13},this),e.jsxDEV(St,{value:"dish-assembly",children:e.jsxDEV(Q3,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:209,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:208,columnNumber:13},this),e.jsxDEV(St,{value:"menu-design",children:e.jsxDEV(vj,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:212,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:211,columnNumber:13},this),e.jsxDEV(St,{value:"server-notes",children:e.jsxDEV(YS,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:215,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:214,columnNumber:13},this),e.jsxDEV(St,{value:"operations-docs",children:e.jsxDEV(l3,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:218,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:217,columnNumber:13},this),e.jsxDEV(St,{value:"production",children:e.jsxDEV(Yj,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:221,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:220,columnNumber:13},this),e.jsxDEV(St,{value:"purch-rec",children:e.jsxDEV(i5,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:224,columnNumber:15},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:223,columnNumber:13},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:156,columnNumber:11},this)},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(jx,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV(Of,{},void 0,!1,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:230,columnNumber:9},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:78,columnNumber:7},this)]},void 0,!0,{fileName:"/app/code/client/pages/Index.tsx",lineNumber:76,columnNumber:5},this)}export{k5 as default};
